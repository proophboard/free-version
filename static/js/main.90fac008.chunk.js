(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1163:function(e,t,n){e.exports=n.p+"static/media/cody.63c5836d.svg"},1170:function(e,t){},1171:function(e,t){},1172:function(e,t){},1182:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=1182},1193:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABBCAIAAAABlV4SAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABQElEQVRoge3ZMW7CMBTG8eeIQIYs7VZ3RCJzxTF6gKysrKh7VYZOSFwgB4DTMHOAMjK3qlSzdeiAnx23/hp9//mJvJ8SS1Ewzjn55xW5F0gQDRjRgBENGNGAEQ0YDcEw0gx9vR0/98/udPztbX5kbFO2L8V94xnTvLd+vD668ynRYmEZ20xWu+szqmcpF0BENDd/COeBBoxowIgGjGjAiAaMaMCIBoxowIgGjGjAiAaMhmBQfatMnrGzsl17P0Iqy3MfEgIklyEhQHI9S9+9Pz14Z6rN4foA+pkupnP/zB/sEV9Vl+3aOwVsqOrxsjO31juIaqjq8bJTHn1IQwhAEA2BAIEzhAMEyxAFECBDLECUBnNzF/HTAfUAiNJQLrbGzuIu4N9gOp+s9n3eoFT/sYMHcx56RANGNGBEA0Y0YHQBkZ0zQP+umloAAAAASUVORK5CYII="},1197:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACoNJREFUeNrs3Y9V20geB3CxLwW4g3UqWFLBmQoOKohTwUIFOBXAVmC2AnIV2FcB3grwVQBXgW/mMn6PI4STbP0dfT7v6W02L4CRNF/N/DQjFQUAAAAAAAAAAAAAAAAAAABt2+12i7A9he0mbBN7BMbR8Gdhe9z9rxgEc3sH8m3407Ctdu97iAFhb0E+DX+SuvlV3MfAsPdg2I1/nrr3h3hKdQL1ARjgOP9hV49H9QEYzjj/fteMlfoA9Hecv6jYoG9efF2VYcLSsAD6Nc5/rHglP32j57CsWh+w96Hbcf6q4lj+vO3vCdQ/zm/0al1HrwKov/G3Nl4/pq7gSEG9Df/8gCvyrMYex33FHselowbHN77TA8bk8wZrDg8VP8vMUYTDut9Vp++2MmsvXt0rDkNMK4acGlifAwqG2vBnFcf5na/cK7nC0LJjyLkRDTG8oA/j/Kxusx14m1J9gNE1/qrLdFdDaSgp2CpPVFIfYCzj/FHcSuvTLUzowzh/lJNpDpzEZFoxWY3zR73c1n5grON8V74fe0KWHZP9ON+SWvuIEXb3Xd2q95KyvBvCuE5k97+Prw9YdszgTt7OlulmWh+w7JjBnKzmwDdXHzCtmN52V62Ca2dfW3aME1LgClx0SQ25DLno4KRTlOrXMVF0pZVup9tS/T5GbrvSyIllYsqwgtqyY2ob53vi7TCP3alpxRwzzjd9N5/em8VXVBrnW57quDqurhSuFBn27NzBwVhRbUdtR7dQtVivz92dUR5494t5XR8wv2MkXT/Td/lZfcC0YgfXwXWRcJHIbZxn1RhVz5uqqzxv7LX+jvct0+XQ+kDZZcerseyXXzL7fbZhOzs5ObkI29Zpz144H57DdhX++Clsa3skrwB4DttVOMAfw+bg8l4QbMJ2Fv54kS4Yo/Yhk9/jj3BQb53eVAiCb6GrHy8cqzHvh1+cCiAAAAEACABAAAACABAAgAAABAAgAAABAAgAQAAAAgAQAIAAAAQAIAAAAQAIAEAAAAIAEACAAAAEACAAAAEACABAAAACABAAgAAABAAgAAABAAgAQACAAAAEACAAAAEACABAAAACABAAkI1txb8XAJCLk5OT2NDvXv31c9i+jmUffHAaMPIQ+LLb7f4Z/jhNjf8u/N2zAIDxhMCdGgAwOnoADEboqk9TV3324q9/C9skbJuw/fvF369jlz5c3Tf2nABgmA0+NuzzsP09NfrJO/989ur/r9P3KFI4xECIY/31mMb4uZ0Qi93bFvbOUfu1LYuSn2cWtvsGP0f83ueOvBoA/Qqi2PBX4Y+rdOVvSvzeMQQewzYXANCOX3/W1Q/bTWr4sxY/T6wnLFMQnAsAaL7BvW78p+E/D2G77Phz3aehwUQAQDtd/nlq/NOefKTYC4i9gZkAgPrNXjX+ZQ8/Y+wBrMZSGxAAdHXlX/b8Y8bawFIAQL2NfzGAxr83zz0EBABtux7Y553nPM9EAECJ0Mq1JiAAoJybdMtSAMAIxbsDy9zmCQgAKC/2AK4FAIzXZU5DAQEAB9QDBACM1yyXuwICAA5zLQBgvKY59AIEABzudwEA43U69KXDHgpKH62L7w/wjA/vfP1U32nx/UnA50U/niPwOX1eAQBH2BbfX8n1reRTe6/S1TcW47q8Cscg+mIIAIeJjf0qNPqP8Q09VR7ZHf5tfMT3WdHtu/wmQy4GCgC6bvxnoRHfHvNNwtcvOr4K/00AwGGNv5Y396T3+111OAwQAFDBRd2v7Uo9iXVHw4CZAIBy4li/qYba1VBAAEBJfzb1jUOwbGPAqAMIAMari7sCpwIAeiD1Atp+Lfgkvb5cAHTg89hf8kh7w4ycegG5BEBM3vi8tlWOD27kIGsBML4hwCxsD/FlDmN7ySM/DAPiEOC55R/7mwBo1rbkv4vDgcecX+hAKa3XAQRAs6l+F/5zVrJ7Fw/G9Zjf/c5/VxQaAuQ0BHixAORLyS5erA/cp/rAVJsYlW3LP08PoOXewMei/D3fWRoW3KgPCICmDO0iM+giYFw6mlaCxSD4VvLLLlMQXGofAqABAqCDINiG7SLVB8oc9NgDiD2Bh6E/0on3zwt7YQQB8Ko+EHsDVyXrA7FoE2sD9+oDCIB8guA2DQvKPmjiPA0LFuoD2Wl7LoAhQI/qA1cpCNYlv+w6BcFcu8nGRgCMMABe1QdibeCiQn1gP61YfQBDgEyC4FuqD3wt2S2cpfrAUn0AAZBPECzSsOCu5JfE4cCD+gACIK/6QJxJ+KmoMK04BYFpxQiATIJg82JacZn6QBwK3Ft2jADIKwjuUm+gSn3AsmMEQGbDgkUKgir1AcuOEQAZBcE21Qfi0KDMPeSXy45n9mDvtD1U2wqAPIIgTiv+VFRbdryy7Lh3JgJAABxbH7DsGEMA9YFK04r3y47n9mA39MQEQBP1gbOi2rLjpWXHnekiAAwBRlIfsOxYALx5kRAA4wkCy44FwEvPQ9tBAqCe+kDsCZSdVhztpxWrDzSr7Rd2bgTAeINgU3HZ8bSw7Lhp5gAIgNaDwLLjHkhrNdoeZv1LALAPgkVx4LJje68WXfSq1gKA1/WB/bTiMieHtxnV53MHP9MQgDeDYG3Zcavd/2kX4/8hPoZcALQbBHE4sF92XLYb+5DhtOKmf5ffO/idNs5wKl2l0sSgsp6aepvRrn2rBvfrJO2rtnnTFAedsLM0Vbis2pcd77oxb2h/Ljv6fabOZo45cecVr1y1LTvuqME81V3fiIXTjn6XR2cwdXVfbyqefEdPK951p7YQiN+no65/dOPspe76wKpiQ5oPMABqGT+nYdRTh5/fnRoaqw88VjgRD1p2vOuHymsjDuwx6f4zuCC4rHiFq7TseNcvT6mQN08BOHmjqz/vsNj3wxBsyOfWieY1nPpA+E8ca5a9SsZ1CH+E7TbOSPx/AWAPH+zjECcA7ZkINJSkPu5tRnN7sBF3Q278egDD7hGcpx5B2a7+fjqyHoCrvx5ABj2CysuO9QRc/QVAfkGwKMq/zWhqj9Xmaw6/hADIIwS2JZcdP9tbtbjN4eqvBpBvfWCe6gOTV43/41t3BNQAKvnpfhQA9CkEYuOPQRAfjPlX8c7tQAFQyUWsv2TTe3Q8EQCl3aWhViEAEADjEh/4cZZL139PERDKjfu/5Nb4BQCUH/dn+cgvAQDvi1f+da6/nACgC3cDavx3OR8IAUAX/iy+PyK9z2P+i9wbf/TBuUgXYuNKNx+WPfto25zH/HoA9CoEiu/rGLY9Gpp8GkvjFwD0IQQ2KQS6nF0XAyje48/yVp8AoO8hEB92El+rftZybyD+rKu4rDrnSr8AYChBsE7POIgFwia74fF7f0kN/3bU+9xpRwdTgc/KXHHT47bjW35nxfEv+4w/7x9xqJHLUt46uAtA3+sDmxQGkxQCMQx+Ld5/uEkcx/+VuvibMRX19ADIpgeAGgAgAAABAAgAQAAAAgAQAIAAAAQAIAAAAQAIAEAAAAIAEAAgAAABAAgAQAAAAgAQAIAAAAQAIAAAAQAIAEAAAAIAEACAAAAEANAjH+wCgnXLP+/ZLgcAAAAAAAAAAAAAAAAAAAB4238EGABeFisyE/a2NgAAAABJRU5ErkJggg=="},1199:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"Message",function(){return ct});var a={};n.r(a),n.d(a,"notify",function(){return ut}),n.d(a,"info",function(){return lt}),n.d(a,"error",function(){return mt});var o={};n.r(o),n.d(o,"publishMessageHandled",function(){return pt});var i={};n.r(i),n.d(i,"Command",function(){return a}),n.d(i,"Event",function(){return o});var s={};n.r(s),n.d(s,"SERVER_CONTEXT",function(){return Nt}),n.d(s,"SIGN_IN",function(){return Lt}),n.d(s,"FETCH_USER",function(){return Rt}),n.d(s,"LOAD_IIO_USERS_INFO",function(){return Bt}),n.d(s,"IIO_USERS_INFO_LOADED",function(){return Dt}),n.d(s,"USER_SETTINGS_LOADED",function(){return Pt}),n.d(s,"USER_SETTING_UPSERTED",function(){return zt}),n.d(s,"UPDATE_PROFILE",function(){return Mt}),n.d(s,"UPDATE_PASSWORD",function(){return Ut}),n.d(s,"UPSERT_USER_SETTING",function(){return Ft}),n.d(s,"SWITCH_ACTIVE_ORGANIZATION",function(){return Gt}),n.d(s,"ACTIVE_ORGANIZATION_SWITCHED",function(){return qt});var c={};n.r(c),n.d(c,"signIn",function(){return Vt}),n.d(c,"updateProfile",function(){return Wt}),n.d(c,"updatePassword",function(){return Ht}),n.d(c,"upsertUserSetting",function(){return $t}),n.d(c,"switchActiveOrganization",function(){return Jt});var d={};n.r(d),n.d(d,"getUser",function(){return Qt}),n.d(d,"syncUsername",function(){return Yt}),n.d(d,"getInspectioUsersInfo",function(){return Kt}),n.d(d,"getInspectioUserInfoByEmail",function(){return Zt}),n.d(d,"getUserSettings",function(){return Xt}),n.d(d,"upsertUserSetting",function(){return en}),n.d(d,"updateProfile",function(){return tn}),n.d(d,"updatePassword",function(){return nn}),n.d(d,"uploadAvatar",function(){return rn}),n.d(d,"deleteAvatar",function(){return an}),n.d(d,"switchActiveOrganization",function(){return on});var u={};n.r(u),n.d(u,"iioUsersInfoLoaded",function(){return sn}),n.d(u,"userSettingsLoaded",function(){return cn}),n.d(u,"userSettingUpserted",function(){return dn}),n.d(u,"activeOrganizationSwitched",function(){return un});var l={};n.r(l),n.d(l,"sendHttpRequest",function(){return mn}),n.d(l,"responseAction",function(){return pn}),n.d(l,"resetWebData",function(){return fn});var m={};n.r(m),n.d(m,"getMessageBoxRequestConfig",function(){return hn});var p={};n.r(p),n.d(p,"fetchUser",function(){return bn}),n.d(p,"loadUsersInfo",function(){return yn});var f={};n.r(f),n.d(f,"Command",function(){return c}),n.d(f,"Query",function(){return p}),n.d(f,"Event",function(){return u}),n.d(f,"Api",function(){return d}),n.d(f,"Type",function(){return s});var h={};n.r(h),n.d(h,"TYPE_FREE",function(){return vn}),n.d(h,"TYPE_BASIC",function(){return En}),n.d(h,"TYPE_PREMIUM",function(){return On}),n.d(h,"TYPE_CUSTOM",function(){return xn}),n.d(h,"defaultUserProps",function(){return jn}),n.d(h,"assertAccountType",function(){return wn}),n.d(h,"fromString",function(){return kn}),n.d(h,"fromUserToken",function(){return In}),n.d(h,"freeAccount",function(){return Sn}),n.d(h,"Account",function(){return Cn});var g={};n.r(g),n.d(g,"AGGREGATE_TYPE",function(){return Gn}),n.d(g,"defaultIioUserInfoProps",function(){return qn}),n.d(g,"createIioUserInfoFromServerData",function(){return Vn}),n.d(g,"createAnonymous",function(){return Wn}),n.d(g,"IioUserInfo",function(){return Hn});var b={};n.r(b),n.d(b,"TYPE_ANONYMOUS",function(){return $n}),n.d(b,"TYPE_USER",function(){return Jn}),n.d(b,"TYPE_ADMIN",function(){return Qn}),n.d(b,"defaultUserProps",function(){return Yn}),n.d(b,"fromtString",function(){return Kn}),n.d(b,"anonymousRole",function(){return Zn}),n.d(b,"assertRoleType",function(){return Xn}),n.d(b,"Role",function(){return er});var y={};n.r(y),n.d(y,"withAnonymous",function(){return tr}),n.d(y,"fromToken",function(){return nr}),n.d(y,"defaultUserProps",function(){return rr}),n.d(y,"RoleMap",function(){return ar});var v={};n.r(v),n.d(v,"defaultUserProps",function(){return or}),n.d(v,"UserInfo",function(){return ir});var E={};n.r(E),n.d(E,"installUserOrganization",function(){return hr}),n.d(E,"setUpImplicitOrganization",function(){return gr}),n.d(E,"setUpExplicitOrganization",function(){return br}),n.d(E,"fetchOrganization",function(){return yr}),n.d(E,"fetchUserOrganizations",function(){return vr}),n.d(E,"inviteUserToOrganization",function(){return Er}),n.d(E,"revokeUserOrganizationInvitation",function(){return Or}),n.d(E,"resendUserOrganizationInvitation",function(){return xr}),n.d(E,"acceptInvitationToOrganization",function(){return jr}),n.d(E,"promoteUserToOrganizationAdmin",function(){return wr}),n.d(E,"demoteUserToOrganizationMember",function(){return kr}),n.d(E,"removeUserFromOrganization",function(){return Ir}),n.d(E,"renameOrganization",function(){return Sr}),n.d(E,"removeGuestFromOrganization",function(){return Cr}),n.d(E,"turnGuestIntoMember",function(){return _r});var O={};n.r(O),n.d(O,"SET_UP_EXPLICIT_ORGANIZATION",function(){return Tr}),n.d(O,"EXPLICIT_ORGANIZATION_SET_UP",function(){return Ar}),n.d(O,"EXPLICIT_ORGANIZATION_SET_UP_FAILED",function(){return Nr}),n.d(O,"INVITE_USER_TO_ORGANIZATION",function(){return Lr}),n.d(O,"USER_INVITED_TO_ORGANIZATION",function(){return Rr}),n.d(O,"REVOKE_USER_ORGANIZATION_INVITATION",function(){return Br}),n.d(O,"RESEND_USER_ORGANIZATION_INVITATION",function(){return Dr}),n.d(O,"USER_ORGANIZATION_INVITATION_REVOKED",function(){return Pr}),n.d(O,"USER_ORGANIZATION_INVITATION_RESENT",function(){return zr}),n.d(O,"ACCEPT_INVITATION_TO_ORGANIZATION",function(){return Mr}),n.d(O,"INVITATION_TO_ORGANIZATION_ACCEPTED",function(){return Ur}),n.d(O,"PROMOTE_USER_TO_ORGANIZATION_ADMIN",function(){return Fr}),n.d(O,"USER_PROMOTED_TO_ORGANIZATION_ADMIN",function(){return Gr}),n.d(O,"DEMOTE_USER_TO_ORGANIZATION_MEMBER",function(){return qr}),n.d(O,"USER_DEMOTED_TO_ORGANIZATION_MEMBER",function(){return Vr}),n.d(O,"REMOVE_USER_FROM_ORGANIZATION",function(){return Wr}),n.d(O,"USER_REMOVED_FROM_ORGANIZATION",function(){return Hr}),n.d(O,"FETCH_ORGANIZATION",function(){return $r}),n.d(O,"ORGANIZATION_FETCHED",function(){return Jr}),n.d(O,"FETCH_USER_ORGANIZATIONS",function(){return Qr}),n.d(O,"USER_ORGANIZATIONS_FETCHED",function(){return Yr}),n.d(O,"RENAME_ORGANIZATION",function(){return Kr}),n.d(O,"ORGANIZATION_RENAMED",function(){return Zr}),n.d(O,"REMOVE_GUEST_FROM_ORGANIZATION",function(){return Xr}),n.d(O,"GUEST_REMOVED_FROM_ORGANIZATION",function(){return ea}),n.d(O,"TURN_GUEST_INTO_MEMBER",function(){return ta}),n.d(O,"GUEST_TURNED_INTO_MEMBER",function(){return na});var x={};n.r(x),n.d(x,"setUpExplicitOrganization",function(){return ra}),n.d(x,"inviteUserToOrganization",function(){return aa}),n.d(x,"revokeUserOrganizationInvitation",function(){return oa}),n.d(x,"resendUserOrganizationInvitation",function(){return ia}),n.d(x,"acceptInvitationToOrganization",function(){return sa}),n.d(x,"promoteUserToOrganizationAdmin",function(){return ca}),n.d(x,"demoteUserToOrganizationMember",function(){return da}),n.d(x,"removeUserFromOrganization",function(){return ua}),n.d(x,"renameOrganization",function(){return la}),n.d(x,"removeGuestFromOrganization",function(){return ma}),n.d(x,"turnGuestIntoMember",function(){return pa});var j={};n.r(j),n.d(j,"organizationFetched",function(){return fa}),n.d(j,"explicitOrganizationSetUp",function(){return ha}),n.d(j,"explicitOrganizationSetUpFailed",function(){return ga}),n.d(j,"userOrganizationsFetched",function(){return ba}),n.d(j,"userInvitedToOrganization",function(){return ya}),n.d(j,"userOrganizationInvitationRevoked",function(){return va}),n.d(j,"userOrganizationInvitationResent",function(){return Ea}),n.d(j,"invitationToOrganizationAccepted",function(){return Oa}),n.d(j,"userPromotedToOrganizationAdmin",function(){return xa}),n.d(j,"userDemotedToOrganizationMember",function(){return ja}),n.d(j,"userRemovedFromOrganization",function(){return wa}),n.d(j,"organizationRenamed",function(){return ka}),n.d(j,"guestRemovedFromOrganization",function(){return Ia}),n.d(j,"guestTurnedIntoMember",function(){return Sa});var w={};n.r(w),n.d(w,"fetchOrganization",function(){return Ca}),n.d(w,"fetchUserOrganizations",function(){return _a});var k={};n.r(k),n.d(k,"Api",function(){return E}),n.d(k,"Command",function(){return x}),n.d(k,"Query",function(){return w}),n.d(k,"Event",function(){return j}),n.d(k,"Type",function(){return O});var I={};n.r(I),n.d(I,"inspectioOrganizationsReducer",function(){return Qa});var S={};n.r(S),n.d(S,"fetchOrganizationFlow",function(){return ro}),n.d(S,"fetchUserOrganizations",function(){return lo}),n.d(S,"setUpExplicitOrganization",function(){return qo}),n.d(S,"inviteUserToOrganization",function(){return ho}),n.d(S,"revokeUserOrganizationInvitation",function(){return Mo}),n.d(S,"resendUserOrganizationInvitation",function(){return Bo}),n.d(S,"promoteUserToOrganizationAdmin",function(){return vo}),n.d(S,"demoteUserToOrganizationMember",function(){return Xa}),n.d(S,"removeUserFromOrganization",function(){return So}),n.d(S,"renameOrganization",function(){return Ao}),n.d(S,"removeGuestFromOrganization",function(){return jo}),n.d(S,"turnGuestIntoMember",function(){return $o});var C={};n.r(C),n.d(C,"getIioUserInfoById",function(){return Xo}),n.d(C,"makeGetIioUserInfoByIdSelector",function(){return ei}),n.d(C,"iioUserListSelector",function(){return ti}),n.d(C,"makeIioUserListSelector",function(){return ni}),n.d(C,"makeIioFilteredUserListSelector",function(){return ri});var _={};n.r(_),n.d(_,"syncUsername",function(){return si}),n.d(_,"lazyLoadInspectioUserInfo",function(){return mr}),n.d(_,"updateProfile",function(){return pi}),n.d(_,"updatePassword",function(){return hi}),n.d(_,"upsertUserSetting",function(){return vi}),n.d(_,"switchActiveOrganization",function(){return Zo});var T={};n.r(T),n.d(T,"currentUserSelector",function(){return ki}),n.d(T,"makeGetCurrentUser",function(){return Ii}),n.d(T,"makeGetCurrentBoardQuota",function(){return Si});var A={};n.r(A),n.d(A,"SERVER_CONTEXT",function(){return Mi}),n.d(A,"SAVE_BOARD",function(){return Ui}),n.d(A,"RENAME_BOARD",function(){return Fi}),n.d(A,"CHANGE_BOARD_ABBREVIATION",function(){return Gi}),n.d(A,"SET_BOARD_TAGS",function(){return qi}),n.d(A,"CHANGE_RESPONSIBLE_TEAM",function(){return Vi}),n.d(A,"TOGGLE_CODY_SUGGEST_ENABLED",function(){return Wi}),n.d(A,"TOGGLE_EVENT_MODELING_ENABLED",function(){return Hi}),n.d(A,"IMPORT_NEW_BOARD",function(){return $i}),n.d(A,"IMPORT_EXISTING_BOARD",function(){return Ji}),n.d(A,"ADD_BOARD",function(){return Qi}),n.d(A,"UPDATE_BOARDS",function(){return Yi}),n.d(A,"FORCE_UPDATE_BOARDS",function(){return Ki}),n.d(A,"SET_BOARD_TO_SNAPSHOT",function(){return Zi}),n.d(A,"SET_BOARD_DETAILS_FETCHED",function(){return Xi}),n.d(A,"CONFIRM_DELETE_BOARD",function(){return es}),n.d(A,"ABORT_BOARD_DELETION",function(){return ts}),n.d(A,"DELETE_BOARD",function(){return ns}),n.d(A,"SHARE_BOARD",function(){return rs}),n.d(A,"RESEND_BOARD_INVITATION",function(){return as}),n.d(A,"REVOKE_BOARD_INVITATION",function(){return os}),n.d(A,"REVOKE_ACCESS_TO_BOARD",function(){return is}),n.d(A,"CHANGE_BOARD_PERMISSIONS",function(){return ss}),n.d(A,"ADMIN_CHANGE_TEAM_BOARD_PERMISSIONS",function(){return cs}),n.d(A,"TRIGGER_IMPORT_BOARD",function(){return ds}),n.d(A,"TRIGGER_EXPORT_BOARD",function(){return us}),n.d(A,"TOGGLE_BOARD_HISTORY",function(){return ls}),n.d(A,"TOGGLE_ELEMENT_DETAILS",function(){return ms}),n.d(A,"TOGGLE_CODY_CONSOLE",function(){return ps}),n.d(A,"TOGGLE_PLAYSHOT_MODAL",function(){return fs}),n.d(A,"TOGGLE_TIMER_MODAL",function(){return hs}),n.d(A,"TOGGLE_VIDEO_SESSION",function(){return gs}),n.d(A,"APPEND_HISTORY_ENTRIES",function(){return bs}),n.d(A,"PREPEND_HISTORY_ENTRIES",function(){return ys}),n.d(A,"CLEAR_BOARD_HISTORY",function(){return vs}),n.d(A,"LOAD_FIRST_BOARD_HISTORY_CHUNK",function(){return Es}),n.d(A,"LOAD_NEXT_BOARD_HISTORY_CHUNK",function(){return Os}),n.d(A,"SET_NO_MORE_HISTORY_AVAILABLE",function(){return xs}),n.d(A,"SET_IS_LOADING_HISTORY",function(){return js}),n.d(A,"UPDATE_BOARD_ELEMENTS_TREE",function(){return ws}),n.d(A,"CREATE_BOARD_CLIENT",function(){return ks}),n.d(A,"REMOVE_BOARD_CLIENT",function(){return Is}),n.d(A,"RESET_BOARD_CLIENT_SECRET",function(){return Ss}),n.d(A,"SET_STICKY_TEMPLATE",function(){return Cs}),n.d(A,"UPDATE_STICKY_ADVANCED_CONFIG",function(){return _s}),n.d(A,"IMPORT_STICKY_TEMPLATES",function(){return Ts}),n.d(A,"SHARE_BOARD_WITH_ORGANIZATION_MEMBERS",function(){return As}),n.d(A,"SHARE_BOARD_WITH_ANYONE",function(){return Ns}),n.d(A,"OPEN_ELEMENTS_DETAILS",function(){return Ls}),n.d(A,"FILTER_BOARD_OVERVIEW",function(){return Rs}),n.d(A,"SORT_BOARD_OVERVIEW",function(){return Bs}),n.d(A,"FILTER_BOARD_OVERVIEW_BY_RESPONSIBLE_TEAM",function(){return Ds}),n.d(A,"HIDE_SHARED_BOARDS_ON_OVERVIEW",function(){return Ps}),n.d(A,"HIDE_OWN_BOARDS_ON_OVERVIEW",function(){return zs}),n.d(A,"FILTER_ELEMENTS_TREE",function(){return Ms}),n.d(A,"MOVE_USER_BOARD_TO_ORGANIZATION",function(){return Us}),n.d(A,"DISMISS_MAINTENANCE_MESSAGE",function(){return Fs}),n.d(A,"REMOTE_BOARD_CHANGED",function(){return Gs}),n.d(A,"LOCAL_BOARD_CHANGED",function(){return qs}),n.d(A,"BOARD_IMPORT_STARTED",function(){return Vs}),n.d(A,"BOARD_IMPORTED",function(){return Ws}),n.d(A,"BOARD_EXPORTED",function(){return Hs}),n.d(A,"BOARD_INITIALIZED",function(){return $s}),n.d(A,"LOCAL_BOARD_UPDATED_WITH_REMOTE_CHANGE",function(){return Js}),n.d(A,"BOARD_INVITATION_SENT",function(){return Qs}),n.d(A,"BOARD_INVITATION_RESENT",function(){return Ys}),n.d(A,"BOARD_INVITATION_REVOKED",function(){return Ks}),n.d(A,"BOARD_ACCESS_REVOKED",function(){return Zs}),n.d(A,"BOARD_PERMISSIONS_CHANGED",function(){return Xs}),n.d(A,"TEAM_BOARD_PERMISSIONS_CHANGED",function(){return ec}),n.d(A,"BOARD_PERMISSIONS_FOR_USERS_FETCHED",function(){return tc}),n.d(A,"BOARD_PERMISSIONS_FOR_TEAMS_FETCHED",function(){return nc}),n.d(A,"OPEN_BOARD_INVITATIONS_FETCHED",function(){return rc}),n.d(A,"PLAYSHOT_SUMMARY_LIST_FETCHED",function(){return ac}),n.d(A,"ACTIVE_GRAPH_ELEMENT_CHANGED",function(){return oc}),n.d(A,"ACTIVE_GRAPH_ELEMENT_LABEL_CHANGED",function(){return ic}),n.d(A,"ACTIVE_GRAPH_ELEMENT_METADATA_CHANGED",function(){return sc}),n.d(A,"BOARD_GRAPH_ELEMENTS_FETCHED",function(){return cc}),n.d(A,"BOARD_CLIENT_FETCHED",function(){return dc}),n.d(A,"BOARD_CLIENT_NOT_CONFIGURED",function(){return uc}),n.d(A,"BOARD_CLIENT_SECRET_FETCHED",function(){return lc}),n.d(A,"BOARD_STICKY_TEMPLATES_FETCHED",function(){return mc}),n.d(A,"STICKY_TEMPLATE_SET",function(){return pc}),n.d(A,"STICKY_ADVANCED_CONFIG_UPDATED",function(){return fc}),n.d(A,"STICKY_TEMPLATES_IMPORTED",function(){return hc}),n.d(A,"USER_BOARD_MOVED_TO_ORGANIZATION",function(){return gc}),n.d(A,"INITIAL_BOARD_LIST_LOADED",function(){return bc}),n.d(A,"BOARD_SHARED_WITH_ORGANIZATION_MEMBERS",function(){return yc}),n.d(A,"BOARD_SHARED_WITH_ANYONE",function(){return vc}),n.d(A,"RUN_CODY_ON_CHANGED",function(){return Ec}),n.d(A,"START_FETCH_USER_BOARDS",function(){return Oc}),n.d(A,"FETCH_USER_BOARDS",function(){return xc}),n.d(A,"FETCH_USER_BOARD",function(){return jc}),n.d(A,"FETCH_BOARD_PERMISSIONS_FOR_USERS",function(){return wc}),n.d(A,"FETCH_BOARD_PERMISSIONS_FOR_TEAMS",function(){return kc}),n.d(A,"FETCH_OPEN_BOARD_INVITATIONS",function(){return Ic}),n.d(A,"FETCH_BOARD_GRAPH_ELEMENTS",function(){return Sc}),n.d(A,"FETCH_BOARD_CLIENT",function(){return Cc}),n.d(A,"FETCH_BOARD_CLIENT_SECRET",function(){return _c}),n.d(A,"FETCH_BOARD_STICKY_TEMPLATES",function(){return Tc}),n.d(A,"FETCH_PLAYSHOT_SUMMARY_LIST",function(){return Ac});var N={};n.r(N),n.d(N,"installOrganizationBoard",function(){return Hc}),n.d(N,"renameBoard",function(){return $c}),n.d(N,"toggleCodySuggest",function(){return Jc}),n.d(N,"toggleEventModeling",function(){return Qc}),n.d(N,"changeBoardAbbreviation",function(){return Yc}),n.d(N,"setBoardTags",function(){return Kc}),n.d(N,"changeResponsibleTeam",function(){return Zc}),n.d(N,"deleteBoard",function(){return Xc}),n.d(N,"takeBoardSnapshot",function(){return ed}),n.d(N,"shareBoard",function(){return td}),n.d(N,"resendBoardInvitation",function(){return nd}),n.d(N,"revokeBoardInvitation",function(){return rd}),n.d(N,"ackBoardInvitation",function(){return ad}),n.d(N,"revokeAccessToBoard",function(){return od}),n.d(N,"changeBoardPermissions",function(){return id}),n.d(N,"adminChangeTeamBoardPermissions",function(){return sd}),n.d(N,"fetchUserBoard",function(){return cd}),n.d(N,"fetchUserBoards",function(){return dd}),n.d(N,"fetchOlderPatches",function(){return ud}),n.d(N,"fetchNewerPatches",function(){return ld}),n.d(N,"fetchBoardPermissionsForUsers",function(){return md}),n.d(N,"fetchBoardPermissionsForTeams",function(){return pd}),n.d(N,"fetchOpenBoardInvitations",function(){return fd}),n.d(N,"fetchBoardOfInvitation",function(){return hd}),n.d(N,"fetchBoardXmlFromLink",function(){return gd}),n.d(N,"fetchPlayshotFromLink",function(){return bd}),n.d(N,"uploadBoardImage",function(){return yd}),n.d(N,"replaceBoardImage",function(){return vd}),n.d(N,"deleteBoardImage",function(){return Ed}),n.d(N,"fetchBoardGraphElements",function(){return Od}),n.d(N,"fetchBoardClient",function(){return xd}),n.d(N,"fetchBoardClientSecret",function(){return jd}),n.d(N,"createBoardClient",function(){return wd}),n.d(N,"removeBoardClient",function(){return kd}),n.d(N,"resetBoardClientSecret",function(){return Id}),n.d(N,"fetchBoardStickyTemplates",function(){return Sd}),n.d(N,"setStickyTemplate",function(){return Cd}),n.d(N,"updateStickyAdvancedConfig",function(){return _d}),n.d(N,"moveUserBoardToOrganization",function(){return Td}),n.d(N,"shareBoardWithOrganizationMembers",function(){return Ad}),n.d(N,"shareBoardWithAnyone",function(){return Nd}),n.d(N,"checkBoardAccess",function(){return Ld}),n.d(N,"savePlayshot",function(){return Rd}),n.d(N,"deletePlayshot",function(){return Bd}),n.d(N,"fetchPlayshots",function(){return Dd}),n.d(N,"fetchPlayshot",function(){return Pd});var L={};n.r(L),n.d(L,"addBoard",function(){return zd}),n.d(L,"updateBoards",function(){return Md}),n.d(L,"forceUpdateBoards",function(){return Ud}),n.d(L,"setBoardToSnapshot",function(){return Fd}),n.d(L,"setBoardDetailsFetched",function(){return Gd}),n.d(L,"triggerImportBoard",function(){return qd}),n.d(L,"triggerExportBoard",function(){return Vd}),n.d(L,"toggleBoardHistory",function(){return Wd}),n.d(L,"toggleElementDetails",function(){return Hd}),n.d(L,"toggleCodyConsole",function(){return $d}),n.d(L,"togglePlayshotModal",function(){return Jd}),n.d(L,"toggleTimerModal",function(){return Qd}),n.d(L,"toggleVideoSession",function(){return Yd}),n.d(L,"appendHistoryEntries",function(){return Kd}),n.d(L,"prependHistoryEntries",function(){return Zd}),n.d(L,"clearBoardHistory",function(){return Xd}),n.d(L,"loadNextBoardHistoryChunk",function(){return eu}),n.d(L,"loadFirstBoardHistoryChunk",function(){return tu}),n.d(L,"setNoMoreHistoryAvailable",function(){return nu}),n.d(L,"setIsLoadingHistory",function(){return ru}),n.d(L,"filterBoardOverview",function(){return au}),n.d(L,"sortBoardOverview",function(){return ou}),n.d(L,"filterBoardOverviewByResponsibleTeam",function(){return iu}),n.d(L,"hideSharedBoardsOnOverview",function(){return su}),n.d(L,"hideOwnBoardsOnOverview",function(){return cu}),n.d(L,"filterElementsTree",function(){return du}),n.d(L,"saveBoard",function(){return uu}),n.d(L,"renameBoard",function(){return lu}),n.d(L,"changeBoardAbbreviation",function(){return mu}),n.d(L,"setBoardTags",function(){return pu}),n.d(L,"changeResponsibleTeam",function(){return fu}),n.d(L,"importNewBoard",function(){return hu}),n.d(L,"importExistingBoard",function(){return gu}),n.d(L,"toggleCodySuggestEnabled",function(){return bu}),n.d(L,"toggleEventModelingEnabled",function(){return yu}),n.d(L,"confirmDeleteBoard",function(){return vu}),n.d(L,"abortBoardDeletion",function(){return Eu}),n.d(L,"deleteBoard",function(){return Ou}),n.d(L,"shareBoard",function(){return xu}),n.d(L,"resendBoardInvitation",function(){return ju}),n.d(L,"revokeBoardInvitation",function(){return wu}),n.d(L,"revokeAccessToBoard",function(){return ku}),n.d(L,"changeBoardPermissions",function(){return Iu}),n.d(L,"adminChangeTeamBoardPermissions",function(){return Su}),n.d(L,"shareBoardWithOrganizationMembers",function(){return Cu}),n.d(L,"shareBoardWithAnyone",function(){return _u}),n.d(L,"updateBoardElementsTree",function(){return Tu}),n.d(L,"createBoardClient",function(){return Au}),n.d(L,"removeBoardClient",function(){return Nu}),n.d(L,"resetBoardClientSecret",function(){return Lu}),n.d(L,"setStickyTemplate",function(){return Ru}),n.d(L,"updateStickyAdvancedConfig",function(){return Bu}),n.d(L,"importStickyTemplates",function(){return Du}),n.d(L,"moveUserBoardToOrganization",function(){return Pu}),n.d(L,"dismissMaintenanceMessage",function(){return zu});var R={};n.r(R),n.d(R,"remoteBoardChanged",function(){return Mu}),n.d(R,"localBoardChanged",function(){return Uu}),n.d(R,"boardImportStarted",function(){return Fu}),n.d(R,"boardImported",function(){return Gu}),n.d(R,"boardExported",function(){return qu}),n.d(R,"boardInitialized",function(){return Vu}),n.d(R,"initialBoardListLoaded",function(){return Wu}),n.d(R,"localBoardUpdatedWithRemoteChange",function(){return Hu}),n.d(R,"boardInvitationSent",function(){return $u}),n.d(R,"boardInvitationResent",function(){return Ju}),n.d(R,"boardInvitationRevoked",function(){return Qu}),n.d(R,"boardAccessRevoked",function(){return Yu}),n.d(R,"boardPermissionsChanged",function(){return Ku}),n.d(R,"teamBoardPermissionsChanged",function(){return Zu}),n.d(R,"boardSharedWithOrganizationMembers",function(){return Xu}),n.d(R,"boardSharedWithAnyone",function(){return el}),n.d(R,"boardPermissionsForUsersFetched",function(){return tl}),n.d(R,"boardPermissionsForTeamsFetched",function(){return nl}),n.d(R,"openBoardInvitationsFetched",function(){return rl}),n.d(R,"playshotSummaryListFetched",function(){return al}),n.d(R,"activeGraphElementChanged",function(){return ol}),n.d(R,"activeGraphElementLabelChanged",function(){return il}),n.d(R,"activeGraphElementMetadataChanged",function(){return sl}),n.d(R,"boardGraphElementsFetched",function(){return cl}),n.d(R,"boardClientFetched",function(){return dl}),n.d(R,"boardClientNotConfigured",function(){return ul}),n.d(R,"boardClientSecretFetched",function(){return ll}),n.d(R,"boardStickyTemplatesFetched",function(){return ml}),n.d(R,"stickyTemplateSet",function(){return pl}),n.d(R,"stickyAdvancedConfigUpdated",function(){return fl}),n.d(R,"stickyTemplatesImported",function(){return hl}),n.d(R,"userBoardMovedToOrganization",function(){return gl}),n.d(R,"runCodyOnChanged",function(){return bl});var B={};n.r(B),n.d(B,"startFetchUserBoards",function(){return yl}),n.d(B,"fetchUserBoards",function(){return vl}),n.d(B,"fetchUserBoard",function(){return El}),n.d(B,"fetchBoardPermissionsForUsers",function(){return Ol}),n.d(B,"fetchBoardPermissionsForTeams",function(){return xl}),n.d(B,"fetchOpenBoardInvitations",function(){return jl}),n.d(B,"fetchBoardGraphElements",function(){return wl}),n.d(B,"fetchBoardClient",function(){return kl}),n.d(B,"fetchBoardClientSecret",function(){return Il}),n.d(B,"fetchBoardStickyTemplates",function(){return Sl}),n.d(B,"fetchPlayshotSummaryList",function(){return Cl});var D={};n.r(D),n.d(D,"Api",function(){return N}),n.d(D,"Command",function(){return L}),n.d(D,"Event",function(){return R}),n.d(D,"Query",function(){return B}),n.d(D,"Type",function(){return A});var P={};n.r(P),n.d(P,"defaultBoardVersionProps",function(){return Pl}),n.d(P,"BoardVersion",function(){return zl});var z={};n.r(z),n.d(z,"defaultBoardProps",function(){return Ml}),n.d(z,"deriveAbbreviationFromBoardName",function(){return Ul}),n.d(z,"createUserBoard",function(){return Fl}),n.d(z,"createTempBoard",function(){return Gl}),n.d(z,"Board",function(){return ql});var M={};n.r(M),n.d(M,"defaultBoardChangedProps",function(){return cp}),n.d(M,"remoteBoardChanged",function(){return dp}),n.d(M,"localBoardChanged",function(){return up}),n.d(M,"mapServerPatchToBoardChanged",function(){return lp}),n.d(M,"BoardChanged",function(){return mp});var U={};n.r(U),n.d(U,"defaultBoardSnapshotProps",function(){return jp}),n.d(U,"BoardSnapshot",function(){return wp});var F={};n.r(F),n.d(F,"addTeam",function(){return _p}),n.d(F,"renameTeam",function(){return Tp}),n.d(F,"changeTeamDescription",function(){return Ap}),n.d(F,"inviteUserToTeam",function(){return Np}),n.d(F,"resendTeamInvitation",function(){return Lp}),n.d(F,"revokeTeamInvitation",function(){return Rp}),n.d(F,"removeMemberFromTeam",function(){return Bp}),n.d(F,"deleteTeam",function(){return Dp}),n.d(F,"adminGrantTeamAccessToBoard",function(){return Pp}),n.d(F,"adminRevokeTeamAccessToBoard",function(){return zp}),n.d(F,"fetchUserTeams",function(){return Mp}),n.d(F,"ackTeamInvitation",function(){return Up}),n.d(F,"fetchTeamOfInvitation",function(){return Fp}),n.d(F,"fetchOpenTeamInvitations",function(){return Gp}),n.d(F,"moveTeamToOrganization",function(){return qp});var G={};n.r(G),n.d(G,"ADD_TEAM",function(){return Vp}),n.d(G,"RENAME_TEAM",function(){return Wp}),n.d(G,"CHANGE_TEAM_DESCRIPTION",function(){return Hp}),n.d(G,"INVITE_USER_TO_TEAM",function(){return $p}),n.d(G,"RESEND_TEAM_INVITATION",function(){return Jp}),n.d(G,"REVOKE_TEAM_INVITATION",function(){return Qp}),n.d(G,"REMOVE_MEMBER_FROM_TEAM",function(){return Yp}),n.d(G,"FETCH_USER_TEAMS",function(){return Kp}),n.d(G,"UPDATE_TEAMS",function(){return Zp}),n.d(G,"ADMIN_GRANT_TEAM_ACCESS_TO_BOARD",function(){return Xp}),n.d(G,"ADMIN_REVOKE_TEAM_ACCESS_TO_BOARD",function(){return ef}),n.d(G,"DELETE_TEAM",function(){return tf}),n.d(G,"TEAM_ADDED",function(){return nf}),n.d(G,"TEAM_RENAMED",function(){return rf}),n.d(G,"TEAM_DESCRIPTION_CHANGED",function(){return af}),n.d(G,"TEAMS_FETCHED",function(){return of}),n.d(G,"MEMBER_REMOVED_FROM_TEAM",function(){return sf}),n.d(G,"TEAM_DELETED",function(){return cf}),n.d(G,"TEAM_INVITATIONS_LOADED",function(){return df}),n.d(G,"TEAM_INVITATION_RESENT",function(){return uf}),n.d(G,"TEAM_INVITATION_REVOKED",function(){return lf}),n.d(G,"TEAM_ACCESS_TO_BOARD_GRANTED",function(){return mf}),n.d(G,"TEAM_ACCESS_TO_BOARD_REVOKED",function(){return pf}),n.d(G,"MOVE_TEAM_TO_ORGANIZATION",function(){return ff}),n.d(G,"TEAM_MOVED_TO_ORGANIZATION",function(){return hf});var q={};n.r(q),n.d(q,"addTeam",function(){return gf}),n.d(q,"renameTeam",function(){return bf}),n.d(q,"changeTeamDescription",function(){return yf}),n.d(q,"inviteUserToTeam",function(){return vf}),n.d(q,"resendTeamInvitation",function(){return Ef}),n.d(q,"revokeTeamInvitation",function(){return Of}),n.d(q,"removeMemberFromTeam",function(){return xf}),n.d(q,"updateTeams",function(){return jf}),n.d(q,"deleteTeam",function(){return wf}),n.d(q,"adminGrantTeamAccessToBoard",function(){return kf}),n.d(q,"adminRevokeTeamAccessToBoard",function(){return If}),n.d(q,"moveTeamToOrganization",function(){return Sf});var V={};n.r(V),n.d(V,"teamAdded",function(){return Cf}),n.d(V,"teamRenamed",function(){return _f}),n.d(V,"teamDescriptionChanged",function(){return Tf}),n.d(V,"memberRemovedFromTeam",function(){return Af}),n.d(V,"teamDeleted",function(){return Nf}),n.d(V,"teamInvitationsLoaded",function(){return Lf}),n.d(V,"teamInvitationResent",function(){return Rf}),n.d(V,"teamInvitationRevoked",function(){return Bf}),n.d(V,"teamsFetched",function(){return Df}),n.d(V,"teamAccessToBoardGranted",function(){return Pf}),n.d(V,"teamAccessToBoardRevoked",function(){return zf}),n.d(V,"teamMovedToOrganization",function(){return Mf});var W={};n.r(W),n.d(W,"Api",function(){return F}),n.d(W,"Command",function(){return q}),n.d(W,"Event",function(){return V}),n.d(W,"Type",function(){return G});var H={};n.r(H),n.d(H,"inspectioTeamsReducer",function(){return Qf});var $={};n.r($),n.d($,"addTeam",function(){return rh}),n.d($,"renameTeam",function(){return Sh}),n.d($,"changeTeamDescription",function(){return ph}),n.d($,"inviteUserToTeam",function(){return vh}),n.d($,"removeMemberFromTeam",function(){return jh}),n.d($,"adminGrantTeamAccessToBoard",function(){return dh}),n.d($,"deleteTeam",function(){return bh}),n.d($,"resendTeamInvitation",function(){return Nh}),n.d($,"revokeTeamInvitation",function(){return Dh}),n.d($,"refreshUserTeams",function(){return Uh}),n.d($,"moveTeamToOrganization",function(){return Vh});var J={};n.r(J),n.d(J,"boardListSelector",function(){return og}),n.d(J,"boardLoadingSelector",function(){return ig}),n.d(J,"initialBoardListLoadedSelector",function(){return sg}),n.d(J,"boardOverviewSelector",function(){return cg}),n.d(J,"makeGetAllBoards",function(){return dg}),n.d(J,"makeGetBoards",function(){return ug}),n.d(J,"makeGetTeamBoards",function(){return lg}),n.d(J,"makeIsLoadingBoards",function(){return mg}),n.d(J,"makeInitialBoardListLoaded",function(){return pg}),n.d(J,"makeHasBoards",function(){return fg}),n.d(J,"makeGetBoardOverview",function(){return hg}),n.d(J,"makeMapStateToPropsBoardOverview",function(){return gg});var Q={};n.r(Q),n.d(Q,"CONNECT_SOCKET",function(){return vb}),n.d(Q,"DISCONNECT_SOCKET",function(){return Eb}),n.d(Q,"SOCKET_CONNECTED",function(){return Ob}),n.d(Q,"SOCKET_DISCONNECTED",function(){return xb}),n.d(Q,"SOCKET_CONNECTION_LOST",function(){return jb}),n.d(Q,"SEND_SOCKET_CMD",function(){return wb}),n.d(Q,"LISTEN_ON_SOCKET_CHANNEL",function(){return kb}),n.d(Q,"STOP_LISTENING_ON_SOCKET_CHANNEL",function(){return Ib}),n.d(Q,"DEFAULT_SOCKET_CMD_TIMEOUT",function(){return Sb});var Y={};n.r(Y),n.d(Y,"connectSocket",function(){return Cb}),n.d(Y,"disconnectSocket",function(){return _b}),n.d(Y,"socketConnected",function(){return Tb}),n.d(Y,"socketDisconnected",function(){return Ab}),n.d(Y,"socketConnectionLost",function(){return Nb}),n.d(Y,"sendSocketCmd",function(){return Lb}),n.d(Y,"notifySocketCmdSent",function(){return Rb}),n.d(Y,"ackSocketCmd",function(){return Bb}),n.d(Y,"rejectSocketCmd",function(){return Db}),n.d(Y,"listenOnSocketChannel",function(){return Pb}),n.d(Y,"stopListeningOnSocketChannel",function(){return zb}),n.d(Y,"emitChannelEvent",function(){return Mb}),n.d(Y,"isAcknowledged",function(){return Ub}),n.d(Y,"isNotAcknowledged",function(){return Fb}),n.d(Y,"isError",function(){return Gb});var K={};n.r(K),n.d(K,"STATUS_CONNECTED",function(){return qb}),n.d(K,"STATUS_CONNECTING",function(){return Vb}),n.d(K,"STATUS_DISCONNECTED",function(){return Wb}),n.d(K,"STATUS_DISCONNECTING",function(){return Hb}),n.d(K,"STATUS_CONNECTION_LOST",function(){return $b}),n.d(K,"defaultUserProps",function(){return Jb}),n.d(K,"fromtString",function(){return Qb}),n.d(K,"disconnectedStatus",function(){return Yb}),n.d(K,"assertSocketStatus",function(){return Kb}),n.d(K,"Status",function(){return Zb});var Z={};n.r(Z),n.d(Z,"AUTHENTICATE",function(){return ey}),n.d(Z,"USER_AUTHENTICATED",function(){return ty});var X={};n.r(X),n.d(X,"authenticate",function(){return ny});var ee={};n.r(ee),n.d(ee,"userAuthenticated",function(){return ry});var te={};n.r(te),n.d(te,"Command",function(){return X}),n.d(te,"Event",function(){return ee}),n.d(te,"Type",function(){return Z});var ne={};n.r(ne),n.d(ne,"tokenRefreshFlow",function(){return iy});var re={};n.r(re),n.d(re,"makeTokenSelector",function(){return sy});var ae={};n.r(ae),n.d(ae,"AuthSelector",function(){return re});var oe={};n.r(oe),n.d(oe,"manageSocketConnection",function(){return py});var ie={};n.r(ie),n.d(ie,"statusSelector",function(){return Sy}),n.d(ie,"makeGetStatus",function(){return Cy});var se={};n.r(se),n.d(se,"StatusSelector",function(){return ie});var ce={};n.r(ce),n.d(ce,"boardSelector",function(){return Ty}),n.d(ce,"makeBoardByIdSelector",function(){return Ay}),n.d(ce,"makeGetBoard",function(){return Ny}),n.d(ce,"makeMapStateToPropsAddBoard",function(){return Ly}),n.d(ce,"makeMapStateToPropsEditBoard",function(){return Ry}),n.d(ce,"makeMapStateToPropsMxGraphBoard",function(){return By});var de={};n.r(de),n.d(de,"makeBoardHistoryByIdSelector",function(){return mE});var ue={};n.r(ue),n.d(ue,"BoardSelector",function(){return ce}),n.d(ue,"BoardListSelector",function(){return J}),n.d(ue,"BoardHistorySelector",function(){return de});var le={};n.r(le),n.d(le,"TOGGLE_SIDEBAR_COLLAPSED",function(){return hE}),n.d(le,"SET_SIDEBAR_WIDTH",function(){return gE}),n.d(le,"SET_RIGHT_SIDEBAR_WIDTH",function(){return bE}),n.d(le,"SET_SIDEBYSIDE_WIDTH",function(){return yE}),n.d(le,"SET_SIDEBYSIDE_CELL",function(){return vE}),n.d(le,"SET_CODY_CONSOLE_HEIGHT",function(){return EE}),n.d(le,"TOGGLE_SIDEBAR_DIVIDER",function(){return OE}),n.d(le,"TOGGLE_SIDEBAR_EDITOR",function(){return xE});var me={};n.r(me),n.d(me,"saveBoardFlow",function(){return w_}),n.d(me,"deleteBoardFlow",function(){return KS}),n.d(me,"fetchUserBoardsFlow",function(){return GC}),n.d(me,"installUserBoardFlow",function(){return n_}),n.d(me,"renameBoardFlow",function(){return c_}),n.d(me,"toggleCodySuggestEnabled",function(){return rT}),n.d(me,"toggleEventModelingEnabled",function(){return sT}),n.d(me,"changeBoardAbbreviationFlow",function(){return MS}),n.d(me,"changeResponsibleTeamFlow",function(){return VS}),n.d(me,"setBoardTagsFlow",function(){return I_}),n.d(me,"fetchUserBoardFlow",function(){return CC}),n.d(me,"fetchBoardPermissionsFlow",function(){return lC}),n.d(me,"fetchOpenBoardInvitationsFlow",function(){return yC}),n.d(me,"fetchPlayshotSummaryListFlow",function(){return wC}),n.d(me,"shareBoardFlow",function(){return T_}),n.d(me,"resendBoardInvitationFlow",function(){return m_}),n.d(me,"revokeBoardInvitationFlow",function(){return E_}),n.d(me,"prepareBoardHistoryFlow",function(){return aO}),n.d(me,"loadBoardHistoryFlow",function(){return lO}),n.d(me,"importNewBoardFlow",function(){return YC}),n.d(me,"importExistingBoardFlow",function(){return HC}),n.d(me,"syncElementsTreeFlow",function(){return X_}),n.d(me,"revokeAccessToBoardFlow",function(){return g_}),n.d(me,"changeBoardPermissionsFlow",function(){return GS}),n.d(me,"adminChangeTeamBoardPermissions",function(){return PS}),n.d(me,"fetchBoardClientFlow",function(){return aC}),n.d(me,"fetchBoardGraphElementsFlow",function(){return sC}),n.d(me,"fetchBoardStickyTemplates",function(){return hC}),n.d(me,"updateStickyTemplate",function(){return pT}),n.d(me,"importStickyTemplates",function(){return e_}),n.d(me,"moveUserBoardToOrganization",function(){return i_}),n.d(me,"storeOverviewSettingsFlow",function(){return Q_}),n.d(me,"shareBoardWithOrganizationMembersFlow",function(){return z_}),n.d(me,"shareBoardWithAnyoneFlow",function(){return R_});var pe,fe=n(5),he=n(0),ge=n.n(he),be=n(96),ye=n(331),ve=n.n(ye),Ee=(n(543),function(e){return new Promise(function(t,n){ve.a.verify(e,pe,function(r,a){return r?(console.log({error:r}),n(r)):t({token:e,verifiedToken:a})})})}),Oe=n(2),xe=n.n(Oe),je=n(17),we=n(182),ke=n.n(we),Ie=ke.a.create({baseURL:"/board/api/v1/messagebox"}),Se=n(1068),Ce=Object(Se.a)({path:"/board/socket/",autoConnect:!1,multiplex:!0,reconnection:!0,transportOptions:{polling:{extraHeaders:{}}}}),_e="",Te=function(){return _e},Ae=function(e){Ie.defaults.headers.Authorization="Bearer "+e,Ce.io.opts.transportOptions.polling.extraHeaders.Authorization="Bearer "+e,_e=e;var t=new Date;t.setTime(t.getTime()+6e5),document.cookie="token="+e+";path=/buckets/boards;expires="+t.toUTCString()},Ne=function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i=arguments;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=i.length>1&&void 0!==i[1]?i[1]:7,r=i.length>2&&void 0!==i[2]?i[2]:200,o=0;case 3:return e.next=5,t();case 5:if(!(a=e.sent).response){e.next=8;break}return e.abrupt("return",a);case 8:if(0!==--n){e.next=11;break}return e.abrupt("return",a);case 11:return o++,e.next=14,new Promise(function(e){return setTimeout(e,o*r)});case 14:if(n>0){e.next=3;break}case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Le=function(e,t){switch(e){case"InspectIO.BoardClient":return Ie.post(e,t).then(function(e){return{response:e}}).catch(function(e){return{error:e.response}});default:return Ne(function(){return Ie.post(e,t).then(function(e){return{response:e}}).catch(function(e){return{error:e.response}})})}},Re=function(e,t){return Ie.post(e,t,{baseURL:"/board/api/v1/user-management"}).then(function(e){return{response:e}}).catch(function(e){return{error:e.response}})},Be=n(15),De=n(18),Pe=n(24),ze=n(21),Me=n(23),Ue=n(8),Fe=n(6),Ge=n(32),qe=n(40),Ve=n(1386),We=n(531),He=n(548),$e=n.n(He),Je=n(823);We.a.use($e.a).init({detection:{order:["querystring","cookie","localStorage","navigator","htmlTag","path","subdomain"],caches:["localStorage","cookie"],excludeCacheFor:["cimode"]},fallbackLng:"en",debug:!0,resources:Je,react:{wait:!0}});var Qe=We.a,Ye=n(9),Ke=n(3),Ze=n(1202),Xe=n(1057),et=n(1403),tt=n(1404),nt=n(1402);function rt(e){Object(he.useEffect)(function(){return document.getElementsByTagName("body")[0].addEventListener("click",e),function(){document.getElementsByTagName("body")[0].removeEventListener("click",e)}},[])}var at=n(11),ot=n(36),it=n.n(ot),st={title:"",message:"",level:"info",position:"bl",autoDismiss:5,dismissible:!0,handled:!1,uid:void 0,action:null,hideProgressBar:!0},ct=function(e){function t(e){return Object(Be.a)(this,t),void 0===e.uid&&(e.uid=ot.v4()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"markAsHandled",value:function(){return this.set("handled",!0)}},{key:"hasAction",value:function(){return null!==this.action}}]),t}(Object(fe.Record)(st)),dt="@@NotificationSystem/Notify",ut=function(e){return Object(at.action)(dt,e)},lt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=new r.Message({title:e,message:t,tOpts:n,level:"info",autoDismiss:a});return Object(at.action)(dt,o)},mt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=new r.Message({title:e,message:t,tOpts:n,level:"error",autoDismiss:0});return Object(at.action)(dt,a)},pt=function(e){return Object(at.action)("@@NotificationSystem/MessageHandled",e)},ft=n(204),ht=n(129),gt=n(74),bt=(n(836),ft.toast.TYPE.INFO,ft.toast.POSITION.BOTTOM_LEFT,n(37)),yt=function(e,t){return e.getIn(["notificationSystem","messages"],Object(fe.fromJS)([]))},vt=function(){var e=Object(bt.a)([yt],function(e){return e});return function(t,n){return{messages:e(t,n)}}}(),Et=[],Ot=function(e,t,n){e.filter(function(e){return!!e&&!e.handled}).forEach(function(e){if(e&&(!e.uid||!Et.includes(e.uid))){var r=e.message;r instanceof Error&&(r=r.message),e.uid&&Et.push(e.uid),Object(ft.toast)(ge.a.createElement("div",null,ge.a.createElement("p",null,ge.a.createElement("strong",null,n.t(e.title+""))),n.t(r)),{type:e.level,autoClose:"error"!==e.level&&2e3,hideProgressBar:e.hideProgressBar,onClose:function(){e.uid&&(Et=Et.filter(function(t){return t!==e.uid})),t(e.markAsHandled())}})}})},xt=Object(Ue.b)()(Object(ht.a)(Object(Fe.connect)(vt,function(e){return Object(gt.bindActionCreators)({sendNotify:a.info,onHandled:o.publishMessageHandled},e)}),Object(ht.b)({componentDidMount:function(){var e=this.props,t=e.messages,n=e.onHandled;t&&Ot(t,n,this.props)},componentDidUpdate:function(){var e=this.props,t=e.messages,n=e.onHandled;t&&Ot(t,n,this.props)}}))(function(e){return he.createElement(ft.ToastContainer,{position:ft.toast.POSITION.BOTTOM_LEFT})})),jt="/inspectio",wt="/inspectio/user/profile",kt=function(e){return"/inspectio/board/"+e},It=function(e){return 0===e.search("/inspectio/board/")},St="/inspectio/boards/edit/:uid",Ct=function(e){return"/inspectio/boards/edit/"+e},_t="/inspectio/boards/redirect",Tt=function(e){return function(t){return At()+kt(e)+"?cells=".concat(t,"&clicks=1")}},At=function(){return window.location.protocol+"//"+window.location.host},Nt="InspectIO.",Lt="@@InspectioUsers/SignIn",Rt="@@InspectioBoards/User",Bt="@@InspectioBoards/IioUsersInfo",Dt="@@InspectioBoards/IioUsersInfoLoaded",Pt="@@InspectioBoard/UserSettingsLoaded",zt="@@InsecptioBoard/UserSettingUpserted",Mt="@@InspectioBoards/UserUpdate",Ut="@@InspectioBoards/PasswordUpdate",Ft="@@InsecptioBoards/UpsertUserSetting",Gt="@@InspectioBoards/SwitchActiveOrganization",qt="@@InspectioBoards/ActiveOrganizationSwitched",Vt=function(e){return Object(at.action)(Lt,{user:e})},Wt=function(e,t){return Object(at.action)(Mt,{user:e,successCb:t})},Ht=function(e){return Object(at.action)(Ut,{password:e})},$t=function(e,t){return Object(at.action)(Ft,{key:e,value:t})},Jt=function(e){return Object(at.action)(Gt,{organizationId:e})},Qt=function(e){return Le("InspectIO.User",{userId:e})},Yt=function(e,t,n,r,a){return Le("InspectIO.SyncUserName",{userId:e,name:t,email:n=n||null,avatarUrl:r=r||null,position:a=a||null})},Kt=function(e){return Le("InspectIO.Users",{userIds:e})},Zt=function(e){return Le("InspectIO.UserInfo",{email:e})},Xt=function(){return Le("InspectIO.UserSettings",{})},en=function(e,t){return Le("InspectIO.UpsertUserSetting",{key:e,value:String(t)})},tn=function(e){var t={userId:e.uid,email:e.email,username:e.name,avatarUrl:e.avatarUrl,displayName:e.displayName,companyName:e.companyName,jobTitle:e.jobTitle};return Re("update-profile",t)},nn=function(e,t){return Re("reset-password",{userId:e,temporary:!1,password:t})},rn=function(e,t){return n=e,r=t,Ie.post(n,r,{baseURL:"/avatar/"});var n,r},an=function(e){return t=e,Ie.delete(t,{baseURL:"/avatar/"});var t},on=function(e,t){return Le(Nt+"SwitchActiveOrganization",{userId:e,organizationId:t})},sn=function(e){return Object(at.action)(Dt,{usersInfo:e})},cn=function(e){return Object(at.action)(Pt,{userSettings:e})},dn=function(e,t){return Object(at.action)(zt,{key:e,value:t})},un=function(e){return Object(at.action)(qt,e)},ln="@@api/SEND_HTTP_REQUEST",mn=function(e,t,n){return Object(at.action)(ln,{request:e,responseActionType:t,metadata:n})},pn=function(e,t,n){return Object(at.action)(e,{webData:t,metadata:n})},fn=function(e){return Object(at.action)("@@api/RESET_WEB_DATA",{responseActionType:e})},hn=function(e,t){return{url:e,method:"post",headers:{"Content-Type":"application/json"},data:JSON.stringify(t),responseType:"json"}},gn=n(1);var bn=function(e){return l.sendHttpRequest(m.getMessageBoxRequestConfig(Nt+"User",{userId:e}),Rt)},yn=function(e){return Object(at.action)(Bt,{userIds:e})},vn="free",En="basic",On="premium",xn="custom",jn={accountType:vn},wn=function(e){switch(e){case vn:case En:case On:case xn:break;default:throw new Error('Invalid accountType type "'+e+'" provided')}},kn=function(e){return new Cn({accountType:e})},In=function(e){var t=Sn(),n=Sn();return e.forEach(function(e){null!==e.match(/-account/)&&(n=new Cn({accountType:e.replace(/-account/,"")})).isEqualOrBetterThan(t)&&(t=n)}),t},Sn=function(){return new Cn({accountType:vn})},Cn=function(e){function t(e){return Object(Be.a)(this,t),wn(e.accountType),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"isFreeAccount",value:function(){return this.accountType===vn}},{key:"isBasicAccount",value:function(){return this.accountType===En}},{key:"isPremiumAccount",value:function(){return this.accountType===On}},{key:"isCustomAccount",value:function(){return this.accountType===xn}},{key:"isEqualOrBetterThan",value:function(e){return this.accountType===e.accountType||this.accountType!==vn&&(e.accountType===vn||(this.accountType===xn||e.accountType!==xn&&this.accountType===On))}},{key:"equals",value:function(e){return this.accountType===e.accountType}}]),t}(Object(fe.Record)(jn));function _n(e){return"left"===e.tag}function Tn(e){return"right"===e.tag}function An(e){return{value:e,tag:"left"}}function Nn(e){return{value:e,tag:"right"}}function Ln(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0;a<n.length;a++){var o=n[a],i=Object(Ke.a)(o,2),s=i[0],c=i[1];if(!s(e))return An(c)}return Nn(e)}function Rn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return Ln.apply(void 0,[e].concat(t))}}function Bn(e){return function(t){return e(t)}}function Dn(e){return function(t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value,d=e(c);if(_n(d))return d;n.push(d.value)}}catch(u){a=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return Nn(n)}}function Pn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0;a<n.length;a++){var o=(0,n[a])(e);if(_n(o))return o;e=o.value}return Nn(e)}var zn=n(25),Mn=function(e){return function(t){return!!zn.isObject(t)&&zn.has(t,e)}},Un=function(){return function(e){return zn.isArray(e)}},Fn=function(e){return function(t){if(!Mn(e)(t))return!1;var n=zn.get(t,e);try{return JSON.parse(n),!0}catch(r){return!1}}},Gn="IioUserInfo",qn={uid:"",userId:"",username:"",avatarUrl:"",anonymous:!0,aggregateType:Gn,position:"",email:""};function Vn(e){var t=Ln(e,[Mn("userId"),"userId missing"],[Mn("username"),"username missing in "+e.userId],[Mn("avatarUrl"),"avatarUrl missing in "+e.userId],[Mn("position"),"position missing in "+e.userId],[Mn("email"),"email missing in "+e.userId]);return _n(t)?t:Nn(new Hn(Object(Ye.a)({},qn,e,{uid:e.userId})))}function Wn(){return new Hn(qn)}var Hn=function(e){function t(e){return Object(Be.a)(this,t),""!==e.userId&&(e.anonymous=!1),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"avatar",value:function(){return this.anonymous?"":""===this.avatarUrl?this.generateDefaultAvatarUrl():this.avatarUrl}},{key:"generateDefaultAvatarUrl",value:function(){return"/avatar/".concat(this.userId,"?displayName=").concat(this.username)}}]),t}(Object(fe.Record)(qn)),$n="anonymous",Jn="user",Qn="admin",Yn={type:$n},Kn=function(e){return new er({type:e})},Zn=function(){return new er({type:$n})},Xn=function(e){switch(e){case $n:case Jn:case Qn:break;default:throw new Error('Invalid role type "'+e+'" provided')}},er=function(e){function t(e){return Object(Be.a)(this,t),Xn(e.type),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"isAnonymous",value:function(){return this.type===$n}},{key:"isUser",value:function(){return this.type===Jn}},{key:"isAdmin",value:function(){return this.type===Qn}},{key:"equals",value:function(e){return this.type===e.type}}]),t}(Object(fe.Record)(Yn)),tr=function(){return new ar({roleMap:Object(fe.Map)().set(b.TYPE_ANONYMOUS,b.anonymousRole())})},nr=function(e){var t=Object(fe.Map)();return e.forEach(function(e){if(null===e.match(/-account/)){var n=new b.Role({type:e});t=t.set(n.type,n)}}),new ar({roleMap:t})},rr={roleMap:Object(fe.Map)().set(b.TYPE_ANONYMOUS,b.anonymousRole())},ar=function(e){function t(e){return Object(Be.a)(this,t),e.roleMap.isEmpty()&&(e.roleMap=e.roleMap.set(b.TYPE_ANONYMOUS,b.anonymousRole())),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"isAnonymous",value:function(){return this.roleMap.has(b.TYPE_ANONYMOUS)}},{key:"isUser",value:function(){return this.roleMap.has(b.TYPE_USER)}},{key:"isAdmin",value:function(){return this.roleMap.has(b.TYPE_ADMIN)}},{key:"equals",value:function(e){return this.roleMap.equals(e)}}]),t}(Object(fe.Record)(rr)),or={uid:"",name:"",email:"",givenName:"",familyName:"",roles:y.withAnonymous(),account:h.freeAccount(),quota:0,teamQuota:0,displayName:"",avatarUrl:"",companyName:"",jobTitle:"",activeOrganization:null,signedIn:!1},ir=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=ot.v4()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"generateDefaultAvatarUrl",value:function(){return"/avatar/".concat(this.uid,"?displayName=").concat(this.displayName)}}]),t}(Object(fe.Record)(or)),sr=xe.a.mark(ur),cr=xe.a.mark(lr),dr=xe.a.mark(mr);function ur(e){var t;return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(gn.c)(d.getInspectioUsersInfo,e.payload.userIds);case 2:return t=n.sent,n.next=5,Object(gn.c)(lr,t);case 5:case"end":return n.stop()}},sr,this)}function lr(e){var t,n,r,a,o,s,c,d,l,m,p;return xe.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=e.response,!(n=e.error)){f.next=5;break}return console.error("Request Error","Failed to laod user info",n),f.next=5,Object(gn.g)(i.Command.error("Request Error","Failed to load user info"));case 5:if(!t){f.next=40;break}r=t.data,a=Object(fe.List)(),o=!0,s=!1,c=void 0,f.prev=11,d=r[Symbol.iterator]();case 13:if(o=(l=d.next()).done){f.next=24;break}if(m=l.value,!_n(p=Vn(m))){f.next=20;break}return console.error("Failed to process IioUserInfo loaded from server",p.value,m),f.next=20,Object(gn.g)(i.Command.error("Request Error","Failed to load user info"));case 20:Tn(p)&&(a=a.push(p.value));case 21:o=!0,f.next=13;break;case 24:f.next=30;break;case 26:f.prev=26,f.t0=f.catch(11),s=!0,c=f.t0;case 30:f.prev=30,f.prev=31,o||null==d.return||d.return();case 33:if(f.prev=33,!s){f.next=36;break}throw c;case 36:return f.finish(33);case 37:return f.finish(30);case 38:return f.next=40,Object(gn.g)(u.iioUsersInfoLoaded(a));case 40:case"end":return f.stop()}},cr,this,[[11,26,30,38],[31,,33,37]])}function mr(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([s.LOAD_IIO_USERS_INFO]);case 3:e=t.sent,t.t0=e.type,t.next=t.t0===Bt?7:10;break;case 7:return t.next=9,Object(gn.f)(ur,e);case 9:return t.abrupt("break",10);case 10:t.next=0;break;case 12:case"end":return t.stop()}},dr,this)}var pr,fr,hr=function(e){return Le(Nt+"InstallUserOrganization",{organizationId:e})},gr=function(e){return Le(Nt+"SetUpImplicitOrganization",{organizationId:e})},br=function(e,t){return Le(Nt+"SetUpExplicitOrganization",{organizationId:e,name:t})},yr=function(e){return Le(Nt+"Organization",{organizationId:e})},vr=function(){return Le(Nt+"UserOrganizations",{})},Er=function(e,t,n){return Le(Nt+"InviteUserToOrganization",{organizationId:e,invitationId:t,invitedUserEmail:n})},Or=function(e,t){return Le(Nt+"RevokeUserOrganizationInvitation",{organizationId:e,invitedUserEmail:t})},xr=function(e,t){return Le(Nt+"ResendUserOrganizationInvitation",{organizationId:e,invitedUserEmail:t})},jr=function(e,t){return Le(Nt+"AcceptInvitationToOrganization",{organizationId:e,invitationId:t})},wr=function(e,t){return Le(Nt+"PromoteUserToOrganizationAdmin",{organizationId:e,userId:t})},kr=function(e,t){return Le(Nt+"DemoteUserToOrganizationMember",{organizationId:e,userId:t})},Ir=function(e,t){return Le(Nt+"RemoveUserFromOrganization",{organizationId:e,userId:t})},Sr=function(e,t){return Le(Nt+"RenameOrganization",{organizationId:e,newName:t})},Cr=function(e,t){return Le(Nt+"RemoveGuestFromOrganization",{organizationId:e,userId:t})},_r=function(e,t){return Le(Nt+"TurnGuestIntoMember",{guestId:e,organizationId:t})},Tr="@@InspectioOrganizations/SetUpExplicitOrganization",Ar="@@InspectioOrganizations/ExplicitOrganizationSetUp",Nr="@@InspectioOrganizations/ExplicitOrganizationSetUpFailed",Lr="@@InspectioOrganizations/InviteUserToOrganization",Rr="@@InspectioOrganizations/UserInvitedToOrganization",Br="@@InspectioOrganizations/RevokeUserOrganizationInvitation",Dr="@@InspectioOrganizations/ResendUserOrganizationInvitation",Pr="@@InspectioOrganizations/UserOrganizationInvitationRevoked",zr="@@InspectioOrganizations/UserOrganizationInvitationResent",Mr="@@InspectioOrganizations/AcceptInvitationToOrganization",Ur="@@InspectioOrganizations/InvitationToOrganizationAccepted",Fr="@@InspectioOrganizations/PromoteUserToOrganizationAdmin",Gr="@@InspectioOrganizations/UserPromotedToOrganizationAdmin",qr="@@InspectioOrganizations/DemoteUserToOrganizationMember",Vr="@@InspectioOrganizations/UserDemotedToOrganizationMember",Wr="@@InspectioOrganizations/RemoveUserFromOrganization",Hr="@@InspectioOrganizations/UserRemovedFromOrganization",$r="@@InspectioOrganizations/FetchOrganization",Jr="@@InspectioOrganizations/OrganizationFetched",Qr="@@InspectioOrganizations/FetchUserOrganizations",Yr="@@InspectioOrganizations/UserOrganizationsFetched",Kr="@@InspectioOrganizations/RenameOrganization",Zr="@@InspectioOrganizations/OrganizationRenamed",Xr="@@InspectioOrganizations/RemoveGuestFromOrganization",ea="@@InspectioOrganizations/GuestRemovedFromOrganization",ta="@@InspectioOrganizations/TurnGuestIntoMember",na="@@InspectioOrganizations/GuestTurnedIntoMember",ra=function(e,t){return Object(at.action)(Tr,{organizationId:e,name:t})},aa=function(e,t){return Object(at.action)(Lr,{organizationId:e,invitedUserEmail:t})},oa=function(e,t,n){return Object(at.action)(Br,{organizationId:e,invitationId:t,invitedUserEmail:n})},ia=function(e,t,n){return Object(at.action)(Dr,{organizationId:e,invitationId:t,invitedUserEmail:n})},sa=function(e,t){return Object(at.action)(Mr,{organizationId:e,invitationId:t})},ca=function(e,t){return Object(at.action)(Fr,{organizationId:e,userId:t})},da=function(e,t){return Object(at.action)(qr,{organizationId:e,userId:t})},ua=function(e,t){return Object(at.action)(Wr,{organizationId:e,userId:t})},la=function(e,t){return Object(at.action)(Kr,{organizationId:e,newName:t})},ma=function(e,t){return Object(at.action)(Xr,{organizationId:e,userId:t})},pa=function(e,t){return Object(at.action)(ta,{guestId:e,organizationId:t})},fa=function(e){return Object(at.action)(Jr,e)},ha=function(e){return Object(at.action)(Ar,e)},ga=function(e){return Object(at.action)(Nr,e)},ba=function(e){return Object(at.action)(Yr,e)},ya=function(e){return Object(at.action)(Rr,e)},va=function(e,t){return Object(at.action)(Pr,{invitation:e,organization:t})},Ea=function(e,t){return Object(at.action)(zr,{invitation:e,organization:t})},Oa=function(e){return Object(at.action)(Ur,e)},xa=function(e){return Object(at.action)(Gr,e)},ja=function(e){return Object(at.action)(Vr,e)},wa=function(e){return Object(at.action)(Hr,e)},ka=function(e){return Object(at.action)(Zr,e)},Ia=function(e){return Object(at.action)(ea,e)},Sa=function(e){return Object(at.action)(na,e)},Ca=function(e){return Object(at.action)($r,{organizationId:e})},_a=function(){return Object(at.action)(Qr,{})};(fr=pr||(pr={})).open="open",fr.acknowledged="acknowledged",fr.revoked="revoked";var Ta={uid:"",invitationId:"",invitedUserEmail:"",status:pr.open,aggregateType:"OrganizationInvitation"},Aa=function(e){return new La({uid:e.invitationId,invitationId:e.invitationId,invitedUserEmail:e.invitedUserEmail,status:pr.open,aggregateType:"OrganizationInvitation"})},Na=function(e){var t=Ln(e,[Mn("invitationId"),"invitationId missing"],[Mn("invitedUserEmail"),"invitedUserEmail missing"]);return _n(t)?t:Nn(new La(Object(Ye.a)({},Ta,e,{uid:e.invitationId})))},La=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=ot.v4()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),t}(Object(fe.Record)(Ta)),Ra={uid:"",ownerId:"",name:"",explicit:!1,memberQuota:0,boardQuota:0,members:Object(fe.List)(),admins:Object(fe.List)(),boards:Object(fe.List)(),guests:Object(fe.List)(),invitations:Object(fe.List)(),aggregateType:"Organization"},Ba=function(e){var t=Ln(e,[Mn("organizationId"),"organizationId missing"],[Mn("ownerId"),"ownerId missing in ".concat(e.organizationId)],[Mn("name"),"name missing in ".concat(e.organizationId)],[Mn("explicit"),"explicit missing in ".concat(e.organizationId)],[Mn("memberQuota"),"memberQuota missing in ".concat(e.organizationId)],[Mn("boardQuota"),"boardQuota missing in ".concat(e.organizationId)],[Mn("members"),"members missing in ".concat(e.organizationId)],[Mn("admins"),"admins missing in ".concat(e.organizationId)],[Mn("boards"),"boards missing in ".concat(e.organizationId)],[Mn("guests"),"guests missing in ".concat(e.organizationId)],[Mn("invitations"),"invitations missing in ".concat(e.organizationId)]);if(_n(t))return t;var n,r=[],a=!0,o=!1,i=void 0;try{for(var s,c=e.invitations[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){n=s.value;var d=Na(n);if(_n(d))return d;Tn(d)&&r.push(d.value)}}catch(u){o=!0,i=u}finally{try{a||null==c.return||c.return()}finally{if(o)throw i}}return Nn(new Da({uid:e.organizationId,ownerId:e.ownerId,name:e.name,explicit:e.explicit,memberQuota:e.memberQuota,boardQuota:e.boardQuota,members:Object(fe.List)(e.members),admins:Object(fe.List)(e.admins),guests:Object(fe.List)(e.guests),boards:Object(fe.List)(e.boards),invitations:Object(fe.List)(r),aggregateType:"Organization"}))},Da=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=ot.v4()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"isAdmin",value:function(e){return this.ownerId===e||this.admins.includes(e)}},{key:"setUpAsExplicit",value:function(e){return this.set("explicit",!0).set("name",e)}},{key:"inviteUser",value:function(e,t){return this.set("invitations",this.invitations.push(Aa({invitationId:e,invitedUserEmail:t})))}},{key:"promoteAdmin",value:function(e){return this.set("admins",this.admins.push(e))}},{key:"demoteToMember",value:function(e){return this.set("admins",this.admins.filter(function(t){return t!==e}))}},{key:"revokeInvitation",value:function(e){return this.set("invitations",this.invitations.filter(function(t){return t.invitationId!==e}))}},{key:"removeUser",value:function(e){var t=this;return t=(t=(t=t.set("admins",t.get("admins",Object(fe.List)()).filter(function(t){return t!==e}))).set("members",t.get("members",Object(fe.List)()).filter(function(t){return t!==e}))).set("memberQuota",t.get("memberQuota",0)+1)}},{key:"removeGuest",value:function(e){var t=this;return t=(t=t.set("guests",t.get("guests",Object(fe.List)()).filter(function(t){return t!==e}))).set("memberQuota",t.get("memberQuota",0)+1)}},{key:"turnGuestIntoMember",value:function(e){var t=this.guests.filter(function(t){return t!==e}),n=this.members.push(e);return this.set("guests",t).set("members",n)}},{key:"withNewName",value:function(e){return this.set("name",e)}}]),t}(Object(fe.Record)(Ra)),Pa={uid:"",organizationId:"",userId:"",organizationName:"",ownOrganization:!1,explicitOrganization:!1,userIsAdmin:!1,userIsGuest:!0,aggregateType:"UserOrganizationInfo"},za=function(e){var t=Ln(e,[Mn("organizationId"),"organizationId missing"],[Mn("userId"),"userId missing"],[Mn("organizationName"),"organizationName missing"],[Mn("ownOrganization"),"ownOrganization missing"],[Mn("explicitOrganization"),"explicitOrganization missing"],[Mn("userIsAdmin"),"userIsAdmin missing"],[Mn("userIsGuest"),"userIsGuest missing"]);return _n(t)?t:Nn(new Ma(Object(Ye.a)({},Pa,e,{uid:e.organizationId})))},Ma=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=ot.v4()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),t}(Object(fe.Record)(Pa)),Ua=n(66);function Fa(e,t){return e.set(t.uid,t)}function Ga(e,t){return e.set(t.uid,t)}function qa(e,t){return e.remove(t.uid)}function Va(e,t){var n=!0,r=!1,a=void 0;try{for(var o,i=t.toArray()[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){e=Ga(e,o.value)}}catch(s){r=!0,a=s}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return e}function Wa(e){return Object(fe.Map)()}var Ha=Object(fe.Map)(),$a=Object(fe.Map)(),Ja=Object(fe.Map)(),Qa=Object(Ua.combineReducers)({Organization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ha,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Jr:return Fa(e,t.payload);case Ar:case Nr:case Rr:case Gr:case Vr:case Hr:case ea:case Zr:case na:return Ga(e,t.payload);case Pr:return Ga(e,t.payload.organization);default:return e}},UserOrganizationInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ja,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Yr:return Va(e,t.payload);case Ar:var n=e.get(t.payload.uid);return n?Ga(e,n.set("organizationName",t.payload.name).set("explicitOrganization",!0)):e;case Nr:var r=e.get(t.payload.uid);return r?Ga(e,r.set("organizationName",t.payload.name).set("explicitOrganization",!1)):e;case Zr:var a=e.get(t.payload.uid);return a?Ga(e,a.set("organizationName",t.payload.name)):e;default:return e}},OrganizationInvitation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case zr:case Pr:return Va(e,Object(fe.List)([t.payload.invitation]));default:return e}}},function(){return Object(fe.fromJS)({Organization:void 0,UserOrganizationInfo:void 0,OrganizationInvitation:void 0})}),Ya=xe.a.mark(Za),Ka=xe.a.mark(Xa);function Za(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.c)(k.Api.demoteUserToOrganizationMember,e.payload.organizationId,e.payload.userId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(gn.g)(i.Command.error("Request Error","Could not demote user to organization member."));case 8:if(!n){a.next=16;break}return a.next=11,Object(gn.i)(Ei(e.payload.organizationId));case 11:return r=a.sent,a.next=14,Object(gn.g)(k.Event.userDemotedToOrganizationMember(r.demoteToMember(e.payload.userId)));case 14:return a.next=16,Object(gn.g)(i.Command.info("User demoted","The user is no longer an admin of the organization."));case 16:case"end":return a.stop()}},Ya,this)}function Xa(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([k.Type.DEMOTE_USER_TO_ORGANIZATION_MEMBER]);case 3:return e=t.sent,t.next=6,Object(gn.f)(Za,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Ka,this)}var eo=n(22),to=xe.a.mark(ro),no=xe.a.mark(function e(t){var n,r,a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.c)(E.fetchOrganization,t.payload.organizationId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(gn.g)(i.Command.error("Request Error","Could not fetch organization"));case 8:if(!r){e.next=19;break}if(!_n(a=Pn(r.data,Bn(function(e){return Ba(e)})))){e.next=14;break}return console.error("Invalid organization response: ",a.value),e.next=14,Object(gn.g)(i.Command.error("Request Error","Could not load organization"));case 14:if(!Tn(a)){e.next=19;break}return e.next=17,Object(gn.g)(j.organizationFetched(a.value));case 17:return e.next=19,Object(gn.g)(f.Query.loadUsersInfo([a.value.ownerId].concat(Object(eo.a)(a.value.members.toJS()),Object(eo.a)(a.value.guests.toJS()))));case 19:case"end":return e.stop()}},e,this)});function ro(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([O.FETCH_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(no,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},to,this)}var ao=n(187),oo=n.n(ao),io=xe.a.mark(uo),so=xe.a.mark(lo),co=!1;function uo(e){var t,n,r,a,o,s,c,d,u;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.c)(k.Api.fetchUserOrganizations);case 2:if(t=e.sent,n=t.response,!(r=t.error)){e.next=20;break}if(404!==r.status){e.next=18;break}return e.next=9,Object(gn.c)(k.Api.setUpImplicitOrganization,oo()());case 9:if(!(a=e.sent).error){e.next=13;break}return e.next=13,Object(gn.g)(i.Command.error("Request Error","Could not install user organization"));case 13:if(!a.response){e.next=16;break}return e.next=16,Object(gn.g)(k.Query.fetchUserOrganizations());case 16:e.next=20;break;case 18:return e.next=20,Object(gn.g)(i.Command.error("Request Error","Could not fetch user organizations"));case 20:if(!n){e.next=56;break}if(!_n(o=Pn(n.data,Rn([Un(),"Response data is not of type Array"]),Dn(function(e){return za(e)})))){e.next=25;break}return e.next=25,Object(gn.g)(i.Command.error("Request Error","Could not load user organizations"));case 25:if(!Tn(o)){e.next=56;break}if(!o.value.length){e.next=44;break}return s=Object(fe.List)(o.value),e.next=30,Object(gn.g)(k.Event.userOrganizationsFetched(s));case 30:return e.next=32,Object(gn.i)(T.makeGetCurrentUser());case 32:if(null!==e.sent.activeOrganization||1!==s.count()||s.first({explicitOrganization:!1}).explicitOrganization){e.next=36;break}return e.next=36,Object(gn.g)(f.Command.switchActiveOrganization(s.first({organizationId:null}).organizationId));case 36:return e.next=38,Object(gn.i)(T.makeGetCurrentUser());case 38:if(!(c=e.sent).activeOrganization){e.next=42;break}return e.next=42,Object(gn.g)(k.Query.fetchOrganization(c.activeOrganization));case 42:e.next=56;break;case 44:if(co){e.next=56;break}return co=!0,d=it.a.v4(),e.next=49,Object(gn.c)(k.Api.installUserOrganization,d);case 49:if(!(u=e.sent).error){e.next=53;break}return e.next=53,Object(gn.g)(i.Command.error("Request Error","Could not initialize organization."));case 53:if(!u.response){e.next=56;break}return e.next=56,Object(gn.g)(k.Query.fetchUserOrganizations());case 56:case"end":return e.stop()}},io,this)}function lo(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([k.Type.FETCH_USER_ORGANIZATIONS]);case 3:return e=t.sent,t.next=6,Object(gn.f)(uo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},so,this)}var mo=xe.a.mark(fo),po=xe.a.mark(ho);function fo(e){var t,n,r,a;return xe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=oo()(),o.next=3,Object(gn.c)(k.Api.inviteUserToOrganization,e.payload.organizationId,t,e.payload.invitedUserEmail);case 3:if(n=o.sent,r=n.response,!n.error){o.next=9;break}return o.next=9,Object(gn.g)(i.Command.error("Request Error","Could not invite user to organization."));case 9:if(!r){o.next=17;break}return o.next=12,Object(gn.i)(Ei(e.payload.organizationId));case 12:return a=o.sent,o.next=15,Object(gn.g)(k.Event.userInvitedToOrganization(a.inviteUser(t,e.payload.invitedUserEmail)));case 15:return o.next=17,Object(gn.g)(i.Command.info("User invited","The user was invited to the organization."));case 17:case"end":return o.stop()}},mo,this)}function ho(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([k.Type.INVITE_USER_TO_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(fo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},po,this)}var go=xe.a.mark(yo),bo=xe.a.mark(vo);function yo(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.c)(k.Api.promoteUserToOrganizationAdmin,e.payload.organizationId,e.payload.userId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(gn.g)(i.Command.error("Request Error","Could not promote user to organization admin."));case 8:if(!n){a.next=16;break}return a.next=11,Object(gn.i)(Ei(e.payload.organizationId));case 11:return r=a.sent,a.next=14,Object(gn.g)(k.Event.userPromotedToOrganizationAdmin(r.promoteAdmin(e.payload.userId)));case 14:return a.next=16,Object(gn.g)(i.Command.info("User promoted","The user is now an admin of the organization."));case 16:case"end":return a.stop()}},go,this)}function vo(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([k.Type.PROMOTE_USER_TO_ORGANIZATION_ADMIN]);case 3:return e=t.sent,t.next=6,Object(gn.f)(yo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},bo,this)}var Eo=xe.a.mark(xo),Oo=xe.a.mark(jo);function xo(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.c)(k.Api.removeGuestFromOrganization,e.payload.organizationId,e.payload.userId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(gn.g)(i.Command.error("Request Error","Could not remove guest from organization."));case 8:if(!n){a.next=16;break}return a.next=11,Object(gn.i)(Ei(e.payload.organizationId));case 11:return r=a.sent,a.next=14,Object(gn.g)(k.Event.guestRemovedFromOrganization(r.removeGuest(e.payload.userId)));case 14:return a.next=16,Object(gn.g)(i.Command.info("Guest removed","The guest no longer has access to organization boards and teams."));case 16:case"end":return a.stop()}},Eo,this)}function jo(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([k.Type.REMOVE_GUEST_FROM_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(xo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Oo,this)}var wo=xe.a.mark(Io),ko=xe.a.mark(So);function Io(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.c)(k.Api.removeUserFromOrganization,e.payload.organizationId,e.payload.userId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(gn.g)(i.Command.error("Request Error","Could not remove user from organization."));case 8:if(!n){a.next=16;break}return a.next=11,Object(gn.i)(Ei(e.payload.organizationId));case 11:return r=a.sent,a.next=14,Object(gn.g)(k.Event.userRemovedFromOrganization(r.removeUser(e.payload.userId)));case 14:return a.next=16,Object(gn.g)(i.Command.info("User removed","The user is no longer member of the organization."));case 16:case"end":return a.stop()}},wo,this)}function So(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([k.Type.REMOVE_USER_FROM_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(Io,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},ko,this)}var Co=xe.a.mark(To),_o=xe.a.mark(Ao);function To(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.c)(k.Api.renameOrganization,e.payload.organizationId,e.payload.newName);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(gn.g)(i.Command.error("Request Error","Could not rename organization."));case 8:if(!n){a.next=16;break}return a.next=11,Object(gn.i)(Ei(e.payload.organizationId));case 11:return r=a.sent,a.next=14,Object(gn.g)(k.Event.organizationRenamed(r.withNewName(e.payload.newName)));case 14:return a.next=16,Object(gn.g)(i.Command.info("Organization renamed","Renaming organization was successful."));case 16:case"end":return a.stop()}},Co,this)}function Ao(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([k.Type.RENAME_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(To,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},_o,this)}var No=xe.a.mark(Ro),Lo=xe.a.mark(Bo);function Ro(e){var t,n,r,a;return xe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(gn.c)(k.Api.resendUserOrganizationInvitation,e.payload.organizationId,e.payload.invitedUserEmail);case 2:if(t=o.sent,n=t.response,!t.error){o.next=8;break}return o.next=8,Object(gn.g)(i.Command.error("Request Error","Could not resend invitation."));case 8:if(!n){o.next=17;break}return r=Aa({invitationId:e.payload.invitationId,invitedUserEmail:e.payload.invitedUserEmail}),o.next=12,Object(gn.i)(Ei(e.payload.organizationId));case 12:return a=o.sent,o.next=15,Object(gn.g)(k.Event.userOrganizationInvitationResent(r,a));case 15:return o.next=17,Object(gn.g)(i.Command.info("User invited","Invitation was sent again."));case 17:case"end":return o.stop()}},No,this)}function Bo(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([k.Type.RESEND_USER_ORGANIZATION_INVITATION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(Ro,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Lo,this)}var Do=xe.a.mark(zo),Po=xe.a.mark(Mo);function zo(e){var t,n,r,a;return xe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(gn.c)(k.Api.revokeUserOrganizationInvitation,e.payload.organizationId,e.payload.invitedUserEmail);case 2:if(t=o.sent,n=t.response,!t.error){o.next=8;break}return o.next=8,Object(gn.g)(i.Command.error("Request Error","Could not revoke invitation."));case 8:if(!n){o.next=15;break}return r=Aa({invitationId:e.payload.invitationId,invitedUserEmail:e.payload.invitedUserEmail}),o.next=12,Object(gn.i)(Ei(e.payload.organizationId));case 12:return a=o.sent,o.next=15,Object(gn.g)(k.Event.userOrganizationInvitationRevoked(r.set("status",pr.revoked),a.revokeInvitation(r.invitationId)));case 15:case"end":return o.stop()}},Do,this)}function Mo(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([k.Type.REVOKE_USER_ORGANIZATION_INVITATION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(zo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Po,this)}var Uo=xe.a.mark(Go),Fo=xe.a.mark(qo);function Go(e){var t,n,r,a;return xe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(gn.i)(Ei(e.payload.organizationId));case 2:if(!(t=o.sent)){o.next=20;break}return n=t.setUpAsExplicit(e.payload.name),o.next=7,Object(gn.g)(k.Event.explicitOrganizationSetUp(n));case 7:return o.next=9,Object(gn.c)(k.Api.setUpExplicitOrganization,e.payload.organizationId,e.payload.name);case 9:if(r=o.sent,a=r.response,!r.error){o.next=17;break}return o.next=15,Object(gn.g)(k.Event.explicitOrganizationSetUpFailed(t));case 15:return o.next=17,Object(gn.g)(i.Command.error("Request Error","Could not create organization."));case 17:if(!a){o.next=20;break}return o.next=20,Object(gn.g)(i.Command.info("Organization created","Organization created successfully"));case 20:case"end":return o.stop()}},Uo,this)}function qo(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([k.Type.SET_UP_EXPLICIT_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(Go,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Fo,this)}var Vo=xe.a.mark(Ho),Wo=xe.a.mark($o);function Ho(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.i)(Ei(e.payload.organizationId));case 2:if(!(t=a.sent)){a.next=17;break}return a.next=6,Object(gn.c)(k.Api.turnGuestIntoMember,e.payload.guestId,e.payload.organizationId);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(gn.g)(i.Command.error("Request Error","Could not turn guest into member."));case 12:if(!r){a.next=17;break}return a.next=15,Object(gn.g)(i.Command.info("Member added","Guest turned into member."));case 15:return a.next=17,Object(gn.g)(k.Event.guestTurnedIntoMember(t.turnGuestIntoMember(e.payload.guestId)));case 17:case"end":return a.stop()}},Vo,this)}function $o(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([k.Type.TURN_GUEST_INTO_MEMBER]);case 3:return e=t.sent,t.next=6,Object(gn.f)(Ho,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Wo,this)}var Jo="inspectioOrganizations",Qo=xe.a.mark(Ko),Yo=xe.a.mark(Zo);function Ko(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.i)(Ii());case 2:return t=a.sent,a.next=5,Object(gn.c)(f.Api.switchActiveOrganization,t.uid,e.payload.organizationId);case 5:if(n=a.sent,r=n.response,!n.error){a.next=11;break}return a.next=11,Object(gn.g)(i.Command.error("Request Error","Could not switch active organization."));case 11:if(!r){a.next=20;break}return a.next=14,Object(gn.g)(k.Query.fetchUserOrganizations());case 14:return t=t.set("activeOrganization",e.payload.organizationId),a.next=17,Object(gn.g)(f.Event.activeOrganizationSwitched(t));case 17:if(!e.payload.organizationId){a.next=20;break}return a.next=20,Object(gn.g)(k.Query.fetchOrganization(e.payload.organizationId));case 20:case"end":return a.stop()}},Qo,this)}function Zo(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([f.Type.SWITCH_ACTIVE_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(Ko,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Yo,this)}var Xo=function(e,t){return e.getIn(["inspectioUsers","iioUsersInfo",t])},ei=function(e){return function(t){return Xo(t,e)}},ti=function(e,t){return Object(fe.List)(e.getIn(["inspectioUsers","iioUsersInfo"]).toIndexedSeq().toArray())||Object(fe.List)()},ni=function(){return Object(bt.a)([ti],function(e){return e})},ri=function(e){return Object(bt.a)([ti],function(t){return t.filter(function(t){return e.contains(t.userId)})})},ai=xe.a.mark(ii),oi=xe.a.mark(si);function ii(e){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.i)(T.currentUserSelector,void 0);case 2:if(!(t=e.sent).displayName){e.next=6;break}return e.next=6,Object(gn.c)(d.syncUsername,t.uid,t.displayName,t.email,t.avatarUrl,t.jobTitle);case 6:case"end":return e.stop()}},ai,this)}function si(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([s.SIGN_IN]);case 3:return e=t.sent,t.next=6,Object(gn.f)(ii,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},oi,this)}var ci=xe.a.mark(mi),di=xe.a.mark(pi),ui=xe.a.mark(fi),li=xe.a.mark(hi);function mi(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.i)(T.currentUserSelector,void 0);case 2:if(!(t=a.sent).name){a.next=19;break}return a.next=6,Object(gn.c)(d.updateProfile,t);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(gn.g)(i.Command.error("Request Error","Could not update profile with new profile picture."));case 12:if(!r){a.next=19;break}if(!t.displayName){a.next=16;break}return a.next=16,Object(gn.c)(d.syncUsername,t.uid,t.displayName,t.email,t.avatarUrl,t.jobTitle);case 16:return a.next=18,Object(gn.g)(i.Command.info("Profile Saved","Your profile has been saved"));case 18:e.payload.successCb();case 19:case"end":return a.stop()}},ci,this)}function pi(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([s.UPDATE_PROFILE]);case 3:return e=t.sent,t.next=6,Object(gn.f)(mi,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},di,this)}function fi(e){var t,n,r,a;return xe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(gn.i)(T.currentUserSelector,void 0);case 2:if(t=o.sent,n=e.payload.password,!t.uid){o.next=16;break}return o.next=7,Object(gn.c)(d.updatePassword,t.uid,n);case 7:if(r=o.sent,a=r.response,!r.error){o.next=13;break}return o.next=13,Object(gn.g)(i.Command.error("Request Error","Could not change password."));case 13:if(!a){o.next=16;break}return o.next=16,Object(gn.g)(i.Command.info("Password changed","Password was changed successfully."));case 16:case"end":return o.stop()}},ui,this)}function hi(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([s.UPDATE_PASSWORD]);case 3:return e=t.sent,t.next=6,Object(gn.f)(fi,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},li,this)}var gi=xe.a.mark(yi),bi=xe.a.mark(vi);function yi(e){var t;return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(gn.g)(u.userSettingUpserted(e.payload.key,e.payload.value));case 2:return n.next=4,Object(gn.c)(d.upsertUserSetting,e.payload.key,e.payload.value);case 4:t=n.sent,t.response,t.error&&console.log("Failed updating user setting for ".concat(e.payload.key," and ").concat(e.payload.value));case 8:case"end":return n.stop()}},gi,this)}function vi(){var e,t;return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(gn.a)(s.UPSERT_USER_SETTING);case 2:e=n.sent;case 3:return n.next=6,Object(gn.k)(e);case 6:return t=n.sent,n.next=9,Object(gn.c)(yi,t);case 9:n.next=3;break;case 11:case"end":return n.stop()}},bi,this)}var Ei=function(e){return function(t){return e?function(e,t){return e.getIn([Jo,"Organization",t])}(t,e):void 0}},Oi=function(e){return e.getIn([Jo,"Organization"]).toList()},xi=1,ji=function(){function e(){var t=this;Object(Be.a)(this,e),this.initializationPromise=void 0,this.db=void 0,this.initializationPromise=new Promise(function(e,n){var r=indexedDB.open("insp_standalone",xi);r.onupgradeneeded=function(e){t.updateDatabaseToLatestVersion(r.result,e.oldVersion)},r.onerror=function(){n("IndexedDB could not be initialized")},r.onsuccess=function(){t.db=r.result,e()}})}return Object(De.a)(e,[{key:"get",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(je.a)(xe.a.mark(function e(a,o){var i,s;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.db.transaction(t,"readonly"),e.next=3,i.objectStore(t).get(n);case 3:(s=e.sent).onsuccess=function(){return a(s.result)},s.onerror=function(){return o()};case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(je.a)(xe.a.mark(function e(r,a){var o,i;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.db.transaction(t,"readonly"),e.next=3,o.objectStore(t).getAll();case 3:(i=e.sent).onsuccess=function(){return r(i.result)},i.onerror=function(){return a()};case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(je.a)(xe.a.mark(function e(a,o){var i,s;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.db.transaction(t,"readwrite"),(s=i.objectStore(t).add(n)).onsuccess=function(){return a()},s.onerror=function(){return o()};case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(je.a)(xe.a.mark(function e(a,o){var i,s;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.db.transaction(t,"readwrite"),(s=i.objectStore(t).put(n)).onsuccess=function(){return a()},s.onerror=function(){return o()};case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(je.a)(xe.a.mark(function e(a,o){var i,s;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.db.transaction(t,"readwrite"),(s=i.objectStore(t).delete(n)).onsuccess=function(){return a()},s.onerror=function(){return o()};case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"assertDBInitialized",value:function(){var e=Object(je.a)(xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializationPromise;case 2:if(this.db){e.next=4;break}throw new Error("IndexedDB is not initialized");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateDatabaseToLatestVersion",value:function(e,t){switch(console.log("Starting upgrade for DB insp_standalone from version ".concat(t," to ").concat(xi)),t){case 0:e.createObjectStore("boards",{keyPath:"boardId"}),e.createObjectStore("userSettings",{keyPath:"key"})}}}]),e}(),wi=new(function(){function e(t){Object(Be.a)(this,e),this.db=void 0,this.db=t,this.getBoards=this.getBoards.bind(this),this.getBoard=this.getBoard.bind(this),this.updateBoard=this.updateBoard.bind(this),this.addBoard=this.addBoard.bind(this),this.deleteBoard=this.deleteBoard.bind(this),this.getUserSettings=this.getUserSettings.bind(this),this.setUserSetting=this.setUserSetting.bind(this)}return Object(De.a)(e,[{key:"getUser",value:function(){return{userId:"f1c1512d-e1b9-44c2-940c-3f7cade64a29"}}},{key:"getBoards",value:function(){var e=Object(je.a)(xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.getAll("boards");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getBoard",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.get("boards",t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=null;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateBoard",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.put("boards",t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addBoard",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.add("boards",t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteBoard",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.delete("boards",t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getUserSettings",value:function(){var e=Object(je.a)(xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.getAll("userSettings");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setUserSetting",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.get("userSettings",t.key);case 2:if(!e.sent){e.next=7;break}return e.next=5,this.db.put("userSettings",t);case 5:e.next=9;break;case 7:return e.next=9,this.db.add("userSettings",t);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}())(new ji),ki=function(e,t){return e.getIn(["inspectioUsers","users","currentUser"])},Ii=function(){return Object(bt.a)([ki],function(e){return e})},Si=function(){var e=function(e){return Oi(e)};return Object(bt.a)([ki,e],function(e,t){return-1})},Ci=n(288),_i=n(287),Ti=n.n(_i),Ai=(n(842),n(1395)),Ni=n(1201),Li={aspect:1,unit:"px",x:0,y:0,width:150,height:150},Ri=function(e){var t=Object(he.useState)(Li),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(1),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)(void 0),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(he.useState)(void 0),f=Object(Ke.a)(p,2),h=f[0],g=f[1],b=function(){e.onClose(),y()},y=function(){m(void 0),g(void 0),a(Li)};return he.createElement(Ai.a,{open:e.open,onClose:b,closeIcon:!0},he.createElement(Ai.a.Header,null,e.t("insp.user.avatar_upload.select_photo")),he.createElement(Ai.a.Content,{image:!0},he.createElement(Ci.a,{onDrop:function(e){m(e[0]),g(URL.createObjectURL(e[0]))}},function(t){var n=t.getRootProps,o=t.getInputProps;return he.createElement("section",{style:{height:"410px",width:"100%"}},he.createElement("div",Object.assign({},n(),{style:{width:"100%",height:"100%",padding:"1px"}}),h?he.createElement(Ti.a,{style:{maxWidth:"100%",maxHeight:"400px"},imageStyle:{maxWidth:"100%",maxHeight:"400px"},src:h,crop:r,onChange:function(e){return a(e)},onImageLoaded:function(e){return c(e.width/e.naturalWidth)}}):he.createElement("div",null,he.createElement("input",o()),he.createElement("p",null,e.t("insp.user.avatar_upload.drag_and_drop_info")))))})),he.createElement(Ai.a.Actions,null,he.createElement(Ni.a,{children:e.t("app.form.cancel"),onClick:b}),he.createElement(Ni.a,{primary:!0,children:e.t("app.form.save"),onClick:function(){e.onUpload(l,{x:r.x/s,y:r.y/s,width:r.width/s,height:r.height/s}),y()}})))},Bi=n(71),Di=Object(Ue.b)()(Object(Bi.reduxForm)({form:"UserProfileEditForm",enableReinitialize:!0})(function(e){return ge.a.createElement("form",{className:"ui form",onSubmit:e.handleSubmit},ge.a.createElement("div",{className:"field"},ge.a.createElement("label",null,e.t("insp.user.form.labels.email")),ge.a.createElement(Bi.Field,{name:"email",component:"input",type:"text",placeholder:e.t("insp.user.form.fields.email")})),ge.a.createElement("div",{className:"field"},ge.a.createElement("label",null,e.t("insp.user.form.labels.display_name")),ge.a.createElement(Bi.Field,{name:"displayName",component:"input",type:"text",placeholder:e.t("insp.user.form.fields.display_name")})),ge.a.createElement("div",{className:"field"},ge.a.createElement("label",null,e.t("insp.user.form.labels.company")),ge.a.createElement(Bi.Field,{name:"companyName",component:"input",type:"text",placeholder:e.t("insp.user.form.fields.company")})),ge.a.createElement("div",{className:"field"},ge.a.createElement("label",null,e.t("insp.user.form.labels.position")),ge.a.createElement(Bi.Field,{name:"jobTitle",component:"input",type:"text",placeholder:e.t("insp.user.form.fields.position")})),ge.a.createElement("div",{className:"field"},ge.a.createElement(Ni.a,{primary:!0,type:"submit",className:"bottom aligned"},e.t("app.form.save")),ge.a.createElement(qe.Link,{to:jt,className:"ui basic button noborder"},e.t("app.form.cancel"))))})),Pi=Object(Ue.b)()(Object(Bi.reduxForm)({form:"UserProfilePasswordForm",enableReinitialize:!1})(function(e){return ge.a.createElement("form",{className:"ui form"+(e.showErrorMessage?" error":""),onSubmit:e.handleSubmit},ge.a.createElement("div",{className:"field"},ge.a.createElement("label",null,e.t("insp.user.form.labels.password1")),ge.a.createElement(Bi.Field,{name:"password1",component:"input",type:"password"})),ge.a.createElement("div",{className:"field"},ge.a.createElement("label",null,e.t("insp.user.form.labels.password2")),ge.a.createElement(Bi.Field,{name:"password2",component:"input",type:"password"})),ge.a.createElement(nt.a,{error:!0,header:e.t("insp.user.change_password.passwords_not_matching_title"),content:e.t("insp.user.change_password.passwords_not_matching_text")}),ge.a.createElement("div",{className:"field"},ge.a.createElement(Ni.a,{primary:!0,type:"submit",className:"bottom aligned"},e.t("app.form.change"))))})),zi=Object(Ue.b)()(Object(Ge.o)(function(e){var t=Object(Fe.useDispatch)(),n=Object(he.useState)(!1),r=Object(Ke.a)(n,2),a=r[0],o=r[1],s=Object(he.useState)(!1),c=Object(Ke.a)(s,2),u=c[0],l=c[1],m=Object(he.useState)(!1),p=Object(Ke.a)(m,2),f=p[0],h=p[1],g=Object(Fe.useSelector)(Ii());rt(function(){o(!1)});var b=function(){t(Wt(g.merge({avatarUrl:"/avatar/"+g.uid+"?displayName="+encodeURI(g.displayName)+"&timestamp="+Date.now()}),function(){}))};return he.createElement(Ve.a,null,he.createElement(Xe.a,{stackable:!0},he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,{width:"2",className:"tabletHidden"}),he.createElement(Xe.a.Column,{mobile:"16",tablet:"16",computer:"12"},he.createElement(et.a,{as:"h1",icon:!0,textAlign:"center"},he.createElement(tt.a,{open:a,icon:!1},he.createElement(tt.a.Menu,null,he.createElement(tt.a.Item,{text:e.t("app.form.upload"),onClick:function(){return l(!0)}}),he.createElement(tt.a.Item,{text:e.t("app.form.delete"),onClick:function(){d.deleteAvatar(g.uid).then(function(){b()}).catch(function(){t(i.Command.error(e.t("insp.user.avatar_upload.deletion_failed_title"),e.t("insp.user.avatar_upload.deletion_failed_text")))}).finally(function(){o(!1)})}}))),he.createElement("img",{style:{cursor:"pointer"},onClick:function(e){e.stopPropagation(),o(!a)},className:"ui circular image",src:g.avatarUrl}),he.createElement(et.a.Content,null,e.t("insp.user.profile_headline",{user_name:g.displayName}),he.createElement(et.a.Subheader,null,e.t("insp.user.profile_subline")))))),he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,{width:"2",className:"tabletHidden"}),he.createElement(Xe.a.Column,{mobile:"16",tablet:"16",computer:"12"},he.createElement("div",{className:"ui segments"},he.createElement("div",{className:"ui segment"},he.createElement(Di,{initialValues:Object(fe.fromJS)(g.toJS()),onSubmit:function(n){!function(e,n){var r=g.merge(e.toJS());t(Wt(r,function(){return n.history.push(jt)}))}(n,e)}})))))),he.createElement(Xe.a,{stackable:!0},he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,{width:"2",className:"tabletHidden"}),he.createElement(Xe.a.Column,{mobile:"16",tablet:"16",computer:"12"},he.createElement("div",{className:"ui segments"},he.createElement("div",{className:"ui segment"},he.createElement(Pi,{initialValues:Object(fe.fromJS)({password1:"",password2:""}),onSubmit:function(e){!function(e){var n=Object(Ye.a)({},{password1:"",password2:""},e.toJS());n.password1===n.password2?(h(!1),t(Ht(n.password1)),t(Object(Ze.a)("UserProfilePasswordForm"))):h(!0)}(e)},showErrorMessage:f})))))),he.createElement(Xe.a,{stackable:!0},he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,{width:"2",className:"tabletHidden"}),he.createElement(Xe.a.Column,{mobile:"16",tablet:"16",computer:"12"},he.createElement("div",{className:"ui segments"},he.createElement("div",{className:"ui segment"},he.createElement(nt.a,null,he.createElement(nt.a.Header,null,e.t("insp.user.delete_account.headline")),he.createElement(nt.a.Content,null,e.t("insp.user.delete_account.message"),"\xa0",he.createElement("a",{href:"mailto:support@prooph-board.com?subject=Please delete my account&body=Hi, can you please delete my account: "+g.uid+". Thank you, "+g.displayName},"support@prooph-board.com")))))))),he.createElement(Ri,{t:e.t,open:u,onClose:function(){l(!1),o(!1)},onUpload:function(n,r){var a=new FormData;a.append("avatar_file",n),a.append("crop",JSON.stringify(r)),d.uploadAvatar(g.uid,a).then(function(){b()}).catch(function(){t(i.Command.error(e.t("insp.user.avatar_upload.upload_failed_title"),e.t("insp.user.avatar_upload.upload_failed_text")))}).finally(function(){l(!1),o(!1)})}}))})),Mi="InspectIO.",Ui="@@InspectioBoards/SaveBoard",Fi="@@InspectioBoards/RenameBoard",Gi="@@InspectioBoards/ChangeBoardAbbreviation",qi="@@InspectioBoards/SetBoardTags",Vi="@@InspectioBoards/ChangeResponsibleTeam",Wi="@@InspectioBoards/ToggleCodySuggestEnabled",Hi="@@InspectioBoards/ToggleEventModelingEnabled",$i="@@InspectioBoards/ImportNewBoard",Ji="@@InspectioBoards/ImportExistingBoard",Qi="@@InspectioBoards/AddBoard",Yi="@@InspectioBoards/AddBoards",Ki="@@InspectioBoards/ForceUpdateBoards",Zi="@@InspectioBoards/SetBoardToSnapshot",Xi="@@InspectioBoards/SetBoardDetailsFetched",es="@@InspectioBoards/ConfirmDeleteBoard",ts="@@InspectioBoards/AbortBoardDeletion",ns="@@InspectioBoards/DeleteBoard",rs="@@InspectioBoards/ShareBoard",as="@@InspectioBoards/ResendBoardInvitation",os="@@InspectioBoards/RevokeBoardInvitation",is="@@InspectioBoards/RevokeAccessToBoard",ss="@@InspectioBoards/ChangeBoardPermissions",cs="@@InspectioBoards/AdminChangeTeamBoardPermissions",ds="@@InspectioBoards/TriggerImportBoard",us="@@InspectioBoards/TriggerExportBoard",ls="@@IspectioBoards/ToggleBoardHistory",ms="@@IspectioBoards/ToggleElementDetails",ps="@@InspectioBoards/ToggleCodyConsole",fs="@@InspectioBoards/TogglePlayshotModal",hs="@@InspectioBoards/ToggleTimerModal",gs="@@InspectioBoards/ToggleVideoSession",bs="@@InspectioBoards/AppendHistoryEntries",ys="@@InspectioBoards/PrependHistoryEntries",vs="@@InspectioBoards/ClearBoardHistory",Es="@@InspectioBoards/LoadFirstBoardHistoryChunk",Os="@@InspectioBoards/LoadNextBoardHistoryChunk",xs="@@InspectioBoards/SetNoMoreHistoryAvailable",js="@@InspectioBoards/SetIsLoadingHistory",ws="@@InspectioBoards/UpdateBoardElementsTree",ks="@@InspectioBoards/CreateBoardClient",Is="@@InspectioBoards/RemoveBoardClient",Ss="@@InspectioBoards/ResetBoardClientSecret",Cs="@@InspectioBoards/SetStickyTemplate",_s="@@InspectioBoards/UpdateStickyAdvancedConfig",Ts="@@InspectioBoards/ImportStickyTemplates",As="@@InspectioBoards/ShareBoardWithOrganizationMembers",Ns="@@InspectioBoards/ShareBoardWithAnyone",Ls="@@InspectioBoards/OpenElementsDetails",Rs="@@InspectioBoards/FilterBoardOverview",Bs="@@InspectioBoards/SortBoardOverview",Ds="@@InspectioBoards/FilterBoardOverviewByResponsibleTeam",Ps="@@InspectioBoards/HideSharedBoardsOnOverview",zs="@@InspectioBoards/HideOwnBoardsOnOverview",Ms="@@InspectioBoards/FilterElementsTree",Us="@@InspectioBoards/MoveUserBoardToOrganization",Fs="@@InspectioBoards/DismissMaintenanceMessage",Gs="@@InspectioBoards/RemoteBoardChanged",qs="@@InspectioBoards/LocalBoardChanged",Vs="@@InspectioBoards/BoardImportStarted",Ws="@@InspectioBoards/BoardImported",Hs="@@InspectioBoards/BoardExported",$s="@@InspectioBoards/BoardInitialized",Js="@@InspectioBoards/LocalBoardUpdatedWithRemoteChange",Qs="@@InspectioBoards/BoardInvitationSent",Ys="@@InspectioBoards/BoardInvitationResent",Ks="@@InspectioBoards/BoardInvitationRevoked",Zs="@InspectioBoards/BoardAccessRevoked",Xs="@@InspectioBoards/BoardPermissionsChanged",ec="@@InspectioBoards/TeamBoardPermissionsChanged",tc="@@InspectioBoards/BoardPermissionsForUsersFetched",nc="@@InspectioBoards/BoardPermissionsForTeamsFetched",rc="@@InspectioBoards/OpenBoardInvitationsFetched",ac="@@InspectioBoards/PlayshotSummaryListFetched",oc="@@InspectioBoards/ActiveGraphElementChanged",ic="@@InspectioBoards/ActiveGraphElementLabelChanged",sc="@@InspectioBoards/ActiveGraphElementMetadataChanged",cc="@@InspectioBoards/BoardGraphElementsFetched",dc="@@InspectioBoards/BoardClientFetched",uc="@@InspectioBoards/BoardClientNotConfigured",lc="@@InspectioBoards/BoardClientSecretFetched",mc="@@InspectioBoards/BoardStickyTemplatesFetched",pc="@@InspectioBoards/StickyTemplateSet",fc="@@InspectioBoards/StickyAdvancedConfigUpdated",hc="@@InspectioBoards/StickyTemplatesImported",gc="@@InspectioBoards/UserBoardMovedToOrganization",bc="@@InspectioBoards/InitialBoardListLoaded",yc="@@InspectioBoards/BoardSharedWithOrganizationMembers",vc="@@InspectioBoards/BoardSharedWithAnyone",Ec="@@InspectioBoards/RunCodyOnChanged",Oc="@@InspectioBoards/StartFetchUserBoards",xc="@@InspectioBoards/FetchUserBoards",jc="@@InspectioBoards/FetchUserBoard",wc="@@InspectioBoards/BoardPermissionsForUsers",kc="@@InspectioBoards/BoardPermissionsForTeams",Ic="@@InspectioBoards/FetchOpenBoardInvitations",Sc="@@InspectioBoards/BoardGraphElements",Cc="@@InspectioBoards/FetchBoardClient",_c="@@InspectioBoards/FetchBoardClientSecret",Tc="@@InspectioBoards/FetchBoardStickyTemplates",Ac="@@InspectioBoards/FetchPlayshotSummaryList",Nc=n(39);function Lc(e,t,n){return Object(Nc.stringify)(e,t,n)}function Rc(e,t,n){return Object(Nc.parse)(e,t,n)}function Bc(e){return Rc(Lc(e,null,2))}var Dc,Pc,zc={uid:"",aggregateType:"Playshot",playshotId:"",boardId:"",name:"",savedAt:"",savedBy:"",playConfig:{appName:"Cody Play",defaultService:"App",pages:{},views:{},commands:{},commandHandlers:{},events:{},eventReducers:{},queries:{},resolvers:{},eventPolicies:{},types:{},layout:"prototype",theme:{},personas:[],definitions:{}},playData:{}},Mc=function(e){var t=Ln(e,[Mn("playshotId"),"playshotId missing"],[Mn("name"),"boardId missing"],[Mn("savedAt"),"boardId missing"],[Mn("savedBy"),"boardId missing"],[Mn("playConfig"),"playConfig missing"],[Fn("playConfig"),"playConfig is not a valid JSON string"],[Fn("playData"),"playData is not a valdi JSON string"]);return _n(t)?t:Nn(new Uc(Object(Ye.a)({},zc,e,{uid:e.playshotId,playConfig:Rc(e.playConfig),playData:JSON.parse(e.playData)})))},Uc=function(e){function t(e){return Object(Be.a)(this,t),""!==e.playshotId&&(e.uid=e.playshotId),""===e.uid&&""===e.playshotId&&(e.uid=ot.v4(),e.playshotId=e.uid),""===e.savedAt&&(e.savedAt=(new Date).toISOString()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),t}(Object(fe.Record)(zc)),Fc=function(){var e=Object(je.a)(xe.a.mark(function e(t){var n;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Vc(t.boardId)).push(Object(Ye.a)({},t,{savedAt:(new Date).toISOString(),savedBy:wi.getUser().userId})),localStorage.setItem("cody_playshots_"+t.boardId,Lc(n)),e.abrupt("return",!0);case 7:return e.abrupt("return",Rd(t).then(function(e){return!e.error}));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Gc=function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r,a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vc(n),a=r.filter(function(e){return e.playshotId!==t}),localStorage.setItem("cody_playshots_"+n,Lc(a)),e.abrupt("return",!0);case 7:return e.abrupt("return",Bd(t,n).then(function(e){return!e.error}));case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),qc=function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r,a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vc(t),a=r.find(function(e){return e.playshotId===n})){e.next=5;break}throw new Error("Playshot with id ".concat(n," not found in local storage"));case 5:return e.abrupt("return",new Uc(a));case 8:return e.abrupt("return",Pd(n).then(function(e){if(e.error)throw console.error(e.error),new Error("Playshot with id ".concat(n," could not be loaded"));var t=Mc(e.response.data);if(_n(t))throw new Error("Failed to parse playshot response: ".concat(t.value));return t.value}));case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),Vc=function(e){var t="cody_playshots_"+e,n=localStorage.getItem(t);if(n)try{return Rc(n)}catch(r){console.error("Failed to parse playshots from local storage: ",r)}return[]},Wc=function(){function e(t,n,r){Object(Be.a)(this,e),this.name=void 0,this.playTab=void 0,this.sync=!1,this.playUrl=void 0,this.boardId=void 0,this.playCommandListener=void 0,this.connected=!1,this.pendingMessages=[],this.name=t,this.playUrl=n,this.boardId=r}return Object(De.a)(e,[{key:"isSyncEnabled",value:function(){return this.sync}},{key:"enableSync",value:function(){this.sync=!0}},{key:"sendMessage",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.postMessage(t,n));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncDeletedNodes",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.postMessage(t,n));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncNodes",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.postMessage(t,n));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"fullSync",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.postMessage("FullSync",n));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"postMessage",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r,a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reconnectIfNeeded();case 2:return r=this.makeMessage(t,n),a=this.attachListener(r),this.playTab&&this.connected?this.playTab.postMessage(Lc(r),this.playUrl):(console.log("[CodyPlayServer] server not ready. Going to queue message: ",r),this.pendingMessages.push(r)),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"reconnectIfNeeded",value:function(){var e=Object(je.a)(xe.a.mark(function e(){var t,n=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.playTab||this.playTab.closed){e.next=2;break}return e.abrupt("return");case 2:if(this.connected=!1,this.playCommandListener?window.removeEventListener("message",this.playCommandListener):this.playCommandListener=function(e){if(e.origin===n.playUrl)try{var t=Rc(e.data);t.command&&"SavePlayshot"===t.command&&n.handleSavePlayshot(t.payload)}catch(r){console.error("[CodyPlayServer] Failed to parse Cody Play command",r)}},t=window.open(this.playUrl+"?board=".concat(this.boardId),"CodyPlay")){e.next=7;break}throw new Error("Failed to open Cody Play tab. Probably blocked by browser. Please check your browser settings and plugins like AdBlock.");case 7:return this.playTab=t,e.abrupt("return",new Promise(function(e){window.addEventListener("message",function t(r){if(r.origin===n.playUrl){try{var a=JSON.parse(r.data);if(!a.ping)return;if("[CodyMessageServer]"!==a.ping)return}catch(i){return}console.log("[CodyPlayServer] connected"),n.connected=!0;var o=n.pendingMessages;n.pendingMessages=[],o.forEach(function(e){console.log("[CodyPlayServer] Sending queued message: ",e),n.playTab.postMessage(Lc(e),n.playUrl)}),window.removeEventListener("message",t),n.playCommandListener&&window.addEventListener("message",n.playCommandListener),e()}})}));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"makeMessage",value:function(e,t){return{messageId:oo()(),messageName:e,payload:t}}},{key:"handleSavePlayshot",value:function(e){var t=this;console.log("[CodyPlayServer] Received a playshot: ",e),Fc(e).then(function(n){var r={playshotId:e.playshotId,success:n};t.postMessage("PlayshotSaved",r).then(function(e){return console.log(e)}).catch(function(e){console.error(e)})}).catch(function(e){console.error(e)})}},{key:"attachListener",value:function(e){var t=this;return new Promise(function(n){window.addEventListener("message",function r(a){if(a.origin===t.playUrl){var o=Rc(a.data);o.responseTo&&o.responseTo===e.messageId&&(window.removeEventListener("message",r),n(o.codyResponse))}})})}}]),e}(),Hc=function(e,t,n,r,a,o){var i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];return Le(Mi+"InstallOrganizationBoard",{organizationId:e,boardId:t,boardName:n,boardAbbreviation:r,tags:a,responsibleTeam:o,codySuggestEnabled:i,eventModelingEnabled:s})},$c=function(e,t){return Le(Mi+"RenameBoard",{boardId:e,name:t})},Jc=function(e,t){return Le(Mi+"ToggleCodySuggest",{boardId:e,codySuggestEnabled:t})},Qc=function(e,t){return Le(Mi+"ToggleEventModeling",{boardId:e,eventModelingEnabled:t})},Yc=function(e,t){return Le(Mi+"ChangeBoardAbbreviation",{boardId:e,nameAbbreviation:t})},Kc=function(e,t){return Le(Mi+"SetBoardTags",{boardId:e,tags:t.toJSON()})},Zc=function(e,t){return Le(Mi+"ChangeResponsibleTeam",{boardId:e,responsibleTeam:t||null})},Xc=function(e){return Le(Mi+"DeleteBoard",{boardId:e})},ed=function(e,t,n){return Le(Mi+"TakeBoardSnapshot",{boardId:e,boardVersion:{userId:t.userId,version:t.version},content:n})},td=function(e,t,n){return Le(Mi+"ShareBoardWithUser",{boardId:e,invitedUser:t,boardPermissions:n||{writeAccess:!0,readAccess:!0,adminAccess:!1}})},nd=function(e){return Le(Mi+"ResendBoardInvitation",{invitationId:e})},rd=function(e){return Le(Mi+"RevokeBoardInvitation",{invitationId:e})},ad=function(e){return Le(Mi+"AcknowledgeInvitation",{invitationId:e})},od=function(e,t){return Le(Mi+"RevokeAccessToBoard",{boardId:e,userId:t})},id=function(e,t,n){return Le(Mi+"ChangeBoardPermissions",{boardId:e,userId:t,boardPermissions:n})},sd=function(e,t,n){return Le(Mi+"AdminChangeTeamBoardPermissions",{boardId:e,teamId:t,boardPermissions:n})},cd=function(e){return Le(Mi+"UserBoard",{boardId:e})},dd=function(){return Le(Mi+"UserBoards",{})},ud=function(e,t){return Le(Mi+"BoardHistory",{boardId:e,fromBoardVersion:t.toJSON()})},ld=function(e,t){return Le(Mi+"BoardHistory",{boardId:e,fromBoardVersion:t.toJSON(),mode:"newer"})},md=function(e){return Le(Mi+"BoardPermissionsForUsers",{boardId:e})},pd=function(e){return Le(Mi+"BoardPermissionsForTeams",{boardId:e})},fd=function(e){return Le(Mi+"OpenBoardInvitations",{boardId:e})},hd=function(e){return Le(Mi+"InvitationBoard",{invitationId:e})},gd=function(e){return fetch(e).then(function(e){return e.text()})},bd=function(e){return fetch(e).then(function(e){return e.json()}).then(function(e){return new Promise(function(t,n){var r=function(e){return Pn(e,Rn([Mn("playshotId"),"playshotId is missing in playshot"]),Rn([Mn("boardId"),"boardId is missing in playshot"]),Rn([Mn("name"),"name is missing in playshot"]),Rn([Mn("playConfig"),"playConfig is missing in playshot"]),Rn([Mn("playData"),"playData is missing in playshot"]))}(e);_n(r)?n(r.value):t(r.value)})})},yd=function(e,t,n){return function(e,t,n){return Ie.post(e,t,{baseURL:"/buckets/boards/",headers:{"Content-Type":n}})}(e,t,n)},vd=function(e,t,n,r){return function(e,t,n,r){return Ie.post("".concat(e,"/").concat(t),n,{baseURL:"/buckets/boards/",headers:{"Content-Type":r}})}(e,t,n,r)},Ed=function(e){return function(e){return Ie.delete(e,{baseURL:"/"})}(e)},Od=function(e,t){return Le(Mi+"BoardGraphElements",{boardId:e,type:t})},xd=function(e){return Le(Mi+"BoardClient",{boardId:e})},jd=function(e){return Le(Mi+"BoardClientSecret",{boardId:e})},wd=function(e){return Le(Mi+"CreateBoardClient",{boardId:e})},kd=function(e){return Le(Mi+"RemoveBoardClient",{boardId:e})},Id=function(e){return Le(Mi+"ResetBoardClientSecret",{boardId:e})},Sd=function(e){return Le(Mi+"StickyTemplates",{boardId:e})},Cd=function(e,t,n){return Le(Mi+"SetStickyTemplate",{boardId:e,cellType:t,template:n})},_d=function(e,t,n,r){return Le(Mi+"UpdateStickyAdvancedConfig",Object(Ye.a)({boardId:e,cellType:t,templateType:n},r?{templateSchema:r}:{}))},Td=function(e,t){return Le(Mi+"MoveUserBoardToOrganization",{organizationId:e,boardId:t})},Ad=function(e,t){return Le(Mi+"ShareBoardWithOrganizationMembers",{boardId:e,permissions:t})},Nd=function(e,t){return Le(Mi+"ShareBoardWithAnyone",{boardId:e,permissions:t})},Ld=function(e){return Le(Mi+"CheckBoardAccess",{boardId:e})},Rd=function(e){return Le(Mi+"SavePlayshot",{playshotId:e.playshotId,boardId:e.boardId,name:e.name,playConfig:Lc(e.playConfig),playData:JSON.stringify(e.playData)})},Bd=function(e,t){return Le(Mi+"DeletePlayshot",{playshotId:e,boardId:t})},Dd=function(e){return Le(Mi+"PlayshotSummaryList",{boardId:e})},Pd=function(e){return Le(Mi+"Playshot",{playshotId:e})},zd=function(e,t){return Object(at.action)(Qi,{board:e,history:t})},Md=function(e){return Object(at.action)(Yi,e)},Ud=function(e){return Object(at.action)(Ki,e)},Fd=function(e){return Object(at.action)(Zi,{snapshot:e})},Gd=function(e,t){return Object(at.action)(Xi,{boardId:e,writeAccess:t})},qd=function(e){return Object(at.action)(ds,{boardId:e})},Vd=function(e){return Object(at.action)(us,{boardId:e})},Wd=function(e,t){return Object(at.action)(ls,{boardId:e,visible:t})},Hd=function(e,t,n){return Object(at.action)(ms,{boardId:e,visible:t,focusEditor:n})},$d=function(e,t){return Object(at.action)(ps,{boardId:e,visible:t})},Jd=function(e,t){return Object(at.action)(fs,{boardId:e,visible:t})},Qd=function(e,t){return Object(at.action)(hs,{boardId:e,visible:t})},Yd=function(e,t){return Object(at.action)(gs,{boardId:e,active:t})},Kd=function(e,t){return Object(at.action)(bs,{boardId:e,entries:t})},Zd=function(e,t){return Object(at.action)(ys,{boardId:e,entries:t})},Xd=function(e){return Object(at.action)(vs,{boardId:e})},eu=function(e,t){return Object(at.action)(Os,{boardId:e,boardVersion:t})},tu=function(e){return Object(at.action)(Es,{boardId:e})},nu=function(e){return Object(at.action)(xs,{boardId:e})},ru=function(e,t){return Object(at.action)(js,{boardId:e,loading:t})},au=function(e){return Object(at.action)(Rs,{filter:e})},ou=function(e){return Object(at.action)(Bs,{sort:e})},iu=function(e){return Object(at.action)(Ds,{teamId:e})},su=function(e){return Object(at.action)(Ps,{hide:e})},cu=function(e){return Object(at.action)(zs,{hide:e})},du=function(e,t,n){return Object(at.action)(Ms,{boardId:e,filter:t,focus:n})},uu=function(e,t){return Object(at.action)(Ui,{board:e,graph:t})},lu=function(e){return Object(at.action)(Fi,{board:e})},mu=function(e){return Object(at.action)(Gi,{board:e})},pu=function(e){return Object(at.action)(qi,{board:e})},fu=function(e){return Object(at.action)(Vi,{board:e})},hu=function(e,t,n,r){return Object(at.action)($i,{boardName:e,boardXml:t,boardId:n,importTemporary:r})},gu=function(e){return Object(at.action)(Ji,{board:e})},bu=function(e){return Object(at.action)(Wi,{board:e})},yu=function(e){return Object(at.action)(Hi,{board:e})},vu=function(e){return Object(at.action)(es,{boardId:e})},Eu=function(e){return Object(at.action)(ts,{boardId:e})},Ou=function(e){return Object(at.action)(ns,{boardId:e})},xu=function(e,t,n){return Object(at.action)(rs,{boardId:e,email:t,permissions:n})},ju=function(e){return Object(at.action)(as,{invitationId:e})},wu=function(e){return Object(at.action)(os,{invitationId:e})},ku=function(e,t){return Object(at.action)(is,{boardId:e,userId:t})},Iu=function(e,t,n){return Object(at.action)(ss,{boardId:e,userId:t,permissions:n})},Su=function(e,t,n){return Object(at.action)(cs,{boardId:e,teamId:t,permissions:n})},Cu=function(e,t){return Object(at.action)(As,{boardId:e,permissions:t})},_u=function(e,t){return Object(at.action)(Ns,{boardId:e,permissions:t})},Tu=function(e,t){return Object(at.action)(ws,{boardId:e,elements:t})},Au=function(e){return Object(at.action)(ks,{boardId:e})},Nu=function(e){return Object(at.action)(Is,{boardId:e})},Lu=function(e){return Object(at.action)(Ss,{boardId:e})},Ru=function(e,t,n,r){return Object(at.action)(Cs,{boardId:e,cellType:t,template:n,disableNotification:r})},Bu=function(e,t,n,r,a){return Object(at.action)(_s,{boardId:e,cellType:t,templateType:n,templateSchema:r,disableNotification:a})},Du=function(e,t,n){return Object(at.action)(Ts,{boardId:e,stickyTemplates:t,finishedCb:n})},Pu=function(e,t){return Object(at.action)(Us,{organizationId:e,boardId:t})},zu=function(){return Object(at.action)(Fs,{})},Mu=function(e){return Object(at.action)(Gs,{boardChanged:e})},Uu=function(e){return Object(at.action)(qs,{boardChanged:e})},Fu=function(e){return Object(at.action)(Vs,{boardId:e})},Gu=function(e,t,n){return Object(at.action)(Ws,{boardId:e,board:t,graph:n})},qu=function(e){return Object(at.action)(Hs,{boardId:e})},Vu=function(e,t){return Object(at.action)($s,{board:e,graph:t})},Wu=function(){return Object(at.action)(bc)},Hu=function(e,t,n){return Object(at.action)(Js,{boardId:e,board:t,graph:n})},$u=function(e){return Object(at.action)(Qs,{boardInvitation:e})},Ju=function(e){return Object(at.action)(Ys,{boardInvitation:e})},Qu=function(e){return Object(at.action)(Ks,{boardInvitation:e})},Yu=function(e,t){return Object(at.action)(Zs,{boardId:e,userId:t})},Ku=function(e,t,n){return Object(at.action)(Xs,{boardId:e,userId:t,permissions:n})},Zu=function(e){return Object(at.action)(ec,e)},Xu=function(e,t){return Object(at.action)(yc,{boardId:e,permissions:t})},el=function(e,t){return Object(at.action)(vc,{boardId:e,permissions:t})},tl=function(e){return Object(at.action)(tc,{boardPermissions:e})},nl=function(e){return Object(at.action)(nc,{boardPermissions:e})},rl=function(e){return Object(at.action)(rc,{boardInvitations:e})},al=function(e){return Object(at.action)(ac,{summaries:e})},ol=function(e,t){return Object(at.action)(oc,{boardId:e,element:t})},il=function(e,t,n){return Object(at.action)(ic,{boardId:e,elementId:t,label:n})},sl=function(e,t,n){return Object(at.action)(sc,{boardId:e,elementId:t,metadata:n})},cl=function(e,t){return Object(at.action)(cc,{boardId:e,elements:t})},dl=function(e,t){return Object(at.action)(dc,{boardId:e,client:t})},ul=function(e){return Object(at.action)(uc,{boardId:e})},ll=function(e,t){return Object(at.action)(lc,{boardId:e,clientSecret:t})},ml=function(e){return Object(at.action)(mc,{stickyTemplates:e})},pl=function(e){return Object(at.action)(pc,{stickyTemplate:e})},fl=function(e){return Object(at.action)(fc,{stickyTemplate:e})},hl=function(e){return Object(at.action)(hc,{stickyTemplates:e})},gl=function(e){return Object(at.action)(gc,e)},bl=function(e){return Object(at.action)(Ec,{runCodyOn:e})},yl=function(){return Object(at.action)(Oc)},vl=function(){return Object(at.action)(xc)},El=function(e){return Object(at.action)(jc,{boardId:e})},Ol=function(e){return Object(at.action)(wc,{boardId:e})},xl=function(e){return Object(at.action)(kc,{boardId:e})},jl=function(e){return Object(at.action)(Ic,{boardId:e})},wl=function(e,t){return Object(at.action)(Sc,{boardId:e,type:t})},kl=function(e){return Object(at.action)(Cc,{boardId:e})},Il=function(e){return Object(at.action)(_c,{boardId:e})},Sl=function(e){return Object(at.action)(Tc,{boardId:e})},Cl=function(e){return Object(at.action)(Ac,{boardId:e})},_l=function(e,t){return Object(fe.List)(e.getIn([Jo,"UserOrganizationInfo"]).toIndexedSeq().toArray())||Object(fe.List)()},Tl=function(e){return Object(bt.a)([_l],function(t){return t.filter(function(t){return t.userId===e})})},Al=function(){return Object(bt.a)([_l,T.currentUserSelector],function(e,t){if(null!==t.activeOrganization)return e.find(function(e){return e.uid===t.activeOrganization})})},Nl=function(e){return{name:e,className:Object(zn.startCase)(Object(zn.camelCase)(e)).replace(/ /g,""),propertyName:Object(zn.camelCase)(e),constantName:Object(zn.snakeCase)(e).toUpperCase(),fileName:Object(zn.kebabCase)(e),title:Object(zn.startCase)(e)}},Ll={adminAccess:!1,readAccess:!1,writeAccess:!1},Rl={uid:"",aggregateType:"BoardPermissionForUser",permissions:Ll,userId:"",boardId:""},Bl=function(e){var t=Ln(e,[Mn("permissionsId"),"permissionsId missing"],[Mn("permissions"),"permissions missing in "+e.permissionsId],[Mn("userId"),"userId missing in "+e.permissionsId],[Mn("boardId"),"boardId missing in "+e.permissionsId]);return _n(t)?t:Nn(new Dl({uid:e.permissionsId,aggregateType:"BoardPermissionForUser",permissions:e.permissions,userId:e.userId,boardId:e.boardId}))},Dl=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=ot.v4()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),t}(Object(fe.Record)(Rl)),Pl={userId:"",version:0,head:!1},zl=function(e){function t(e){return Object(Be.a)(this,t),void 0!==e.head&&null!==e.head||(e.head=!1),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"isHead",value:function(){return this.head||!1}},{key:"asHead",value:function(){return this.set("head",!0)}},{key:"equals",value:function(e){return this.userId===e.userId&&this.version===e.version}},{key:"isNewerThan",value:function(e){return this.userId!==e.userId||this.version>e.version}}]),t}(Object(fe.Record)(Pl)),Ml={uid:"",name:"",nameAbbreviation:"",tags:Object(fe.List)(),version:new zl(Pl),xml:null,createdAt:(new Date).toISOString(),lastModified:(new Date).toISOString(),inDeletion:!1,shouldImport:!1,shouldExport:!1,shouldShowHistory:!1,shouldShowElementDetails:!1,shouldFocusMetadataEditor:!1,shouldShowCodyConsole:!1,shouldShowTimerModal:!1,shouldShowPlayshotModal:!1,videoSessionActive:!1,shared:!1,detailsFetched:!1,sharedWith:Object(fe.List)(),assignedTeams:Object(fe.List)(),responsibleTeam:void 0,writeAccess:!1,example:!1,owner:null,creator:null,organization:null,tempBoard:!1,orgaMemberPermissions:Ll,anyonePermissions:Ll,codySuggestEnabled:!0,eventModelingEnabled:!0},Ul=function(e){var t=e.split(" "),n="";if(1===t.length){var r=t[0];return r.length<=3?r.toLocaleUpperCase():r.slice(0,3).toLocaleUpperCase()}return t.length>1&&t.forEach(function(e){return n+=e.charAt(0)}),n.slice(0,3).toLocaleUpperCase()},Fl=function(e,t,n,r,a){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];return console.log("create user board",a),new ql({uid:"",name:t,nameAbbreviation:n||Ul(t),tags:r?Object(fe.List)(r):Object(fe.List)(),version:new zl({userId:e,version:1}),xml:null,createdAt:(new Date).toISOString(),lastModified:void 0,inDeletion:!1,shared:!1,detailsFetched:!0,sharedWith:Object(fe.List)(),assignedTeams:Object(fe.List)(),responsibleTeam:a,writeAccess:!0,example:!1,owner:null,creator:e,organization:null,tempBoard:!1,orgaMemberPermissions:Ll,anyonePermissions:Ll,codySuggestEnabled:o,eventModelingEnabled:i})},Gl=function(e,t){return new ql({uid:"",name:t,nameAbbreviation:Ul(t),tags:Object(fe.List)(),version:new zl({userId:e,version:1}),xml:null,createdAt:(new Date).toISOString(),lastModified:void 0,inDeletion:!1,shared:!1,detailsFetched:!0,sharedWith:Object(fe.List)(),assignedTeams:Object(fe.List)(),writeAccess:!0,example:!1,owner:null,creator:e,organization:null,tempBoard:!0,orgaMemberPermissions:Ll,anyonePermissions:Ll,codySuggestEnabled:!0,eventModelingEnabled:!0})},ql=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=ot.v4()),void 0===e.xml&&(e.xml=null),void 0===e.lastModified&&(e.lastModified=(new Date).toISOString()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"updateXmlAndVersionFromBoard",value:function(e){var t=this.set("xml",e.xml);return t=(t=t.set("version",e.version)).set("lastModified",e.lastModified)}},{key:"updateXmlFromSnapshot",value:function(e){var t=this.set("xml",e.xml);return t=t.set("version",e.boardVersion)}},{key:"updateXml",value:function(e,t){var n=this.set("xml",e);return n=(n=n.set("lastModified",(new Date).toISOString())).set("version",new zl({userId:t,version:this.version.version+1}))}},{key:"updateVersion",value:function(e){return this.set("version",e)}},{key:"syncSummaryInfo",value:function(e){var t=this.set("sharedWith",e.sharedWith);return(t=(t=t.set("assignedTeams",e.assignedTeams)).set("owner",e.owner)).set("example",e.example)}},{key:"isCreator",value:function(e){return this.get("creator")===e}},{key:"moveToOrganization",value:function(e){var t=this.set("creator",this.get("owner"));return(t=t.set("owner",null)).set("organization",e)}},{key:"codyEngineServiceName",value:function(){return Nl(this.get("name")).className}}]),t}(Object(fe.Record)(Ml)),Vl=n(161),Wl=n.n(Vl),Hl=["object","array","string","integer","number","boolean","null"],$l=["string","integer","number","boolean","null"],Jl=function(e){return"object"===typeof e&&(!(e.type&&!Ql(e.type))&&(!!(e.$ref||e.$id||e.$title)||!Object.keys(e).length))},Ql=function e(t){if(Array.isArray(t)){var n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){if(!e(o.value))return!1}}catch(s){r=!0,a=s}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}}return"string"===typeof t&&Hl.includes(t)},Yl=function(e){return"object"===typeof e&&(e.type&&"array"===e.type)},Kl=function(e){return"object"===typeof e&&(e.type&&"object"===e.type)},Zl=function(e){return!!e.type&&"string"===typeof e.type&&$l.includes(e.type)},Xl=function(e){return!!e.$ref},em=function(e){var t=e.getParsedMetadata();return t.schema&&(t.schema=new lm(t.schema)),t.querySchema&&(t.querySchema=new lm(t.querySchema)),t},tm=function(e){if(e.getType()!==Dc.document)return!1;var t=em(e);return!!t.schema&&t.schema.isList()},nm=function(e){return e.getType()===Dc.document&&(!tm(e)&&!!em(e).entity)},rm=function(e,t,n,r){var a=t.ns||"/",o=Nl(e.getTechnicalName()).className,i=nm(e)&&n?":"+t.identifier:"",s=r?"/Form":"";return a+("/"===a[a.length-1]?o:"/"+o)+s+i},am=function(e){return"string"===typeof e?sm(e)||cm(e):"object"===typeof e&&(om(e)||im(e)||sm(e))},om=function(e){return"string"!==typeof e&&!im(e)&&!sm(e)},im=function(e){return!!e&&("string"!==typeof e&&"undefined"!==typeof e.$items)},sm=function(e){if(!e)return!1;var t="";"string"===typeof e?t=e.split("|")[0]:"string"===typeof e.$type&&(t=e.$type);return $l.includes(t)},cm=function(e){return"string"===typeof e?"/"===e[0]:"string"===typeof e.$ref},dm=function(e){return-1!==e.indexOf(":")},um=function(e){var t=e.split(":");return 1===t.length&&t.push(""),t},lm=function(){function e(t){Object(Be.a)(this,e),this.shorthand=null,this.jsonSchema=null,t instanceof e&&(t=t.toJSON()),am(t)?this.shorthand=t:Jl(t)?this.jsonSchema=t:console.warn("[CodyWizard] Schema received invalid schema. It's neither Shorthand nor JSONSchema7 and therefor ignored!",t)}return Object(De.a)(e,null,[{key:"fromString",value:function(t){if(am(t))return new e(t);try{return new e(Rc(t))}catch(n){return console.warn("[CodyWizard] Schema.fromString was not able to parse JSON string",t,n),new e({})}}}]),Object(De.a)(e,[{key:"toShorthand",value:function(){return this.shorthand?this.shorthand:(console.warn("[CodyWizard] Schema conversion from JSON Schema to shorthand is not implemented yet",this.jsonSchema),{})}},{key:"isShorthand",value:function(){return am(this.toShorthandIfPossible())}},{key:"isEmpty",value:function(){var e=this.toShorthandIfPossible();return"string"===typeof e?""===e:0===Object.keys(e).length}},{key:"toShorthandIfPossible",value:function(){return this.shorthand?this.shorthand:this.jsonSchema?(console.warn("[CodyWizard] Schema conversion from JSON Schema to shorthand is not implemented yet",this.jsonSchema),this.jsonSchema):{}}},{key:"isString",value:function(e){return this.shorthand?function e(t,n){if("object"===typeof t)return!!t.$type&&e(t.$type);var r=t.split("|");if("string"!==r[0])return!1;if(!n)return!0;n="format:"+(n=n.replace("format:",""));var a=!0,o=!1,i=void 0;try{for(var s,c=r[Symbol.iterator]();!(a=(s=c.next()).done);a=!0)if(s.value===n)return!0}catch(d){o=!0,i=d}finally{try{a||null==c.return||c.return()}finally{if(o)throw i}}return!1}(this.shorthand,e):!!this.jsonSchema&&function(e,t){return!(!e.type||"string"!==e.type)&&(!t||!!e.format&&e.format===t)}(this.jsonSchema,e)}},{key:"isRef",value:function(){return this.shorthand?cm(this.shorthand):!!this.jsonSchema&&Xl(this.jsonSchema)}},{key:"getRef",value:function(e){return this.isRef()?this.shorthand?"string"===typeof this.shorthand?this.shorthand:this.shorthand.$ref:this.jsonSchema?this.jsonSchema.$ref:e:e}},{key:"resolveRef",value:function(t){var n=this,r=new e({});if(!this.isRef())return r;var a=r;return this.isShorthand()?(t.getFilteredElementsByType(Dc.document).forEach(function(e){var t=em(e),o=um(n.getRef()),i=Object(Ke.a)(o,2),s=i[0];i[1];rm(e,t)===s&&(a=t.schema||r)}),a):this.jsonSchema?r:(t.getFilteredElementsByType(Dc.document).forEach(function(e){var t=em(e);""===n.getRef()&&(a=t.schema||r)}),a)}},{key:"isPrimitive",value:function(){return this.shorthand?sm(this.shorthand):!!this.jsonSchema&&Zl(this.jsonSchema)}},{key:"isList",value:function(){return this.shorthand?im(this.shorthand):!!this.jsonSchema&&Yl(this.jsonSchema)}},{key:"getListItemsSchema",value:function(t){return this.shorthand&&im(this.shorthand)?new e(this.shorthand.$items):this.jsonSchema&&Yl(this.jsonSchema)?new e(this.jsonSchema.items):t}},{key:"isObject",value:function(){return this.shorthand?om(this.shorthand):!!this.jsonSchema&&Kl(this.jsonSchema)}},{key:"getObjectProperties",value:function(){return this.isObject()?this.shorthand&&om(this.shorthand)?Object.keys(this.shorthand).map(function(e){return e.replace("?","")}):this.jsonSchema&&Kl(this.jsonSchema)?Object.keys(this.jsonSchema.properties||{}):[]:[]}},{key:"getObjectPropertySchema",value:function(t,n){if(!this.isObject())return n;if(this.shorthand&&om(this.shorthand)&&this.shorthand[t])return new e(this.shorthand[t]);if(this.shorthand&&om(this.shorthand)&&this.shorthand[t+"?"])return new e(this.shorthand[t+"?"]);if(this.jsonSchema&&Kl(this.jsonSchema)){var r=this.jsonSchema.properties||{};if(r[t])return new e(r[t])}return n}},{key:"setObjectProperty",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isObject()&&(this.shorthand&&(n||(e+="?"),this.shorthand[e]=t.toShorthandIfPossible()),this.jsonSchema)){if(this.jsonSchema.properties[e]=t.toJsonSchema(),!n)return;this.jsonSchema.required?this.jsonSchema.required.push(e):this.jsonSchema.required=[e]}}},{key:"isRequired",value:function(e){return!(this.isEmpty()||!this.isObject())&&(this.shorthand?!(!om(this.shorthand)||!this.shorthand[e]):!!(this.jsonSchema&&Kl(this.jsonSchema)&&this.jsonSchema.required&&this.jsonSchema.required.includes(e)))}},{key:"toJsonSchema",value:function(){return this.jsonSchema?this.jsonSchema:(console.warn("[CodyWizard] Schema conversion from shorthand to JSONSchema is not implemented yet",this.shorthand),{})}},{key:"toString",value:function(){return Lc(this.toShorthandIfPossible(),null,2)}},{key:"toJSON",value:function(){return this.toShorthandIfPossible()}},{key:"equals",value:function(e){return Object(zn.isEqual)(this.toJSON(),e.toJSON())}}]),e}(),mm=function(e){var t=e.getParsedMetadata();return e.getMetadata()||(t.aggregateCommand=!1),t.schema&&(t.schema=new lm(t.schema)),"undefined"===typeof t.aggregateCommand&&(t.aggregateCommand=!0),"undefined"===typeof t.newAggregate&&(t.newAggregate=t.aggregateCommand),t},pm=function(e){var t=e.getParsedMetadata();return"undefined"===typeof t.public&&(t.public=!1),t.schema&&(t.schema=new lm(t.schema)),t},fm=function e(t,n,r,a){var o=t.getSources().filter(function(e){return e.getType()===n});return a&&t.children().forEach(function(t){var a=e(t,n,r,!0);a&&(o=o.push(a))}),0===o.count()?null:1===o.count()||r?o.toArray()[0]:null},hm=function e(t,n,r,a){var o=t.getTargets().filter(function(e){return e.getType()===n});return a&&t.children().forEach(function(t){var a=e(t,n,r,!0);a&&(o=o.push(a))}),0===o.count()?null:1===o.count()||r?o.toArray()[0]:null},gm=function e(t,n,r){var a=Object(fe.List)();return r&&t.children().forEach(function(t){return a=a.merge(e(t,n,r))}),a.merge(t.getSources().filter(function(e){return e.getType()===n})).toArray()},bm=function e(t,n,r){var a=Object(fe.List)();return r&&t.children().forEach(function(t){return a=a.merge(e(t,n,r))}),a.merge(t.getTargets().filter(function(e){return e.getType()===n})).toArray()},ym=function(e){if(e.getType()!==Dc.event)return!1;if(vm(e))return!0;var t=e.getSources();if(t.count()>0){var n=t.filter(function(e){return e.getType()===Dc.command}).first(void 0);if(n&&n.getType()===Dc.command)return!0}return!1},vm=function(e){if(e.getType()!==Dc.event)return!1;var t=e.getSources();if(1===t.count()){var n=t.toArray()[0].getType();if(n===Dc.aggregate)return!0;if(n===Dc.command)return mm(t.first()).aggregateCommand}return!1},Em=function(e){if(e.getType()!==Dc.event)return!1;var t=bm(e,Dc.document),n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;if(nm(s))return!0}}catch(c){r=!0,a=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return!1},Om=function e(t,n){return t&&t.getType()===n?t:t?e(t.getParent(),n):null},xm=function(e){var t=e.getParsedMetadata();if(t.service&&"string"===typeof t.service)return Nl(t.service).className;var n=Om(e,Dc.feature);if(n){var r=n.getParsedMetadata();if(r.service)return Nl(r.service).className}var a=Om(e,Dc.boundedContext);if(a){var o=a.getParsedMetadata();if(o.service)return Nl(o.service).className}return null},jm=function(e,t,n,r,a){return wm(e,n,r,a,t)},wm=function(e,t,n,r,a){var o=xm(e),i=r?e.getName():e.getTechnicalName();if(o?o+=".":o=a?"".concat(a,"."):"",e.getType()===Dc.document){if(t)return"".concat(o,"Get").concat(Nl(i).className);if(n)return"".concat(o).concat(Nl(i).className);var s=em(e);if(s.ns){var c="/"===s.ns.charAt(0)?s.ns.slice(1):s.ns;return"".concat(o).concat(c.split("/").map(function(e){return Nl(e).className}).join("."),".").concat(Nl(i).className)}}if(e.getType()===Dc.event&&vm(e)){var d=e.getSources().first(void 0);if(d&&d.getType()===Dc.aggregate)return"".concat(o).concat(Nl(d.getTechnicalName()).className,".").concat(Nl(i).className)}return"".concat(o).concat(Nl(i).className)},km=function(e){return Im(e.getMetadata())},Im=function(e){if(!e)return{};try{return Rc(e)}catch(t){return console.error("Failed to parse metadata of node: ",e),{}}},Sm={elements:Object(fe.List)(),filter:"",focus:!1},Cm=function(e){return _m(e.getRoot().children())},_m=function(e){return new Bm({elements:e.filter(function(e){return Am(e)})})},Tm=function(e){var t=e.split(";"),n=[],r=[],a=[],o=[],i=[];return t.forEach(function(e){-1!==e.search("id:")?n.push(e.replace("id:","").trim()):-1!==e.search("type:")?r.push(e.replace("type:","").trim().toLowerCase()):-1!==e.search("!tag:")?i.push(e.replace("!tag:","").trim().toLowerCase()):-1!==e.trim().search(/^!#/)?i.push(e.replace("!#","").trim().toLowerCase()):-1!==e.search("tag:")?o.push(e.replace("tag:","").trim().toLowerCase()):-1!==e.trim().search(/^#/)?o.push(e.replace("#","").trim().toLowerCase()):a.push(e.trim())}),{nodeIds:n,nodeTypes:r,nodeLabels:a,nodeTags:o,notNodeTags:i,strict:!1}},Am=function(e){return!e.getTags().contains(ispConst.TAG_ELEMENTS_TREE_HIDDEN)},Nm=function(e,t){if(!Am(e))return!1;if(t.nodeTypes.length&&!t.nodeTypes.includes(e.getType().toLowerCase()))return!1;if(t.nodeIds.length&&!t.nodeIds.includes(e.getId()))return!1;if(t.service&&xm(e)!==t.service)return!1;if(t.nodeTags.length){var n=!0,r=!1,a=void 0;try{for(var o,i=t.nodeTags[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;if(!e.getTags().contains(s)){if("planned"!==s)return!1;if(!e.getTags().contains("planed"))return!1}}}catch(h){r=!0,a=h}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}}if(t.notNodeTags.length){var c=!0,d=!1,u=void 0;try{for(var l,m=t.notNodeTags[Symbol.iterator]();!(c=(l=m.next()).done);c=!0){var p=l.value;if(e.getTags().contains(p))return!1}}catch(h){d=!0,u=h}finally{try{c||null==m.return||m.return()}finally{if(d)throw u}}}var f=!0;return t.nodeLabels.forEach(function(n){t.strict?e.getName()!==n&&(f=!1):-1===e.getName().toLowerCase().search(n.toLowerCase())&&(f=!1)}),f},Lm=function e(t,n){var r=[],a=function(e){return 1===e.nodeTypes.length&&e.nodeTypes[0]===Dc.feature}(n),o=function(e){return 1===e.nodeTypes.length&&e.nodeTypes[0]===Dc.boundedContext.toLowerCase()}(n);return t.forEach(function(t){if(a&&t.getType()===Dc.feature)Nm(t,n)&&r.push(t.setChildren(t.children().filter(function(e){return Am(e)})));else if(o&&t.getType()===Dc.boundedContext)Nm(t,n)&&r.push(t.setChildren(t.children().filter(function(e){return Am(e)})));else{var i=e(t.children(),n);i.count()>0?r.push(t.setChildren(i)):Nm(t,n)&&r.push(t.setChildren(i))}}),Object(fe.List)(r)},Rm=function e(t,n){var r=[];return t.forEach(function(t){var a=e(t.children(),n);a.count()>0&&r.push.apply(r,Object(eo.a)(a.toArray())),Nm(t,n)&&r.push(t)}),Object(fe.List)(r)},Bm=function(e){function t(){var e,n;Object(Be.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(Pe.a)(this,(e=Object(ze.a)(t)).call.apply(e,[this].concat(a)))).cache={},n}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"mergeTree",value:function(e){return e.set("filter",this.filter)}},{key:"getFilteredElementsAsTree",value:function(){var e=Tm(this.filter),t=JSON.stringify(e);return this.initCache(),this.cache[t]||(this.cache[t]=Lm(this.elements,e)),this.cache[t]}},{key:"isFiltered",value:function(){return""!==this.filter}},{key:"getSimilarElements",value:function(e){var t=this,n="getSimilarElements_".concat(e.getId());if(this.initCache(),!this.cache[n]){var r=this.getNamespacedName(e);if(""===r)return Object(fe.List)([]);this.cache[n]=this.getFilteredElementsByTypeAndLabel(e.getType(),e.getName()).filter(function(n){return n.getId()!==e.getId()&&t.getNamespacedName(n)===r})}return this.cache[n]}},{key:"getFilteredElementsByTag",value:function(e){return Rm(this.elements,{nodeIds:[],nodeLabels:[],strict:!0,nodeTags:[e.replace("#","").toLowerCase()],notNodeTags:[],nodeTypes:[]})}},{key:"getFilteredElementsByTypeAndLabel",value:function(e,t,n){return Rm(this.elements,{nodeIds:[],nodeLabels:[t],strict:!0,nodeTags:[],notNodeTags:[],nodeTypes:[e.toLowerCase()],service:n})}},{key:"getFilteredElementsByType",value:function(e,t){var n=Rm(this.elements,{nodeIds:[],nodeLabels:[],strict:!0,nodeTags:[],notNodeTags:[],nodeTypes:[e.toLowerCase()]}).sortBy(function(e){return e.getName()});if(!t)return n;var r=[];return n.filter(function(e){return!r.includes(e.getName())&&(r.push(e.getName()),!0)})}},{key:"getFilteredElementsByTypes",value:function(e,t){var n=Rm(this.elements,{nodeIds:[],nodeLabels:[],strict:!0,nodeTags:[],notNodeTags:[],nodeTypes:e.map(function(e){return e.toLowerCase()})}).sortBy(function(e){return e.getName()});if(!t)return n;var r=[];return n.filter(function(e){return!r.includes(e.getName())&&(r.push(e.getName()),!0)})}},{key:"getElement",value:function(e){var t="getElement_".concat(e);if(this.initCache(),this.cache[t])return this.cache[t];var n=Rm(this.elements,{nodeIds:[e],nodeLabels:[],nodeTags:[],notNodeTags:[],nodeTypes:[],strict:!0});n.size>0&&(this.cache[t]=n.first())}},{key:"getNamespacedName",value:function(e){if(e.getType()===Dc.event){var t=xm(e);return t?t+=".":t="","".concat(t)+Nl(e.getName()).className}return e.getFQCN("")}},{key:"initCache",value:function(){this.cache||(this.cache={})}}]),t}(Object(fe.Record)(Sm));!function(e){e.event="event",e.command="command",e.role="role",e.projection="projection",e.aggregate="aggregate",e.document="document",e.policy="policy",e.hotSpot="hotSpot",e.externalSystem="externalSystem",e.ui="ui",e.feature="feature",e.slice="slice",e.swimlanes="siwmlanes",e.boundedContext="boundedContext",e.freeText="freeText",e.textCard="textCard",e.edge="edge",e.misc="misc",e.icon="icon",e.image="image",e.layer="layer"}(Dc||(Dc={})),function(e){e.left="left",e.right="right",e.above="above",e.below="below",e.aboveLeft="aboveLeft",e.aboveRight="aboveRight",e.belowLeft="belowLeft",e.belowRight="belowRight"}(Pc||(Pc={}));var Dm,Pm,zm,Mm,Um=function e(t,n){return n||(n=[]),t.forEach(function(t){n.push(t),t.children().count()>0&&e(t.children().toJS(),n)}),n},Fm=function(e,t){return e!==Pm&&(Dm=new Qm(e,t),Pm=e),Dm},Gm=function(e){return new Km(e)},qm=function(e,t){return e.getType()===Dc.boundedContext&&t.getType()!==Dc.boundedContext?-1:t.getType()===Dc.boundedContext&&e.getType()!==Dc.boundedContext?1:e.getType()===Dc.feature&&t.getType()!==Dc.feature?-1:t.getType()===Dc.feature&&e.getType()!==Dc.feature?1:e.getName()<t.getName()?-1:t.getName()<e.getName()?1:0},Vm=function(e,t){var n=e.getMetadata();if(t&&n)try{n=Lc(Rc(n,void 0,!0))}catch(r){n=null}return{id:e.getId(),name:e.getName(),description:e.getDescription(),type:e.getType(),link:e.getLink(),tags:e.getTags().toJS(),layer:e.isLayer(),defaultLayer:e.isDefaultLayer(),parent:e.getParent()?tp(e.getParent(),e,!0,t):null,childrenList:e.children().map(function(e){return Xm(e,!0,t)}).toJSON(),sourcesList:e.getSources().map(function(e){return ep(e,!0,t)}).toJSON(),targetsList:e.getTargets().map(function(e){return ep(e,!0,t)}).toJSON(),geometry:new Hm(e.getGeometry()),metadata:n,size:new $m(e.getSize()),enabled:e.isEnabled()}},Wm=function(e){var t={};return e.id&&(t.id=e.id),e.name&&(t.name=e.name),e.description&&(t.description=e.description),e.type&&(t.type=e.type),e.link&&(t.link=e.link),e.tags&&(t.tags=Object(fe.List)(e.tags)),t.layer=e.layer||!1,t.defaultLayer=e.defaultLayer||!1,e.parent&&(t.parent=e.parent),e.childrenList&&(t.childrenList=Object(fe.List)(e.childrenList)),e.sourcesList&&(t.sourcesList=Object(fe.List)(e.sourcesList)),e.targetsList&&(t.targetsList=Object(fe.List)(e.targetsList)),e.geometry&&(t.geometry=new Hm({x:e.geometry.x,y:e.geometry.y})),e.metadata&&(t.metadata=e.metadata,t.parsedMetadata=Object(fe.Map)(Im(e.metadata))),e.size&&(t.size=new $m({width:e.size.width,height:e.size.height})),"undefined"!==typeof e.enabled&&(t.enabled=!!e.enabled),new np(Object(Ye.a)({},Zm,t))},Hm=function(e){function t(){return Object(Be.a)(this,t),Object(Pe.a)(this,Object(ze.a)(t).apply(this,arguments))}return Object(Me.a)(t,e),t}(Object(fe.Record)({x:0,y:0})),$m=function(e){function t(){return Object(Be.a)(this,t),Object(Pe.a)(this,Object(ze.a)(t).apply(this,arguments))}return Object(Me.a)(t,e),t}(Object(fe.Record)({width:0,height:0})),Jm=function(){function e(t,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0;Object(Be.a)(this,e),this.mxcell=void 0,this.mxgraphModel=void 0,this.mxgraph=void 0,this.wrapper=void 0,this.id=null,this.root=null,this.name=null,this.technicalName=null,this.fqcn=null,this.technicalFQCN=null,this.description=null,this.type=null,this.tags=null,this.layer=!1,this.parentCache=void 0,this.childrenCache=null,this.sourcesCache=null,this.targetsCache=null,this.metadataCache=void 0,this.parsedMetadataCache=void 0,this.geoCache=void 0,this.sizeCache=void 0,this.deepLinkFactory=void 0,this.version=void 0,this.mxcell=t,this.mxgraphModel=n,this.mxgraph=r,this.wrapper=a,this.layer=o,this.root=t.getId()===MXGRAPH_ROOT_UUIDS[1],this.deepLinkFactory=i,this.version=1}return Object(De.a)(e,[{key:"setPotentiallyStale",value:function(){var e=this;if(this.name=null,this.technicalName=null,this.fqcn=null,this.technicalFQCN=null,this.description=null,this.type=null,this.tags=null,this.geoCache=void 0,this.sizeCache=void 0,this.parentCache=void 0,this.sourcesCache=null,this.targetsCache=null,this.version++,"undefined"!==typeof this.metadataCache){if(this.metadataCache!==inspectioUtils.getMetadata(this.mxcell)){this.parsedMetadataCache=void 0;var t=inspectioUtils.getMetadata(this.mxcell);this.metadataCache=t||null}}else this.parsedMetadataCache=void 0;if(this.childrenCache){var n=this.mxgraphModel.getChildren(this.mxcell);n||(n=[]),this.childrenCache=Object(fe.List)(n.map(function(t){return(t=e.wrapper.getNode(t.getId())).setPotentiallyStale(),e.deepLinkFactory&&t.setDeepLinkFactory(e.deepLinkFactory),t}))}}},{key:"setDeepLinkFactory",value:function(e){this.deepLinkFactory=e}},{key:"getId",value:function(){return null===this.id&&(this.id=this.mxcell.getId()),this.id}},{key:"getName",value:function(){return null===this.name&&(this.name=inspectioUtils.getLabelText(this.mxcell),this.isDefaultLayer()&&""===this.name&&(this.name="Board")),this.name}},{key:"getTechnicalName",value:function(){if(null===this.technicalName){var e=this.getParsedMetadata();this.technicalName=e.$nodeName||this.getName()}return this.technicalName}},{key:"getFQCN",value:function(e){return null===this.fqcn&&(this.fqcn=wm(this,!1,!1,!0,e)),this.fqcn}},{key:"getTechnicalFQCN",value:function(e){return null===this.technicalFQCN&&(this.technicalFQCN=wm(this,!1,!1,!1,e)),this.technicalFQCN}},{key:"changeName",value:function(t){var n=new e(this.mxcell,this.mxgraphModel,this.mxgraph,this.wrapper,this.layer,this.deepLinkFactory);return this.copyInternalProps(n),n.name=t,n}},{key:"getDescription",value:function(){return null===this.description&&(this.description=inspectioUtils.getLabelSecondaryText(this.mxcell)),this.description}},{key:"getType",value:function(){if(null!==this.type)return this.type;var e=this.getParsedMetadata();if(e.$nodeType)return this.type=e.$nodeType,this.type;var t=inspectioUtils.getTypeInclEdge(this.mxcell);return t||(t=Dc.misc),t===ap.multiple&&(t=Dc.misc),this.isLayer()&&(t=Dc.layer),this.type=t,this.type}},{key:"getLink",value:function(){return this.isLayer()?null:this.root?null:this.deepLinkFactory?this.deepLinkFactory(this.getId()):null}},{key:"getTags",value:function(){return null!==this.tags?this.tags:Object(fe.List)(inspectioUtils.getTags(this.mxcell))}},{key:"getParent",value:function(){return"undefined"===typeof this.parentCache&&(this.parentCache=this.isLayer()||null===this.mxcell.getParent()?null:this.wrapper.getNode(this.mxcell.getParent().getId()),this.deepLinkFactory&&this.parentCache&&this.parentCache instanceof e&&this.parentCache.setDeepLinkFactory(this.deepLinkFactory)),this.parentCache}},{key:"changeParent",value:function(t){var n=new e(this.mxcell,this.mxgraphModel,this.mxgraph,this.wrapper,this.layer,this.deepLinkFactory);return this.copyInternalProps(n),n.parentCache=t,n}},{key:"children",value:function(){var e=this;if(null!==this.childrenCache)return this.childrenCache;var t=this.mxgraphModel.getChildren(this.mxcell);t||(t=[]);var n=Object(fe.List)(t);return this.childrenCache=n.map(function(t){return t=e.wrapper.getNode(t.getId()),e.deepLinkFactory&&t.setDeepLinkFactory(e.deepLinkFactory),t}),this.childrenCache}},{key:"setChildren",value:function(t){var n=new e(this.mxcell,this.mxgraphModel,this.mxgraph,this.wrapper,this.layer,this.deepLinkFactory);return this.copyInternalProps(n),n.childrenCache=t,n}},{key:"getSources",value:function(){var e=this;if(null!==this.sourcesCache)return this.sourcesCache;var t=Object(fe.List)();return this.mxcell.isVertex()&&this.mxcell.edges?(this.mxcell.edges.forEach(function(n){if(n&&n.source&&n.source.getId()!==e.mxcell.getId()){var r=e.wrapper.getNode(n.source.getId());e.deepLinkFactory&&r.setDeepLinkFactory(e.deepLinkFactory),t=t.filter(function(e){return e.getId()!==n.source.getId()}).push(r)}}),this.sourcesCache=t,t):t}},{key:"getTargets",value:function(){var e=this;if(null!==this.targetsCache)return this.targetsCache;var t=Object(fe.List)();return this.mxcell.isVertex()&&this.mxcell.edges?(this.mxcell.edges.forEach(function(n){if(n&&n.target&&n.target.getId()!==e.mxcell.getId()){var r=e.wrapper.getNode(n.target.getId());e.deepLinkFactory&&r.setDeepLinkFactory(e.deepLinkFactory),t=t.filter(function(e){return e.getId()!==n.target.getId()}).push(r)}}),this.targetsCache=t,t):t}},{key:"isLayer",value:function(){return this.layer}},{key:"isDefaultLayer",value:function(){return this.isLayer()&&this.mxcell.getId()===MXGRAPH_ROOT_UUIDS[0]}},{key:"getGeometry",value:function(){return this.geoCache?this.geoCache:this.mxcell.geometry?new Hm({x:this.mxcell.geometry.x,y:this.mxcell.geometry.y}):{x:0,y:0}}},{key:"getSize",value:function(){return this.sizeCache?this.sizeCache:this.mxcell.geometry?new $m({width:this.mxcell.geometry.width,height:this.mxcell.geometry.height}):{width:0,height:0}}},{key:"changeGeometry",value:function(t){var n=new e(this.mxcell,this.mxgraphModel,this.mxgraph,this.wrapper,this.layer,this.deepLinkFactory);return this.copyInternalProps(n),n.geoCache=t,n}},{key:"changeSize",value:function(t){var n=new e(this.mxcell,this.mxgraphModel,this.mxgraph,this.wrapper,this.layer,this.deepLinkFactory);return this.copyInternalProps(n),n.sizeCache=t,n}},{key:"getMetadata",value:function(){if("undefined"===typeof this.metadataCache){var e=inspectioUtils.getMetadata(this.mxcell);this.metadataCache=e||null}return this.metadataCache}},{key:"getParsedMetadata",value:function(){return"undefined"===typeof this.parsedMetadataCache&&(this.parsedMetadataCache=km(this)),this.parsedMetadataCache}},{key:"getVersion",value:function(){return this.version}},{key:"changeMetadata",value:function(t){var n=new e(this.mxcell,this.mxgraphModel,this.mxgraph,this.wrapper,this.layer,this.deepLinkFactory);return this.copyInternalProps(n),n.metadataCache=t,n.parsedMetadataCache=void 0,n}},{key:"isEnabled",value:function(){return this.mxgraph.isCellEnabled(this.mxcell)}},{key:"copyInternalProps",value:function(e){e.id=this.id,e.root=this.root,e.name=this.name,e.description=this.description,e.type=this.type,e.tags=this.tags,e.layer=this.layer,e.parentCache=this.parentCache,e.childrenCache=this.childrenCache,e.targetsCache=this.targetsCache,e.metadataCache=this.metadataCache,e.parsedMetadataCache=this.parsedMetadataCache,e.geoCache=this.geoCache,e.sizeCache=this.sizeCache,e.deepLinkFactory=this.deepLinkFactory,e.version=this.version}}]),e}(),Qm=function(){function e(t,n){Object(Be.a)(this,e),this.mxgraph=void 0,this.editorUi=void 0,this.orgLayerVisibility={},this.root=void 0,this.cells={},this.mxgraph=t,this.editorUi=n;var r=this.mxgraph.getModel();this.root=new Jm(r.getRoot(),r,this.mxgraph,this)}return Object(De.a)(e,[{key:"createCellId",value:function(){return this.mxgraph.model.createId()}},{key:"getCurrentScale",value:function(){return this.mxgraph.getCurrentScale()}},{key:"getCurrentTranslate",value:function(){return this.mxgraph.getCurrentTranslate()}},{key:"onPanning",value:function(e){this.mxgraph.onPanning(e)}},{key:"offPanning",value:function(e){this.mxgraph.offPanning(e)}},{key:"translateMousePoint",value:function(e,t){return this.mxgraph.translateMousePoint(e,t)}},{key:"onZoom",value:function(e){this.mxgraph.onZoom(e)}},{key:"offZoom",value:function(e){this.mxgraph.offZoom(e)}},{key:"getRoot",value:function(){return this.root}},{key:"openLayersDialog",value:function(){this.editorUi.actions.get("layers").funct()}},{key:"triggerCody",value:function(){this.mxgraph.triggerCody()}},{key:"selectNode",value:function(e){var t=this.mxgraph.model.getCell(e.getId());return!!t&&(this.mxgraph.setSelectionCell(t),!0)}},{key:"focusNode",value:function(e,t){var n=this.mxgraph.getModel().getCell(e.getId());this.mxgraph.scrollCellsIntoView([n],!0,!0,t)}},{key:"hasUserLevelVisibilityChanges",value:function(){return Object.keys(this.orgLayerVisibility).length>0}},{key:"isVisible",value:function(e){var t=this.mxgraph.getModel().getCell(e.getId());return t&&this.mxgraph.getModel().isVisible(t)}},{key:"setUserVisible",value:function(e,t){var n=this,r=this.mxgraph.getModel().getCell(e.getId());if(r){this.mxgraph.model.beginUpdate();try{if(this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model,r,t)),!inspectioUtils.isContainer(r)&&!e.isLayer())this.mxgraph.getAllEdges([r]).forEach(function(e){t?(e.source&&e.source!==r&&n.mxgraph.getModel().isVisible(e.source)&&n.mxgraph.model.execute(new mxVisibleChange(n.mxgraph.model,e,t)),e.target&&e.target!==r&&n.mxgraph.getModel().isVisible(e.target)&&n.mxgraph.model.execute(new mxVisibleChange(n.mxgraph.model,e,t))):n.mxgraph.model.execute(new mxVisibleChange(n.mxgraph.model,e,t))})}finally{this.mxgraph.model.endUpdate()}}else{if(this.orgLayerVisibility.hasOwnProperty(r.getId())||(this.orgLayerVisibility[r.getId()]=this.isVisible(e)),r){this.mxgraph.enableLazyTextPaint(),this.mxgraph.model.beginUpdateWithoutChangeNotifications();try{this.mxgraph.getModel().setVisible(r,t)}finally{this.mxgraph.model.endUpdateWithoutChangeNotifications()}this.mxgraph.disableLazyTextPaint()}window.setTimeout(function(){t&&(e.isLayer()?(n.mxgraph.zoom(.2,!0),n.mxgraph.showAll(r),n.mxgraph.scrollCellsIntoView(n.mxgraph.model.getChildren(r))):n.mxgraph.scrollCellsIntoView([r]))},200)}}},{key:"applyVisibilityGlobally",value:function(){if(this.hasUserLevelVisibilityChanges()){this.mxgraph.model.beginUpdate();try{for(var e in this.orgLayerVisibility)if(this.orgLayerVisibility.hasOwnProperty(e)){var t=this.mxgraph.model.getCell(e);t&&this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model,t,this.mxgraph.model.isVisible(t)))}this.orgLayerVisibility={}}finally{this.mxgraph.model.endUpdate()}}}},{key:"isLocked",value:function(e){var t=this.mxgraph.getModel().getCell(e.getId());if(!t)return!1;var n=this.mxgraph.view.getState(t),r=null!=n?n.style:this.mxgraph.getCellStyle(t);return"1"===mxUtils.getValue(r,"locked","0").toString()}},{key:"setLocked",value:function(e,t){var n=this.mxgraph.getModel().getCell(e.getId());if(n)if(e.getType()!==Dc.feature&&e.getType()!==Dc.boundedContext){var r=this.mxgraph.view.getState(n);null!=r?r.style:this.mxgraph.getCellStyle(n);this.mxgraph.getModel().beginUpdate();try{this.mxgraph.setCellStyles("locked",t?"1":null,[n])}finally{this.mxgraph.getModel().endUpdate()}t&&this.mxgraph.removeSelectionCells(this.mxgraph.getModel().getDescendants(n))}else this.mxgraph.setContainerLocked(n,t)}},{key:"deleteNode",value:function(e){var t=this.mxgraph.model.getCell(e.getId());t&&this.mxgraph.removeCells([t],!0)}},{key:"addLayer",value:function(e){if(this.mxgraph.isEnabled()){this.mxgraph.model.beginUpdate();try{var t=this.mxgraph.addCell(new mxCell(e),this.mxgraph.model.root);this.mxgraph.setDefaultParent(t)}finally{this.mxgraph.model.endUpdate()}}}},{key:"deleteLayer",value:function(e){if(e.isDefaultLayer())throw Error("The default layer cannot be deleted!");var t=this.mxgraph.model.getCell(e.getId()),n=this.isActiveLayer(e);this.mxgraph.model.beginUpdate();try{var r=this.mxgraph.model.root.getIndex(t);this.mxgraph.removeCells([t],!1),n&&(r>0&&r<=this.mxgraph.model.getChildCount(this.mxgraph.model.root)?this.mxgraph.setDefaultParent(this.mxgraph.model.getChildAt(this.mxgraph.model.root,r-1)):this.mxgraph.setDefaultParent(null))}finally{this.mxgraph.model.endUpdate()}}},{key:"isActiveLayer",value:function(e){return this.mxgraph.getDefaultParent().getId()===e.getId()}},{key:"setAsActiveLayer",value:function(e){var t=this.mxgraph.model.getCell(e.getId());if(t){this.mxgraph.model.beginUpdate();try{this.mxgraph.setDefaultParent(t)}finally{this.mxgraph.model.endUpdate()}}}},{key:"setDefaultLayerAsActive",value:function(){this.mxgraph.setDefaultParent(null)}},{key:"highlightLayer",value:function(e){var t=this.mxgraph.getModel().getCell(e.getId());t&&this.mxgraph.model.getChildren(t)&&this.mxgraph.scrollCellsIntoView(this.mxgraph.model.getChildren(t))}},{key:"addNode",value:function(e){e.isLayer()?this.addLayer(e.getName()):e.getType()!==ap.edge?this.addVertex(e):this.addEdge(e)}},{key:"getNode",value:function(e){if(this.cells[e])return this.cells[e];var t=this.mxgraph.model.getCell(e);return t?(this.cells[e]=new Jm(t,this.mxgraph.model,this.mxgraph,this,this.mxgraph.model.isLayer(t)),this.cells[e]):null}},{key:"addNodeNextToAnother",value:function(e,t,n,r,a){this.addNode(e),this.moveNodeNextToAnother(e,t,n,r,a)}},{key:"moveNodeNextToAnother",value:function(e,t,n,r,a){var o=this.mxgraph.model.getCell(e.getId());if(o){var i={width:o.getGeometry().width,height:o.getGeometry().height},s=this.getGeometryRelativeToElement(t,n,i,r,a);if(t.getParent()&&o.getParent().getId()!==t.getParent().getId()){var c=this.mxgraph.model.getCell(t.getParent().getId());c&&this.mxgraph.model.add(c,o)}(e.getGeometry().x>0||e.getGeometry().y>0)&&this.mxgraph.moveCells([o],-1*e.getGeometry().x,-1*e.getGeometry().y,!1),this.mxgraph.moveCells([o],s.x,s.y,!1)}else console.error("[MxGraphWrapper] Tried to move node next to another, but the corresponding cell is not returned by mxgraph. Something seems to be wrong",Vm(e))}},{key:"changeNodeName",value:function(e,t){var n=this.mxgraph.model.getCell(e.getId());if(n){var r=inspectioUtils.getLabelSecondaryText(n);this.mxgraph.cellLabelChanged(n,inspectioUtils.joinLabelParts(t,r))}}},{key:"changeNodeDescription",value:function(e,t){var n=this.mxgraph.model.getCell(e.getId());if(n){var r=inspectioUtils.getLabelText(n);this.mxgraph.cellLabelChanged(n,inspectioUtils.joinLabelParts(r,t))}}},{key:"changeNodeLabel",value:function(e,t){var n=this.mxgraph.model.getCell(e.getId());n&&this.mxgraph.cellLabelChanged(n,t)}},{key:"changeNodeMetadata",value:function(e,t,n){var r=this,a=this.mxgraph.model.getCell(e.getId());if(a){this.mxgraph.model.beginUpdate();try{this.mxgraph.setAttributeForCell(a,"metadata",t);var o=this.mxgraph.getCellState(a);this.mxgraph.cellRenderer.redraw(o,!1,!0)}catch(i){console.error(i)}finally{this.mxgraph.model.endUpdate()}if(this.mxgraph.triggerChangeActiveGraphElementIfIsActive(a),n)return;if(e.getTags().contains(ispConst.TAG_CONNECTED))_m(this.root.children()).getSimilarElements(e).filter(function(e){return e.getTags().contains(ispConst.TAG_CONNECTED)}).forEach(function(e){return r.changeNodeMetadata(e,t,!0)})}}},{key:"changeNodeTags",value:function(e,t){var n=this.mxgraph.model.getCell(e.getId());if(n){this.mxgraph.model.beginUpdate();try{this.mxgraph.setAttributeForCell(n,ispConst.TAGS_ATTR,t.join(","));var r=this.mxgraph.getCellState(n);this.mxgraph.cellRenderer.redraw(r,!1,!0)}catch(a){console.error(a)}finally{this.mxgraph.model.endUpdate()}}}},{key:"resizeNode",value:function(e,t){var n=this.mxgraph.model.getCell(e.getId());if(n&&n.getGeometry()){var r=new mxRectangle(e.getGeometry().x,e.getGeometry().y,t.width,t.height),a=n.getGeometry().x!==r.x||n.getGeometry().y!==r.y;try{if(this.mxgraph.model.beginUpdate(),a){var o=n.getGeometry().x-r.x,i=n.getGeometry().y-r.y,s=new mxVertexHandler(this.mxgraph.view.getState(n));s.moveChildren(n,o,i),s.destroy()}this.mxgraph.resizeCell(n,r,!1)}catch(c){console.error(c)}finally{this.mxgraph.model.endUpdate()}}}},{key:"moveNode",value:function(e,t){var n=e.getGeometry().x-t.x,r=e.getGeometry().y-t.y,a=this.mxgraph.model.getCell(e.getId());a&&this.mxgraph.moveCells([a],n,r,!1)}},{key:"switchParent",value:function(e,t,n,r){var a=t?this.mxgraph.model.getCell(t.getId()):null,o=this.mxgraph.model.getCell(e.getId());if(o){var i=mxUtils.clone(o.getGeometry());!o.parent||!o.parent.getGeometry()||a.parent&&a.parent.getId()===o.parent.getId()||i.translate(o.parent.getGeometry().x,o.parent.getGeometry().y),a&&i.translate(-1*a.getGeometry().x,-1*a.getGeometry().y);try{this.mxgraph.model.beginUpdate(),this.mxgraph.model.add(a,o),n&&(i.x=n.x,i.y=n.y),this.mxgraph.model.setGeometry(o,i),e instanceof Jm&&e.setPotentiallyStale(),t instanceof Jm&&t.setPotentiallyStale(),t&&r&&this.expandIfNeeded(t)}catch(s){console.error(s)}finally{this.mxgraph.model.endUpdate()}}}},{key:"connectNodes",value:function(e,t,n,r,a){var o=null===e.getParent()||null===t.getParent()||e.getParent()!==t.getParent()?this.mxgraph.getDefaultParent():this.mxgraph.model.getCell(e.getParent().getId()),i=this.mxgraph.insertEdge(o,null,"",this.mxgraph.model.getCell(e.getId()),this.mxgraph.model.getCell(t.getId()));if(!r){var s=this.mxgraph.getModel().getGeometry(this.mxgraph.model.getCell(e.getId())),c=this.mxgraph.getModel().getGeometry(this.mxgraph.model.getCell(t.getId()));if(s.x!==c.x&&s.y!==c.y){var d=0;if(r=[],this.isEventModelingEnabled())a?(d=s.x+s.width/2,r.push(new mxPoint(d,c.y+c.height/2))):(d=c.x+c.width/2,r.push(new mxPoint(d,s.y+s.height/2)));else{if(c.x>s.x){var u=s.x+s.width;d=u+(c.x-u)/2}else{var l=c.x+c.width;d=l+(s.x-l)/2}r.push(new mxPoint(d,s.y+s.height/2)),r.push(new mxPoint(d,c.y+c.height/2))}}}if(r&&r.length){var m=this.mxgraph.getModel().getGeometry(i)||{points:[]};m.points=r,this.mxgraph.getModel().setGeometry(i,m);var p=this.mxgraph.getCellState(i);this.mxgraph.view.resetValidationState(),this.mxgraph.view.invalidate(i),this.mxgraph.cellRenderer.redraw(p,!1,!0)}}},{key:"highlightNodes",value:function(e){}},{key:"copySelectionToActiveLayer",value:function(){return!(!this.mxgraph.isEnabled()||this.mxgraph.isSelectionEmpty())&&(this.mxgraph.moveCells(this.mxgraph.getSelectionCells(),0,0,!1,this.mxgraph.getDefaultParent()),!0)}},{key:"changeFeatureStatus",value:function(e,t){if(e.getType()===Dc.feature){this.selectNode(e);var n=this.mxgraph.editorUi.actions.get("tag".concat(Nl(t).className));n&&n.funct()}}},{key:"getFeatureTaskLink",value:function(e){if(e.getType()!==Dc.feature)return null;var t=this.mxgraph.model.getCell(e.getId());return this.mxgraph.getFeatureTaskLink(t)}},{key:"setFeatureTaskLink",value:function(e,t){if(e.getType()===Dc.feature){var n=this.mxgraph.model.getCell(e.getId());n&&this.mxgraph.setFeatureTaskLink(n,t)}}},{key:"exportXmlSnapshot",value:function(){var e={};if(this.hasUserLevelVisibilityChanges()){this.mxgraph.model.beginUpdateWithoutChangeNotifications();try{for(var t in this.orgLayerVisibility)if(this.orgLayerVisibility.hasOwnProperty(t)){var n=this.mxgraph.model.getCell(t);if(n){var r=this.mxgraph.model.isVisible(n);r!==this.orgLayerVisibility[t]&&(e[t]=r,this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model,n,this.orgLayerVisibility[t])))}}}finally{this.mxgraph.model.endUpdateWithoutChangeNotifications()}}var a=new mxCodec(mxUtils.createXmlDocument()).encode(this.mxgraph.getModel());0===this.mxgraph.view.translate.x&&0===this.mxgraph.view.translate.y||(a.setAttribute("dx",Math.round(100*this.mxgraph.view.translate.x)/100),a.setAttribute("dy",Math.round(100*this.mxgraph.view.translate.y)/100)),a.setAttribute("grid",this.mxgraph.isGridEnabled()?"1":"0"),a.setAttribute("gridSize",this.mxgraph.gridSize),a.setAttribute("guides",this.mxgraph.graphHandler.guidesEnabled?"1":"0"),a.setAttribute("tooltips",this.mxgraph.tooltipHandler.isEnabled()?"1":"0"),a.setAttribute("connect",this.mxgraph.connectionHandler.isEnabled()?"1":"0"),a.setAttribute("arrows",this.mxgraph.connectionArrowsEnabled?"1":"0"),a.setAttribute("fold",this.mxgraph.foldingEnabled?"1":"0"),a.setAttribute("page",this.mxgraph.pageVisible?"1":"0"),a.setAttribute("pageScale",this.mxgraph.pageScale),a.setAttribute("pageWidth",this.mxgraph.pageFormat.width),a.setAttribute("pageHeight",this.mxgraph.pageFormat.height),null!=this.mxgraph.background&&a.setAttribute("background",this.mxgraph.background);var o=mxUtils.getXml(a);this.mxgraph.model.beginUpdateWithoutChangeNotifications();try{for(var i in this.orgLayerVisibility)if(this.orgLayerVisibility.hasOwnProperty(i)){var s=this.mxgraph.model.getCell(i);s&&this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model,s,e[i]))}}finally{this.mxgraph.model.endUpdateWithoutChangeNotifications()}return o}},{key:"onSelectionChanged",value:function(e){var t=this;this.mxgraph.selectionModel.addListener(mxEvent.CHANGE,function(){t.mxgraph.isSelectionEmpty()?e(!1):e(!0)})}},{key:"setCockpitBaseUrl",value:function(e){this.mxgraph.setCockpitBaseUrl(e)}},{key:"focus",value:function(){this.mxgraph.container.focus()}},{key:"clearMoveVideoAvatarToPositionListener",value:function(){this.mxgraph.clearMoveVideoAvatarToPositionListener()}},{key:"onMoveVideoAvatarToPosition",value:function(e){this.mxgraph.onMoveVideoAvatarToPosition(e)}},{key:"setVideoAvatarEnabled",value:function(e){this.mxgraph.setVideoAvatarEnabled(e)}},{key:"trackVideoAvatarPosition",value:function(e,t){this.mxgraph.trackVideoAvatarPosition(e,t)}},{key:"setCodyDownCb",value:function(e){this.mxgraph.setCodyDownCb(e)}},{key:"setCodyLeftCb",value:function(e){this.mxgraph.setCodyLeftCb(e)}},{key:"setCodyRightCb",value:function(e){this.mxgraph.setCodyRightCb(e)}},{key:"setCodyUpCb",value:function(e){this.mxgraph.setCodyUpCb(e)}},{key:"openCodyWizard",value:function(e){var t="codywizard"+(e?"_run":"");this.editorUi.actions.get(t).funct()}},{key:"mergeIntoSchema",value:function(e,t){if(e.getType()===Dc.document){var n=em(e),r=null;switch(t.getType()){case Dc.document:r=em(t);break;case Dc.event:r=pm(t);break;case Dc.command:r=mm(t)}if(r){var a=n.schema;a&&!a.isEmpty()||(a=this.getSchemaFromDescription(e));var o=r.schema||lm.fromString("{}");if(o.isObject()){if(a.isObject())if(_m(this.root.children()).getSimilarElements(e).count()>0){var i=rm(e,n,!0);a=lm.fromString(i)}var s=e.getName(),c=!0;"?"===s[s.length-1]&&(c=!1,s=s.slice(0,s.length-1)),o.setObjectProperty(Nl(s).propertyName,a,c),r.schema=o,this.changeNodeMetadata(t,Lc(r,null,2)),this.deleteNode(e)}}}}},{key:"isEventModelingEnabled",value:function(){return!!this.mxgraph.eventModelingEnabled}},{key:"makeDraggable",value:function(e,t){var n=this.mxgraph.getModel().getCell(t.getId());if(this.editorUi.sidebar){var r=this.editorUi.sidebar,a={x:0,y:0,width:t.getSize().width,height:t.getSize().height};r.createDragSource(e,r.createDropHandler([n],!1,!0,a,void 0,void 0,!0),r.createDragPreview(a.width,a.height,t.getType()),[n],a)}}},{key:"makeActiveGraphElementIfPossible",value:function(e){var t=this.mxgraph.getModel().getCell(e.getId());if(!t)return null;var n=this.mxgraph.makeActiveGraphElement(t),r=Object(Ke.a)(n,4),a=r[0],o=r[1],i=r[2],s=r[3];if(!a)return null;if(a.isEdge()){var c,d="Edge";return a.source&&a.target&&(d=inspectioUtils.getLabelText(a.source)+" -> "+inspectioUtils.getLabelText(a.target),c={source:a.source.getId(),target:a.target.getId()}),{id:a.getId(),type:Dc.edge,label:d,metadata:inspectioUtils.getMetadata(a),edgeData:c,updateMetadata:o,updateSimilarElements:i,replaceTags:s,locked:!this.mxgraph.isCellEnabled(a)}}return a.isVertex()?{id:a.getId(),type:inspectioUtils.isEventModel(a)?ap.swimlanes:inspectioUtils.getTypeInclEdge(a),label:inspectioUtils.getLabelText(a),metadata:inspectioUtils.getMetadata(a),tags:inspectioUtils.getTags(a),updateMetadata:o,updateSimilarElements:i,replaceTags:s,locked:!this.mxgraph.isCellEnabled(a)}:null}},{key:"addVertex",value:function(e){var t=this;if(this.mxgraph.getModel().getCell(e.getId()))console.warn("[BoardAgent] Skipping element. A cell with same id is already on the board!",Vm(e));else{var n={};e.getTags().count()&&(n[ispConst.TAGS_ATTR]=e.getTags().join(","));var r=inspectioUtils.createCellXmlValue(e.getType(),e.getName(),e.getDescription(),e.getMetadata(),n),a=this.mxgraph.getStylesheet().getCellStyle(e.getType()),o={width:e.getSize().width,height:e.getSize().height};0===o.width&&(a.minWidth?(o.width=parseInt(a.minWidth.toString(),void 0),o.height=parseInt(a.minHeight.toString(),void 0)):o={width:160,height:100});var i=e.getGeometry(),s=new mxCell(r,new mxGeometry(i.x,i.y,o.width,o.height),e.getType());s.setId(e.getId()),s.setVertex(!0),this.mxgraph.execWithUnscaledView(function(){var e=t.mxgraph.view.getState(s,!0);t.mxgraph.view.updateCellState(e)});var c=this.mxgraph.getPreferredSizeForCell(s);o.height!==c.height&&s.setGeometry(new mxGeometry(i.x,i.y,c.width,c.height));var d=e.getParent()?this.mxgraph.getModel().getCell(e.getParent().getId()):null;inspectioUtils.isContainer(s)&&inspectioUtils.initContainer(s,this.mxgraph,!0),this.mxgraph.importCells([s],0,0,d)}}},{key:"addEdge",value:function(e){}},{key:"getGeometryRelativeToElement",value:function(e,t,n,r,a){var o=e.getGeometry(),i=e.getSize(),s="object"===typeof r?r.x:r,c="object"===typeof r?r.y:r;"undefined"===typeof a&&(a=!0);var d=0===i.width||0===n.width?o.x:o.x+i.width/2-n.width/2,u=0===i.height||0===n.height?o.y:o.y+i.height/2-n.height/2;switch(t){case Pc.left:return{x:o.x-s-n.width,y:a?u:o.y};case Pc.right:return{x:o.x+i.width+s,y:a?u:o.y};case Pc.above:return{x:a?d:o.x,y:o.y-c-n.height};case Pc.below:return{x:a?d:o.x,y:o.y+i.height+c};case Pc.aboveLeft:return{x:o.x-s-n.width,y:o.y-c-n.height};case Pc.aboveRight:return{x:o.x+i.width+s,y:o.y-c-n.height};case Pc.belowLeft:return{x:o.x-s-n.width,y:o.y+i.height+c};case Pc.belowRight:return{x:o.x+i.width+s,y:o.y+i.height+c}}return{x:0,y:0}}},{key:"getSchemaFromDescription",value:function(e){var t=e.getDescription(),n=lm.fromString(t);return n.isEmpty()?lm.fromString("string"):n}},{key:"expandIfNeeded",value:function(e){var t=this,n=0,r=0;e.children().forEach(function(e){var a=t.getNode(e.getId());a&&(e=a);var o=e.getGeometry(),i=e.getSize();(o.x+i.width>n||"undefined"===typeof n)&&(n=o.x+i.width),(o.y+i.height>r||"undefined"===typeof r)&&(r=o.y+i.height)});if(0!==n||0!==r){var a={width:n+160,height:r+160},o=e.getSize();(a.width>o.width||a.height>o.height)&&this.resizeNode(e,{width:Math.max(a.width,o.width),height:Math.max(a.height,o.height)})}}}]),e}(),Ym=function(){function e(){Object(Be.a)(this,e)}return Object(De.a)(e,[{key:"getId",value:function(){return"__EMPTY_LAYER__"}},{key:"getName",value:function(){return"Empty Layer"}},{key:"getTechnicalName",value:function(){return this.getName()}},{key:"getFQCN",value:function(e){return wm(this,!1,!1,!0,e)}},{key:"getTechnicalFQCN",value:function(e){return wm(this,!1,!1,!0,e)}},{key:"getDescription",value:function(){return""}},{key:"getType",value:function(){return Dc.misc}},{key:"getLink",value:function(){return null}},{key:"getTags",value:function(){return Object(fe.List)()}},{key:"isLayer",value:function(){return!0}},{key:"isDefaultLayer",value:function(){return!1}},{key:"getParent",value:function(){return null}},{key:"changeParent",value:function(e){return this}},{key:"children",value:function(){return Object(fe.List)()}},{key:"getSources",value:function(){return Object(fe.List)()}},{key:"getTargets",value:function(){return Object(fe.List)()}},{key:"getMetadata",value:function(){return null}},{key:"getParsedMetadata",value:function(){return{}}},{key:"setChildren",value:function(e){return this}},{key:"getGeometry",value:function(){return{x:0,y:0}}},{key:"getSize",value:function(){return{width:0,height:0}}},{key:"changeName",value:function(e){return this}},{key:"changeMetadata",value:function(e){return this}},{key:"isEnabled",value:function(){return!0}},{key:"changeGeometry",value:function(e){return this}},{key:"changeSize",value:function(e){return this}},{key:"getVersion",value:function(){return 1}}]),e}(),Km=function(){function e(t){Object(Be.a)(this,e),this.boardXml=void 0,t||(t=""),this.boardXml=t}return Object(De.a)(e,[{key:"createCellId",value:function(){return Wl()().new()}},{key:"getCurrentScale",value:function(){return 1}},{key:"getCurrentTranslate",value:function(){return{x:0,y:0}}},{key:"onPanning",value:function(e){}},{key:"offPanning",value:function(e){}},{key:"translateMousePoint",value:function(e,t){return{x:e,y:t}}},{key:"onZoom",value:function(e){}},{key:"offZoom",value:function(e){}},{key:"getRoot",value:function(){return new Ym}},{key:"openLayersDialog",value:function(){}},{key:"triggerCody",value:function(){}},{key:"selectNode",value:function(e){return!1}},{key:"focusNode",value:function(e,t){}},{key:"hasUserLevelVisibilityChanges",value:function(){return!1}},{key:"isVisible",value:function(e){return!1}},{key:"setUserVisible",value:function(e,t){}},{key:"applyVisibilityGlobally",value:function(){}},{key:"isLocked",value:function(e){return!1}},{key:"setLocked",value:function(e,t){}},{key:"addLayer",value:function(e){}},{key:"deleteLayer",value:function(e){}},{key:"isActiveLayer",value:function(e){return!1}},{key:"setAsActiveLayer",value:function(e){}},{key:"setDefaultLayerAsActive",value:function(){}},{key:"highlightLayer",value:function(e){}},{key:"addNode",value:function(e){}},{key:"getNode",value:function(e){return null}},{key:"addNodeNextToAnother",value:function(e,t,n,r,a){}},{key:"moveNodeNextToAnother",value:function(e,t,n,r,a){}},{key:"deleteNode",value:function(e){}},{key:"changeNodeName",value:function(e,t){}},{key:"changeNodeDescription",value:function(e,t){}},{key:"changeNodeLabel",value:function(e,t){}},{key:"changeNodeMetadata",value:function(e,t){}},{key:"changeNodeTags",value:function(e,t){}},{key:"resizeNode",value:function(e,t){}},{key:"moveNode",value:function(e,t){}},{key:"switchParent",value:function(e,t,n,r){}},{key:"connectNodes",value:function(e,t,n,r,a){}},{key:"highlightNodes",value:function(e){}},{key:"copySelectionToActiveLayer",value:function(){return!1}},{key:"changeFeatureStatus",value:function(e,t){}},{key:"getFeatureTaskLink",value:function(e){return null}},{key:"setFeatureTaskLink",value:function(e,t){}},{key:"exportXmlSnapshot",value:function(){return this.boardXml}},{key:"onSelectionChanged",value:function(e){}},{key:"setCockpitBaseUrl",value:function(e){}},{key:"focus",value:function(){}},{key:"clearMoveVideoAvatarToPositionListener",value:function(){}},{key:"onMoveVideoAvatarToPosition",value:function(e){}},{key:"setVideoAvatarEnabled",value:function(e){}},{key:"trackVideoAvatarPosition",value:function(e,t){}},{key:"setCodyDownCb",value:function(e){}},{key:"setCodyLeftCb",value:function(e){}},{key:"setCodyRightCb",value:function(e){}},{key:"setCodyUpCb",value:function(e){}},{key:"openCodyWizard",value:function(e){}},{key:"mergeIntoSchema",value:function(e,t){}},{key:"isEventModelingEnabled",value:function(){return!0}},{key:"makeDraggable",value:function(e,t){}},{key:"makeActiveGraphElementIfPossible",value:function(e){return null}}]),e}(),Zm={id:"",name:"",description:"",type:Dc.misc,link:null,tags:Object(fe.List)(),layer:!1,defaultLayer:!1,parent:null,childrenList:Object(fe.List)(),sourcesList:Object(fe.List)(),targetsList:Object(fe.List)(),geometry:{x:0,y:0},size:{width:0,height:0},metadata:null,enabled:!0,version:1},Xm=function e(t,n,r){var a=t.getMetadata();if(r&&a)try{a=Lc(Rc(a,void 0,!0))}catch(o){a=null}return new np({id:t.getId(),name:t.getName(),description:t.getDescription(),type:t.getType(),link:t.getLink(),tags:t.getTags(),layer:t.isLayer(),defaultLayer:t.isDefaultLayer(),parent:t.getParent()?tp(t.getParent(),t,n,r):null,childrenList:t.children().map(function(t){return e(t,n,r)}),sourcesList:t.getSources().map(function(e){return ep(e,n,r)}),targetsList:t.getTargets().map(function(e){return ep(e,n,r)}),geometry:new Hm(t.getGeometry()),size:new $m(t.getSize()),metadata:a,parsedMetadata:n?void 0:t.getParsedMetadata(),enabled:t.isEnabled()})},ep=function(e,t,n){var r=e.getMetadata();if(n&&r)try{r=Lc(Rc(r,void 0,!0))}catch(a){r=null}return new np({id:e.getId(),name:e.getName(),description:e.getDescription(),type:e.getType(),link:e.getLink(),tags:e.getTags(),layer:e.isLayer(),defaultLayer:e.isDefaultLayer(),parent:e.getParent()?tp(e.getParent(),e,t,n):null,childrenList:e.children().map(function(e){return Xm(e,t,n)}),sourcesList:Object(fe.List)(),targetsList:Object(fe.List)(),geometry:new Hm(e.getGeometry()),size:new $m(e.getSize()),metadata:r,parsedMetadata:t?void 0:e.getParsedMetadata(),enabled:e.isEnabled()})},tp=function e(t,n,r,a){var o=t.getMetadata();if(a&&o)try{o=Lc(Rc(o,void 0,!0))}catch(i){o=null}return new np({id:t.getId(),name:t.getName(),description:t.getDescription(),type:t.getType(),link:t.getLink(),tags:t.getTags(),layer:t.isLayer(),defaultLayer:t.isDefaultLayer(),parent:t.getParent()?e(t.getParent(),t,r,a):null,childrenList:Object(fe.List)(),sourcesList:Object(fe.List)(),targetsList:Object(fe.List)(),geometry:new Hm(t.getGeometry()),size:new $m(t.getSize()),metadata:o,parsedMetadata:r?void 0:t.getParsedMetadata(),enabled:t.isEnabled()})},np=function(e){function t(){var e,n;Object(Be.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(Pe.a)(this,(e=Object(ze.a)(t)).call.apply(e,[this].concat(a)))).parsedMetadataCache=void 0,n.fqcnCache=void 0,n.technicalFQCNCache=void 0,n.typeCache=void 0,n.technicalNameCache=void 0,n}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getTechnicalName",value:function(){return this.technicalNameCache||(this.technicalNameCache=this.getParsedMetadata().$nodeName||this.getName()),this.technicalNameCache}},{key:"getFQCN",value:function(e){return this.fqcnCache||(this.fqcnCache=wm(this,!1,!1,!0,e)),this.fqcnCache}},{key:"getTechnicalFQCN",value:function(e){return this.technicalFQCNCache||(this.technicalFQCNCache=wm(this,!1,!1,!1,e)),this.technicalFQCNCache}},{key:"changeName",value:function(e){return this.set("name",e)}},{key:"getDescription",value:function(){return this.description}},{key:"getType",value:function(){return this.typeCache||(this.typeCache=this.getParsedMetadata().$nodeType||this.type),this.typeCache}},{key:"getLink",value:function(){return this.link}},{key:"getTags",value:function(){return this.tags}},{key:"isLayer",value:function(){return this.layer}},{key:"isDefaultLayer",value:function(){return this.defaultLayer}},{key:"getParent",value:function(){return this.parent}},{key:"changeParent",value:function(e){return this.set("parent",e)}},{key:"children",value:function(){return this.childrenList}},{key:"getSources",value:function(){return this.sourcesList}},{key:"getTargets",value:function(){return this.targetsList}},{key:"getGeometry",value:function(){return this.geometry}},{key:"getSize",value:function(){return this.size}},{key:"getMetadata",value:function(){return this.metadata}},{key:"getParsedMetadata",value:function(){var e=this.get("parsedMetadata");return e||(this.parsedMetadataCache||(this.parsedMetadataCache=km(this)),this.parsedMetadataCache)}},{key:"setChildren",value:function(e){return this.set("childrenList",e)}},{key:"changeMetadata",value:function(e){var t=this.set("metadata",e);return t.set("parsedMetadata",Object(fe.Map)(km(t)))}},{key:"isEnabled",value:function(){return this.get("enabled")}},{key:"changeGeometry",value:function(e){return this.set("geometry",e)}},{key:"changeSize",value:function(e){return this.set("size",e)}},{key:"getVersion",value:function(){return this.get("version",1)}}]),t}(Object(fe.Record)(Zm));!function(e){e.added="added",e.edited="edited",e.deleted="deleted",e.moved="moved"}(zm||(zm={})),function(e){e.multiple="multiple"}(Mm||(Mm={}));var rp,ap=Object(Ye.a)({},Dc,Mm),op={userId:"",username:"",boardId:"",boardVersion:new zl(Pl),action:zm.edited,cellType:ap.misc,label:"",date:"",cellId:void 0},ip=function(e){function t(){return Object(Be.a)(this,t),Object(Pe.a)(this,Object(ze.a)(t).apply(this,arguments))}return Object(Me.a)(t,e),t}(Object(fe.Record)(op)),sp=function(e,t){return new ip({action:e.action,cellType:e.cellType,label:e.cellLabel,userId:t.userId,username:t.username,boardId:e.board,boardVersion:e.toBoardVersion(),date:e.recordedAt,cellId:e.cellId})},cp={uid:"",name:"BoardChanged",board:"",changeSet:Object(fe.List)(),version:0,recordedAt:"",userId:"",action:zm.edited,cellType:ap.misc,cellLabel:"",cellId:void 0},dp=function(e){var t=Object(Ye.a)({},e,{changeSet:Object(fe.List)(e.changeSet)});return new mp(t)},up=function(e,t,n,r,a,o,i,s){return new mp({uid:"",name:cp.name,board:e,changeSet:t,version:n,recordedAt:"",userId:r,action:a,cellType:o,cellLabel:i,cellId:s})},lp=function(e){return dp({uid:e.patchId,board:e.boardId,name:cp.name,changeSet:e.patch,version:e.boardVersion.version,userId:e.boardVersion.userId,recordedAt:e.recordedAt,action:e.action,cellId:null!==e.cellId?e.cellId:void 0,cellType:e.cellType,cellLabel:e.cellLabel})},mp=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=ot.v4()),""===e.recordedAt&&(e.recordedAt=(new Date).toISOString()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"toBoardVersion",value:function(){return new zl({userId:this.userId,version:this.version})}}]),t}(Object(fe.Record)(cp));!function(e){e.event="event"}(rp||(rp={}));var pp,fp={uid:"",aggregateType:"BoardGraphElement",name:"",parentId:null,type:rp.event,children:void 0,sources:void 0,targets:void 0},hp=function(e){var t=Ln(e,[Mn("id"),"id missing"],[Mn("name"),"name missing in "+e.id],[Mn("parentId"),"parentId missing in "+e.id],[Mn("type"),"type missing in "+e.id]);return _n(t)?t:Nn(new gp({uid:e.id,aggregateType:"BoardGraphElement",name:e.name,parentId:e.parentId,type:e.type,sources:e.sources||void 0,targets:e.targets||void 0,children:e.children||void 0}))},gp=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=ot.v4()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),t}(Object(fe.Record)(fp)),bp={uid:"",aggregateType:"BoardInvitation",boardId:"",invitedUserEmail:"",invitingUser:"",permissions:{adminAccess:!1,readAccess:!1,writeAccess:!1},status:"pending",resendAttempts:0},yp=function(e){var t=Ln(e,[Mn("invitationId"),"invitationId missing"],[Mn("boardId"),"boardId missing in "+e.permissionsId],[Mn("invitedUserEmail"),"invitedUserEmail missing in "+e.permissionsId],[Mn("invitingUser"),"invitingUser missing in "+e.permissionsId],[Mn("permissions"),"permissions missing in "+e.permissionsId],[Mn("status"),"status missing in "+e.permissionsId]);return _n(t)?t:Nn(new vp(Object(Ye.a)({},bp,e,{uid:e.invitationId})))},vp=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=ot.v4()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"resend",value:function(){return this.set("resendAttempts",this.resendAttempts+1)}},{key:"revoke",value:function(){return this.set("status","revoked")}}]),t}(Object(fe.Record)(bp)),Ep={uid:"",aggregateType:"BoardPermission",permissions:{adminAccess:!1,readAccess:!1,writeAccess:!1},teamId:"",boardId:""},Op=function(e){var t=Ln(e,[Mn("permissionsId"),"permissionsId missing"],[Mn("permissions"),"permissions missing in "+e.permissionsId],[Mn("teamId"),"teamId missing in "+e.permissionsId],[Mn("boardId"),"boardId missing in "+e.permissionsId]);return _n(t)?t:Nn(new xp({uid:e.permissionsId,aggregateType:"BoardPermission",permissions:e.permissions,teamId:e.teamId,boardId:e.boardId}))},xp=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=ot.v4()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"changePermissions",value:function(e){return this.set("permissions",e)}}]),t}(Object(fe.Record)(Ep)),jp={boardId:"",xml:"",boardVersion:new zl(Pl)},wp=function(e){function t(e){return Object(Be.a)(this,t),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),t}(Object(fe.Record)(jp)),kp=n(1387),Ip=n(1388),Sp=n(1389),Cp=n(157),_p=function(e,t,n){return Le(Mi+"AddTeam",{teamId:e,name:t,organizationId:n})},Tp=function(e,t){return Le(Mi+"RenameTeam",{teamId:e,name:t})},Ap=function(e,t){return Le(Mi+"ChangeTeamDescription",{teamId:e,newDescription:t})},Np=function(e,t,n){return Le(Mi+"InviteUserToTeam",{invitationId:e,teamId:t,invitedUser:n})},Lp=function(e){return Le(Mi+"ResendTeamInvitation",{invitationId:e})},Rp=function(e){return Le(Mi+"RevokeTeamInvitation",{invitationId:e})},Bp=function(e,t){return Le(Mi+"RemoveMemberFromTeam",{teamId:e,memberId:t})},Dp=function(e){return Le(Mi+"DeleteTeam",{teamId:e})},Pp=function(e,t,n){return Le(Mi+"AdminGrantTeamAccessToBoard",{boardId:e,teamId:t,boardPermissions:n||{readAccess:!0,writeAccess:!0,adminAccess:!1}})},zp=function(e,t){return Le(Mi+"AdminRevokeTeamAccessToBoard",{boardId:e,teamId:t})},Mp=function(){return Le(Mi+"UserTeams",{})},Up=function(e){return Le(Mi+"AcknowledgeTeamInvitation",{invitationId:e})},Fp=function(e){return Le(Mi+"InvitationTeam",{invitationId:e})},Gp=function(e){return Le(Mi+"OpenTeamInvitations",{teamId:e})},qp=function(e,t){return Le(Mi+"MoveTeamToOrganization",{teamId:e,organizationId:t})},Vp="@@InspectioTeams/AddTeam",Wp="@@InspectioTeams/RenameTeam",Hp="@@InspectioTeams/ChangeTeamDescription",$p="@@InspectioTeams/InviteUserToTeam",Jp="@@InspectioTeams/ResendTeamInvitation",Qp="@@InspectioTeams/RevokeTeamInvitation",Yp="@@InspectioTeams/RemoveMemberFromTeam",Kp="@@InspectioTeams/FetchUserTeams",Zp="@@InspectioTeams/AddTeams",Xp="@@InspectioTeams/AdminGrantTeamAccessToBoard",ef="@@InspectioTeams/AdminRevokeTeamAccessToBoard",tf="@@InspectioTeams/DeleteTeam",nf="@@InspectioTeams/TeamAdded",rf="@@InspectioTeams/TeamRenamed",af="@@InspectioTeams/TeamDescriptionChanged",of="@@InspectioTeams/TeamsFetched",sf="@@InspectioTeams/MemberRemovedFromTeam",cf="@@InspectioTeams/TeamDeleted",df="@@InspectioTeams/TeamInvitationsLoaded",uf="@@InspectioTeams/TeamInvitationResent",lf="@@InspectioTeams/TeamInvitationRevoked",mf="@InspectioBoards/TeamAccessToBoardGranted",pf="@InspectioBoards/TeamAccessToBoardRevoked",ff="@@InspectioTeams/MoveTeamToOrganization",hf="@@InspectioTeams/TeamMovedToOrganization",gf=function(e,t,n){return Object(at.action)(Vp,{teamId:e,teamName:t,organizationId:n})},bf=function(e,t){return Object(at.action)(Wp,{teamId:e,newName:t})},yf=function(e,t){return Object(at.action)(Hp,{teamId:e,newDescription:t})},vf=function(e,t,n){return Object(at.action)($p,{invitationId:e,teamId:t,userEmail:n})},Ef=function(e){return Object(at.action)(Jp,{invitationId:e})},Of=function(e){return Object(at.action)(Qp,{invitationId:e})},xf=function(e,t){return Object(at.action)(Yp,{teamId:e,memberId:t})},jf=function(e){return Object(at.action)(Zp,e)},wf=function(e){return Object(at.action)(tf,{teamId:e})},kf=function(e,t,n){return Object(at.action)(Xp,{boardId:e,teamIds:t,permissions:n})},If=function(e,t){return Object(at.action)(ef,{boardId:e,teamId:t})},Sf=function(e,t){return Object(at.action)(ff,{teamId:e,organizationId:t})},Cf=function(e){return Object(at.action)(nf,e)},_f=function(e){return Object(at.action)(rf,e)},Tf=function(e){return Object(at.action)(af,e)},Af=function(e){return Object(at.action)(sf,e)},Nf=function(e){return Object(at.action)(cf,e)},Lf=function(e){return Object(at.action)(df,e)},Rf=function(e){return Object(at.action)(uf,e)},Bf=function(e){return Object(at.action)(lf,e)},Df=function(e){return Object(at.action)(of,e)},Pf=function(e,t){return Object(at.action)(mf,{boardId:e,teamId:t})},zf=function(e,t){return Object(at.action)(pf,{boardId:e,teamId:t})},Mf=function(e){return Object(at.action)(hf,e)},Uf={uid:"",name:"",description:"",ownerId:"",members:Object(fe.List)(),admins:Object(fe.List)(),deleted:!0,aggregateType:"Team",isNew:!1,organizationId:null},Ff=function(e){var t=Ln(e,[Mn("teamId"),"teamId missing"],[Mn("name"),"name missing in "+e.teamId],[Mn("description"),"description missing in "+e.teamId],[Mn("ownerId"),"ownerId missing in "+e.teamId],[Mn("members"),"members missing in "+e.teamId],[Mn("admins"),"admins missing in "+e.teamId],[Mn("organizationId"),"organizationId missing in "+e.teamId],[Mn("deleted"),"deleted missing in "+e.teamId]);return _n(t)?t:Nn(new qf({uid:e.teamId,name:e.name,description:e.description,ownerId:e.ownerId,members:Object(fe.List)(e.members),admins:Object(fe.List)(e.admins),deleted:e.deleted,aggregateType:"Team",isNew:e.isNew||!1,organizationId:e.organizationId||null}))},Gf=function(e){return new qf(Object(Ye.a)({},Uf,{uid:e,isNew:!0}))},qf=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=ot.v4()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"rename",value:function(e){return this.set("name",e)}},{key:"changeDescription",value:function(e){return this.set("description",e)}},{key:"removeMember",value:function(e){var t=this.set("members",this.members.filter(function(t){return t!==e}));return t.set("admins",t.admins.filter(function(t){return t!==e}))}},{key:"moveToOrganization",value:function(e){return this.set("organizationId",e)}},{key:"isAdmin",value:function(e){return this.ownerId===e||this.admins.contains(e)}}]),t}(Object(fe.Record)(Uf));!function(e){e.open="open",e.acknowledged="acknowledged",e.revoked="revoked"}(pp||(pp={}));var Vf={uid:"",teamId:"",admin:"",invitedUser:"unknown@acme.com",status:pp.open,resendAttempts:0,aggregateType:"TeamInvitation"},Wf=function(e){var t=Ln(e,[Mn("invitationId"),"invitationId missing"],[Mn("teamId"),"teamId missing in "+e.invitationId],[Mn("admin"),"admin missing in "+e.invitationId],[Mn("invitedUser"),"invitedUser missing in "+e.invitationId],[Mn("status"),"status missing in "+e.invitationId]);return _n(t)?t:Nn(new Hf(Object(Ye.a)({},e,{uid:e.invitationId,aggregateType:"TeamInvitation"})))},Hf=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=ot.v4()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"resend",value:function(){return this.set("resendAttempts",this.resendAttempts+1)}},{key:"revoke",value:function(){return this.set("status",pp.revoked)}}]),t}(Object(fe.Record)(Vf)),$f=Object(fe.Map)(),Jf=Object(fe.Map)(),Qf=Object(Ua.combineReducers)({Team:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case nf:return Fa(e,t.payload);case rf:case af:case sf:case hf:return Ga(e,t.payload);case of:return Va(e=Wa(),t.payload);case cf:return qa(e,t.payload);default:return e}},TeamInvitation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jf,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case df:return Va(e,t.payload);case uf:case lf:return Ga(e,t.payload);default:return e}}},function(){return Object(fe.fromJS)({Team:void 0,TeamInvitation:void 0})}),Yf=xe.a.mark(Zf),Kf=xe.a.mark(Xf);function Zf(e){var t;return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=Object(fe.List)(),e.forEach(function(e){t=t.merge(e.members)}),t=t.toSet().toList(),n.next=5,Object(gn.g)(p.loadUsersInfo(t.toArray()));case 5:case"end":return n.stop()}},Yf,this)}function Xf(e){var t,n,r,a;return xe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(gn.c)(F.fetchUserTeams);case 2:if(t=o.sent,n=t.response,!t.error){o.next=8;break}return o.next=8,Object(gn.g)(i.Command.error("Request Error","Could not load teams"));case 8:if(!n){o.next=20;break}if(!_n(r=Pn(n.data,Rn([Un(),"Response data is not of type Array"]),Dn(function(t){return e&&t.teamId===e&&(t.isNew=!0),Ff(t)})))){o.next=14;break}return console.error("Failed to process team response from server",r.value,n.data),o.next=14,Object(gn.g)(i.Command.error("Request Error","Could not load teams"));case 14:if(!Tn(r)){o.next=20;break}return a=Object(fe.List)(r.value),o.next=18,Object(gn.g)(Df(a));case 18:return o.next=20,Object(gn.c)(Zf,a);case 20:case"end":return o.stop()}},Kf,this)}var eh=xe.a.mark(nh),th=xe.a.mark(rh);function nh(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.c)(F.addTeam,e.payload.teamId,e.payload.teamName,e.payload.organizationId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(gn.g)(i.Command.error("Request Error","Could not add team."));case 8:if(!n){a.next=16;break}return r=Gf(e.payload.teamId),a.next=12,Object(gn.g)(V.teamAdded(r.rename(e.payload.teamName)));case 12:return a.next=14,Object(gn.g)(i.Command.info("Team created","Team created"));case 14:return a.next=16,Object(gn.c)(Xf,e.payload.teamId);case 16:case"end":return a.stop()}},eh,this)}function rh(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([G.ADD_TEAM]);case 3:return e=t.sent,t.next=6,Object(gn.f)(nh,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},th,this)}var ah=xe.a.mark(sh),oh=xe.a.mark(ch),ih=xe.a.mark(dh);function sh(e){var t,n,r,a,o,s,c,d,u,l;return xe.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:t=!1,n=!0,r=!1,a=void 0,m.prev=4,o=e.payload.teamIds[Symbol.iterator]();case 6:if(n=(s=o.next()).done){m.next=23;break}return c=s.value,m.next=10,Object(gn.c)(F.adminGrantTeamAccessToBoard,e.payload.boardId,c,e.payload.permissions);case 10:if(d=m.sent,u=d.response,!d.error){m.next=16;break}return m.next=16,Object(gn.g)(i.Command.error("Request Error","Could not add team to board."));case 16:if(!u){m.next=20;break}return t=!0,m.next=20,Object(gn.g)(W.Event.teamAccessToBoardGranted(e.payload.boardId,c));case 20:n=!0,m.next=6;break;case 23:m.next=29;break;case 25:m.prev=25,m.t0=m.catch(4),r=!0,a=m.t0;case 29:m.prev=29,m.prev=30,n||null==o.return||o.return();case 32:if(m.prev=32,!r){m.next=35;break}throw a;case 35:return m.finish(32);case 36:return m.finish(29);case 37:if(!t){m.next=41;break}return l=e.payload.teamIds.length>1?"s":"",m.next=41,Object(gn.g)(i.Command.info("Team Added","Team".concat(l," successfully added to board")));case 41:case"end":return m.stop()}},ah,this,[[4,25,29,37],[30,,32,36]])}function ch(e){var t,n;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(gn.c)(F.adminRevokeTeamAccessToBoard,e.payload.boardId,e.payload.teamId);case 2:if(t=r.sent,n=t.response,!t.error){r.next=8;break}return r.next=8,Object(gn.g)(i.Command.error("Request Error","Could not revoke team access."));case 8:if(!n){r.next=13;break}return r.next=11,Object(gn.g)(W.Event.teamAccessToBoardRevoked(e.payload.boardId,e.payload.teamId));case 11:return r.next=13,Object(gn.g)(i.Command.info("Team Access Revoked","The team has no longer access to the board."));case 13:case"end":return r.stop()}},oh,this)}function dh(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([Xp,ef]);case 3:e=t.sent,t.t0=e.type,t.next=t.t0===Xp?7:t.t0===ef?10:13;break;case 7:return t.next=9,Object(gn.f)(sh,e);case 9:return t.abrupt("break",13);case 10:return t.next=12,Object(gn.f)(ch,e);case 12:return t.abrupt("break",13);case 13:t.next=0;break;case 15:case"end":return t.stop()}},ih,this)}var uh=xe.a.mark(mh),lh=xe.a.mark(ph);function mh(e){var t,n,r,a;return xe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(gn.i)(Jh(e.payload.teamId));case 2:return t=o.sent,n=t.changeDescription(e.payload.newDescription),o.next=6,Object(gn.g)(W.Event.teamDescriptionChanged(n));case 6:return o.next=8,Object(gn.c)(W.Api.changeTeamDescription,e.payload.teamId,e.payload.newDescription);case 8:if(r=o.sent,a=r.response,!r.error){o.next=16;break}return o.next=14,Object(gn.g)(i.Command.error("Request Error","Could not change team description."));case 14:return o.next=16,Object(gn.g)(W.Event.teamDescriptionChanged(t));case 16:if(!a){o.next=19;break}return o.next=19,Object(gn.g)(i.Command.info("Team Description Changed","Description saved successfully"));case 19:case"end":return o.stop()}},uh,this)}function ph(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([W.Type.CHANGE_TEAM_DESCRIPTION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(mh,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},lh,this)}var fh=xe.a.mark(gh),hh=xe.a.mark(bh);function gh(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.i)(Jh(e.payload.teamId));case 2:return t=a.sent,a.next=5,Object(gn.c)(W.Api.deleteTeam,e.payload.teamId);case 5:if(n=a.sent,r=n.response,!n.error){a.next=11;break}return a.next=11,Object(gn.g)(i.Command.error("Request Error","Could not delete team."));case 11:if(!r){a.next=16;break}return a.next=14,Object(gn.g)(i.Command.info("Team deleted","Team "+t.name+"deleted"));case 14:return a.next=16,Object(gn.g)(W.Event.teamDeleted(t));case 16:case"end":return a.stop()}},fh,this)}function bh(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([W.Type.DELETE_TEAM]);case 3:return e=t.sent,t.next=6,Object(gn.f)(gh,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},hh,this)}var yh=xe.a.mark(vh);function vh(){var e,t,n,r,a;return xe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(gn.k)([G.INVITE_USER_TO_TEAM]);case 3:return e=o.sent,o.next=6,Object(gn.c)(F.inviteUserToTeam,e.payload.invitationId,e.payload.teamId,e.payload.userEmail);case 6:return t=o.sent,n=t.response,r=t.error,o.next=11,Object(gn.i)(Jh(e.payload.teamId));case 11:if(a=o.sent,!r){o.next=15;break}return o.next=15,Object(gn.g)(i.Command.error("Request Error","Could not add user to team."));case 15:if(!n){o.next=20;break}return o.next=18,Object(gn.g)(i.Command.info("User invited","The user was invited to the team."));case 18:return o.next=20,Object(gn.c)(Xf,a.isNew?a.uid:void 0);case 20:o.next=0;break;case 22:case"end":return o.stop()}},yh,this)}var Eh=xe.a.mark(xh),Oh=xe.a.mark(jh);function xh(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.i)(Jh(e.payload.teamId));case 2:if(t=a.sent){a.next=7;break}return a.next=6,Object(gn.g)(i.Command.error("Internal Error","Team could not be loaded from local store. Please contact support."));case 6:return a.abrupt("return");case 7:return a.next=9,Object(gn.c)(F.removeMemberFromTeam,e.payload.teamId,e.payload.memberId);case 9:if(n=a.sent,r=n.response,!n.error){a.next=15;break}return a.next=15,Object(gn.g)(i.Command.error("Request Error","Could not remove member from team."));case 15:if(!r){a.next=20;break}return a.next=18,Object(gn.g)(Af(t.removeMember(e.payload.memberId)));case 18:return a.next=20,Object(gn.g)(i.Command.info("Member removed","The member was removed from the team."));case 20:case"end":return a.stop()}},Eh,this)}function jh(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([G.REMOVE_MEMBER_FROM_TEAM]);case 3:return e=t.sent,t.next=6,Object(gn.f)(xh,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Oh,this)}var wh=xe.a.mark(Ih),kh=xe.a.mark(Sh);function Ih(e){var t,n,r,a;return xe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(gn.i)(Jh(e.payload.teamId));case 2:return t=o.sent,n=t.name,t=t.rename(e.payload.newName),o.next=7,Object(gn.g)(W.Event.teamRenamed(t));case 7:return o.next=9,Object(gn.c)(W.Api.renameTeam,e.payload.teamId,e.payload.newName);case 9:if(r=o.sent,a=r.response,!r.error){o.next=18;break}return o.next=15,Object(gn.g)(i.Command.error("Request Error","Could not rename team."));case 15:return t=t.rename(n),o.next=18,Object(gn.g)(W.Event.teamRenamed(t));case 18:if(!a){o.next=21;break}return o.next=21,Object(gn.g)(i.Command.info("Team renamed","Team renamed to: "+e.payload.newName));case 21:case"end":return o.stop()}},wh,this)}function Sh(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([W.Type.RENAME_TEAM]);case 3:return e=t.sent,t.next=6,Object(gn.f)(Ih,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},kh,this)}var Ch=function(e){return function(t){return function(e,t){return e.getIn([$h,"TeamInvitation",t])}(t,e)}},_h=xe.a.mark(Ah),Th=xe.a.mark(Nh);function Ah(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.i)(Ch(e.payload.invitationId));case 2:if(!(t=a.sent)){a.next=17;break}return a.next=6,Object(gn.c)(W.Api.resendTeamInvitation,e.payload.invitationId);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(gn.g)(i.Command.error("Request Error","Could not resend team invitation."));case 12:if(!r){a.next=15;break}return a.next=15,Object(gn.g)(i.Command.info("insp.team.notify.invitation_resend.success.title","insp.team.notify.invitation_resend.success.msg",{email:t.invitedUser}));case 15:return a.next=17,Object(gn.g)(W.Event.teamInvitationResent(t.resend()));case 17:case"end":return a.stop()}},_h,this)}function Nh(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([W.Type.RESEND_TEAM_INVITATION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(Ah,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Th,this)}var Lh=xe.a.mark(Bh),Rh=xe.a.mark(Dh);function Bh(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.i)(Ch(e.payload.invitationId));case 2:if(!(t=a.sent)){a.next=17;break}return a.next=6,Object(gn.c)(W.Api.revokeTeamInvitation,e.payload.invitationId);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(gn.g)(i.Command.error("Request Error","Could not revoke team invitation."));case 12:if(!r){a.next=17;break}return a.next=15,Object(gn.g)(i.Command.info("insp.team.notify.invitation_revoke.success.title","insp.team.notify.invitation_revoke.success.msg",{email:t.invitedUser}));case 15:return a.next=17,Object(gn.g)(W.Event.teamInvitationRevoked(t.revoke()));case 17:case"end":return a.stop()}},Lh,this)}function Dh(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([W.Type.REVOKE_TEAM_INVITATION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(Bh,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Rh,this)}var Ph=xe.a.mark(Mh),zh=xe.a.mark(Uh);function Mh(e){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.c)(Xf);case 2:case"end":return e.stop()}},Ph,this)}function Uh(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([f.Type.ACTIVE_ORGANIZATION_SWITCHED]);case 3:return e=t.sent,t.next=6,Object(gn.f)(Mh,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},zh,this)}var Fh=xe.a.mark(qh),Gh=xe.a.mark(Vh);function qh(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.i)(Jh(e.payload.teamId));case 2:if(t=a.sent){a.next=7;break}return a.next=6,Object(gn.g)(i.Command.error("Internal Error","Team could not be loaded from local store. Please contact support."));case 6:return a.abrupt("return");case 7:return a.next=9,Object(gn.c)(W.Api.moveTeamToOrganization,e.payload.teamId,e.payload.organizationId);case 9:if(n=a.sent,r=n.response,!n.error){a.next=15;break}return a.next=15,Object(gn.g)(i.Command.error("Request Error","Could not move team to organization"));case 15:if(!r){a.next=20;break}return a.next=18,Object(gn.g)(Mf(t.moveToOrganization(e.payload.organizationId)));case 18:return a.next=20,Object(gn.g)(i.Command.info("Team moved","Moved team successfully to organization."));case 20:case"end":return a.stop()}},Fh,this)}function Vh(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([W.Type.MOVE_TEAM_TO_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(qh,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Gh,this)}var Wh,Hh,$h="inspectioTeams",Jh=function(e){return function(t){return function(e,t){return e.getIn([$h,"Team",t])}(t,e)}},Qh=function(e,t){return Object(fe.List)(e.getIn([$h,"Team"]).toIndexedSeq().toArray())||Object(fe.List)()},Yh=function(e){var t=T.makeGetCurrentUser(),n=Object(bt.a)([Oi,T.currentUserSelector],function(e,t){if(null!==t.activeOrganization)return e.find(function(e){return e.uid===t.activeOrganization})});return Object(bt.a)([Qh,t,n],function(t,n,r){return t=t.filter(function(e){return!e.deleted}).filter(function(e){return r?e.organizationId===r.uid||!r.explicit&&null===e.organizationId:null===e.organizationId}),e&&(t=t.filter(function(e){return e.isAdmin(n.uid)||r&&r.admins.includes(n.uid)})),t})},Kh=function(e){return"board_".concat(e,"_hidden")},Zh=function(e){return"update_".concat(e,"_viewed")},Xh=function(e,t){return e.getIn(["inspectioUsers","userSettings"])},eg=function(e,t){return Object(bt.a)([Xh],function(n){return n.has(e)?n.get(e):t})},tg=function(){return Object(bt.a)([Xh],function(e){return e.toObject()})},ng=function(){return Object(bt.a)([Xh],function(e){return!!e.get("settings_loaded")})};!function(e){e.NAME_ASC="NAME_ASC",e.NAME_DESC="NAME_DESC",e.CREATED_AT_ASC="CREATED_AT_ASC",e.CREATED_AT_DESC="CREATED_AT_DESC",e.LAST_MODIFIED_ASC="LAST_MODIFIED_ASC",e.LAST_MODIFIED_DESC="LAST_MODIFIED_DESC"}(Wh||(Wh={})),function(e){e.NAME="NAME",e.CREATED_AT="CREATED_AT",e.LAST_MODIFIED="LAST_MODIFIED"}(Hh||(Hh={}));var rg=function(e,t){return e+"_"+("up"===t?"DESC":"ASC")},ag=Object(Ue.b)()(function(e){var t=function(e){switch(e){case Wh.NAME_ASC:return[Hh.NAME,"down"];case Wh.NAME_DESC:return[Hh.NAME,"up"];case Wh.CREATED_AT_ASC:return[Hh.CREATED_AT,"down"];case Wh.CREATED_AT_DESC:return[Hh.CREATED_AT,"up"];case Wh.LAST_MODIFIED_ASC:return[Hh.LAST_MODIFIED,"down"];case Wh.LAST_MODIFIED_DESC:return[Hh.LAST_MODIFIED,"up"]}}(Object(Fe.useSelector)(hg()).sortBy),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(a),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(Fe.useDispatch)();Object(he.useEffect)(function(){a!==s&&c(a)},[a]);var u=[{key:Hh.NAME,text:e.t("insp.overview.sort."+Hh.NAME),value:Hh.NAME},{key:Hh.CREATED_AT,text:e.t("insp.overview.sort."+Hh.CREATED_AT),value:Hh.CREATED_AT},{key:Hh.LAST_MODIFIED,text:e.t("insp.overview.sort."+Hh.LAST_MODIFIED),value:Hh.LAST_MODIFIED}];return he.createElement(tt.a,{selection:!0,options:u,fluid:!0,value:r,onClick:function(e){var t=e.target;"I"===t.tagName&&t.parentElement.blur()},onChange:function(e,t){return n=t.value,void d(L.sortBoardOverview(rg(n,s)));var n},icon:he.createElement(Cp.a,{name:"sort amount "+s,style:{float:"right",cursor:"pointer"},onClick:function(e){e.stopPropagation(),e.preventDefault(),c("up"===s?"down":"up"),d(L.sortBoardOverview(rg(r,"up"===s?"down":"up")))}}),style:{paddingRight:"5px"}})}),og=function(e,t){return Object(fe.List)(e.getIn(["inspectioBoards","boards"]).toIndexedSeq().toArray())||Object(fe.List)()},ig=function(e,t){return!!e.getIn(["inspectioBoards","loadingBoards"])},sg=function(e,t){return e.getIn(["inspectioBoards","initialBoardListLoaded"])||!1},cg=function(e,t){return e.getIn(["inspectioBoards","overview"])},dg=function(){var e=Al();return Object(bt.a)([og,e],function(e,t){return e=(e=e.filter(function(e){return t?!t.explicitOrganization&&null===e.organization||e.organization===t.organizationId:null===e.organization})).sortBy(function(e){return e.name},function(e,t){return e===t?0:e>t?1:-1})})},ug=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Al();return Object(bt.a)([og,cg,Xh,ki,t],function(t,n,r,a,o){if(t=t.filter(function(e){return o?!o.explicitOrganization&&null===e.organization||e.organization===o.organizationId:null===e.organization}),""!==n.filter){var i=n.filter.split(" ").map(function(e){return e.trim()}),s=i.filter(function(e){return"#"===e.charAt(0)});s.length&&(t=t.filter(function(e){var t=!0;return s.forEach(function(n){e.tags.contains(n.slice(1))||(t=!1)}),t}));var c=i.filter(function(e){return"#"!==e.charAt(0)}).join(" ").toLowerCase();""!==c&&(t=t.filter(function(e){return-1!==e.name.toLowerCase().search(c)}))}switch(n.responsibleTeam&&(t=t.filter(function(e){return e.assignedTeams.contains(n.responsibleTeam)})),!e&&n.allSharedBoardsHidden&&(t=t.filter(function(e){return!e.shared})),!e&&n.allOwnBoardsHidden&&(t=t.filter(function(e){return e.shared})),e||(t=t.filter(function(e){return!0!==r.get(Kh(e.uid))})),n.sortBy){case Wh.NAME_ASC:t=t.sortBy(function(e){return e.name},function(e,t){return e===t?0:e>t?1:-1});break;case Wh.NAME_DESC:t=t.sortBy(function(e){return e.name},function(e,t){return e===t?0:e>t?-1:1});break;case Wh.LAST_MODIFIED_ASC:t=t.sortBy(function(e){return e.lastModified},function(e,t){return e===t?0:e>t?1:-1});break;case Wh.LAST_MODIFIED_DESC:t=t.sortBy(function(e){return e.lastModified},function(e,t){return e===t?0:e>t?-1:1});break;case Wh.CREATED_AT_ASC:t=t.sortBy(function(e){return e.createdAt},function(e,t){return e===t?0:e>t?1:-1});break;case Wh.CREATED_AT_DESC:t=t.sortBy(function(e){return e.createdAt},function(e,t){return e===t?0:e>t?-1:1})}return t})},lg=function(e){return Object(bt.a)([og],function(t){return t.filter(function(t){return t.assignedTeams.contains(e)})})},mg=function(){return Object(bt.a)([ig],function(e){return e})},pg=function(){return Object(bt.a)([sg],function(e){return e})},fg=function(){var e=Al();return Object(bt.a)([og,e],function(e,t){return(e=e.filter(function(e){return t?!t.explicitOrganization&&null===e.organization||e.organization===t.organizationId:null===e.organization})).count()>0})},hg=function(){return Object(bt.a)([cg],function(e){return e})},gg=function(){var e=ug(),t=T.makeGetCurrentBoardQuota(),n=mg();return function(r,a){return{boards:e(r,a).filter(function(e){return!e.tempBoard}),userQuota:t(r,a),loading:n(r,a)}}},bg=function(){return Object(bt.a)([og],function(e){var t=[];return e.forEach(function(e){e.tags.forEach(function(e){t.includes(e)||t.push(e)})}),Object(fe.List)(t)})},yg=Object(Ue.b)()(Object(Bi.reduxForm)({form:"AddBoardForm"})(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(Fe.useSelector)(bg()),i=Object(he.useRef)(o.map(function(e){return{key:e,text:"#"+e,value:e}}).toJS()),s=Object(Fe.useSelector)(Yh()),c=[],d=Object(he.useState)(""),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(he.useState)(!1),f=Object(Ke.a)(p,2),h=f[0],g=f[1],b=Object(he.useState)(""),y=Object(Ke.a)(b,2),v=y[0],E=y[1],O=Object(he.useState)(!1),x=Object(Ke.a)(O,2),j=x[0],w=x[1],k=Object(he.useState)(!1),I=Object(Ke.a)(k,2),S=I[0],C=I[1],_=Object(he.useState)(!0),T=Object(Ke.a)(_,2),A=T[0],N=T[1],L=Object(he.useState)(!0),R=Object(Ke.a)(L,2),B=R[0],D=R[1],P=Object(he.useState)([]),z=Object(Ke.a)(P,2),M=z[0],U=z[1],F=Object(he.useState)(void 0),G=Object(Ke.a)(F,2),q=G[0];G[1];c.push({key:"none",text:"No Team",value:void 0}),s.forEach(function(e){return c.push({key:e.uid,text:e.name,value:e.uid})});return ge.a.createElement("form",{className:"ui form",onSubmit:function(t){t.preventDefault(),t.stopPropagation(),l?S||e.onSubmit(Object(fe.Map)({name:l,nameAbbreviation:v,tags:M,responsibleTeam:q,codySuggestEnabled:A?"1":"",eventModelingEnabled:B?"1":""})):g(!0)}},ge.a.createElement("div",{className:"field"+(h?" error":"")},ge.a.createElement(kp.a,{name:"name",type:"text",placeholder:e.t("insp.board.form.board_name"),autoFocus:!0,onChange:function(e,t){return n=t.value,g(!1),m(n),void(j||E(Ul(n)));var n},error:h,value:l})),ge.a.createElement(Ip.a,{horizontal:!0},ge.a.createElement(et.a,{as:"h4",onClick:function(){return a(!r)},style:{cursor:"pointer"}},e.t("insp.board.advanced_settings"),"\xa0",r?"-":"+")),ge.a.createElement("div",{className:r?"slidedown":"slideup"},ge.a.createElement("div",{className:"field"},ge.a.createElement(Sp.a,{toggle:!0,label:ge.a.createElement("label",null,e.t("insp.board.form.cody_suggest"),"\xa0\xa0",ge.a.createElement(Cp.a,{name:"question circle outline",title:e.t("insp.board.cody_suggest_sub")})),name:"codySuggestEnabled",checked:A,value:A?"1":"",onChange:function(e,t){return n="1"!==t.value,void N(n);var n}})),ge.a.createElement("div",{className:"field"},ge.a.createElement(Sp.a,{toggle:!0,label:ge.a.createElement("label",null,e.t("insp.board.form.event_modeling"),"\xa0\xa0",ge.a.createElement(Cp.a,{name:"question circle outline",title:e.t("insp.board.event_modeling_sub")})),name:"eventModelingEnabled",checked:B,value:B?"1":"",onChange:function(e,t){return n="1"!==t.value,void D(n);var n}})),ge.a.createElement("div",{className:"field"+(S?" error":"")},ge.a.createElement(kp.a,{name:"nameAbbreviation",type:"text",placeholder:e.t("insp.board.form.board_abbr"),value:v,onChange:function(e,t){return n=t.value,E(n),w(!0),void(""===n||n.length>3?C(!0):S&&C(!1));var n},error:S})),ge.a.createElement("div",{className:"field"},ge.a.createElement(tt.a,{multiple:!0,allowAdditions:!0,name:"tags",placeholder:"Tags",fluid:!0,search:!0,selection:!0,options:i.current,value:M,onAddItem:function(e,t){return function(e){if(0!==e.length){"#"!==e.charAt(0)&&(e="#"+e);var t=e.slice(1);i.current.push({key:t,text:e,value:t})}}(t.value)},onChange:function(e,t){return U(t.value)}})),!1,ge.a.createElement("p",null,"\xa0")),ge.a.createElement(Ni.a,{primary:!0,type:"submit",disabled:e.isAddingBoard},e.t("insp.board.form.btn_add_save")))})),vg=Object(Ue.b)()(Object(Ge.o)(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(Fe.useSelector)(Al()),i=Object(Fe.useSelector)(Ii()),s=Object(Fe.useDispatch)();return he.createElement(Ai.a,{open:e.open,closeIcon:!0,onClose:e.onClose,size:"mini"},he.createElement(Ai.a.Header,null,e.t("insp.board.add")),he.createElement(Ai.a.Content,null,e.disabled&&!r&&he.createElement(nt.a,{icon:"dollar",warning:!0,content:o&&o.userIsGuest?e.t("insp.user.quota_reached_guest"):o&&o.explicitOrganization?e.t("insp.user.quota_reached"):e.t("insp.user.quota_reached_user")}),!e.disabled&&he.createElement(yg,{initialValues:Object(fe.fromJS)(z.defaultBoardProps),isAddingBoard:r,onSubmit:function(t){a(!0),function(e,t,n,r){var a=z.createUserBoard(t.uid,e.get("name"),e.get("nameAbbreviation"),e.get("tags"),e.get("responsibleTeam"),"1"===e.get("codySuggestEnabled"),"1"===e.get("eventModelingEnabled"));n(L.addBoard(a,r))}(t,i,s,e.history)}}),r&&he.createElement("span",null,"...")))})),Eg=n(1397),Og=n(1203),xg=vg,jg=Object(Ue.b)()(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1];return he.createElement(he.Fragment,null,he.createElement(Ni.a,{primary:e.primary,onClick:function(e){e.preventDefault(),a(!0)}},"Add Board"),he.createElement(xg,{open:r,onClose:function(){a(!1)},disabled:e.disabled}))}),wg=Object(Ue.b)()(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1];return he.createElement(he.Fragment,null,he.createElement("a",{href:"#",className:"ui card event add board",onClick:function(e){e.preventDefault(),a(!0)}},he.createElement("div",{className:"content",style:{display:"flex",flexDirection:"column",verticalAlign:"middle",textAlign:"center",justifyContent:"center",alignItems:"center"}},he.createElement("div",null,he.createElement("button",{className:"ui big circular icon button"},he.createElement(Cp.a,{name:"plus",size:"large"}))),he.createElement("button",{className:"ui big basic button noborder"},e.t("insp.overview.add_board")))),he.createElement(vg,{open:r,onClose:function(){a(!1)},disabled:e.disabled}))}),kg=n(1405),Ig=function(e){return new Date(e).toLocaleString()},Sg=Object(Ue.b)()(function(e){return he.createElement("div",{className:"ui card event"},he.createElement(qe.Link,{to:kt(e.board.uid)},he.createElement("div",{className:"content"},he.createElement("div",{className:"header"}),he.createElement("div",{className:"description"},he.createElement("span",{style:{width:"100%",wordBreak:"break-word",overflowWrap:"break-word"}},e.board.name)))),he.createElement("div",{className:"extra"},(e.isAdmin||!e.board.shared)&&he.createElement(qe.Link,{to:Ct(e.board.uid),className:"ui right floated"},he.createElement(Cp.a,{name:"edit outline",size:"large",link:!0})),!e.isAdmin&&e.board.shared&&he.createElement(kg.a,{trigger:he.createElement(Cp.a,{name:"share",size:"large",className:"ui right floated"}),content:e.t("insp.overview.shared_board")}),he.createElement("span",{style:{color:"rgb(160, 156, 156)",fontSize:"0.9em"}},e.t("insp.overview.last_modified")+": "+Ig(e.board.lastModified))))}),Cg=n(1058),_g=n(491),Tg=n(1399),Ag=Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(bg()),n=Object(Fe.useDispatch)(),r=hg(),a=Object(Fe.useSelector)(r).filter,o=a.split(" ").map(function(e){return e.trim()}).filter(function(e){return"#"===e.charAt(0)}),i=t.filter(function(e){return!o.includes("#"+e)}).map(function(e){return{title:"#"+e}}).toJS(),s=a.split(" ").pop();return s&&""!==(s=s.trim())&&(i=i.filter(function(e){return-1!==e.title.toLowerCase().search(s.toLowerCase())})),he.createElement(Tg.a,{placeholder:e.t("insp.overview.search.label"),results:i,value:a,onSearchChange:function(e,t){return" "===(r=t.value).charAt(0)&&(r=r.slice(1)),void n(au(r));var r},onResultSelect:function(e,t){return function(e){if(""===a)n(au(e.title));else{var t=a.split(" ");t.splice(-1,1);var r=t.join(" ").trim();n(au(r+" "+e.title))}}(t.result)},icon:""===a?he.createElement("i",{className:"search icon"}):he.createElement("i",{className:"close link icon",style:{cursor:"pointer"},onClick:function(e){e.preventDefault(),n(au(""))}}),fluid:!0,showNoResults:!1})}),Ng=function(e){return he.createElement(Ag,null)},Lg=(Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(hg()),n=Object(Fe.useSelector)(Yh()),r=Object(Fe.useDispatch)(),a=n.map(function(e){return{key:e.uid,text:e.name,value:e.uid}}).toJS();a.unshift({key:"_all_",text:e.t("insp.overview.teamFilter.all"),value:"_all_"});return he.createElement(tt.a,{selection:!0,placeholder:e.t("insp.board.form.responsible_team"),options:a,fluid:!0,value:t.responsibleTeam||"_all_",onChange:function(e,t){return"_all_"===(n=t.value)&&(n=void 0),void r(L.filterBoardOverviewByResponsibleTeam(n));var n}})}),function(e){return he.createElement(Xe.a,{stackable:!0,padded:!0},he.createElement(Cg.a,{columns:3},he.createElement(_g.a,null,he.createElement(ag,null)),he.createElement(_g.a,null,!1),he.createElement(_g.a,null,he.createElement(Ng,null))),he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,null,he.createElement(Ip.a,{horizontal:!0,content:"Boards"}))))}),Rg=function(){return he.createElement("div",{className:"ui card event"},he.createElement("div",{className:"content"},he.createElement("div",{className:"header"}),he.createElement("div",{className:"description"},he.createElement(Cp.a,{loading:!0,name:"spinner",size:"big"}))))},Bg=Object(Ue.b)()(function(e){return he.createElement(Ai.a,{open:e.open,closeIcon:!0,onClose:e.onClose},he.createElement(Ai.a.Header,null,e.t("insp.hint.new_domain_header")),he.createElement(Ai.a.Content,null,he.createElement(nt.a,{icon:"bullhorn",info:!0,content:he.createElement("div",null,he.createElement("p",null,e.t("insp.hint.new_domain_text")),he.createElement("p",null,he.createElement(Cp.a,{name:"arrow right"}),"\xa0",he.createElement("a",{href:"https://github.com/event-engine/inspectio/wiki/Rebranding",target:"_blank"},e.t("insp.hint.learn_more"))))})))}),Dg=function(e){return he.createElement("div",{className:"ui card event"},he.createElement("a",{href:e.board.link},he.createElement("div",{className:"content"},he.createElement("div",{className:"header"}),he.createElement("div",{className:"description"},he.createElement("span",{style:{width:"100%",wordBreak:"break-word",overflowWrap:"break-word"}},e.board.name)))),he.createElement("div",{className:"extra"},he.createElement("span",{style:{color:"rgb(160, 156, 156)",fontSize:"0.9em"}},"Example")))},Pg=function(e){var t=hg(),n=Object(Fe.useSelector)(t),r=Object(Fe.useDispatch)();return he.createElement(he.Fragment,null,n.showMaintenanceMessage&&he.createElement(nt.a,{header:"Scheduled Maintenance Downtime",content:"Please note a scheduled maintenance downtime on Friday, 12th July, 2024 starting at 2 pm (CEST). The service will be unavailable for 2-4 hours due to a database migration. If this causes trouble, please contact support. We might be able to move the time window.",color:"blue",onDismiss:function(){r(L.dismissMaintenanceMessage())}}))},zg=Object(Ue.b)()(Object(Ge.o)(function(e){var t=Object(Fe.useSelector)(ug()),n=Object(Fe.useSelector)(fg()),r=Object(Fe.useSelector)(mg()),a=Object(Fe.useSelector)(T.makeGetCurrentBoardQuota()),o=Object(Fe.useDispatch)(),i=Object(Fe.useSelector)(Ii()),s=Object(Fe.useSelector)(Ei(i.activeOrganization)),c=Object(Fe.useSelector)(ng()),d=Object(Fe.useSelector)(eg("show_pb_domain_hint",!1)),u=Object(he.useState)(!1),l=Object(Ke.a)(u,2),m=l[0],p=l[1];Object(he.useEffect)(function(){c&&d&&p(!0)},[c,d]);var f=!!s&&s.isAdmin(i.uid);return he.createElement(Ve.a,null,he.createElement(Pg,null),(n||r)&&he.createElement(Lg,null),he.createElement(Xe.a,{stackable:!0,padded:!0},(n||r)&&he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,null,he.createElement(Eg.a.Group,{itemsPerRow:3},he.createElement(wg,{disabled:0===a}),r&&he.createElement(Rg,null),t.filter(function(e){return!e.example}).map(function(e){return he.createElement(Sg,{key:e.uid,board:e,isAdmin:e.organization?f||e.isCreator(i.uid):e.owner===i.uid})}).toArray()))),!n&&!r&&he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,null,he.createElement(Og.a,{placeholder:!0},he.createElement(et.a,{icon:!0,style:{color:"grey"}},he.createElement(Cp.a,{name:"lightbulb",color:"yellow"}),e.t("insp.overview.empty_space")),he.createElement(Og.a.Inline,null,he.createElement("a",{href:"https://wiki.prooph-board.com",target:"_blank",rel:"noopener noreferrer",className:"ui yellow button"},"Check Wiki"),he.createElement(jg,{disabled:0===a,primary:!1}))))),he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,null,he.createElement(Ip.a,{horizontal:!0,content:"Example Boards"}))),he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,null,he.createElement(Eg.a.Group,{itemsPerRow:3},he.createElement(Dg,{key:"proophboard",board:{name:"Design & Prototyping",link:"/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2Fprooph%20board%2520Example.xml"}}),he.createElement(Dg,{key:"Event_Centric_Workflow",board:{name:"Holistic, Event-Centric Workflow",link:"/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fproophboard%2Fexample-boards%2Fmain%2FHolistic%252C%2520Event-Centric%2520Workflow.xml?temp=1"}}),he.createElement(Dg,{key:"Cody_Tutorial",board:{name:"Cody Tutorial",link:"/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fproophboard%2Fexample-boards%2Fmain%2FCody%2520Tutorial.xml?temp=1"}}),he.createElement(Dg,{key:"Event_Storming",board:{name:"Event Storming - The Picture",link:"/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FThe%2520Picture.xml?temp=1"}}),he.createElement(Dg,{key:"Event_Modeling",board:{name:"Event Modeling",link:"/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FEvent%2520Modeling.xml?temp=1"}}))))),he.createElement(Bg,{open:m,onClose:function(){p(!1),o($t("show_pb_domain_hint",!1))}}))})),Mg=n(1401),Ug=n(1394),Fg=n(111),Gg=n.n(Fg),qg=n(1396),Vg=function(e){var t=e.input,n=e.placeholder,r=e.meta,a=r.touched,o=r.error;return ge.a.createElement(qg.a.Input,Object.assign({},t,{placeholder:n,error:!(!a||!o)}))},Wg=Object(Bi.reduxForm)({form:"ConfirmBoardDeletionForm",validate:function(e,t){if(e){var n=(r=t.boardName,function(e){return e===r?void 0:"Name is not correct"})(e.get("confirmedName")||"");if(n)return{confirmedName:n}}var r;return{}}})(function(e){return ge.a.createElement(nt.a,{error:!0},ge.a.createElement(Cp.a,{name:"warning sign"}),e.t("insp.board.really_delete"),ge.a.createElement(Og.a,null,ge.a.createElement("form",{className:"ui form",onSubmit:e.handleSubmit},ge.a.createElement("div",{className:"field"},ge.a.createElement(Bi.Field,{name:"confirmedName",type:"text",component:Vg,placeholder:e.t("insp.board.form.board_name")})),ge.a.createElement(Ni.a,{color:"red",type:"submit",disabled:e.pristine||!e.valid},e.t("app.form.confirm")),ge.a.createElement(Ni.a,{basic:!0,className:"noborder",onClick:function(t){return function(e,t){e.preventDefault(),t.onCancel()}(t,e)}},e.t("app.form.cancel")))))}),Hg=function(e,t){return e.getIn([hT,"boardClients"])},$g=n(1393),Jg=Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=Object(he.useState)(!1),r=Object(Ke.a)(n,2),a=r[0],o=r[1];return ge.a.createElement(ge.a.Fragment,null,ge.a.createElement(nt.a,null,ge.a.createElement("p",null,e.t("insp.board.client.notConfigured"),ge.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),e.stopPropagation(),o(!0)}}," ",e.t("insp.board.client.createClient")))),ge.a.createElement($g.a,{header:e.t("insp.board.client.createConfirmTitle"),content:e.t("insp.board.client.createConfirmText"),open:a,onCancel:function(){return o(!1)},onConfirm:function(){t(Au(e.boardId)),o(!1)}}))}),Qg=n(1398),Yg=Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=Object(he.useState)(!1),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(he.useState)(!1),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(he.useState)(!1),l=Object(Ke.a)(u,2),m=l[0],p=l[1],f=Object(he.useState)(!1),h=Object(Ke.a)(f,2),g=h[0],b=h[1];Object(he.useEffect)(function(){e.client&&e.client.clientSecret&&p(!1)},[e.client]);var y=function(){return o(!1)},v=function(){return d(!1)};return ge.a.createElement(ge.a.Fragment,null,ge.a.createElement(Qg.a,{unstackable:!0,basic:"very"},ge.a.createElement(Qg.a.Body,null,ge.a.createElement(Qg.a.Row,null,ge.a.createElement(Qg.a.Cell,{style:{width:"150px"}},ge.a.createElement("strong",null,e.t("insp.board.client.clientId"),":")),ge.a.createElement(Qg.a.Cell,null,e.client.clientId),ge.a.createElement(Qg.a.Cell,{style:{width:"125px"}})),ge.a.createElement(Qg.a.Row,null,ge.a.createElement(Qg.a.Cell,null,ge.a.createElement("strong",null,e.t("insp.board.client.clientSecret"),":")),ge.a.createElement(Qg.a.Cell,null,e.client.clientSecret&&ge.a.createElement(ge.a.Fragment,null,e.client.clientSecret,ge.a.createElement(Cp.a,{name:g?"clipboard check":"copy",style:{cursor:"pointer",marginLeft:"5px"},title:e.t("insp.board.client.copyToClipboard"),onClick:function(){!function(e,t){var n=document.createElement("input");n.type="text",n.value=e,n.style.position="fixed",n.style.left="-1000px",n.style.top="-1000px",(t||document.body).append(n),n.select(),document.execCommand("copy"),n.parentNode.removeChild(n)}(e.client.clientSecret),b(!0),setTimeout(function(){return b(!1)},2e3)}})),!e.client.clientSecret&&ge.a.createElement("a",{href:"#",onClick:function(n){n.preventDefault(),n.stopPropagation(),t(Il(e.boardId))}},e.t("insp.board.client.retrieveSecret"))),ge.a.createElement(Qg.a.Cell,{style:{paddingTop:"10px",paddingBottom:"10px"}},ge.a.createElement(Ni.a,{icon:!0,labelPosition:"left",title:e.t("app.form.reset"),onClick:function(){return o(!0)},loading:m,style:e.client.clientSecret?null:{visibility:"hidden"},children:ge.a.createElement(ge.a.Fragment,null,ge.a.createElement(Cp.a,{name:"redo"}),e.t("app.form.reset"))}))))),ge.a.createElement(nt.a,null,ge.a.createElement(Qg.a,{unstackable:!0,basic:"very"},ge.a.createElement(Qg.a.Body,null,ge.a.createElement(Qg.a.Row,null,ge.a.createElement(Qg.a.Cell,null,e.t("insp.board.client.removeText")),ge.a.createElement(Qg.a.Cell,null,ge.a.createElement(Ni.a,{icon:!0,labelPosition:"left",negative:!0,floated:"right",title:e.t("app.form.remove"),onClick:function(){return d(!0)},children:ge.a.createElement(ge.a.Fragment,null,ge.a.createElement(Cp.a,{name:"delete"}),e.t("app.form.remove"))})))))),ge.a.createElement($g.a,{header:e.t("insp.board.client.resetConfirmTitle"),content:e.t("insp.board.client.resetConfirmText"),open:a,onCancel:y,onConfirm:function(){y(),p(!0),t(Lu(e.boardId))}}),ge.a.createElement($g.a,{header:e.t("insp.board.client.removeConfirmTitle"),content:e.t("insp.board.client.removeConfirmText"),open:c,onCancel:v,onConfirm:function(){v(),t(Nu(e.boardId))}}))}),Kg=(Object(Ue.b)()(function(e){var t,n=Object(Fe.useDispatch)(),r=Object(Fe.useSelector)((t=e.boardId,Object(bt.a)([Hg],function(e){return e.has(t)?e.get(t):void 0})));return Object(he.useEffect)(function(){n(kl(e.boardId))},[e.boardId]),ge.a.createElement("div",{className:"ui segments"},ge.a.createElement("div",{className:"ui segment"},void 0===r&&ge.a.createElement("div",{className:"ui active dimmer"},ge.a.createElement("div",{className:"ui loader"})),ge.a.createElement("h2",{className:"ui header"},e.t("insp.board.client.headline"),ge.a.createElement(Gg.a,null,e.t("insp.board.client.description"))),ge.a.createElement("div",null,null===r&&ge.a.createElement(Jg,{boardId:e.boardId}),r&&ge.a.createElement(Yg,{boardId:e.boardId,client:r}))))}),n(1408)),Zg=function(e,t){return Object(bt.a)([eb],function(n){return n.find(function(n){return n.teamId===t&&n.boardId===e})})},Xg=function(e,t){return Object(fe.List)(e.getIn([hT,"boardPermissionsForUsers"]).toIndexedSeq().toArray())||Object(fe.List)()},eb=function(e,t){return Object(fe.List)(e.getIn([hT,"boardPermissionsForTeams"]).toIndexedSeq().toArray())||Object(fe.List)()},tb=function(e){return Object(bt.a)([eb],function(t){return t.filter(function(t){return t.boardId===e})})},nb=Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=Object(Fe.useSelector)(Jh(e.boardPermission.teamId)),r=e.boardPermission.permissions.readAccess,a=e.boardPermission.permissions.writeAccess;if(!r&&!a)return null;if(!n)return null;return he.createElement(Qg.a.Row,null,he.createElement(Qg.a.Cell,{style:{width:"310px"}},he.createElement(et.a,{as:"h4",image:!0},he.createElement("img",{className:"ui avatar image",src:"/avatar/team-".concat(n.uid,"?displayName=").concat(n.name)}),he.createElement(et.a.Content,null,n.name,he.createElement(et.a.Subheader,null,n.description)))),he.createElement(Qg.a.Cell,null,he.createElement(Ni.a.Group,null,he.createElement(Ni.a,{className:"positive",children:"Read",onClick:function(){e.boardPermission.permissions.writeAccess&&t(L.adminChangeTeamBoardPermissions(e.board.uid,n.uid,Object(Ye.a)({},e.boardPermission.permissions,{writeAccess:!1})))}}),he.createElement(Ni.a.Or,{text:"+"}),he.createElement(Ni.a,{className:a?"positive":"",children:"Write",onClick:function(){t(L.adminChangeTeamBoardPermissions(e.board.uid,n.uid,Object(Ye.a)({},e.boardPermission.permissions,{writeAccess:!e.boardPermission.permissions.writeAccess})))}})),he.createElement(Ni.a,{icon:!0,className:"right floated basic circular noborder",children:he.createElement(Cp.a,{className:"red close icon"}),onClick:function(){t(W.Command.adminRevokeTeamAccessToBoard(e.board.uid,n.uid))}}),he.createElement(Ni.a,{icon:!0,className:"right floated basic circular noborder responsible-team",title:e.t("insp.board.form.responsible_team"),children:he.createElement(Cp.a,{className:e.board.responsibleTeam===e.boardPermission.teamId?"yellow star icon":"star outline icon"}),onClick:function(){var n=e.board.responsibleTeam===e.boardPermission.teamId?void 0:e.boardPermission.teamId,r=e.board.merge({responsibleTeam:n});t(L.changeResponsibleTeam(r))}})))}),rb=function(e){var t=Object(Fe.useSelector)(tb(e.board.uid));return he.createElement(Qg.a,{unstackable:!0,basic:"very"},he.createElement(Qg.a.Body,null,t.filter(function(t){return t.teamId===e.board.responsibleTeam}).map(function(t){return he.createElement(nb,{board:e.board,boardPermission:t,key:t.uid})}),t.filter(function(t){return t.teamId!==e.board.responsibleTeam}).map(function(t){return he.createElement(nb,{board:e.board,boardPermission:t,key:t.uid})})))},ab=n(530),ob=function(e){var t=Object(Fe.useDispatch)(),n=Object(Fe.useSelector)(ei(e.boardPermission.userId)),r=e.board.owner===e.boardPermission.userId||e.board.creator===e.boardPermission.userId,a=e.boardPermission.permissions.readAccess,o=e.boardPermission.permissions.writeAccess;if(!a&&!o)return null;if(!n)return null;return he.createElement(Qg.a.Row,null,he.createElement(Qg.a.Cell,{style:{width:"310px"}},he.createElement(et.a,{as:"h4",image:!0},he.createElement("img",{className:"ui avatar image",src:n.avatar(),alt:n.username}),he.createElement(et.a.Content,null,n.username,r&&he.createElement(ab.a,{color:"blue",style:{marginBottom:"0.2rem",marginLeft:"0"},basic:!0},"Owner"),he.createElement(et.a.Subheader,null,n.position)))),he.createElement(Qg.a.Cell,null,he.createElement(Ni.a.Group,null,he.createElement(Ni.a,{className:"positive",children:"Read",disabled:r,onClick:function(){e.boardPermission.permissions.writeAccess&&t(L.changeBoardPermissions(e.board.uid,n.userId,Object(Ye.a)({},e.boardPermission.permissions,{writeAccess:!1})))}}),he.createElement(Ni.a.Or,{text:"+"}),he.createElement(Ni.a,{className:o?"positive":"",children:"Write",disabled:r,onClick:function(){t(L.changeBoardPermissions(e.board.uid,n.userId,Object(Ye.a)({},e.boardPermission.permissions,{writeAccess:!e.boardPermission.permissions.writeAccess})))}})),!r&&he.createElement(Ni.a,{icon:!0,className:"right floated basic noborder circular button",children:he.createElement(Cp.a,{className:"red close icon"}),onClick:function(){t(L.revokeAccessToBoard(e.board.uid,n.userId))}})))},ib=function(e){Object(Fe.useSelector)(Ii());var t,n=Object(Fe.useSelector)((t=e.board.uid,Object(bt.a)([Xg],function(e){return e.filter(function(e){return e.boardId===t})}))),r=e.board.owner||e.board.creator;return he.createElement(Qg.a,{unstackable:!0,basic:"very"},he.createElement(Qg.a.Body,null,he.createElement(ob,{board:e.board,boardPermission:new Dl({uid:"",aggregateType:"BoardPermissionForUser",permissions:{readAccess:!0,writeAccess:!0,adminAccess:!0},userId:r,boardId:e.board.uid})}),n.map(function(t){return he.createElement(ob,{key:t.uid,board:e.board,boardPermission:t})})))},sb=n(973),cb=function(e){var t=Object(Ye.a)({},e,{basic:!0});return ge.a.createElement(Ni.a,Object.assign({},t,{className:"noborder"}))},db=n(1206),ub=function(e){if(e.user.anonymous)return he.createElement(Ni.a,{circular:!0,size:e.size||"small",className:"user",icon:"user",disabled:!0,style:{cursor:"default"}});var t=he.createElement(db.a,{size:e.size||"small",src:e.user.avatar(),avatar:!0,verticalAlign:"middle"});return e.namePopup?he.createElement(kg.a,{trigger:t,content:e.user.username,position:"bottom center"}):t},lb=function(e){return function(t){return function(e,t){return e.getIn([hT,"boardInvitations",t])}(t,e)}},mb=function(e,t){return Object(fe.List)(e.getIn([hT,"boardInvitations"]).toIndexedSeq().toArray())||Object(fe.List)()},pb=Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=Object(he.useState)(Wn()),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(he.useState)(!1),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(he.useState)(!1),l=Object(Ke.a)(u,2),m=l[0],p=l[1],h=Object(Fe.useSelector)(lb(e.boardInvitation.uid));Object(he.useEffect)(function(){f.Api.getInspectioUserInfoByEmail(e.boardInvitation.invitedUserEmail).then(function(e){var t=e.response;if(e.error,t){var n=g.createIioUserInfoFromServerData(t.data);Tn(n)&&o(n.value)}})},[e.boardInvitation.invitedUserEmail]),Object(he.useEffect)(function(){d(!1),p(!1)},[h]);return he.createElement(Qg.a.Row,null,he.createElement(Qg.a.Cell,{style:{width:"250px"}},he.createElement(ub,{user:a,size:"mini"}),he.createElement("span",{style:{paddingLeft:"10px"}},e.boardInvitation.invitedUserEmail)),he.createElement(Qg.a.Cell,null,he.createElement(sb.a,{floated:"right"},he.createElement(cb,{content:e.t("app.form.resend"),icon:"paper plane",loading:c,onClick:function(){c||m||(d(!0),t(L.resendBoardInvitation(e.boardInvitation.uid)))}}),he.createElement(cb,{content:e.t("app.form.revoke"),icon:"delete",loading:m,onClick:function(){c||m||(p(!0),t(L.revokeBoardInvitation(e.boardInvitation.uid)))}}))))}),fb=function(e){return he.createElement(Qg.a,{unstackable:!0,basic:"very"},he.createElement(Qg.a.Body,null,e.openInvitations.map(function(t){return he.createElement(pb,{key:t.uid,board:e.board,boardInvitation:t})})))},hb=Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=Object(he.useState)(e.email),r=Object(Ke.a)(n,2),a=r[0],o=r[1],s=Object(he.useState)(e.permissions.writeAccess),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=e.users.filter(function(e){return e.name.toLocaleLowerCase().includes(a.toLocaleLowerCase())||e.email.toLocaleLowerCase().includes(a.toLocaleLowerCase())}).sortBy(function(e){return e.name}).map(function(e){return{id:e.userId,title:e.name,description:e.email,image:e.avatar}});return ge.a.createElement("form",{className:"ui form",onSubmit:function(n){n.preventDefault(),/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(a)?(e.handleSubmit({boardId:e.boardId,email:a,permissions:Object(Ye.a)({},e.permissions,{writeAccess:d})}),u(!0),o("")):t(i.Command.error("Invalid email address","Invalid email address"))}},ge.a.createElement("div",{className:"fields",style:{margin:"0"}},ge.a.createElement(Qg.a,{unstackable:!0,basic:"very"},ge.a.createElement(Qg.a.Body,null,ge.a.createElement(Qg.a.Row,null,ge.a.createElement(Qg.a.Cell,{style:{width:"310px"}},ge.a.createElement(Tg.a,{fluid:!0,value:a,results:l.toArray(),placeholder:e.t("insp.board.form.email"),showNoResults:!1,resultRenderer:function(e){return ge.a.createElement("div",{key:e.id},ge.a.createElement("div",{className:"ui image avatar"},ge.a.createElement("img",{src:e.image,alt:e.title})),ge.a.createElement("div",{className:"content"},ge.a.createElement("div",{className:"title"},e.title),ge.a.createElement("div",{className:"description"},e.description)))},onSearchChange:function(e,t){return o(t.value||"")},onResultSelect:function(e,t){o(t.result.description)}})),ge.a.createElement(Qg.a.Cell,null,ge.a.createElement(Ni.a.Group,null,ge.a.createElement(Ni.a,{type:"button",className:"positive",children:"Read",onClick:function(){return u(!1)}}),ge.a.createElement(Ni.a.Or,{text:"+"}),ge.a.createElement(Ni.a,{type:"button",className:d?"positive":"",children:"Write",onClick:function(){return u(!d)}}))),ge.a.createElement(Qg.a.Cell,null,ge.a.createElement(Ni.a,{primary:!0,type:"submit",floated:"right"},e.t("insp.board.form.btn_share"))))))))}),gb=Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(Yh()),n=Object(he.useState)(1),r=Object(Ke.a)(n,2),a=(r[0],r[1],Object(he.useState)([])),o=Object(Ke.a)(a,2),i=o[0],s=o[1],c=Object(he.useState)(e.permissions.writeAccess),d=Object(Ke.a)(c,2),u=d[0],l=d[1],m=Object(Fe.useSelector)(tb(e.boardId)).map(function(e){return e.teamId}),p=(t.filter(function(e){return!m.contains(e.uid)}),t.map(function(e){return{key:e.uid,value:e.uid,text:e.name}}).toArray());return ge.a.createElement("form",{className:"ui form",onSubmit:function(t){t.preventDefault(),e.handleSubmit({boardId:e.boardId,teamIds:i,permissions:Object(Ye.a)({},e.permissions,{writeAccess:u})}),l(e.permissions.writeAccess),s([])}},ge.a.createElement("div",{className:"fields",style:{margin:"0"}},ge.a.createElement(Qg.a,{unstackable:!0,basic:"very"},ge.a.createElement(Qg.a.Body,null,ge.a.createElement(Qg.a.Row,null,ge.a.createElement(Qg.a.Cell,{style:{width:"310px",verticalAlign:"top"}},ge.a.createElement("div",{className:"inline field",style:{width:"100%"}},ge.a.createElement(tt.a,{placeholder:e.t("insp.board.form.team_name"),search:!0,selection:!0,multiple:!0,options:p,value:i,onChange:function(e,t){return s(t.value)},style:{width:"100%"}}))),ge.a.createElement(Qg.a.Cell,{style:{verticalAlign:"top"}},ge.a.createElement(Ni.a.Group,null,ge.a.createElement(Ni.a,{type:"button",className:"positive",children:"Read",onClick:function(){return l(!1)}}),ge.a.createElement(Ni.a.Or,{text:"+"}),ge.a.createElement(Ni.a,{type:"button",className:u?"positive":"",children:"Write",onClick:function(){return l(!u)}}))),ge.a.createElement(Qg.a.Cell,{style:{verticalAlign:"top"}},ge.a.createElement(Ni.a,{primary:!0,type:"submit",disabled:0===i.length},e.t("insp.board.form.btn_share"))))))))}),bb=n(1095),yb=n(174),vb="@@api/ConnectSocket",Eb="@@api/DisconnectSocket",Ob="@@api/SocketConnected",xb="@@api/SocketConnected",jb="@@api/SocketConnectionLost",wb="@@api/SendSocketCmd",kb="@@api/ListenOnSocketChannel",Ib="@@api/StopListeningOnSocketChannel",Sb=2e3,Cb=function(){return Object(at.action)(vb)},_b=function(){return Object(at.action)(Eb)},Tb=function(){return Object(at.action)(Ob)},Ab=function(){return Object(at.action)(xb)},Nb=function(e){return Object(at.action)(jb,{reason:e})},Lb=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Sb;return Object(at.action)(wb,{name:e,data:t,responseActionType:n,metadata:r,timeout:a})},Rb=function(e,t,n){return Object(at.action)(e,{socketCmd:t,metadata:n})},Bb=function(e,t,n){return Object(at.action)(e,{socketCmd:t,metadata:n})},Db=function(e,t,n){return Object(at.action)(e,{socketCmd:t,metadata:n})},Pb=function(e,t,n){return Object(at.action)(kb,{channelName:e,emitActionType:t,metadata:n})},zb=function(e){return Object(at.action)(Ib,{channelName:e})},Mb=function(e,t,n){return Object(at.action)(e,{event:t,metadata:n})},Ub=function(e){return"success"===e.type},Fb=function(e){return"pending"===e.type},Gb=function(e){return"error"===e.type},qb="connected",Vb="connecting",Wb="disconnected",Hb="disconnecting",$b="connectionLost",Jb={status:Wb},Qb=function(e){return new Zb({status:e})},Yb=function(){return new Zb({status:Wb})},Kb=function(e){switch(e){case qb:case Vb:case Wb:case $b:case Hb:break;default:throw new Error('Invalid socket status "'+e+'" provided')}},Zb=function(e){function t(e){return Object(Be.a)(this,t),Kb(e.status),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"isConnected",value:function(){return this.status===qb}},{key:"isDisconnected",value:function(){return this.status===Wb}},{key:"isConnecting",value:function(){return this.status===Vb}},{key:"isDisconnecting",value:function(){return this.status===Hb}},{key:"hasConnectionLost",value:function(){return this.status===$b}},{key:"equals",value:function(e){return this.status===e.status}}]),t}(Object(fe.Record)(Jb)),Xb=n(251),ey="@@Auth/Authenticate",ty="@@Auth/UserAuthenticated",ny=function(e){return Object(at.action)(ey,{auth:e})},ry=function(e){return Object(at.action)(ty,{kc:e})},ay=xe.a.mark(iy),oy=function(e){return new Promise(function(t,n){return e.success(function(e){return t(e)}).error(function(e){return n(e)})})};function iy(){var e,t,n,r,a,o;return xe.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(gn.k)([Z.USER_AUTHENTICATED]);case 2:return e=s.sent,t=0,n=e.payload.kc,s.prev=5,s.next=8,Ee(n.token);case 8:s.next=14;break;case 10:return s.prev=10,s.t0=s.catch(5),s.next=14,oy(n.login());case 14:return s.next=16,oy(n.loadUserProfile());case 16:return r=s.sent,s.next=19,Object(gn.i)(T.currentUserSelector,void 0);case 19:return a=(a=(a=s.sent).set("uid",n.tokenParsed.sub)).set("name",r.username),o=r.attributes,a=o.display_name?a.set("displayName",o.display_name[0]):a.set("displayName",r.username),a=o.avatar_url&&""!==o.avatar_url[0]?a.set("avatarUrl",o.avatar_url[0]):a.set("avatarUrl",a.generateDefaultAvatarUrl()),o.company_name&&(a=a.set("companyName",o.company_name[0])),o.job_title&&(a=a.set("jobTitle",o.job_title[0])),a=(a=(a=(a=(a=(a=a.set("email",r.email)).set("givenName",r.firstName)).set("familyName",r.lastName)).set("roles",y.fromToken(n.resourceAccess.inspectio.roles))).set("account",h.fromUserToken(n.resourceAccess.inspectio.roles))).set("signedIn",!0),s.next=35,Object(gn.g)(f.Command.signIn(a));case 35:return s.next=37,Object(gn.g)(X.authenticate({token:n.token}));case 37:return s.next=40,Object(gn.e)(1e4);case 40:return s.prev=40,s.next=43,oy(n.updateToken(31));case 43:if(!1!==s.sent){s.next=46;break}return s.abrupt("continue",37);case 46:return s.prev=46,s.next=49,Ee(n.token);case 49:Ae(n.token),s.next=56;break;case 52:return s.prev=52,s.t1=s.catch(46),s.next=56,oy(n.login());case 56:return s.next=58,Object(gn.g)(X.authenticate({token:n.token}));case 58:if(!(t>0)){s.next=61;break}return s.next=61,Object(gn.g)(i.Command.info("Authorization established","You will be able to work ahead."));case 61:t=0,s.next=73;break;case 64:if(s.prev=64,s.t2=s.catch(40),0!==t){s.next=69;break}return s.next=69,Object(gn.g)(i.Command.error("Authorization error","You will be logged out shortly if connection can not be restored."));case 69:if(!(++t>2)){s.next=73;break}return s.next=73,oy(n.login());case 73:s.next=37;break;case 75:case"end":return s.stop()}},ay,this,[[5,10],[40,64],[46,52]])}var sy=function(){return function(e){return function(e,t){return e.getIn(["auth","auth","token"])}(e)}},cy=xe.a.mark(py),dy=xe.a.mark(fy),uy=xe.a.mark(hy),ly=xe.a.mark(gy),my=xe.a.mark(by);function py(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.k)([te.Type.USER_AUTHENTICATED]);case 2:return e.sent,e.next=5,Object(gn.f)(fy);case 5:case"end":return e.stop()}},cy,this)}function fy(){var e,t;return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("[Socket Flow] Auto connect."),n.next=3,Object(gn.c)(vy);case 3:n.prev=3;case 4:return n.next=7,Object(gn.k)([Q.CONNECT_SOCKET,Q.DISCONNECT_SOCKET]);case 7:e=n.sent,n.t0=e.type,n.next=n.t0===Q.CONNECT_SOCKET?11:n.t0===Q.DISCONNECT_SOCKET?28:32;break;case 11:return console.log("[Socket Flow] Received ConnectSocket command."),n.next=14,Object(gn.c)(vy);case 14:if(!0!==(t=n.sent)&&null!==t){n.next=23;break}return n.next=18,Object(gn.g)(Y.socketConnected());case 18:if(!0!==t){n.next=21;break}return n.next=21,Object(gn.f)(hy);case 21:n.next=27;break;case 23:if(!1!==t){n.next=27;break}return console.warn("[Socket Flow] ConnectSocket command failed. Calling socket.disconnect now."),n.next=27,Object(gn.c)([Ce,Ce.disconnect]);case 27:return n.abrupt("break",32);case 28:return console.log("[Socket Flow] Received DisconnectSocket command."),n.next=31,Object(gn.c)([Ce,Ce.disconnect]);case 31:return n.abrupt("break",32);case 32:n.next=4;break;case 34:return n.prev=34,n.next=37,Object(gn.g)(Y.socketConnectionLost("Socket saga cancelled"));case 37:return n.finish(34);case 38:case"end":return n.stop()}},dy,this,[[3,,34,38]])}function hy(){var e,t,n;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("[Socket Flow] Running backgound tasks: listenDisconnectSaga, listenReconnectSaga, handleIO"),r.next=3,Object(gn.f)(xy);case 3:return e=r.sent,r.next=6,Object(gn.f)(jy);case 6:return t=r.sent,r.next=9,Object(gn.f)(by);case 9:return n=r.sent,r.next=12,Object(gn.k)([Q.DISCONNECT_SOCKET]);case 12:return r.sent,console.warn("[Socket Flow] Received DisconnectSocket command. Canceling backgound tasks."),r.next=16,Object(gn.d)(e);case 16:return r.next=18,Object(gn.d)(t);case 18:return r.next=20,Object(gn.d)(n);case 20:case"end":return r.stop()}},uy,this)}function gy(e,t){return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:console.log("[Socket Flow] Received action ",e),n.t0=e.type,n.next=n.t0===Q.SEND_SOCKET_CMD?4:n.t0===Q.LISTEN_ON_SOCKET_CHANNEL?14:n.t0===Q.STOP_LISTENING_ON_SOCKET_CHANNEL?18:20;break;case 4:return n.next=6,Object(gn.i)(se.StatusSelector.makeGetStatus());case 6:if(!n.sent.isConnected()){n.next=12;break}return n.next=10,Object(gn.c)(ky,e);case 10:n.next=13;break;case 12:console.warn("[Socket Flow] Cannot send socket command: ",e.payload,"Socket is not connected");case 13:return n.abrupt("break",20);case 14:return t.hasOwnProperty(e.payload.channelName)&&wy(e.payload.channelName,t),n.next=17,Object(gn.f)(yy,e,t);case 17:return n.abrupt("break",20);case 18:return wy(e.payload.channelName,t),n.abrupt("break",20);case 20:case"end":return n.stop()}},ly,this)}function by(){var e,t;return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e={};case 1:return n.next=4,Object(gn.k)([Q.SEND_SOCKET_CMD,Q.LISTEN_ON_SOCKET_CHANNEL,Q.STOP_LISTENING_ON_SOCKET_CHANNEL]);case 4:return t=n.sent,n.next=7,Object(gn.f)(gy,t,e);case 7:n.next=1;break;case 9:case"end":return n.stop()}},my,this)}var yy=xe.a.mark(function e(t,n){var r,a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[Socket Flow] Start listening on channel: ",t.payload.channelName),r=Object(Xb.c)(function(e){var n=function(t){e("undefined"!==typeof t?new Error(t.message):new Error("Unknown error occurred."))};return Ce.on(t.payload.channelName,function(t){e(t)}),Ce.on("connect_error",n),Ce.on("error",n),function(){console.log("[Socket Flow] stop listening on channel, because redux-saga event channel was closed: ",t.payload.channelName),Ce.off(t.payload.channelName)}},Xb.a.expanding(10)),n[t.payload.channelName]=r;case 3:return e.prev=4,e.next=7,Object(gn.k)(r);case 7:return a=e.sent,e.next=10,Object(gn.g)(Y.emitChannelEvent(t.payload.emitActionType,a,t.payload.metadata));case 10:e.next=18;break;case 12:return e.prev=12,e.t0=e.catch(4),r.close(),e.next=17,Object(gn.g)(Y.socketConnectionLost(e.t0.message));case 17:return e.abrupt("return");case 18:e.next=3;break;case 20:case"end":return e.stop()}},e,this,[[4,12]])}),vy=function(){return new Promise(function(e){Ce.connected?e(null):(Ce.on("connect",function(){return e(!0)}),Ce.open())}).then(function(e){return e}).catch(function(e){return!1})},Ey=function(){return new Promise(function(e){Ce.io.on("reconnect",function(){e(!0)})})},Oy=function(){return new Promise(function(e){Ce.on("disconnect",function(t){e(t)})})},xy=xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(gn.c)(Oy);case 3:return t=e.sent,console.warn("[Socket Flow] Socket connection lost: ",t),e.next=7,Object(gn.g)(Y.socketConnectionLost(t));case 7:e.next=0;break;case 9:case"end":return e.stop()}},e,this)}),jy=xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(gn.c)(Ey);case 3:return console.log("[Socket Flow] socket reconnected."),e.next=6,Object(gn.e)(100);case 6:return e.next=8,Object(gn.g)(Y.socketConnected());case 8:e.next=0;break;case 10:case"end":return e.stop()}},e,this)}),wy=function(e,t){t.hasOwnProperty(e)&&(console.log("[Socket Flow] Stop listening on channel: ",e),t[e].close(),delete t[e])},ky=xe.a.mark(function e(t){var n,r,a,o;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.g)(Y.notifySocketCmdSent(t.payload.responseActionType,{name:t.payload.name,type:"pending",payload:t.payload.data},t.payload.metadata));case 2:return e.prev=2,e.next=5,Object(gn.i)(ae.AuthSelector.makeTokenSelector());case 5:return n=e.sent,e.next=8,Object(gn.h)({ack:Object(gn.c)(Iy,{name:t.payload.name,type:"pending",payload:Object(Ye.a)({},t.payload.data,{token:n})}),timeout:Object(gn.e)(t.payload.timeout)});case 8:if(r=e.sent,a=r.ack,o=r.timeout,!a){e.next=14;break}return e.next=14,Object(gn.g)(Y.ackSocketCmd(t.payload.responseActionType,{name:t.payload.name,type:"success",payload:t.payload.data},t.payload.metadata));case 14:if(!o){e.next=17;break}return e.next=17,Object(gn.g)(Y.rejectSocketCmd(t.payload.responseActionType,{name:t.payload.name,type:"error",payload:t.payload.data,reason:"Timed out after "+t.payload.timeout+" ms"},t.payload.metadata));case 17:e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(2),e.next=23,Object(gn.g)(Y.rejectSocketCmd(t.payload.responseActionType,{name:t.payload.name,type:"error",payload:t.payload.data,reason:e.t0.toString()},t.payload.metadata));case 23:case"end":return e.stop()}},e,this,[[2,19]])}),Iy=function(e){return new Promise(function(t,n){try{if(Ce.disconnected)return void n(new Error("Socket not connected"));Ce.emit(e.name,e.payload,function(){return t(!0)})}catch(r){n(r)}})},Sy=function(e){return e.getIn(["socket","status","status"])},Cy=function(){return Object(bt.a)([Sy],function(e){return K.fromtString(e)})},_y=function(e,t){return e.getIn(["inspectioBoards","boards",t])},Ty=function(e,t){return _y(e,t.match.params.uid)},Ay=function(e){return function(t){return _y(t,e)}},Ny=function(){return Object(bt.a)([Ty],function(e){return e})},Ly=function(){var e=T.makeGetCurrentUser();return function(t,n){return{user:e(t,n)}}},Ry=function(){var e=Ny();return function(t,n){return{board:e(t,n)}}},By=function(){var e=Ny(),t=T.makeGetCurrentUser(),n=se.StatusSelector.makeGetStatus(),r=eg("lite_mode",!1);return function(a,o){return{board:e(a,o),user:t(a,o),socketStatus:n(a,o),liteMode:r(a,o)}}},Dy=Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(Ay(e.boardId)),n=Object(Fe.useDispatch)(),r=t.anyonePermissions.readAccess,a=t.anyonePermissions.writeAccess;return he.createElement(bb.a,null,he.createElement(yb.a,{style:{width:"310px"}},he.createElement(et.a,{as:"h4",image:!0},he.createElement(Cp.a,{circular:!0,name:"user outline"}),he.createElement(et.a.Content,null,e.t("insp.board.permissions.anyonePane.anyone")))),he.createElement(yb.a,null,he.createElement(Ni.a.Group,null,he.createElement(Ni.a,{className:r?"positive":"",children:"Read",onClick:function(){var e=t.anyonePermissions,a=Object(Ye.a)({},e,{readAccess:!r});r&&(a.writeAccess=!1),n(L.shareBoardWithAnyone(t.uid,a))}}),he.createElement(Ni.a.Or,{text:"+"}),he.createElement(Ni.a,{className:a?"positive":"",children:"Write",onClick:function(){var e=t.anyonePermissions,r=Object(Ye.a)({},e,{writeAccess:!a});a||(r.readAccess=!0),n(L.shareBoardWithAnyone(t.uid,r))}}))))}),Py=Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(Ay(e.boardId)),n=Object(Fe.useDispatch)(),r=t.orgaMemberPermissions.readAccess,a=t.orgaMemberPermissions.writeAccess;return he.createElement(bb.a,null,he.createElement(yb.a,{style:{width:"310px"}},he.createElement(et.a,{as:"h4",image:!0},he.createElement(Cp.a,{circular:!0,name:"building outline"}),he.createElement(et.a.Content,null,e.t("insp.board.permissions.anyonePane.orgaMembers")))),he.createElement(yb.a,null,he.createElement(Ni.a.Group,null,he.createElement(Ni.a,{className:r?"positive":"",children:"Read",onClick:function(){var e=t.orgaMemberPermissions,a=Object(Ye.a)({},e,{readAccess:!r});r&&(a.writeAccess=!1),n(L.shareBoardWithOrganizationMembers(t.uid,a))}}),he.createElement(Ni.a.Or,{text:"+"}),he.createElement(Ni.a,{className:a?"positive":"",children:"Write",onClick:function(){var e=t.orgaMemberPermissions,r=Object(Ye.a)({},e,{writeAccess:!a});a||(r.readAccess=!0),n(L.shareBoardWithOrganizationMembers(t.uid,r))}}))))}),zy=function(e){return he.createElement(Qg.a,{unstackable:!0,basic:"very"},he.createElement(Qg.a.Body,null,he.createElement(Py,{boardId:e.boardId}),he.createElement(Dy,{boardId:e.boardId})))},My=(Object(Ue.b)()(function(e){var t,n=Object(Fe.useDispatch)(),r=Object(Fe.useSelector)(Ii()),a=Object(Fe.useSelector)(Ei(r.activeOrganization)),o=Object(fe.List)(a?[a.ownerId].concat(Object(eo.a)(a.members.toJS())):[]),i=Object(Fe.useSelector)(ri(o)),s=Object(Fe.useSelector)((t=e.board?e.board.uid:"",Object(bt.a)([mb],function(e){return e.filter(function(e){return e.boardId===t&&"pending"===e.status})})));if(!e.board||!a)return he.createElement(he.Fragment,null);var c=he.createElement(he.Fragment,null,he.createElement(hb,{boardId:e.board.uid,email:"",permissions:{readAccess:!0,writeAccess:!0,adminAccess:!1},handleSubmit:function(e){n(L.shareBoard(e.boardId,e.email,e.permissions))},users:i.map(function(e){return{userId:e.userId,name:e.username,avatar:e.avatarUrl,email:e.email}})}),he.createElement(Ip.a,null),he.createElement(ib,{board:e.board}),s.count()>0&&he.createElement(he.Fragment,null,he.createElement(Ip.a,{horizontal:!0},"Open Invitations"),he.createElement(fb,{openInvitations:s,board:e.board}))),d=he.createElement(he.Fragment,null,he.createElement(gb,{boardId:e.board.uid,user:r,permissions:{readAccess:!0,writeAccess:!0,adminAccess:!1},handleSubmit:function(e){n(W.Command.adminGrantTeamAccessToBoard(e.boardId,e.teamIds,e.permissions))}}),he.createElement(Ip.a,null),he.createElement(rb,{board:e.board})),u=he.createElement(he.Fragment,null,he.createElement(zy,{boardId:e.board.uid})),l=[{menuItem:"User",render:function(){return c}},{menuItem:"Teams",render:function(){return d}},{menuItem:e.t("insp.board.permissions.all"),render:function(){return u}}];return he.createElement(Kg.a,{menu:{secondary:!0,pointing:!0,color:"orange"},panes:l})}),function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){return t(r.result)},r.onerror=function(){return n()},r.readAsText(e,"UTF-8")})}),Uy=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){return t(r.result)},r.onerror=function(){return n()},r.readAsArrayBuffer(e)})},Fy=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){return t(r.result)},r.onerror=function(){return n()},r.readAsDataURL(e)})},Gy={uid:"",aggregateType:"StickyTemplate",cellType:Dc.misc,template:"",templateType:"json",templateSchema:void 0,boardId:""},qy=function(e,t){return"".concat(e,"__").concat(t)},Vy=function(e){var t=Ln(e,[Mn("boardId"),"boardId missing"],[Mn("cellType"),"cellType missing"],[Mn("template"),"template missing"],[Mn("templateType"),"templateType is missing"]);return _n(t)?t:Nn(new Hy(Object(Ye.a)({},Gy,e,{uid:qy(e.boardId,e.cellType)})))},Wy=function(e,t,n){return new Hy({uid:qy(e,t),aggregateType:"StickyTemplate",cellType:t,boardId:e,template:n,templateType:"json"})},Hy=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=ot.v4()),e.templateSchema||(e.templateSchema=void 0),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"setTemplate",value:function(e){return this.set("template",e)}},{key:"setTemplateType",value:function(e){return this.set("templateType",e)}},{key:"setTemplateSchema",value:function(e){return this.set("templateSchema",e)}}]),t}(Object(fe.Record)(Gy)),$y='{\n    "type": "object",\n    "properties": {\n      \n    },\n    "required": [],\n    "additionalProperties": false\n  }',Jy={command:'{\n  "newAggregate": false,\n  "schema": '.concat($y," \n}\n"),event:'{\n  "public": false,\n  "schema": '.concat($y,"\n}\n"),aggregate:'{\n  "schema": '.concat($y,"\n}  \n"),document:'{\n  "schema": '.concat($y,"\n}  \n"),policy:'{\n  "streams": []\n}\n',role:"{\n  \n}\n",hotSpot:"{\n  \n}\n",externalSystem:"{\n  \n}\n",ui:"{\n  \n}\n",feature:"{\n  \n}\n",boundedContext:"{\n  \n}\n",siwmlanes:"{\n  \n}\n",icon:"{\n  \n}\n",image:"{\n  \n}\n",freeText:"{\n  \n}\n"},Qy=function(e){return function(t){return function(e,t){return e.getIn([hT,"StickyTemplate",t])}(t,e)}};Object(fe.List)();var Yy=function(e){return function(t){var n=function(e,t){var n=Object(fe.Map)();return(e.getIn([hT,"StickyTemplate"])||Object(fe.List)()).toIndexedSeq().filter(function(e){return e.boardId===t.boardId}).forEach(function(e){n=n.set(e.cellType,e)}),n}(t,{boardId:e});for(var r in Jy)n.has(r)||(n=n.set(r,Wy(e,r,Jy[r])));return n}},Ky=n(1391),Zy=function(e,t,n){return e=e.replace("#/definitions/",""),n.hasOwnProperty(e)?n[e]:{type:"string"}},Xy=n(188),ev=n(63),tv=n(140),nv=function(e){function t(e,n){var r;return Object(Be.a)(this,t),(r=Object(Pe.a)(this,Object(ze.a)(t).call(this,"".concat(e," at position ").concat(n)))).position=void 0,r.position=n,r}return Object(Me.a)(t,e),t}(Object(tv.a)(Error)),rv=32,av=10,ov=9,iv=13,sv=160,cv=8192,dv=8202,uv=8239,lv=8287,mv=12288;function pv(e){return/^[0-9A-Fa-f]$/.test(e)}function fv(e){return e>="0"&&e<="9"}function hv(e){return e>=" "}function gv(e){return",:[]/{}()\n+".includes(e)}function bv(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||"_"===e||"$"===e}function yv(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||"_"===e||"$"===e||e>="0"&&e<="9"}var vv=/^(http|https|ftp|mailto|file|data|irc):\/\/$/,Ev=/^[A-Za-z0-9-._~:/?#@!$&'()*+;=]$/;function Ov(e){return",[]/{}\n+".includes(e)}function xv(e){return Cv(e)||jv.test(e)}var jv=/^[[{\w-]$/;function wv(e){return"\n"===e||"\r"===e||"\t"===e||"\b"===e||"\f"===e}function kv(e,t){var n=e.charCodeAt(t);return n===rv||n===av||n===ov||n===iv}function Iv(e,t){var n=e.charCodeAt(t);return n===rv||n===ov||n===iv}function Sv(e,t){var n=e.charCodeAt(t);return n===sv||n>=cv&&n<=dv||n===uv||n===lv||n===mv}function Cv(e){return _v(e)||Av(e)}function _v(e){return'"'===e||"\u201c"===e||"\u201d"===e}function Tv(e){return'"'===e}function Av(e){return"'"===e||"\u2018"===e||"\u2019"===e||"`"===e||"\xb4"===e}function Nv(e){return"'"===e}function Lv(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.lastIndexOf(t);return-1!==r?e.substring(0,r)+(n?"":e.substring(r+1)):e}function Rv(e,t){var n=e.length;if(!kv(e,n-1))return e+t;for(;kv(e,n-1);)n--;return e.substring(0,n)+t+e.substring(n)}function Bv(e,t,n){return e.substring(0,t)+e.substring(t+n)}var Dv={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},Pv={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function zv(e,t){var n=0,r="";t&&(""===e||"{"!==e[0]&&"["!==e[0])&&(e="{\n"+e),d(),o()||function(){throw new nv("Unexpected end of json string",e.length)}(),d();var a=u(",");for(a&&i(),xv(e[n])&&function(e){return/[,\n][ \t\r]*$/.test(e)}(r)?(a||(r=Rv(r,",")),function(){var e=!0,t=!0;for(;t;){if(e)e=!1;else{var n=u(",");n||(r=Rv(r,","))}t=o()}t||(r=Lv(r,","));r="[\n".concat(r,"\n]")}()):a&&(r=Lv(r,","));"}"===e[n]||"]"===e[n];)n++,i();return n>=e.length?r:(function(){throw new nv("Unexpected character ".concat(JSON.stringify(e[n])),n)}(),"");function o(){i();var t=function(){if("{"===e[n]){r+="{",n++,i(),l(",")&&i();for(var t=!0;n<e.length&&"}"!==e[n];){t?(!0,t=!1):(u(",")||(r=Rv(r,",")),i()),m();var a=p()||g(!0);if(!a){"}"===e[n]||"{"===e[n]||"]"===e[n]||"["===e[n]||void 0===e[n]?r=Lv(r,","):O();break}i();var s=u(":"),c=n>=e.length;s||(xv(e[n])||c?r=Rv(r,":"):x());var d=o();d||(s||c?r+="null":x())}return"}"===e[n]?(r+="}",n++):r=Rv(r,"}"),!0}return!1}()||function(){if("["===e[n]){r+="[",n++,i(),l(",")&&i();for(var t=!0;n<e.length&&"]"!==e[n];){if(t)t=!1;else{var a=u(",");a||(r=Rv(r,","))}m();var s=o();if(!s){r=Lv(r,",");break}}return"]"===e[n]?(r+="]",n++):r=Rv(r,"]"),!0}return!1}()||p()||function(){var t=n;if("-"===e[n]){if(n++,y())return v(t),!0;if(!fv(e[n]))return n=t,!1}for(;fv(e[n]);)n++;if("."===e[n]){if(n++,y())return v(t),!0;if(!fv(e[n]))return n=t,!1;for(;fv(e[n]);)n++}if("e"===e[n]||"E"===e[n]){if("-"!==e[++n]&&"+"!==e[n]||n++,y())return v(t),!0;if(!fv(e[n]))return n=t,!1;for(;fv(e[n]);)n++}if(!y())return n=t,!1;if(n>t){var a=e.slice(t,n),o=/^0\d/.test(a);return r+=o?'"'.concat(a,'"'):a,!0}return!1}()||h("true","true")||h("false","false")||h("null","null")||h("True","true")||h("False","false")||h("None","null")||g(!1)||function(){if("/"===e[n]){var t=n;for(n++;n<e.length&&("/"!==e[n]||"\\"===e[n-1]);)n++;return n++,r+='"'.concat(e.substring(t,n),'"'),!0}}();return i(),!!t}function i(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=n,r=s(e);do{(r=c())&&(r=s(e))}while(r);return n>t}function s(t){for(var a=t?kv:Iv,o="";;)if(a(e,n))o+=e[n],n++;else{if(!Sv(e,n))break;o+=" ",n++}return o.length>0&&(r+=o,!0)}function c(){if("/"===e[n]&&"*"===e[n+1]){for(;n<e.length&&!Mv(e,n);)r+=e[n],n++;return n+=2,r+="*/",!0}if("/"===e[n]&&"/"===e[n+1]){for(;n<e.length&&"\n"!==e[n];)r+=e[n],n++;return!0}return!1}function d(){if("```"===e.slice(n,n+3)){if(bv(e[n+=3]))for(;n<e.length&&yv(e[n]);)n++;return i(),!0}return!1}function u(t){return e[n]===t&&(r+=e[n],n++,!0)}function l(t){return e[n]===t&&(n++,!0)}function m(){return i(),"."===e[n]&&"."===e[n+1]&&"."===e[n+2]&&(n+=3,i(),l(","),!0)}function p(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o="\\"===e[n];if(o&&(n++,o=!0),Cv(e[n])){var s=Tv(e[n])?Tv:Nv(e[n])?Nv:Av(e[n])?Av:_v,c=n,d=r.length,u='"';for(n++;;){if(n>=e.length){var m=b(n-1);return!t&&gv(e.charAt(m))?(n=c,r=r.substring(0,d),p(!0)):(u=Rv(u,'"'),r+=u,!0)}if(n===a)return u=Rv(u,'"'),r+=u,!0;if(s(e[n])){var h=n,g=u.length;if(n++,r+=u+='"',i(!1),t||n>=e.length||gv(e[n])||Cv(e[n])||fv(e[n]))return f(),!0;var y=b(h-1),v=e.charAt(y);if(","===v)return n=c,r=r.substring(0,d),p(!1,y);if(gv(v))return n=c,r=r.substring(0,d),p(!0);r=r.substring(0,d),n=h+1,u="".concat(u.substring(0,g),"\\").concat(u.substring(g))}else{if(t&&Ov(e[n])){if(":"===e[n-1]&&vv.test(e.substring(c+1,n+2)))for(;n<e.length&&Ev.test(e[n]);)u+=e[n],n++;return u=Rv(u,'"'),r+=u,f(),!0}if("\\"===e[n]){var O=e.charAt(n+1);if(void 0!==Pv[O])u+=e.slice(n,n+2),n+=2;else if("u"===O){for(var x=2;x<6&&pv(e[n+x]);)x++;6===x?(u+=e.slice(n,n+6),n+=6):n+x>=e.length?n=e.length:j()}else u+=O,n+=2}else{var w=e.charAt(n);'"'===w&&"\\"!==e[n-1]?(u+="\\".concat(w),n++):wv(w)?(u+=Dv[w],n++):(hv(w)||E(w),u+=w,n++)}}o&&l("\\")}}return!1}function f(){var t=!1;for(i();"+"===e[n];){t=!0,n++,i();var a=(r=Lv(r,'"',!0)).length,o=p();r=o?Bv(r,a,1):Rv(r,'"')}return t}function h(t,a){return e.slice(n,n+t.length)===t&&(r+=a,n+=t.length,!0)}function g(t){var a=n;if(bv(e[n])){for(;n<e.length&&yv(e[n]);)n++;for(var i=n;kv(e,i);)i++;if("("===e[i])return n=i+1,o(),")"===e[n]&&";"===e[++n]&&n++,!0}for(;n<e.length&&!Ov(e[n])&&!Cv(e[n])&&(!t||":"!==e[n]);)n++;if(":"===e[n-1]&&vv.test(e.substring(a,n+2)))for(;n<e.length&&Ev.test(e[n]);)n++;if(n>a){for(;kv(e,n-1)&&n>0;)n--;var s=e.slice(a,n);return r+="undefined"===s?"null":JSON.stringify(s),'"'===e[n]&&n++,!0}}function b(t){for(var n=t;n>0&&kv(e,n);)n--;return n}function y(){return n>=e.length||gv(e[n])||kv(e,n)}function v(t){r+="".concat(e.slice(t,n),"0")}function E(e){throw new nv("Invalid character ".concat(JSON.stringify(e)),n)}function O(){throw new nv("Object key expected",n)}function x(){throw new nv("Colon expected",n)}function j(){var t=e.slice(n,n+6);throw new nv('Invalid unicode character "'.concat(t,'"'),n)}}function Mv(e,t){return"*"===e[t]&&"/"===e[t+1]}var Uv={tokenPostfix:".json",keywords:["count","merge","deepMerge","uuid","isRole","userAttr","pageData","mediaQuery","data","role","attr","typeof","default","call","upperCase","upper","lowerCase","lower","split","trim","trimEnd","trimStart","pad","padStart","padEnd","toInt","toFloat","toStr","toJSON","fromJSON","toArray","round","ceil","floor","push","contains","filter","map","join","first","last","orderBy","list","get","set","unset","keys","values","pick","omit","nextval","now","date","utc","isoDate","isoTime","isoDateTime","localDate","localTime","localDateTime","year","utcYear","month","utcMonth","day","utcDay","weekDay","utcWeekDay","hours","utcHours","minutes","utcMinutes","seconds","utcSeconds","milliseconds","utcMilliseconds","timezoneOffset","timestamp","addMilliseconds","subMilliseconds","addSeconds","subSeconds","addMinutes","subMinutes","addHours","subHours","addDays","subDays","addWeeks","subWeeks","twoDigit"],jsonKeywords:["true","false","null"],typeKeywords:["any","boolean","number","object","string","undefined"],operators:["<=",">=","==","!=","=>","+","-","**","*","/","%","++","--","<<","</",">>",">>>","&","|","^","!","~","&&","||","?",":","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=","@"],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,regexpctl:/[(){}\[\]\$\^|\-*+?\.]/,regexpesc:/\\(?:[bBdDfnrstvwWn0\\\/]|@regexpctl|c[A-Z]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})/,tokenizer:{root:[[/\{/,"delimiter.bracket","@json_obj"],[/\[/,"delimiter.bracket","@json_array"],[/"/,"string","@string_double"],[/(@digits)[eE]([\-+]?(@digits))?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?/,"number.float"],[/0[xX](@hexdigits)/,"number.hex"],[/0[oO]?(@octaldigits)/,"number.octal"],[/0[bB](@binarydigits)/,"number.binary"],[/(@digits)/,"number"],[/true/,"keyword"],[/false/,"keyword"],[/null/,"keyword"],{include:"@whitespace"}],json_obj:[[/"/,"string","@string_double"],[/:/,"delimiter","@json_val"],{include:"@whitespace"},[/}/,"delimiter.bracket","@pop"]],json_array:[[/\{/,"delimiter.bracket","@json_obj"],[/\[]/,"delimiter.bracket","@json_array"],[/(@digits)[eE]([\-+]?(@digits))?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?/,"number.float"],[/0[xX](@hexdigits)/,"number.hex"],[/0[oO]?(@octaldigits)/,"number.octal"],[/0[bB](@binarydigits)/,"number.binary"],[/(@digits)/,"number"],[/[a-z_$][\w$]*/,{cases:{"@jsonKeywords":"keyword","@default":"identifier"}}],[/"\$>/,{token:"source.js",next:"@jexl"}],[/"/,"keyword","@json_val_string"],{include:"whitespace"},[/]/,"delimiter.bracket","@pop"]],json_val:[[/\{/,"delimiter.bracket","@json_obj"],[/\[/,"delimiter.bracket","@json_array"],[/(@digits)[eE]([\-+]?(@digits))?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?/,"number.float"],[/0[xX](@hexdigits)/,"number.hex"],[/0[oO]?(@octaldigits)/,"number.octal"],[/0[bB](@binarydigits)/,"number.binary"],[/(@digits)/,"number"],[/[a-z_$][\w$]*/,{cases:{"@jsonKeywords":"keyword","@default":"identifier"}}],[/"\$>/,{token:"source.js",next:"@jexl"}],[/"/,"keyword","@json_val_string"],{include:"whitespace"},[/,/,"delimiter","@pop"],[/\n/,"","@pop"]],json_val_string:[[/[^\\"]+/,"keyword"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"keyword","@pop"]],common:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@jsonKeywords":"keyword","@default":"identifier"}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/[()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"delimiter","@default":""}}],[/(@digits)[eE]([\-+]?(@digits))?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?/,"number.float"],[/0[xX](@hexdigits)/,"number.hex"],[/0[oO]?(@octaldigits)/,"number.octal"],[/0[bB](@binarydigits)/,"number.binary"],[/(@digits)/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string_double"],[/'/,"string","@string_single"],[/`/,"string","@string_backtick"]],whitespace:[[/[ \t\r\n]+/,""],[/\/\*\*(?!\/)/,"comment.doc","@jsdoc"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[\/*]/,"comment"]],jexl:[[/\\".*\\"/,"string"],[/"/,"jexl","@pop"],{include:"common"}],jsdoc:[[/[^\/*]+/,"comment.doc"],[/\*\//,"comment.doc","@pop"],[/[\/*]/,"comment.doc"]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],string_val_double:[[/[^\\"]+/,"identifier"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"identifier","@pop"]],string_single:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,"string","@pop"]],string_backtick:[[/\$\{/,{token:"delimiter.bracket",next:"@bracketCounting"}],[/[^\\`$]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/`/,"string","@pop"]],bracketCounting:[[/\{/,"delimiter.bracket","@bracketCounting"],[/\}/,"delimiter.bracket","@pop"],{include:"common"}]}},Fv=window.monaco,Gv={},qv={},Vv=!1;Fv.languages.setMonarchTokensProvider("json",Uv);var Wv,Hv=!1,$v=function(e){function t(e){var n;return Object(Be.a)(this,t),(n=Object(Pe.a)(this,Object(ze.a)(t).call(this,e))).editor=void 0,n.containerId=void 0,n.asDiffEditor=void 0,n.disposeOnChangeHandler=n.disposeOnChangeHandler.bind(Object(ev.a)(Object(ev.a)(n))),n.containerId=e.containerId||"monaco-container",n.asDiffEditor=!!e.asDiffEditor,n.state={internalData:{}},n}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.editor=this.asDiffEditor?Fv.editor.createDiffEditor(document.getElementById(this.containerId),this.props.options||{}):Fv.editor.create(document.getElementById(this.containerId),this.props.options||{});var t=this.props;t.onOpenInformationReference&&(this.editor.getContribution("editor.linkDetector").openerService.open=function(){var e=Object(je.a)(xe.a.mark(function e(n){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.includes("node://#")){e.next=5;break}return Hv=!0,t.onOpenInformationReference&&t.onOpenInformationReference(n.replace("node://#","").replace("[]","")),window.setTimeout(function(){Hv=!1},500),e.abrupt("return",!0);case 5:return window.open(n,"_blank"),e.abrupt("return",!0);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),this.props.repairJson&&this.addKeyDownHandler(function(t){if(e.editor&&t.altKey&&"KeyF"===t.code){var n=e.editor.getValue();try{var r=zv(n,!0);if(r!==n){var a=e.editor.getPosition(),o=e.editor.getModel().getLineLength(a.lineNumber);e.editor;e.editor.setValue(r);var i=e.editor.getModel().getLineLength(a.lineNumber),s=Object(Ye.a)({},a,{column:o!==i?i+1:a.column});e.editor.setPosition(s),t.stopPropagation(),t.preventDefault()}}catch(t){console.error(t)}}})}},{key:"componentWillUnmount",value:function(){var e=this;this.editor.dispose(),Object.keys(this.state.internalData).forEach(function(t){e.disposeOnChangeHandler(t,!0),e.disposeModel(t)}),this.editor=void 0}},{key:"render",value:function(){var e=this;return he.createElement("div",{id:this.containerId,style:this.props.style,className:this.props.className,onFocus:function(){e.editor&&e.editor.updateOptions({scrollBeyondLastLine:!0}),e.props.onFocus&&e.props.onFocus()},onBlur:function(){if(e.editor&&e.editor.updateOptions({scrollBeyondLastLine:!1}),Hv)return window.setTimeout(function(){Hv=!1},500),!0;e.props.onBlur&&e.props.onBlur()}})}},{key:"retrievePayload",value:function(){var e=this.editor.getValue();if(!this.props.repairJson)return e;try{var t=zv(e,!0);return t!==e&&this.editor.setValue(t),t}catch(n){return console.log(n),e}}},{key:"initializeDiffModel",value:function(e,t){var n=this.prepareModel(e),r=this.prepareModel(t);this.editor.setModel({original:n,modified:r})}},{key:"initializeModel",value:function(e){var t=this.prepareModel(e);this.editor.setModel(t)}},{key:"addCommand",value:function(e,t){this.editor.addCommand(e,t)}},{key:"addKeyDownHandler",value:function(e){return this.editor.onKeyDown(e)}},{key:"focus",value:function(){this.editor.focus()}},{key:"prepareModel",value:function(e){var t=Fv.Uri.parse(e.fileId),n=Fv.editor.getModel(t);return this.disposeOnChangeHandler(e.fileId),this.props.onOpenInformationReference&&(qv["/"+e.fileId]={supportRefLinks:!0}),null===n?(n=Fv.editor.createModel(e.value,e.language,t)).updateOptions({tabSize:2}):(Fv.editor.setModelLanguage(n,e.language),e.value!==n.getValue()&&n.setValue(e.value)),e.onChange?this.initializeOnChangeHandler(e.fileId,n,e.onChange):this.updateInternalData(e.fileId,{onChangeDisposable:void 0}),"json"===e.language&&e.schema&&this.initializeJsonDiagnostics(e.fileId,t,e.schema),n}},{key:"disposeOnChangeHandler",value:function(e,t){this.state.internalData[e]&&this.state.internalData[e].onChangeDisposable&&(this.state.internalData[e].onChangeDisposable.dispose(),t||this.updateInternalData(e,{onChangeDisposable:void 0}))}},{key:"disposeModel",value:function(e){var t=Fv.Uri.parse(e),n=Fv.editor.getModel(t);n&&window.setTimeout(function(){n.dispose()})}},{key:"initializeOnChangeHandler",value:function(e,t,n){this.disposeOnChangeHandler(e);var r=t.onDidChangeContent(function(e){n(e)});this.updateInternalData(e,{onChangeDisposable:r})}},{key:"initializeJsonDiagnostics",value:function(e,t,n){if(Gv[e]={uri:t.toString(),fileMatch:[t.toString()],schema:JSON.parse(n)},Fv.languages.json.jsonDefaults.setModeConfiguration({tokens:!1,completionItems:!0,diagnostics:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0,documentSymbols:!0,foldingRanges:!0,hovers:!0,selectionRanges:!0}),Fv.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,enableSchemaRequest:!1,allowComments:!0,trailingCommas:"ignore",schemas:Object.values(Gv)}),!Vv){var r={provideLinks:function(e,t){if(qv[e.uri.path]){var n=e.findMatches('"/[^"]{1,}',!0,!0,!1,null,!0);return console.log("link matches",n),{links:n.map(function(e){return{range:Object(Ye.a)({},e.range,{startColumn:e.range.startColumn+1}),url:"node://#"+e.matches[0].replace('"',"")}})}}},resolveLink:function(e,t){return{range:e.range}}};Fv.languages.registerLinkProvider("json",r),Vv=!0}}},{key:"updateInternalData",value:function(e,t){this.setState({internalData:Object(Ye.a)({},this.state.internalData,Object(Xy.a)({},e,t))})}}]),t}(he.Component),Jv=n(1289),Qv=ge.a.forwardRef(function(e,t){var n=Object(he.useRef)(null);return Object(he.useEffect)(function(){n.current&&n.current.initializeModel({fileId:"board_".concat(e.boardStickyTemplate.boardId,"_sticky_").concat(e.boardStickyTemplate.cellType,"_schema.json"),language:"json",value:e.boardStickyTemplate.templateSchema||'{\n\t"type": "object",\n\t"properties": {}\n}',schema:JSON.stringify(Jv)})},[e.boardStickyTemplate.boardId,e.boardStickyTemplate.cellType,e.boardStickyTemplate.templateSchema]),Object(he.useImperativeHandle)(t,function(){return{retrievePayload:function(){return n.current.retrievePayload()}}}),ge.a.createElement($v,{ref:n,style:{height:"280px",width:"100%",marginTop:"10px"},options:{fontSize:12,folding:!1,glyphMargin:!1,lineNumbers:"off",lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1}})}),Yv=Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=Object(he.useState)(e.boardStickyTemplate.templateType),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(he.useRef)(null);Object(he.useEffect)(function(){o(e.boardStickyTemplate.templateType)},[e.boardStickyTemplate]);var s=function(){var n=Object(je.a)(xe.a.mark(function n(){return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t(L.updateStickyAdvancedConfig(e.boardId,e.boardStickyTemplate.cellType,a,"json"===a&&i.current?i.current.retrievePayload():void 0));case 1:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}();return he.createElement(he.Fragment,null,he.createElement(Ve.a,{style:{height:"333px"}},he.createElement(Ky.a,{options:[{key:"json",value:"json",text:"JSON"},{key:"xml",value:"xml",text:"XML"},{key:"yaml",value:"yaml",text:"YAML"}],value:a,onChange:function(e,t){return o(t.value)}}),"json"===a&&he.createElement(Qv,{ref:i,boardStickyTemplate:e.boardStickyTemplate})),e.boardStickyTemplate.templateSchema&&he.createElement("a",{href:"#",onClick:function(n){n.preventDefault();try{var r="json"===a&&i.current?i.current.retrievePayload():void 0;if(!r)return;var o=JSON.parse(r),s=JSON.stringify(function e(t,n){var r="";if(!(t=zn.clone(t)).type&&t.$ref&&n&&(t=Object(Ye.a)({},Zy(t.$ref,t,n))),!t.type&&!t.enum)return{type:"object"};if(t.enum&&Array.isArray(t.enum))return t.enum.join("|");if(Array.isArray(t.type)){var a=!0,o=!1,i=void 0;try{for(var s,c=t.type[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=s.value;if("null"!==d.toLowerCase()){t.type=d;break}}}catch(u){o=!0,i=u}finally{try{a||null==c.return||c.return()}finally{if(o)throw i}}}switch(t.type.toLowerCase()){case"string":return"string";case"number":case"integer":return 0;case"boolean":return!1;case"array":return[e(t.items||{},n)];case"object":return r={},t.properties||(t.properties={}),Object.keys(t.properties).forEach(function(a){r[a]=e(t.properties[a],n)}),r;default:return"unknown"}}(o),null,2);e.onTemplateGenerated(s),window.setTimeout(function(){t(L.updateStickyAdvancedConfig(e.boardId,e.boardStickyTemplate.cellType,a,r,!0))},1e3)}catch(n){return void console.error(n)}}},e.t("app.form.generateTemplate")),he.createElement(Ni.a,{primary:!0,onClick:s,content:e.t("app.form.save"),floated:"right"}),he.createElement(Ni.a,{onClick:e.onClose,content:e.t("app.form.back"),floated:"right"}))}),Kv=n(1409),Zv={stickyColors:{event:"#FF9F4B",command:"#26C0E7",role:"#f7f727",projection:"#3acbc0",aggregate:"#F5E339",document:"#73dd8e",policy:"#EABFF1",hotSpot:"#f31d30",externalSystem:"#ec98ac",ui:"#000000",feature:"#cfcfcf",boundedContext:"#a2a2a2",edge:"#414141",textCard:"#ffdfd3"}},Xv=function(e){var t;switch("normal"!==e.size&&(t=e.size||"large"),e.cellType){case ap.event:case ap.command:case ap.role:case ap.projection:case ap.aggregate:case ap.document:case ap.policy:case ap.hotSpot:case ap.externalSystem:case ap.ui:return he.createElement(Cp.a,{name:"sticky note",size:t,style:{color:Zv.stickyColors[e.cellType]},title:e.title,className:e.className});case ap.icon:return he.createElement(Cp.a,{name:"heart",size:t,title:e.title,className:e.className});case ap.image:return he.createElement(Cp.a,{name:"image",size:t,title:e.title,className:e.className});case ap.feature:return he.createElement(Cp.a,{name:"square",size:t,style:{Color:Zv.stickyColors.feature},title:e.title,className:e.className},he.createElement("span",{style:{position:"absolute",marginTop:t?"0.17em":"0.03em",marginLeft:"-0.84em",fontFamily:"sans-serif",fontSize:"0.8em",color:"white"}},"F"));case ap.slice:case ap.swimlanes:return he.createElement(Cp.a,{name:"square",size:t,style:{Color:Zv.stickyColors.feature},title:e.title,className:e.className},he.createElement("span",{style:{position:"absolute",marginTop:t?"0.17em":"0.03em",marginLeft:"-0.86em",fontFamily:"sans-serif",fontSize:"0.8em",color:"white"}},"S"));case ap.boundedContext:return he.createElement(Cp.a,{name:"square",size:t,style:{Color:Zv.stickyColors.feature},title:e.title,className:e.className},he.createElement("span",{style:{position:"absolute",marginTop:t?"0.17em":"0.03em",marginLeft:"-0.89em",fontFamily:"sans-serif",fontSize:"0.8em",color:"white"}},"C"));case ap.multiple:return he.createElement(Cp.a,{name:"sitemap",size:t,style:{fontSize:"1.25em"},title:e.title,className:e.className});case ap.edge:return he.createElement(Cp.a,{size:t,title:e.title,className:e.className},he.createElement("img",{style:{width:"1em",height:"1em"},src:'data:image/svg+xml;utf8,<svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="'.concat(encodeURIComponent(Zv.stickyColors.edge),'" d="M476 480H324a36 36 0 0 1-36-36V96h-96v156a36 36 0 0 1-36 36H16a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h112V68a36 36 0 0 1 36-36h152a36 36 0 0 1 36 36v348h96V260a36 36 0 0 1 36-36h140a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H512v156a36 36 0 0 1-36 36z"></path></svg>')}));case ap.textCard:return he.createElement(Cp.a,{name:"square",size:t,style:{color:Zv.stickyColors.textCard},title:e.title,className:e.className},he.createElement("span",{style:{position:"absolute",marginTop:"0.17em",marginLeft:"-0.84em",fontFamily:"sans-serif",color:"#494949",fontSize:"0.8em"}},"T"));case ap.freeText:return he.createElement(Cp.a,{name:"align center",size:t,title:e.title,className:e.className});default:return he.createElement(Cp.a,{name:"square",size:t,title:e.title,className:e.className})}},eE=function(e){return e===Dc.boundedContext||e===Dc.feature},tE=function(e){return!eE(e)&&!function(e){return e===Dc.freeText||e===Dc.image||e===Dc.icon}(e)},nE=Object(Ue.b)()(function(e){var t=!0,n=e.boardStickyTemplates.sort(function(e,t){return tE(e.cellType)===tE(t.cellType)?e.cellType<t.cellType?-1:e.cellType>t.cellType?1:0:tE(e.cellType)?-1:tE(t.cellType)?1:eE(e.cellType)?-1:eE(t.cellType)?1:e.cellType===Dc.freeText?-1:t.cellType===Dc.freeText?1:0}).map(function(n){var r=e.activeCellType?e.activeCellType===n.cellType:t;return!e.activeCellType&&t&&e.onSetActiveCellType(n.cellType),t=!1,he.createElement(Kv.a.Item,{key:n.cellType,as:"a",active:r,onClick:function(){e.onSetActiveCellType(n.cellType)}},he.createElement(Xv,{cellType:n.cellType,size:"large"}),he.createElement(Kv.a.Content,null,e.t("app.stickyTypes."+n.cellType)))}).toIndexedSeq().toArray();return he.createElement(Kv.a,{link:!0},n)}),rE=he.forwardRef(function(e,t){var n=Object(he.useRef)(null),r=function(t){n.current.initializeModel({fileId:"board_".concat(e.boardStickyTemplate.boardId,"_sticky_").concat(e.boardStickyTemplate.cellType,".json"),language:e.boardStickyTemplate.templateType,value:t,schema:e.boardStickyTemplate.templateSchema||void 0})};return Object(he.useEffect)(function(){r(e.boardStickyTemplate.template),n.current.addCommand(Fv.KeyMod.CtrlCmd|Fv.KeyCode.KEY_S,e.onSave)},[e.boardStickyTemplate.boardId,e.boardStickyTemplate.cellType,e.boardStickyTemplate.templateType,e.boardStickyTemplate.template,e.boardStickyTemplate.templateSchema]),Object(he.useImperativeHandle)(t,function(){return{retrievePayload:function(){return n.current.retrievePayload()},updateModelValue:function(e){return r(e)}}}),he.createElement($v,{ref:n,style:{height:"300px",width:"100%"},options:{fontSize:12,folding:!1,glyphMargin:!1,lineNumbers:"off",lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1}})}),aE=Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=Object(he.useState)(),r=Object(Ke.a)(n,2),o=r[0],i=r[1],s=Object(he.useState)(!1),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(Fe.useSelector)(Yy(e.boardId)),m=Object(Fe.useSelector)(Ay(e.boardId)),p=Object(he.useRef)(null),f=Object(he.useRef)(null),h=Object(he.useState)(!1),g=Object(Ke.a)(h,2),b=g[0],y=g[1];Object(he.useEffect)(function(){t(B.fetchBoardStickyTemplates(e.boardId))},[]);var v=function(){if(o&&p&&p.current){var n=p.current.retrievePayload();if("json"===l.get(o).templateType)try{JSON.parse(n)}catch(r){return void t(a.error(e.t("insp.sidebar.element_details.json_invalid_title"),e.t("insp.sidebar.element_details.json_invalid_text")))}t(L.setStickyTemplate(e.boardId,o,n))}};return he.createElement("div",{className:"ui segments"},he.createElement("div",{className:"ui segment"},he.createElement(tt.a,{item:!0,icon:"ellipsis vertical",style:{float:"right",marginTop:"30px",fontSize:"1.2rem"}},he.createElement(tt.a.Menu,{direction:"left"},he.createElement(tt.a.Item,{icon:"download",text:"Import Templates",onClick:function(){f.current&&f.current.click()}}),he.createElement(tt.a.Item,{icon:"upload",text:"Export Templates",onClick:function(){var e=JSON.stringify(l.map(function(e){return{templateType:e.templateType,template:e.template,templateSchema:e.templateSchema}}),null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.download=m.name+" Card Templates.json",r.href=n,document.body.append(r),r.click(),window.setTimeout(function(){r.remove(),URL.revokeObjectURL(n)},150)}}))),he.createElement("h2",{className:"ui header"},e.t("insp.board.sticky_templates.headline"),he.createElement(Gg.a,null,e.t("insp.board.sticky_templates.description"))),he.createElement("p",null,"\xa0"),he.createElement(Xe.a,{columns:2},he.createElement(Xe.a.Column,{mobile:"6",tablet:"6",computer:"5",largeScreen:"5",widescreen:"5"},he.createElement(nE,{boardStickyTemplates:l,activeCellType:o,onSetActiveCellType:i})),o&&he.createElement(Xe.a.Column,{mobile:"10",tablet:"10",computer:"11",largeScreen:"11",widescreen:"11",style:{borderLeft:"1px solid #d8dee2"}},!d&&he.createElement(he.Fragment,null,he.createElement(rE,{ref:p,boardStickyTemplate:l.get(o),onSave:v}),he.createElement("p",null,"\xa0"),he.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),u(!0)}},e.t("insp.board.sticky_templates.advanced_config")),he.createElement(Ni.a,{primary:!0,onClick:v,content:e.t("app.form.save"),floated:"right"})),d&&he.createElement(Yv,{boardId:e.boardId,boardStickyTemplate:l.get(o),onClose:function(){return u(!1)},onTemplateGenerated:function(n){o&&(u(!1),t(L.setStickyTemplate(e.boardId,o,n)),window.setTimeout(function(){p.current&&p.current.updateModelValue(n)},10))}}),he.createElement(Mg.a,{inverted:!0,active:b},he.createElement(Ug.a,{inverted:!0},"Importing")))),he.createElement("input",{type:"file",ref:f,style:{display:"none"},onChange:function(n){var r=n.target.files[0]||null;My(r).then(function(n){var r;try{r=JSON.parse(n)}catch(m){return void t(a.error(e.t("insp.sidebar.element_details.json_invalid_title"),e.t("insp.sidebar.element_details.json_invalid_text")))}if("object"===typeof r){for(var o=Object.keys(l.toJSON()),i=Object.keys(r),s=[],c=0;c<i.length;c++){var d=i[c];if(!o.includes(d))return void t(a.error("Invalid Card Templates File",e.t("File contains unknown cell type: "+d)));var u=Wy(e.boardId,d,r[d].template||"");u=u.setTemplateType(r[d].templateType||"json"),r[d].templateSchema&&(u=u.setTemplateSchema(r[d].templateSchema)),s.push(u)}y(!0),t(L.importStickyTemplates(e.boardId,Object(fe.List)(s),function(){y(!1)}))}else t(a.error("Invalid Card Templates File",e.t("Selected file does not contain a JSON object of card templates")))})}})))}),oE=(Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=Object(he.useState)(),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=e.organizations.map(function(e){return{key:e.uid,value:e.uid,text:e.organizationName}});return he.createElement(he.Fragment,null,he.createElement(Ky.a,{options:i.toJS(),placeholder:e.t("insp.board.move_to_organization_select"),onChange:function(e,t){return o(t.value)}}),he.createElement(Ni.a,{primary:!0,floated:"right",onClick:function(){a&&(t(L.moveUserBoardToOrganization(a,e.boardId)),o(void 0))}},e.t("insp.board.move_to_organization_submit")),he.createElement(nt.a,{size:"small",info:!0},e.t("insp.board.move_to_organization_desc")))}),function(e){var t=Object(he.useState)(e.focus||!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(!1),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)(""),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(he.useState)(e.text||e.textSuggestion||""),f=Object(Ke.a)(p,2),h=f[0],g=f[1],b=Object(he.useRef)(null);Object(he.useEffect)(function(){g(e.text||e.textSuggestion||""),!e.text&&e.textSuggestion&&e.validate&&y(e.textSuggestion)},[e.text,e.textSuggestion]);var y=function(t){if(""!==t&&s&&c(!1),""===t&&e.required&&!s&&c(!0),e.maxLength&&t.length>e.maxLength&&c(!0),e.validate){var n=e.validate(t);!1===n?c(!0):!0===n?(c(!1),m("")):(c(!0),m(n))}g(t)},v=function(){e.required&&""===h?(c(!0),E()):(h===e.text||s||e.onTextChanged(h),s?E():a(!1))},E=function(){window.setTimeout(function(){b&&b.current&&b.current.focus()},200)},O=""!==h?h.length:e.placeholder?e.placeholder.length:0,x=e.padding||0,j=e.charSize*O+x;e.minWidth&&(e.fixedWidth||j<e.minWidth)&&(j=e.minWidth);var w=e.border||"2px solid #4593CE";s&&(w="4px solid #E0B4B4");var k=""===e.text?e.placeholder||"":e.text,I=r&&!e.disabled;return he.createElement(he.Fragment,null,I&&he.createElement(kp.a,{transparent:!0,error:s,value:h,ref:b,onBlur:v,onChange:function(e,t){return y(t.value)},onKeyDown:function(t){"Enter"===t.key?v():"Escape"===t.key&&(g(e.text),c(!1),a(!1),e.onCancel&&e.onCancel())},placeholder:e.placeholder,autoFocus:e.focus,style:{width:j+e.widthUnit,borderBottom:w}}),I&&s&&l&&he.createElement(nt.a,{error:!0,content:l,style:{display:"block"}}),!I&&he.createElement("span",{onClick:function(){a(!0),window.setTimeout(function(){b&&b.current&&b.current.focus()},200)},style:e.textStyle},k))}),iE=Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)();return ge.a.createElement("form",{className:"ui form"},ge.a.createElement("h3",{style:{margin:0,cursor:"pointer"}},ge.a.createElement(oE,{text:e.board.name,charSize:9,widthUnit:"px",padding:20,required:!0,onTextChanged:function(n){var r=e.board.merge({name:n});t(L.renameBoard(r))},placeholder:e.t("insp.board.form.board_name")}),"\xa0/\xa0",ge.a.createElement(oE,{text:e.board.nameAbbreviation,charSize:9,widthUnit:"px",padding:20,required:!0,maxLength:3,onTextChanged:function(n){var r=e.board.merge({nameAbbreviation:n});t(L.changeBoardAbbreviation(r))},placeholder:e.t("insp.board.form.board_name")})))}),sE=function(e){var t=Object(Fe.useDispatch)(),n=Object(Fe.useSelector)(bg()),r=Object(he.useRef)(n.map(function(e){return{key:e,text:"#"+e,value:e}}).toJS()),a=e.board.tags.toJS(),o=r.current.map(function(e){return e.value});return a.forEach(function(e){o.includes(e.value)||r.current.push({key:e,text:"#"+e,value:e})}),he.createElement("div",{className:"field"},he.createElement(tt.a,{multiple:!0,allowAdditions:!0,name:"tags",placeholder:"Tags",search:!0,selection:!0,options:r.current,value:a,onAddItem:function(e,t){return function(e){if(0!==e.length){"#"!==e.charAt(0)&&(e="#"+e);var t=e.slice(1);r.current.push({key:t,text:e,value:t})}}(t.value)},onChange:function(n,r){return function(n){var r=e.board.merge({tags:Object(fe.List)(n)});t(L.setBoardTags(r))}(r.value)}}))},cE=Object(Ue.b)()(function(e){var t=Object(he.useState)(!0),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(Fe.useDispatch)();Object(he.useEffect)(function(){a(e.board.codySuggestEnabled)},[e.board.uid]);return he.createElement(Sp.a,{toggle:!0,checked:r,value:r?"1":"",onChange:function(t,n){return r="1"!==n.value,a(r),void o(bu(e.board.merge({codySuggestEnabled:r})));var r}})}),dE=Object(Ue.b)()(function(e){var t=Object(he.useState)(!0),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(Fe.useDispatch)();Object(he.useEffect)(function(){a(e.board.eventModelingEnabled)},[e.board.uid]);return he.createElement(Sp.a,{toggle:!0,checked:r,value:r?"1":"",onChange:function(t,n){return r="1"!==n.value,a(r),void o(yu(e.board.merge({eventModelingEnabled:r})));var r}})}),uE={history:Object(fe.List)(),loading:!1,oldestBoardVersion:void 0,olderPatchesAvailable:!0},lE=function(e){function t(){return Object(Be.a)(this,t),Object(Pe.a)(this,Object(ze.a)(t).apply(this,arguments))}return Object(Me.a)(t,e),t}(Object(fe.Record)(uE)),mE=function(e){return function(t){return function(e,t){return e.getIn(["inspectioBoards","history",t])||new lE}(t,e)}},pE=ce.makeMapStateToPropsEditBoard(),fE=Object(Ue.b)()(Object(Ge.o)(Object(ht.a)(Object(Fe.connect)(pE,function(e){return Object(gt.bindActionCreators)({confirmDeleteBoard:L.confirmDeleteBoard,deleteBoard:L.deleteBoard,abortDeletion:L.abortBoardDeletion,shareBoard:L.shareBoard},e)}),Object(ht.b)({}))(function(e){var t=Object(Fe.useDispatch)(),n=e.board?e.board.uid:void 0,r=Object(Fe.useSelector)(Al()),a=Object(Fe.useSelector)(Ii()),o=Object(Fe.useSelector)(Tl(a.uid));if(Object(he.useEffect)(function(){e.board&&(t(Ol(e.board.uid)),t(xl(e.board.uid)),t(jl(e.board.uid)))},[n]),!e.board)return t(El(e.match.params.uid)),he.createElement(Mg.a,{className:"page"},he.createElement(Ug.a,{size:"large"},"Loading Board"));var i=!r||!r.explicitOrganization,s=i?o.filter(function(e){return e.explicitOrganization&&!e.userIsGuest}):Object(fe.List)();i&&!e.board.organization&&s.count();return he.createElement(Ve.a,null,he.createElement(Xe.a,{stackable:!0,padded:!0},he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),he.createElement(Xe.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},he.createElement(et.a,{as:"h1",icon:!0,textAlign:"center"},he.createElement(Cp.a,{name:"settings"}),he.createElement(et.a.Content,null,e.t("insp.board.edit").replace("%name%",e.board.name),he.createElement(et.a.Subheader,null,e.t("insp.board.edit_header")))))),he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),he.createElement(Xe.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},he.createElement("div",{className:"ui segments"},he.createElement("div",{className:"ui segment"},he.createElement(iE,{board:e.board})),he.createElement("div",{className:"ui segment"},!e.board.inDeletion&&he.createElement(nt.a,null,e.t("insp.board.delete_txt1"),he.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.confirmDeleteBoard(e.board.uid)}},e.t("insp.board.delete_link")),e.t("insp.board.delete_txt2")),e.board.inDeletion&&he.createElement(Wg,{boardName:e.board.name,initialValues:Object(fe.fromJS)({confirmedName:"",uid:e.board.uid}),t:e.t,onSubmit:function(t){!function(e,t){t.deleteBoard(e.get("uid")),t.history.replace(jt)}(t,e)},onCancel:function(){return e.abortDeletion(e.board.uid)}}))))),he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),he.createElement(Xe.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},he.createElement("div",{className:"ui segments"},he.createElement("div",{className:"ui segment"},he.createElement("h2",{className:"ui header"},e.t("insp.board.form.cody_suggest"),he.createElement(Gg.a,null,e.t("insp.board.cody_suggest_sub"))),he.createElement(cE,{board:e.board}))))),he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),he.createElement(Xe.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},he.createElement("div",{className:"ui segments"},he.createElement("div",{className:"ui segment"},he.createElement("h2",{className:"ui header"},e.t("insp.board.form.event_modeling"),he.createElement(Gg.a,null,e.t("insp.board.event_modeling_sub"))),he.createElement(dE,{board:e.board}))))),he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),he.createElement(Xe.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},he.createElement("div",{className:"ui segments"},he.createElement("div",{className:"ui segment"},he.createElement("h2",{className:"ui header"},"Tags",he.createElement(Gg.a,null,e.t("insp.board.tags_sub"))),he.createElement(sE,{board:e.board}))))),!1,he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),he.createElement(Xe.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},e.board&&he.createElement(aE,{boardId:e.board.uid}))),!1,!1))}))),hE="@@InspectioLayout/ToggleSidebarCollapsed",gE="@@InspectioLayout/SetSidebarWidth",bE="@@InspectioLayout/SetRightSidebarWidth",yE="@@InspectioLayout/SetSideBySideWidth",vE="@@InspectionLayout/SetSideBySideCell",EE="@@InspectioLayout/SetCodyConsoleHeight",OE="@@InspectioLayout/ToggleSidebarDivider",xE="@@InspectioLayout/ToggleSidebarEditor",jE=function(e){return Object(at.action)(hE,{collapsed:e})},wE=function(e){return Object(at.action)(gE,{width:e})},kE=function(e){return Object(at.action)(bE,{width:e})},IE=function(e){return Object(at.action)(vE,{cell:e})},SE=function(e,t,n){return Object(at.action)(xE,{editor:e,expanded:t,double:n})},CE=n(1231),_E=n.n(CE),TE=n(1232),AE=function(){function e(){Object(Be.a)(this,e),this.graphRef=void 0,this.selectionListeners=[]}return Object(De.a)(e,[{key:"setGraph",value:function(e){this.graphRef=e,e&&this.selectionListeners.forEach(function(t){return e.onSelectionChanged(t)}),this.selectionListeners=[]}},{key:"createCellId",value:function(){return this.graphRef?this.graphRef.createCellId():Wl()().new()}},{key:"getCurrentScale",value:function(){return this.graphRef?this.graphRef.getCurrentScale():1}},{key:"getCurrentTranslate",value:function(){return this.graphRef?this.graphRef.getCurrentTranslate():{x:0,y:0}}},{key:"onPanning",value:function(e){this.graphRef&&this.graphRef.onPanning(e)}},{key:"offPanning",value:function(e){this.graphRef&&this.graphRef.offPanning(e)}},{key:"translateMousePoint",value:function(e,t){return this.graphRef?this.graphRef.translateMousePoint(e,t):{x:e,y:t}}},{key:"onZoom",value:function(e){this.graphRef&&this.graphRef.onZoom(e)}},{key:"offZoom",value:function(e){this.graphRef&&this.graphRef.offZoom(e)}},{key:"getRoot",value:function(){return this.graphRef?this.graphRef.getRoot():new Ym}},{key:"openLayersDialog",value:function(){this.graphRef&&this.graphRef.openLayersDialog()}},{key:"triggerCody",value:function(){this.graphRef&&this.graphRef.triggerCody()}},{key:"selectNode",value:function(e){return!!this.graphRef&&this.graphRef.selectNode(e)}},{key:"focusNode",value:function(e,t){if(this.graphRef)return this.graphRef.focusNode(e,t)}},{key:"hasUserLevelVisibilityChanges",value:function(){return!!this.graphRef&&this.graphRef.hasUserLevelVisibilityChanges()}},{key:"isVisible",value:function(e){return!!this.graphRef&&this.graphRef.isVisible(e)}},{key:"setUserVisible",value:function(e,t){this.graphRef&&this.graphRef.setUserVisible(e,t)}},{key:"applyVisibilityGlobally",value:function(){this.graphRef&&this.graphRef.applyVisibilityGlobally()}},{key:"isLocked",value:function(e){return!!this.graphRef&&this.graphRef.isLocked(e)}},{key:"setLocked",value:function(e,t){this.graphRef&&this.graphRef.setLocked(e,t)}},{key:"deleteNode",value:function(e){this.graphRef&&this.graphRef.deleteNode(e)}},{key:"addLayer",value:function(e){this.graphRef&&this.graphRef.addLayer(e)}},{key:"deleteLayer",value:function(e){this.graphRef&&this.graphRef.deleteLayer(e)}},{key:"isActiveLayer",value:function(e){return!!this.graphRef&&this.graphRef.isActiveLayer(e)}},{key:"setAsActiveLayer",value:function(e){if(this.graphRef)return this.graphRef.setAsActiveLayer(e)}},{key:"setDefaultLayerAsActive",value:function(){this.graphRef&&this.graphRef.setDefaultLayerAsActive()}},{key:"highlightLayer",value:function(e){this.graphRef&&this.graphRef.highlightLayer(e)}},{key:"addNode",value:function(e){this.graphRef&&this.graphRef.addNode(e)}},{key:"getNode",value:function(e){return this.graphRef?this.graphRef.getNode(e):null}},{key:"addNodeNextToAnother",value:function(e,t,n,r,a){this.graphRef&&this.graphRef.addNodeNextToAnother(e,t,n,r,a)}},{key:"moveNodeNextToAnother",value:function(e,t,n,r,a){this.graphRef&&this.graphRef.moveNodeNextToAnother(e,t,n,r,a)}},{key:"changeNodeName",value:function(e,t){this.graphRef&&this.graphRef.changeNodeName(e,t)}},{key:"changeNodeDescription",value:function(e,t){this.graphRef&&this.graphRef.changeNodeDescription(e,t)}},{key:"changeNodeLabel",value:function(e,t){this.graphRef&&this.graphRef.changeNodeLabel(e,t)}},{key:"changeNodeMetadata",value:function(e,t){this.graphRef&&this.graphRef.changeNodeMetadata(e,t)}},{key:"changeNodeTags",value:function(e,t){this.graphRef&&this.graphRef.changeNodeTags(e,t)}},{key:"resizeNode",value:function(e,t){this.graphRef&&this.graphRef.resizeNode(e,t)}},{key:"moveNode",value:function(e,t){this.graphRef&&this.graphRef.moveNode(e,t)}},{key:"switchParent",value:function(e,t,n,r){this.graphRef&&this.graphRef.switchParent(e,t,n,r)}},{key:"connectNodes",value:function(e,t,n,r,a){this.graphRef&&this.graphRef.connectNodes(e,t,n,r,a)}},{key:"highlightNodes",value:function(e){this.graphRef&&this.graphRef.highlightNodes(e)}},{key:"copySelectionToActiveLayer",value:function(){return!!this.graphRef&&this.graphRef.copySelectionToActiveLayer()}},{key:"changeFeatureStatus",value:function(e,t){this.graphRef&&this.graphRef.changeFeatureStatus(e,t)}},{key:"getFeatureTaskLink",value:function(e){return this.graphRef?this.graphRef.getFeatureTaskLink(e):null}},{key:"setFeatureTaskLink",value:function(e,t){this.graphRef&&this.graphRef.setFeatureTaskLink(e,t)}},{key:"exportXmlSnapshot",value:function(){return this.graphRef?this.graphRef.exportXmlSnapshot():""}},{key:"onSelectionChanged",value:function(e){this.selectionListeners.push(e),this.graphRef&&this.graphRef.onSelectionChanged(e)}},{key:"setCockpitBaseUrl",value:function(e){this.graphRef&&this.graphRef.setCockpitBaseUrl(e)}},{key:"focus",value:function(){this.graphRef&&this.graphRef.focus()}},{key:"clearMoveVideoAvatarToPositionListener",value:function(){this.graphRef&&this.graphRef.clearMoveVideoAvatarToPositionListener()}},{key:"onMoveVideoAvatarToPosition",value:function(e){this.graphRef&&this.graphRef.onMoveVideoAvatarToPosition(e)}},{key:"setVideoAvatarEnabled",value:function(e){this.graphRef&&this.graphRef.setVideoAvatarEnabled(e)}},{key:"trackVideoAvatarPosition",value:function(e,t){this.graphRef&&this.graphRef.trackVideoAvatarPosition(e,t)}},{key:"setCodyDownCb",value:function(e){this.graphRef&&this.graphRef.setCodyDownCb(e)}},{key:"setCodyLeftCb",value:function(e){this.graphRef&&this.graphRef.setCodyLeftCb(e)}},{key:"setCodyRightCb",value:function(e){this.graphRef&&this.graphRef.setCodyRightCb(e)}},{key:"setCodyUpCb",value:function(e){this.graphRef&&this.graphRef.setCodyUpCb(e)}},{key:"openCodyWizard",value:function(e){this.graphRef&&this.graphRef.openCodyWizard(e)}},{key:"mergeIntoSchema",value:function(e,t){this.graphRef&&this.graphRef.mergeIntoSchema(e,t)}},{key:"isEventModelingEnabled",value:function(){return!this.graphRef||this.graphRef.isEventModelingEnabled()}},{key:"makeDraggable",value:function(e,t){if(this.graphRef)return this.graphRef.makeDraggable(e,t)}},{key:"makeActiveGraphElementIfPossible",value:function(e){return this.graphRef?this.graphRef.makeActiveGraphElementIfPossible(e):null}}]),e}();function NE(){return Wv||(Wv=new AE),[Wv,function(e){Wv.setGraph(e)}]}var LE,RE=function(){function e(){Object(Be.a)(this,e),this.mouseSyncRef=void 0,this.cachedUserJoinedListeners=[],this.cachedUserLeftListeners=[],this.cachedBoardTimerStartedListeners=[],this.cachedBoardTimerPausedListeners=[],this.cachedBoardTimerStoppedListeners=[]}return Object(De.a)(e,[{key:"setMouseSync",value:function(e){var t=this;this.mouseSyncRef=e,this.mouseSyncRef&&(this.cachedUserJoinedListeners.forEach(function(e){return t.mouseSyncRef.onUserJoined(e)}),this.cachedUserLeftListeners.forEach(function(e){return t.mouseSyncRef.onUserLeft(e)}),this.cachedBoardTimerStartedListeners.forEach(function(e){return t.mouseSyncRef.onBoardTimerStarted(e)}),this.cachedBoardTimerPausedListeners.forEach(function(e){return t.mouseSyncRef.onBoardTimerPaused(e)}),this.cachedBoardTimerStoppedListeners.forEach(function(e){return t.mouseSyncRef.onBoardTimerStopped(e)})),this.cachedUserJoinedListeners=[],this.cachedUserLeftListeners=[],this.cachedBoardTimerStartedListeners=[],this.cachedBoardTimerPausedListeners=[],this.cachedBoardTimerStoppedListeners=[]}},{key:"emitUserGestureChanged",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.emitUserGestureChanged(e)}},{key:"emitUserIsAutoScrolling",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.emitUserIsAutoScrolling(e)}},{key:"emitUserMouseMove",value:function(e,t){this.mouseSyncRef&&this.mouseSyncRef.emitUserMouseMove(e,t)}},{key:"emitUserMouseScroll",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.emitUserMouseScroll(e)}},{key:"hideObservingFrame",value:function(){this.mouseSyncRef&&this.mouseSyncRef.hideObservingFrame()}},{key:"keepMousePositionsInPlaceOnPanning",value:function(e,t){this.mouseSyncRef&&this.mouseSyncRef.keepMousePositionsInPlaceOnPanning(e,t)}},{key:"observeUser",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.observeUser(e)}},{key:"onUserJoined",value:function(e){this.mouseSyncRef?this.mouseSyncRef.onUserJoined(e):this.cachedUserJoinedListeners.push(e)}},{key:"offUserJoined",value:function(e){this.mouseSyncRef?this.mouseSyncRef.offUserJoined(e):this.cachedUserJoinedListeners=this.cachedUserJoinedListeners.filter(function(t){return t!==e})}},{key:"onUserLeft",value:function(e){this.mouseSyncRef?this.mouseSyncRef.onUserLeft(e):this.cachedUserLeftListeners.push(e)}},{key:"offUserLeft",value:function(e){this.mouseSyncRef?this.mouseSyncRef.offUserLeft(e):this.cachedUserLeftListeners=this.cachedUserLeftListeners.filter(function(t){return t!==e})}},{key:"startSync",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.startSync(e)}},{key:"stopMouseTrackingOfUser",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.stopMouseTrackingOfUser(e)}},{key:"stopObservingUser",value:function(){this.mouseSyncRef&&this.mouseSyncRef.stopObservingUser()}},{key:"stopSync",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.stopSync(e)}},{key:"syncLastKnownAbsolutePointsAfterPanning",value:function(){this.mouseSyncRef&&this.mouseSyncRef.syncLastKnownAbsolutePointsAfterPanning()}},{key:"trackMouseOfRemoteUser",value:function(e,t,n){this.mouseSyncRef&&this.mouseSyncRef.trackMouseOfRemoteUser(e,t,n)}},{key:"startBoardTimer",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.startBoardTimer(e)}},{key:"onBoardTimerPaused",value:function(e){this.mouseSyncRef?this.mouseSyncRef.onBoardTimerPaused(e):this.cachedBoardTimerPausedListeners.push(e)}},{key:"offBoardTimerPaused",value:function(e){this.mouseSyncRef?this.mouseSyncRef.offBoardTimerPaused(e):this.cachedBoardTimerPausedListeners=this.cachedBoardTimerPausedListeners.filter(function(t){return t!==e})}},{key:"onBoardTimerStarted",value:function(e){this.mouseSyncRef?this.mouseSyncRef.onBoardTimerStarted(e):this.cachedBoardTimerStartedListeners.push(e)}},{key:"offBoardTimerStarted",value:function(e){this.mouseSyncRef?this.mouseSyncRef.offBoardTimerStarted(e):this.cachedBoardTimerStartedListeners=this.cachedBoardTimerStartedListeners.filter(function(t){return t!==e})}},{key:"onBoardTimerStopped",value:function(e){this.mouseSyncRef?this.mouseSyncRef.onBoardTimerStopped(e):this.cachedBoardTimerStoppedListeners.push(e)}},{key:"offBoardTimerStopped",value:function(e){this.mouseSyncRef?this.mouseSyncRef.offBoardTimerStopped(e):this.cachedBoardTimerStoppedListeners=this.cachedBoardTimerStoppedListeners.filter(function(t){return t!==e})}},{key:"pauseBoardTimer",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.pauseBoardTimer(e)}},{key:"stopBoardTimer",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.stopBoardTimer(e)}}]),e}();function BE(){return LE||(LE=new RE),[LE,function(e){return LE.setMouseSync(e)}]}var DE,PE,zE=function(){function e(t,n){Object(Be.a)(this,e),this.name=void 0,this.axios=void 0,this.sync=!1,this.name=t,this.axios=n}return Object(De.a)(e,[{key:"sendMessage",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post(t,n,{validateStatus:function(){return!0}});case 2:if(200===(r=e.sent).status){e.next=5;break}return e.abrupt("return",{cody:"Did not receive a valid response from ".concat(this.name,"."),type:XE.Error,details:JSON.stringify(r)});case 5:return e.abrupt("return",r.data);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"fullSync",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.sendMessage(t,n));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncNodes",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put(t,n);case 2:if(200===(r=e.sent).status){e.next=5;break}return e.abrupt("return",{cody:"Did not receive a valid response from ".concat(this.name,"."),type:XE.Error,details:JSON.stringify(r)});case 5:return e.abrupt("return",r.data);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncDeletedNodes",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post(t,n);case 2:if(200===(r=e.sent).status){e.next=5;break}return e.abrupt("return",{cody:"Did not receive a valid response from ".concat(this.name,"."),type:XE.Error,details:JSON.stringify(r)});case 5:return e.abrupt("return",r.data);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"enableSync",value:function(){this.sync=!0}},{key:"isSyncEnabled",value:function(){return this.sync}}]),e}();!function(e){e.Sync="Sync",e.SyncDeleted="SyncDeleted"}(DE||(DE={})),function(e){e.IioSaidHello="IioSaidHello",e.UserReplied="UserReplied",e.ElementEdited="ElementEdited",e.ConfirmTest="ConfirmTest"}(PE||(PE={}));var ME,UE,FE,GE="No connection to Cody. Try to connect with him first!",qE=function(e,t){var n,r,a,o,i="string"===typeof e.cody?[e.cody]:e.cody,s="string"===typeof e.details?[e.details]:e.details;switch(e.type?e.type:XE.Info){case XE.Info:var c;if(1===i.length&&(i[0]="%c"+i[0],i.push("color: #32c0e7;font-weight: bold")),(n=console).info.apply(n,["%c\ud83d\udc35 ["+t+"]: "+i[0],"color: #414141"].concat(Object(eo.a)(i.slice(1)))),e.details)(c=console).log.apply(c,["%c\ud83d\udc35 ["+t+"]: "+s[0],"color: #414141"].concat(Object(eo.a)(s.slice(1))));break;case XE.Error:var d;if(1===i.length&&(i[0]="%c"+i[0],i.push("color: color: #f31c30;font-weight: bold")),(r=console).error.apply(r,["%c\ud83d\udc35 ["+t+"]: "+i[0],"color: #414141"].concat(Object(eo.a)(i.slice(1)))),e.details)(d=console).error.apply(d,["%c\ud83d\udc35 ["+t+"]: "+s[0],"color: #414141"].concat(Object(eo.a)(s.slice(1))));break;case XE.Warning:case XE.Question:var u;if(1===i.length&&(i[0]="%c"+i[0],i.push("font-weight: bold")),(a=console).warn.apply(a,["%c\ud83d\udc35 ["+t+"]: "+i[0],"color: #414141"].concat(Object(eo.a)(i.slice(1)))),e.details)(u=console).warn.apply(u,["%c\ud83d\udc35 ["+t+"]: "+s[0],"color: #414141"].concat(Object(eo.a)(s.slice(1))));break;case XE.SyncRequired:console.warn("%c\ud83d\udc35 ["+t+"]: I need to sync all board content. Lean back for a moment. I'll tell you when I'm done.");break;default:var l;if((o=console).log.apply(o,["%c\ud83d\udc35 ["+t+"]: "+i[0],"color: #414141"].concat(Object(eo.a)(i.slice(1)))),e.details)(l=console).log.apply(l,["%c\ud83d\udc35 ["+t+"]: "+s[0],"color: #414141"].concat(Object(eo.a)(s.slice(1))))}},VE=function(e){console.error(e)},WE=function(e){console.warn(e)},HE=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.forEach(function(t){if(n.find(function(e){return e.getId()===t.getId()})){var o=r.find(function(e){return e.getId()===t.getId()});o?(r.splice(r.indexOf(o),1),r.push(t)):r.push(t)}++a<5&&e(t.getTargets(),n,r,a)})},$E=qE,JE=VE,QE=WE,YE=[],KE=function e(t,n,r,a,o,i){if(0===a.length)return QE("Selection is empty. Nothing to do for Cody!"),!1;if("undefined"===typeof o&&ME)return ZE.codyServers?ZE.codyServers.forEach(function(e){$E({cody:"Wait, wait, wait! I'm still working on last session.",details:["You can stop me by pressing %cESC","background-color: rgba(251, 159, 75, 0.2)"],type:XE.Warning},e.name)}):$E({cody:"Wait, wait, wait! I'm still working on last session.",details:["You can stop me by pressing %cESC","background-color: rgba(251, 159, 75, 0.2)"],type:XE.Warning},"Cody"),!1;if(ZE.codyServers){if("undefined"===typeof o)ME={nodes:a,currentNodeIndex:0,boardId:t,boardName:n,userId:r,currentServerIndex:0,syncPerformed:!1},a=function(e){var t=[],n=e.filter(function(t){if(0===t.getSources().count())return!0;var n=!0;return t.getSources().forEach(function(t){e.find(function(e){return e.getId()===t.getId()})&&(n=!1)}),n});return t.push.apply(t,Object(eo.a)(n)),n.forEach(function(n){HE(n.getTargets(),e,t)}),t}(a),e(t,n,r,a,0);else{"undefined"===typeof i&&(i=0);var s=ZE.codyServers[i],c={boardId:t,boardName:n,userId:r};s.sendMessage(PE.ElementEdited,{node:Vm(a[o],!0),context:c}).then(function(c){$E(c,s.name),c.type!==XE.Question&&c.type!==XE.StopSession&&c.type!==XE.SyncRequired&&c.type!==XE.Error&&(++i<ZE.codyServers.length?(ME.currentServerIndex=i,e(t,n,r,a,o,i)):(o+=1,ME.currentNodeIndex=o,ME.currentServerIndex=0,o<a.length&&e(t,n,r,a,o,0))),c.type===XE.SyncRequired&&UE&&UE(),(c.type===XE.StopSession||c.type===XE.Error||o===a.length&&i===ZE.codyServers.length&&c.type!==XE.Question)&&(ME=void 0)},function(e){"string"!==typeof e&&(e="function"===typeof e.toString?e.toString():"Unknown Error"),JE(e)})}return!0}return JE(GE),!1},ZE={syncRequired:function(){return!!ZE.codyServers&&ZE.codyServers.filter(function(e){return e.isSyncEnabled()}).length>0},isConnected:function(e){return!!ZE.codyServers&&ZE.codyServers.filter(function(t){return!e||t.name===e}).length>0},connect:{Cody:function(e,t,n,r){r||(r="Cody"),ZE.codyServers||(ZE.codyServers=[]);var a=ZE.codyServers.filter(function(e){return e.name!==r}),o="play"===e?new Wc("Cody Play","https://play.prooph-board.com",n):new zE(r,ke.a.create({baseURL:e+"/messages/"}));return a.push(o),ZE.codyServers=a,o.sendMessage(PE.IioSaidHello,{user:t}).then(function(e){$E(e,o.name),e.type===XE.SyncRequired&&UE&&(FE=a.indexOf(o),UE())},function(e){return $E({cody:"Failed to reach out to server",details:[e],type:XE.Error},o.name)}),!0}},disconnect:function(e){if(ZE.codyServers){if(e)return ZE.codyServers=ZE.codyServers.filter(function(t){return t.name!==e}),void $E({cody:"Bye Bye",type:XE.Warning},e);ZE.codyServers=void 0,ME=void 0,$E=qE,JE=VE,QE=WE}},reply:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){if(ME&&ZE.codyServers&&ZE.codyServers[ME.currentServerIndex]){var t=ZE.codyServers[ME.currentServerIndex];return t.sendMessage(PE.UserReplied,{reply:e}).then(function(e){if($E(e,t.name),e.type!==XE.Question&&e.type!==XE.StopSession&&e.type!==XE.Error&&ME){var n=ME.nodes,r=ME.currentNodeIndex,a=ME.currentServerIndex+1;a<ZE.codyServers.length?(ME.currentServerIndex=a,KE(ME.boardId,ME.boardName,ME.userId,n,r,a)):(r+=1,ME.currentNodeIndex=r,ME.currentServerIndex=0,r<n.length?KE(ME.boardId,ME.boardName,ME.userId,n,r,0):ME.currentServerIndex=a)}(e.type===XE.StopSession||e.type===XE.Error||ME&&(ME.currentNodeIndex===ME.nodes.length||0===ME.nodes.length)&&ME.currentServerIndex===ZE.codyServers.length)&&(ME=void 0)},function(e){"string"!==typeof e&&(e="function"===typeof e.toString?e.toString():"Unknown Error"),JE(e)}),!0}JE(GE)}),talk:{to:{Cody:function(){if(ZE.codyServers){var e=ZE.codyServers[ZE.codyServers.length-1];return ME={nodes:[],currentNodeIndex:0,boardId:"",boardName:"",userId:"",currentServerIndex:ZE.codyServers.length-1,syncPerformed:!1},e.sendMessage(PE.ConfirmTest,{}).then(function(t){$E(t,e.name)},function(e){"string"!==typeof e&&(e="function"===typeof e.toString?e.toString():"Unknown Error"),JE(e)}),!0}JE(GE)}}},trigger:{Cody:KE},runCommand:function(e,t,n,r,a,o){if(!ZE.codyServers)return!1;var i=ZE.codyServers.filter(function(e){return!o||e.name===o}),s={boardId:e,boardName:t,userId:n};return i.forEach(function(e){return e.sendMessage(r,{payload:a,context:s}).then(function(t){$E(t,e.name)})}),!0},onSyncRequired:function(e){UE=e},syncNodes:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r,a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!ZE.codyServers||!ME&&"undefined"===typeof FE){e.next=10;break}if(r=ME?ZE.codyServers[ME.currentServerIndex]:ZE.codyServers[FE],!ME||!ME.syncPerformed){e.next=5;break}return $E({cody:"Something went wrong. I already synced the entire board, but need to sync again.",details:"Looks like an endless loop. The developer who created the hooks gave me wrong instructions. Please contact them!",type:XE.Error},r.name),e.abrupt("return",!1);case 5:return e.next=7,r.fullSync(DE.Sync,{boardId:t,nodes:n.map(function(e){return Vm(e,!0)})});case 7:(a=e.sent).type!==XE.Empty&&$E(a,r.name),r.enableSync();case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),syncChangedNodes:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r,a,o,i,s,c;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!ZE.codyServers){e.next=29;break}r=!0,a=!1,o=void 0,e.prev=4,i=xe.a.mark(function e(){var r,a,o,i,s,d,u,l,m;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=c.value).isSyncEnabled()){e.next=3;break}return e.abrupt("return","continue");case 3:a=function(){var e=Object(je.a)(xe.a.mark(function e(n){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.syncNodes(DE.Sync,{boardId:t,nodes:n.map(function(e){return Vm(e,!0)})});case 2:(a=e.sent).type!==XE.Empty&&$E(a,r.name);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),o=[],i=!0,s=!1,d=void 0,e.prev=8,u=n[Symbol.iterator]();case 10:if(i=(l=u.next()).done){e.next=20;break}if(m=l.value,o.push(m),!(o.length>=10)){e.next=17;break}return e.next=16,a(o);case 16:o=[];case 17:i=!0,e.next=10;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(8),s=!0,d=e.t0;case 26:e.prev=26,e.prev=27,i||null==u.return||u.return();case 29:if(e.prev=29,!s){e.next=32;break}throw d;case 32:return e.finish(29);case 33:return e.finish(26);case 34:if(!(o.length>0)){e.next=37;break}return e.next=37,a(o);case 37:case"end":return e.stop()}},e,this,[[8,22,26,34],[27,,29,33]])}),s=ZE.codyServers[Symbol.iterator]();case 7:if(r=(c=s.next()).done){e.next=15;break}return e.delegateYield(i(),"t0",9);case 9:if("continue"!==e.t0){e.next=12;break}return e.abrupt("continue",12);case 12:r=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(4),a=!0,o=e.t1;case 21:e.prev=21,e.prev=22,r||null==s.return||s.return();case 24:if(e.prev=24,!a){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",!0);case 30:case"end":return e.stop()}},e,this,[[4,17,21,29],[22,,24,28]])}));return function(t,n){return e.apply(this,arguments)}}(),syncDeletedNodes:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r,a,o,i,s,c;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!ZE.codyServers){e.next=29;break}r=!0,a=!1,o=void 0,e.prev=4,i=xe.a.mark(function e(){var r,a,o,i,s,d,u,l,m;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=c.value).isSyncEnabled()){e.next=3;break}return e.abrupt("return","continue");case 3:a=function(){var e=Object(je.a)(xe.a.mark(function e(n){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.syncDeletedNodes(DE.SyncDeleted,{boardId:t,nodes:n.map(function(e){return Vm(e,!0)})});case 2:(a=e.sent).type!==XE.Empty&&$E(a,r.name);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),o=[],i=!0,s=!1,d=void 0,e.prev=8,u=n[Symbol.iterator]();case 10:if(i=(l=u.next()).done){e.next=20;break}if(m=l.value,o.push(m),!(o.length>=10)){e.next=17;break}return e.next=16,a(o);case 16:o=[];case 17:i=!0,e.next=10;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(8),s=!0,d=e.t0;case 26:e.prev=26,e.prev=27,i||null==u.return||u.return();case 29:if(e.prev=29,!s){e.next=32;break}throw d;case 32:return e.finish(29);case 33:return e.finish(26);case 34:if(!(o.length>0)){e.next=37;break}return e.next=37,a(o);case 37:case"end":return e.stop()}},e,this,[[8,22,26,34],[27,,29,33]])}),s=ZE.codyServers[Symbol.iterator]();case 7:if(r=(c=s.next()).done){e.next=15;break}return e.delegateYield(i(),"t0",9);case 9:if("continue"!==e.t0){e.next=12;break}return e.abrupt("continue",12);case 12:r=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(4),a=!0,o=e.t1;case 21:e.prev=21,e.prev=22,r||null==s.return||s.return();case 24:if(e.prev=24,!a){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",!0);case 30:case"end":return e.stop()}},e,this,[[4,17,21,29],[22,,24,28]])}));return function(t,n){return e.apply(this,arguments)}}(),syncFinished:function(){if("undefined"!==typeof FE&&ZE.codyServers){var e=ZE.codyServers[FE];return $E({cody:"Sync finished. We can continue!",type:XE.Info},e.name),void(FE=void 0)}if(ME&&ZE.codyServers){var t=ZE.codyServers[ME.currentServerIndex];$E({cody:"Sync finished. We can continue!",type:XE.Info},t.name),ME.syncPerformed=!0,KE(ME.boardId,ME.boardName,ME.userId,ME.nodes,ME.currentNodeIndex,ME.currentServerIndex)}},abortSession:function(){return ME=void 0,ZE.codyServers?ZE.codyServers.forEach(function(e){$E({cody:"Yeah, no problem. I stopped my work."},e.name)}):$E({cody:"Yeah, no problem. I stopped my work."},"Cody"),!0},ask:{Cody:{forHelp:function(){$E({cody:"It's easy. You design the solution and I'll code it for you!",details:["%cJust select one or more elements on the board and press %cCtrl+G (Cmd+G on Mac)%c or choose %cTrigger Cody%c from context menu of an element.\n\nPressing %cCtrl+Q (Cmd+Q on Mac)%c closes the console.\n\nTo enable Cockpit integration use %c/cockpit https://localhost:<cockpit_port>","color: #414141","background-color: rgba(251, 159, 75, 0.2)","color: #414141","background-color: rgba(251, 159, 75, 0.2)","color: #414141","background-color: rgba(251, 159, 75, 0.2)","color: #414141","background-color: rgba(251, 159, 75, 0.2)"]},"Cody")}}},ping:{Cody:function(){$E({cody:"I'm ready. Let's develop some awesome software together!",type:XE.Info},"Cody")}},codyServers:void 0,print:function(e,t){$E(e,t)},setCodyResponsePrinter:function(e){$E=function(t,n){e(t,n),YE.forEach(function(e){return e(t)})}},setErrorPrinter:function(e){JE=e},setWarningPrinter:function(e){QE=e},attachCodyResponseListener:function(e){return YE.push(e),function(){YE=YE.filter(function(t){return t!==e})}}};window.IIO=ZE;var XE,eO=function(){return ZE};!function(e){e.Info="Info",e.Error="Error",e.Warning="Warning",e.Empty="Empty",e.Question="Question",e.StopSession="StopSession",e.SyncRequired="SyncRequired"}(XE||(XE={}));var tO=xe.a.mark(rO),nO=xe.a.mark(aO);function rO(e){var t,n,r,a,o,i,s,c,d,u,l=arguments;return xe.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:t=l.length>1&&void 0!==l[1]&&l[1],n=Object(fe.List)(),a=!0,o=!1,i=void 0,m.prev=5,s=xe.a.mark(function e(){var a,o,i,s,c,u;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.value,e.next=3,Object(gn.i)(C.getIioUserInfoById,a.userId);case 3:if(o=e.sent,r=a.board,o){e.next=20;break}return e.next=8,Object(gn.g)(f.Query.loadUsersInfo([a.userId]));case 8:i=!0;case 9:if(!i){e.next=20;break}return e.next=12,Object(gn.h)({infoLoaded:Object(gn.k)([f.Type.IIO_USERS_INFO_LOADED]),timeout:Object(gn.e)(5e3)});case 12:if(s=e.sent,c=s.infoLoaded,!s.timeout){e.next=17;break}return e.abrupt("return",{v:void 0});case 17:c.payload.usersInfo.forEach(function(e){e.userId===a.userId&&(o=e,i=!1)}),e.next=9;break;case 20:u=sp(a,o),n=t?n.unshift(u):n.push(u);case 22:case"end":return e.stop()}},e,this)}),c=e[Symbol.iterator]();case 8:if(a=(d=c.next()).done){m.next=16;break}return m.delegateYield(s(),"t0",10);case 10:if("object"!==typeof(u=m.t0)){m.next=13;break}return m.abrupt("return",u.v);case 13:a=!0,m.next=8;break;case 16:m.next=22;break;case 18:m.prev=18,m.t1=m.catch(5),o=!0,i=m.t1;case 22:m.prev=22,m.prev=23,a||null==c.return||c.return();case 25:if(m.prev=25,!o){m.next=28;break}throw i;case 28:return m.finish(25);case 29:return m.finish(22);case 30:if(!r){m.next=38;break}if(!t){m.next=36;break}return m.next=34,Object(gn.g)(Zd(r,n));case 34:m.next=38;break;case 36:return m.next=38,Object(gn.g)(Kd(r,n));case 38:case"end":return m.stop()}},tO,this,[[5,18,22,30],[23,,25,29]])}function aO(){var e,t;return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e="";case 1:return n.next=4,Object(gn.k)([A.REMOTE_BOARD_CHANGED,A.LOCAL_BOARD_CHANGED,A.BOARD_INITIALIZED]);case 4:t=n.sent,n.t0=t.type,n.next=n.t0===A.BOARD_INITIALIZED?8:n.t0===Gs?10:n.t0===qs?10:14;break;case 8:return e=t.payload.board.uid,n.abrupt("break",14);case 10:if(e!==t.payload.boardChanged.board){n.next=13;break}return n.next=13,Object(gn.f)(rO,[t.payload.boardChanged],!0);case 13:return n.abrupt("break",14);case 14:n.next=1;break;case 16:case"end":return n.stop()}},nO,this)}var oO=xe.a.mark(dO),iO=xe.a.mark(uO),sO=xe.a.mark(lO),cO=function(e){return new mp({board:e.boardId,cellId:e.cellId||void 0,cellLabel:e.cellLabel,cellType:e.cellType,action:e.action,recordedAt:e.recordedAt,userId:e.boardVersion.userId,version:e.boardVersion.version,changeSet:Object(fe.List)(e.patch),name:"BoardChanged",uid:e.patchId})};function dO(e){var t,n,r,a,o,i,s;return xe.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=Ay(e.payload.boardId),n=mE(e.payload.boardId),c.next=4,Object(gn.i)(t);case 4:return r=c.sent,c.next=7,Object(gn.i)(n);case 7:if(a=c.sent,!r||a.loading){c.next=31;break}return c.next=11,Object(gn.g)(ru(e.payload.boardId,!0));case 11:return c.next=13,Object(gn.c)(N.fetchOlderPatches,e.payload.boardId,r.version);case 13:if(o=c.sent,i=o.response,!o.error){c.next=22;break}return c.next=19,Object(gn.g)(nu(e.payload.boardId));case 19:return c.next=21,Object(gn.g)(ru(e.payload.boardId,!1));case 21:return c.abrupt("return");case 22:if(!i){c.next=29;break}if(!((s=Object(zn.map)(i.data,function(e){return cO(e)})).length<=1)){c.next=27;break}return c.next=27,Object(gn.g)(nu(e.payload.boardId));case 27:return c.next=29,Object(gn.c)(rO,s);case 29:return c.next=31,Object(gn.g)(ru(e.payload.boardId,!1));case 31:case"end":return c.stop()}},oO,this)}function uO(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.g)(ru(e.payload.boardId,!0));case 2:return a.next=4,Object(gn.c)(N.fetchOlderPatches,e.payload.boardId,e.payload.boardVersion);case 4:if(t=a.sent,n=t.response,!t.error){a.next=13;break}return a.next=10,Object(gn.g)(nu(e.payload.boardId));case 10:return a.next=12,Object(gn.g)(ru(e.payload.boardId,!1));case 12:return a.abrupt("return");case 13:if(!n){a.next=20;break}if(!((r=Object(zn.map)(n.data,function(e){return cO(e)})).length<=1)){a.next=18;break}return a.next=18,Object(gn.g)(nu(e.payload.boardId));case 18:return a.next=20,Object(gn.c)(rO,r);case 20:return a.next=22,Object(gn.g)(ru(e.payload.boardId,!1));case 22:case"end":return a.stop()}},iO,this)}function lO(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([Es,Os]);case 3:e=t.sent,t.t0=e.type,t.next=t.t0===Os?7:t.t0===Es?10:12;break;case 7:return t.next=9,Object(gn.f)(uO,e);case 9:return t.abrupt("break",12);case 10:return t.next=12,Object(gn.f)(dO,e);case 12:t.next=0;break;case 14:case"end":return t.stop()}},sO,this)}var mO,pO=function(){function e(t,n,r,a,o,i){var s=this;Object(Be.a)(this,e),this.socket=void 0,this.board=void 0,this.userId=void 0,this.username=void 0,this.localQueue=[],this.incomingQueue=[],this.lastProcessedVersion=void 0,this.lastRemoteVersion=void 0,this.reconnectListener=void 0,this.isFetchingLatestPatches=!1,this.onHandledRemoteEvent=void 0,this.onPublished=void 0,this.locked=!1,this.initialized=!1,this.socket=t,this.board=n,this.userId=r,this.username=a,this.lastProcessedVersion=n.version.version,this.lastRemoteVersion=n.version.version,this.onHandledRemoteEvent=o,this.onPublished=i,this.reconnectListener=function(e){console.log("[BoardSync] Socket reconnected"),s.socket.connected?s.restartSync():!e||e<10?(console.log("[BoardSync] Socket not fully reconnected yet. Waiting another 100ms"),window.setTimeout(function(){e||(e=1),s.reconnectListener(e+1)},100)):(console.log("[BoardSync] Socket is not coming back. Trying to force a reconnect"),s.socket.disconnect(),s.socket.connect(),window.setTimeout(function(){s.reconnectListener()},1e3))}}return Object(De.a)(e,[{key:"isInitialized",value:function(){return this.initialized}},{key:"restartSync",value:function(){var e=Te();this.socket.emit("BoardOpened",{boardId:this.board.uid,userId:this.userId,username:this.username,token:e}),this.loadAndProcessLatestPatchesFromServer(),this.localQueue.length>=2&&alert("Backend service is available again. Your changes will be saved now! Sorry for any inconvenient caused."),this.processLocalQueue()}},{key:"startSync",value:function(){var e=this,t=function(){var t=Te();console.log("[BoardSync] Socket connected"),e.socket.emit("BoardOpened",{boardId:e.board.uid,userId:e.userId,username:e.username,token:t})};this.socket.on("BoardChanged",function(t){e.handleBoardChanged(M.remoteBoardChanged(t))}),this.socket.io.on("reconnect",this.reconnectListener),this.socket.on("error",function(){return console.error("[BoardSync] Socket error occurred")}),this.socket.connected?t():(console.log("[BoardSync] Awaiting socket connect"),this.socket.once("connect",t)),this.loadAndProcessLatestPatchesFromServer()}},{key:"stopSync",value:function(){console.log("[BoardSync] Stopping sync"),this.socket.off("BoardChanged"),this.socket.io.off("reconnect",this.reconnectListener)}},{key:"currentVersion",value:function(){return this.lastProcessedVersion}},{key:"publishChanges",value:function(e,t){var n=this;if(this.locked&&!t)return console.log("[BoardSync] Sync is locked. Pushing event to local queue for later processing",e.toBoardVersion().version),void this.localQueue.push(e);if(this.socket.connected){if(this.localQueue.length&&!t)return console.log("[BoardSync] Processing local queue before publishing new change"),void this.processLocalQueue();t||(this.locked=!0,window.setTimeout(function(){n.locked=!1,n.processLocalQueue()},500));var r=e.toJS();console.log("[BoardSync] Emitting new local changes",r);var a=Te();this.socket.emit("BoardChanged",Object(Ye.a)({},r,{token:a}),function(a){a.success?(a.boardVersion&&a.boardVersion===n.lastProcessedVersion+1||a.boardVersion===n.lastRemoteVersion+1?(n.lastProcessedVersion=a.boardVersion,a.boardVersion===n.lastRemoteVersion+1&&(n.lastRemoteVersion=a.boardVersion,console.log("[BoardSync] Remote version is up to date with processed version.")),console.log("[BoardSync] Patch saved successfully. Last processed version set to: ",n.lastProcessedVersion)):a.boardVersion&&a.boardVersion>n.lastProcessedVersion&&(n.lastProcessedVersion=a.boardVersion,console.log("[BoardSync] Patch saved successfully, but remote version is behind: ",n.lastProcessedVersion,n.lastRemoteVersion),console.log("[BoardSync] Only setting last processed version to keep gap detection active")),n.onPublished()):(console.error("[BoardSync] Local change was not saved by socket server. BE returned error: ",a.error),3!==t&&(t||(t=0),t++,console.log("[BoardSync] Retrying event: ",r," retry count: ",t),n.publishChanges(e,t)))})}else console.log("[BoardSync] Socket not connected. Pushing change to local queue"),this.localQueue.push(e),2===this.localQueue.length&&alert("Connection to server lost. A reload might fix the problem. Otherwise, you can work offline and backup your work at the end by making an export (see top menu). We try to reconnect you as soon as possible!")}},{key:"loadAndProcessLatestPatchesFromServer",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r,a,o,i,s=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isFetchingLatestPatches=!0,console.log("[BoardSync] Going to fetch latest patches from server. Last remote version is: ",this.lastRemoteVersion),e.next=4,N.fetchNewerPatches(this.board.uid,new zl({userId:this.userId,version:this.lastRemoteVersion}));case 4:r=e.sent,a=r.response,o=r.error,this.isFetchingLatestPatches=!1,a&&(console.log("[BoardSync] Successfully loaded latest patches"),Object(zn.map)(a.data,function(e){return cO(e)}).filter(function(e){return!s.initialized||e.userId!==s.userId}).forEach(function(e){return s.handleBoardChanged(e,!0)}),this.initialized=!0,console.log("[BoardSync] Processing incomingQueue now"),i=Object(eo.a)(this.incomingQueue),this.incomingQueue=[],i.forEach(function(e){return s.handleBoardChanged(e,!0)}),t&&t()),o&&(console.error("[BoardSync] Failed to load latest patches: ",o),n&&n(),this.initialized=!0);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleBoardChanged",value:function(e,t){if(this.isFetchingLatestPatches)return console.log("[BoardSync] Fetching latest patches ATM. BoardChanged event is pushed to incomingQueue: ",e.toBoardVersion().version),void this.incomingQueue.push(e);if(this.lastRemoteVersion+1===e.toBoardVersion().version||t&&e.toBoardVersion().version>this.lastRemoteVersion)this.lastRemoteVersion=e.toBoardVersion().version,console.log("[BoardSync] Increased last remote version to: ",this.lastRemoteVersion),this.lastRemoteVersion>this.lastProcessedVersion&&(console.log("[BoardSync] Last remote version is greater than last processed version. Setting remote version as processed version. ",this.lastRemoteVersion,this.lastProcessedVersion),this.lastProcessedVersion=this.lastRemoteVersion);else{if(!(this.lastRemoteVersion+1<e.toBoardVersion().version))return void console.warn("[BoardSync] Skipped outdated event. Last remote version is: ",this.lastRemoteVersion," but event has version: ",e.toBoardVersion().version);console.log("[BoardSync] Gap detected. Last remote version is: ",this.lastRemoteVersion," but received event with version: ",e.toBoardVersion().version),console.log("[BoardSync] Fetching latest patches from server first. Event is pushed to incoming queue"),this.incomingQueue.push(e),this.loadAndProcessLatestPatchesFromServer()}this.onHandledRemoteEvent(e,this.initialized)}},{key:"processLocalQueue",value:function(e){var t=this;console.log("[BoardSync] Processing local queue: ",this.localQueue.length);var n=Object(eo.a)(this.localQueue);this.localQueue=[],n.forEach(function(e){console.log("[BoardSync] Publishing event from local queue.",e.toBoardVersion().version),t.publishChanges(e)}),e&&e()}}]),e}(),fO={uid:"",board:"",aggregateType:"BoardTimer",deadline:0,duration:0,moderator:"",pausedTime:void 0},hO=function(e,t,n,r,a){return new gO({uid:"",aggregateType:"BoardTimer",board:e,deadline:t,duration:n,moderator:r,pausedTime:a})},gO=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=ot.v4()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),t}(Object(fe.Record)(fO));!function(e){e.Default="Default",e.Moving="Moving",e.Typing="Typing"}(mO||(mO={}));var bO=["#15A2B0","#715671","#CF3241","#ED6842","#EECA51","#1F8A6D","#dd3cd3","#1114dd","#7add3a","#dd8794","#b16fdd","#9fa0bb","#bad63c","#7886dd","#8510dd","#dd796d"],yO=0,vO=function(e){switch(e){case mO.Moving:return"hand rock";case mO.Typing:return"keyboard";default:return"user"}},EO=function(){function e(t,n,r,a){Object(Be.a)(this,e),this.socket=void 0,this.container=void 0,this.registry={},this.translateGraphPoint=void 0,this.graph=void 0,this.userJoinedListeners=void 0,this.userLeftListeners=void 0,this.observedUser=void 0,this.observingFrame=void 0,this.lastMoveWasPanning=void 0,this.boardTimerStartedListeners=void 0,this.boardTimerPausedListeners=void 0,this.boardTimerStoppedListeners=void 0,this.activeBoardTimer=void 0,this.isBoardTimerPaused=!1,this.disconnectListener=null,this.reconnectListener=null,this.syncIntervalListener=null,this.socket=t,this.container=n,this.translateGraphPoint=a,this.graph=r,this.userJoinedListeners=[],this.userLeftListeners=[],this.boardTimerStartedListeners=[],this.boardTimerPausedListeners=[],this.boardTimerStoppedListeners=[],this.observedUser=null,this.observingFrame=null,this.lastMoveWasPanning=!1}return Object(De.a)(e,[{key:"startSync",value:function(e){var t=this;this.socket.on("MouseJoined",function(e){console.log("[mousesync]: Start tracking of remote user: ",e.userId),t.trackMouseOfRemoteUser(e.userId,e.name,e.avatar)}),this.socket.on("MouseLeft",function(n){console.log("[mousesync]: Stop tracking of remote user: ",n.userId),t.stopMouseTrackingOfUser(n.userId),t.socket.emit("GetCurrentMouses",e,function(e){return e.forEach(function(e){t.registry.hasOwnProperty(e.userId)||t.trackMouseOfRemoteUser(e.userId,e.name,e.avatar)})})}),this.socket.on("MouseMove",function(e){var n=e.userId,r=e.point,a=e.vT,o=e.scale;if(t.registry.hasOwnProperty(n)){var i=t.registry[n].pointerEl;if(i.style.display="block",t.observedUser===n&&(t.graph.view.setScale(o),t.graph.panGraph(e.vT.x,e.vT.y),t.graph.panningListeners.forEach(function(t){return t(e.vT)})),e.isPanning&&t.observedUser===n){var s=t.translateGraphPoint(r);i.style.left=s.x+"px",i.style.top=s.y+"px",t.registry[n].lastKnownAbsolutePoint=s}if(!e.isPanning){var c=t.translateGraphPoint(r);i.style.left=c.x+"px",i.style.top=c.y+"px",t.registry[n].lastKnownAbsolutePoint=c}t.registry[n].translate=a,t.registry[n].scale=o}}),this.socket.on("MouseScroll",function(e){var n=e.userId,r=e.scale,a=e.vT;t.registry.hasOwnProperty(n)&&(t.observedUser===n&&(t.graph.view.setScale(r),t.graph.panGraph(a.x,a.y),t.graph.triggerZoomListeners()),t.registry[n].translate=a,t.registry[n].scale=r)}),this.socket.on("GestureChanged",function(e){var n=e.userId;e.gesture;t.registry.hasOwnProperty(n)&&(t.registry[n].pointerIcon.className=vO(e.gesture)+" icon")}),this.socket.on("AutoScrolling",function(e){var n=e.userId,r=e.translate,a=e.scale;e.isPanning;t.registry.hasOwnProperty(n)&&(t.observedUser===n&&(t.graph.view.setScale(a),t.graph.panGraph(r.x,r.y)),t.registry[n].translate=r,t.registry[n].scale=a)}),this.socket.on("BoardTimerStarted",function(e){var n=new gO(e);console.log("[mousesync] Received board timer started: ",e),t.boardTimerStartedListeners.forEach(function(e){return e(n)}),t.activeBoardTimer=n,t.isBoardTimerPaused=!1}),this.socket.on("BoardTimerPaused",function(e){var n=new gO(e);console.log("[mousesync] Received board timer paused: ",e),t.boardTimerPausedListeners.forEach(function(e){return e(n)}),t.activeBoardTimer=n,t.isBoardTimerPaused=!0}),this.socket.on("BoardTimerStopped",function(e){var n=new gO(e);console.log("[mousesync] Received board timer stopped: ",e),t.activeBoardTimer=void 0,t.isBoardTimerPaused=!1,t.boardTimerStoppedListeners.forEach(function(e){return e(n)})}),this.disconnectListener=function(){for(var e in console.log("[mousesync] MouseSync socket disconnected"),t.registry)t.registry.hasOwnProperty(e)&&t.stopMouseTrackingOfUser(e)},this.socket.on("disconnect",this.disconnectListener);var n=function(n){t.socket.emit("GetCurrentMouses",e,function(e){return e.forEach(function(e){return t.trackMouseOfRemoteUser(e.userId,e.name,e.avatar)})}),t.socket.emit("GetActiveBoardTimer",{board:e.boardId},function(e){t.activeBoardTimer=e.timer?new gO(e.timer):void 0,t.isBoardTimerPaused=e.isPaused,n&&t.boardTimerStartedListeners.length&&t.activeBoardTimer&&(console.log("[mousesync] Calling board timer started listeners with: ",e),t.boardTimerStartedListeners.forEach(function(e){return e(t.activeBoardTimer)})),t.isBoardTimerPaused&&n&&t.boardTimerPausedListeners.length&&t.activeBoardTimer&&t.boardTimerPausedListeners.forEach(function(e){return e(t.activeBoardTimer)})})},r=function(r){r&&t.userJoinedListeners.forEach(function(t){return t(e.userId,e.name,e.avatar,"#423fbc")}),console.log("[mousesync]: Sending mouse joined event: ",e),t.socket.emit("MouseJoined",e),n(r)};this.reconnectListener=function(){console.log("[mousesync] MouseSync socket reconnected"),t.activeBoardTimer&&t.activeBoardTimer.moderator===e.userId&&(t.startBoardTimer(t.activeBoardTimer),t.isBoardTimerPaused&&t.pauseBoardTimer(t.activeBoardTimer)),r(!1)},this.socket.io.on("reconnect",this.reconnectListener),this.socket.connected?r(!0):this.socket.once("connect",function(){r(!0)}),this.syncIntervalListener=setInterval(function(){t.socket.connected&&n(!1)},3e4)}},{key:"stopSync",value:function(e){console.log("[mousesync] stop sync"),this.socket.emit("MouseLeft",e),this.socket.off("MouseJoined"),this.socket.off("MouseMove"),this.socket.off("MouseScroll"),this.socket.off("MouseLeft"),this.socket.off("GestureChanged"),this.socket.off("AutoScrolling"),this.socket.off("BoardTimerStarted"),this.socket.off("BoardTimerPaused"),this.socket.off("BoardTimerStopped"),this.reconnectListener&&this.socket.off("reconnect",this.reconnectListener),this.disconnectListener&&this.socket.off("disconnect",this.disconnectListener),this.syncIntervalListener&&(clearInterval(this.syncIntervalListener),this.syncIntervalListener=null),this.registry={},this.observedUser=null,this.lastMoveWasPanning=!1,this.activeBoardTimer=void 0,this.isBoardTimerPaused=!1,this.userJoinedListeners=[],this.userLeftListeners=[],this.boardTimerStartedListeners=[],this.boardTimerPausedListeners=[],this.boardTimerStoppedListeners=[],document.getElementById("topmenu").style.borderColor=null}},{key:"keepMousePositionsInPlaceOnPanning",value:function(e,t){for(var n in this.registry)if(this.registry.hasOwnProperty(n)){var r=this.registry[n],a=r.pointerEl,o=r.lastKnownAbsolutePoint;a.style.left=o.x+Math.round(t.dx)+"px",a.style.top=o.y+Math.round(t.dy)+"px"}}},{key:"syncLastKnownAbsolutePointsAfterPanning",value:function(){for(var e in this.registry)if(this.registry.hasOwnProperty(e)){var t=this.registry[e].pointerEl;this.registry[e].lastKnownAbsolutePoint={x:parseInt(t.style.left,void 0),y:parseInt(t.style.top,void 0)}}}},{key:"emitUserMouseMove",value:function(e,t){e.isPanning&&t?(this.keepMousePositionsInPlaceOnPanning(e,t),this.lastMoveWasPanning=!0):this.lastMoveWasPanning&&this.syncLastKnownAbsolutePointsAfterPanning(),this.socket.emit("MouseMove",e)}},{key:"emitUserMouseScroll",value:function(e){this.socket.emit("MouseScroll",e)}},{key:"emitUserGestureChanged",value:function(e){this.socket.emit("GestureChanged",e)}},{key:"emitUserIsAutoScrolling",value:function(e){this.socket.emit("AutoScrolling",e)}},{key:"trackMouseOfRemoteUser",value:function(e,t,n){if(console.log("[mousesync] track mouse of remote user: ",e," in registry ",this.registry.hasOwnProperty(e)),this.registry.hasOwnProperty(e))this.observedUser===e&&this.observeUser(e);else{var r=function(e){var t=bO[yO];++yO===bO.length&&(yO=0);var n=document.createElement("div");n.className="geRemoteMouse",n.style.position="absolute",n.style.display="none";var r=document.createElement("p"),a=document.createElement("i");a.className=vO(mO.Default)+" icon",a.style.color=t,r.appendChild(a),n.appendChild(r);var o=document.createElement("p");return o.className="geMouseLabel",o.innerHTML=e,o.style.color=t,n.appendChild(o),[n,a,t]}(t),a=Object(Ke.a)(r,3),o=a[0],i=a[1],s=a[2];this.registry[e]={userName:t,pointerEl:o,pointerIcon:i,color:s,scale:.2,translate:{x:0,y:0},lastKnownAbsolutePoint:{x:0,y:0}},this.container.appendChild(o),this.observedUser===e&&this.observeUser(e),this.userJoinedListeners.forEach(function(r){return r(e,t,n,s)})}}},{key:"stopMouseTrackingOfUser",value:function(e){if(console.log("[mousesync] stop mouse tracking of user",e,"in regsitry ",this.registry.hasOwnProperty(e)),this.registry.hasOwnProperty(e)){var t=this.registry[e].pointerEl;this.container.removeChild(t),delete this.registry[e],this.observedUser===e&&this.hideObservingFrame(),this.userLeftListeners.forEach(function(t){return t(e)})}}},{key:"observeUser",value:function(e){if(this.observingFrame&&this.observingFrame.remove(),console.log("[mousesync] observe user",e,"in registry",this.registry.hasOwnProperty(e)),this.registry.hasOwnProperty(e)){this.observedUser=e;var t=this.registry[e],n=t.userName,r=t.color,a=t.translate,o=t.scale;document.getElementById("topmenu").style.borderColor=r;var i=document.createElement("div");i.classList.add("observing","frame"),i.style.borderColor=r;var s=document.createElement("div");s.classList.add("label"),s.innerText="Observing "+n,s.style.backgroundColor=r,s.style.color="#fff",i.append(s),this.graph.container.append(i),this.observingFrame=i,0!==a.x&&0!==a.y&&(this.graph.view.setScale(o),this.graph.panGraph(a.x,a.y))}}},{key:"hideObservingFrame",value:function(){this.observingFrame&&(this.observingFrame.remove(),this.observingFrame=null,document.getElementById("topmenu").style.borderColor=null)}},{key:"stopObservingUser",value:function(){console.log("[mousesync] stop oberving user"),this.observedUser=null,this.hideObservingFrame()}},{key:"onUserJoined",value:function(e){console.log("[mousesync] attach user joined listener"),this.userJoinedListeners.push(e)}},{key:"offUserJoined",value:function(e){this.userJoinedListeners=this.userJoinedListeners.filter(function(t){return t!==e})}},{key:"onUserLeft",value:function(e){console.log("[mousesync] attach user left listener"),this.userLeftListeners.push(e)}},{key:"offUserLeft",value:function(e){this.userLeftListeners=this.userLeftListeners.filter(function(t){return t!==e})}},{key:"onBoardTimerPaused",value:function(e){this.boardTimerPausedListeners.push(e),this.activeBoardTimer&&this.isBoardTimerPaused&&e(this.activeBoardTimer)}},{key:"offBoardTimerPaused",value:function(e){this.boardTimerPausedListeners=this.boardTimerPausedListeners.filter(function(t){return t!==e})}},{key:"onBoardTimerStarted",value:function(e){this.boardTimerStartedListeners.push(e),this.activeBoardTimer&&(console.log("[mousesync] Trigger board timer started listener with active timer: ",this.activeBoardTimer.toJS()),e(this.activeBoardTimer))}},{key:"offBoardTimerStarted",value:function(e){this.boardTimerStartedListeners=this.boardTimerStartedListeners.filter(function(t){return t!==e})}},{key:"onBoardTimerStopped",value:function(e){this.boardTimerStoppedListeners.push(e)}},{key:"offBoardTimerStopped",value:function(e){this.boardTimerStoppedListeners=this.boardTimerStoppedListeners.filter(function(t){return t!==e})}},{key:"pauseBoardTimer",value:function(e){this.socket.emit("BoardTimerPaused",e.toJS()),this.activeBoardTimer=e,this.isBoardTimerPaused=!0}},{key:"startBoardTimer",value:function(e){this.socket.emit("BoardTimerStarted",e.toJS()),this.activeBoardTimer=e,this.isBoardTimerPaused=!1}},{key:"stopBoardTimer",value:function(e){this.socket.emit("BoardTimerStopped",e.toJS()),this.activeBoardTimer=void 0,this.isBoardTimerPaused=!1}}]),e}(),OO=function(e,t){return e.getIn([hT,"boardGraphElements"])},xO=Object(Ue.b)()(function(e){Object(Fe.useDispatch)();var t,n,r=Object(he.useState)(""),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(he.useState)(void 0),c=Object(Ke.a)(s,2),d=(c[0],c[1]),u=Object(he.useState)(!1),l=Object(Ke.a)(u,2),m=l[0],p=l[1],f=Object(Fe.useSelector)(dg()),h=Object(Fe.useSelector)((t=o,n=rp.event,Object(bt.a)([OO],function(e){if(!e.has(t))return null;var r=Object(fe.List)(e.get(t).toIndexedSeq().toArray());return n?r.filter(function(e){return e.type===n}):r}))),g=f.filter(function(t){return t.uid!==e.boardId}).map(function(e){return{key:e.uid,value:e.uid,text:e.name}}).toArray();h&&h.toArray().map(function(e){return{text:e.name,value:e.uid,icon:he.createElement(Xv,{cellType:e.type})}});e.openHandle(function(e,t){t&&b(t.replace(At()+jt+"/board/","")),p(e)});var b=function(e){i(e),d(void 0),e.length},y=function(){e.onCancel(),v()},v=function(){i(""),d(void 0)};return he.createElement(Ai.a,{open:m,onClose:y,closeIcon:!0},he.createElement(Ai.a.Header,null,e.t("insp.board.link.headline")),he.createElement(Ai.a.Content,{image:!0},he.createElement(tt.a,{placeholder:e.t("insp.board.link.select_board"),fluid:!0,search:!0,selection:!0,options:g,onChange:function(e,t){b(t.value)},value:o,clearable:!0,style:{marginRight:"10px"}}),!1),he.createElement(Ai.a.Actions,null,he.createElement(Ni.a,{children:e.t("app.form.cancel"),onClick:y}),he.createElement(Ni.a,{primary:!0,children:e.t("app.form.save"),onClick:function(){""!==o?e.onLinkChosen(kt(o)):e.onLinkChosen(""),v()}})))}),jO=function(e,t){var n=Math.round(.01*t.x*e.naturalWidth),r=Math.round(.01*t.y*e.naturalHeight),a=Math.round(.01*t.width*e.naturalWidth),o=Math.round(.01*t.height*e.naturalHeight),i=document.createElement("canvas");return i.width=a,i.height=o,i.getContext("2d").drawImage(e,n,r,a,o,0,0,a,o),i},wO=function(e,t,n){return jO(e,t).toDataURL(n)},kO=function(e,t,n){return new Promise(function(){var r=Object(je.a)(xe.a.mark(function r(a,o){return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:jO(e,t).toBlob(function(e){e||o(),a(Uy(e))},n);case 1:case"end":return r.stop()}},r,this)}));return function(e,t){return r.apply(this,arguments)}}())},IO={aspect:0,unit:"%",x:0,y:0,width:100,height:100},SO=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"],CO=["image/jpeg","image/png","image/webp"],_O=Object(Ue.b)()(function(e){var t=Object(he.useState)(null),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(IO),s=Object(Ke.a)(o,2),c=s[0],d=s[1],u=Object(he.useState)(void 0),l=Object(Ke.a)(u,2),m=l[0],p=l[1],f=Object(he.useState)(void 0),h=Object(Ke.a)(f,2),g=h[0],b=h[1],y=Object(he.useState)(!1),v=Object(Ke.a)(y,2),E=v[0],O=v[1],x=Object(he.useState)(!1),j=Object(Ke.a)(x,2),w=j[0],k=j[1],I=Object(Fe.useDispatch)();Object(he.useEffect)(function(){B(),setTimeout(B,1e3)}),e.openHandle(function(e,t){a("string"===typeof t?t:null),O(e)});var S=function(t){t.length<1?I(i.Command.error(e.t("insp.board.upload.upload_failed_title"),e.t("insp.board.upload.upload_failed_text"))):p({file:t[0],src:URL.createObjectURL(t[0])})},C=function(){e.onCancel(),_()},_=function(){p(void 0),b(void 0),d(IO),k(!1)},T=function(){var t=Object(je.a)(xe.a.mark(function t(){var n,a,o,i,s,d;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(m){t.next=2;break}return t.abrupt("return");case 2:if(k(!0),n=CO.includes(m.file.type),a="image/svg+xml"===m.file.type,o=g?g.width:0,i=g?g.height:0,!n){t.next=12;break}t.t0=wO(g,c,m.file.type).replace(";base64",""),t.next=23;break;case 12:if(!a){t.next=19;break}return t.next=15,My(m.file);case 15:t.t2=t.sent,t.t1="data:image/svg+xml,"+t.t2,t.next=22;break;case 19:return t.next=21,Fy(m.file);case 21:t.t1=t.sent.replace(";base64","");case 22:t.t0=t.t1;case 23:return s=t.t0,e.onFileUploaded(m.file.name,s,o,i),_(),t.abrupt("return");case 27:if(!n){t.next=33;break}return t.next=30,kO(g,c,m.file.type);case 30:t.t3=t.sent,t.next=43;break;case 33:if(!a){t.next=39;break}return t.next=36,My(m.file);case 36:t.t4=t.sent,t.next=42;break;case 39:return t.next=41,Uy(m.file);case 41:t.t4=t.sent;case 42:t.t3=t.t4;case 43:d=t.t3,(r?L:A)(d,m.file.type,o,i);case 45:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),A=function(t,n,r,a){N.uploadBoardImage(e.boardId,t,n).then(function(t){e.onFileUploaded(m.file.name,"/buckets/boards/".concat(e.boardId,"/").concat(t.data.imageId),r,a)}).catch(R).finally(_)},L=function(t,n,a,o){N.replaceBoardImage(e.boardId,r,t,n).then(function(t){e.onFileUploaded(m.file.name,"/buckets/boards/".concat(e.boardId,"/").concat(r),a,o)}).catch(R).finally(_)},R=function(){I(i.Command.error(e.t("insp.board.upload.upload_failed_title"),e.t("insp.board.upload.upload_failed_text"))),C()},B=function(){var e=document.getElementById("imageUploadPasteInput");e&&e.focus()};return he.createElement(Ai.a,{open:E,onClose:C,closeIcon:!0,onClick:B},he.createElement(Ai.a.Header,null,e.t("insp.board.upload.select_image")),he.createElement(Ai.a.Content,{image:!0,onPaste:function(t){t.preventDefault();for(var n=t.clipboardData.items,r=null,a=0;a<n.length;a++){var o=n[a];if("image/jpeg"===o.type||"image/png"===o.type){r=o.getAsFile();break}}null!==r?S([r]):I(i.Command.error(e.t("insp.board.upload.paste_failed"),e.t("insp.board.upload.invalid_file_pasted")))}},he.createElement(Ci.a,{onDrop:S,disabled:!!m,accept:SO,maxFiles:1,maxSize:5242880,multiple:!1},function(t){var n=t.getRootProps,r=t.getInputProps;return he.createElement("section",{style:{height:"410px",width:"100%"}},he.createElement("div",Object.assign({},n(),{style:{width:"100%",height:"100%",padding:"1px"}}),m&&CO.includes(m.file.type)&&he.createElement(Ti.a,{style:{maxWidth:"100%",maxHeight:"400px"},imageStyle:{maxWidth:"100%",maxHeight:"400px"},src:m.src,crop:c,onChange:function(e,t){return d(t)},onImageLoaded:b}),m&&!CO.includes(m.file.type)&&he.createElement("img",{src:URL.createObjectURL(m.file)}),!m&&he.createElement("div",null,he.createElement("input",{id:"imageUploadPasteInput",type:"text",style:{position:"fixed",left:"-10000px"}}),he.createElement("input",r()),he.createElement("p",null,e.t("insp.board.upload.drag_and_drop_info")))))})),he.createElement(Ai.a.Actions,null,he.createElement(Ni.a,{children:e.t("app.form.cancel"),onClick:C}),he.createElement(Ni.a,{primary:!0,children:e.t("app.form.save"),onClick:T,loading:w})))}),TO=Object(Ue.b)()(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(""),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)(!1),u=Object(Ke.a)(d,2),l=u[0],m=u[1];e.openHandle(function(e,t){t?c(t):(c(""),m(!1)),a(e)});var p=function(){e.onCancel(),f()},f=function(){c(""),m(!1)},h=function(){e.onLinkChosen(s),f()};return he.createElement(Ai.a,{open:r,onClose:p,closeIcon:!0},he.createElement(Ai.a.Header,null,e.t("insp.board.tasklink.headline")),he.createElement(Ai.a.Content,null,he.createElement(kp.a,{type:"url",onChange:function(e,t){var n;c(t.value),m(!(""===(n=t.value)||null!==n.match(/^https?:\/\/.+$/)))},value:s,fluid:!0,placeholder:"https://issue.tracker.com/tasks/1234",required:!0,error:l,autoFocus:!0,onKeyDown:function(e){13===e.keyCode&&h()},icon:he.createElement(Cp.a,{name:"close",link:!0,onClick:f})})),he.createElement(Ai.a.Actions,null,he.createElement(Ni.a,{children:e.t("app.form.cancel"),onClick:p}),he.createElement(Ni.a,{primary:!0,children:e.t("app.form.save"),onClick:h,disabled:l})))});var AO,NO,LO,RO={collapsed:!1,width:250,rightSidebarWidth:450,sideBySideWidth:450,sideBySideCell:null,codyConsoleHeight:200,dividers:Object(fe.Map)(),editors:Object(fe.Map)()},BO=function(e){function t(){return Object(Be.a)(this,t),Object(Pe.a)(this,Object(ze.a)(t).apply(this,arguments))}return Object(Me.a)(t,e),t}(Object(fe.Record)(RO)),DO=new BO,PO=function(e,t){return e.getIn(["inspectioSidebar","sidebar"])||new BO},zO=function(){return Object(bt.a)([PO],function(e){return e})},MO=function(e){return e.getParsedMetadata()},UO=n(57),FO=Object(Ue.b)()(function(e){var t=e.identifierCandidates.map(function(e){return{key:e,text:e,value:e}});return t.push({key:"- none -",text:"- none -",value:""}),he.createElement(UO.a,null,he.createElement(tt.a,{inline:!0,placeholder:e.t("insp.cody_wizard.identifier_select.placeholder"),value:e.identifier,options:t,disabled:0===t.length||e.disabled,onChange:function(t,n){return e.onIdentifierChanged(n.value)},className:"cody-wizard-inline-select"}))}),GO=function(e,t){var n=[];e.isList()&&(e=e.getListItemsSchema(new lm({}))).isRef()&&t&&(e=e.resolveRef(t));var r=!0,a=!1,o=void 0;try{for(var i,s=e.getObjectProperties()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;e.getObjectPropertySchema(c,lm.fromString("")).isString("uuid")&&n.push(c)}}catch(d){a=!0,o=d}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n},qO=function(e){var t=e.getSources();if(1===t.count()){var n=t.first(void 0);if(n&&n.getType()===Dc.event)return n}},VO=function(e){var t=e.getSources();if(1===t.count()){var n=t.first(void 0);if(n&&n.getType()===Dc.document)return n}},WO=function(e){return"undefined"===typeof e.collection||!!e.collection},HO=function(e){if(nm(e))return!0;if(tm(e))return!1;if(VO(e))return!1;var t=em(e);if(!WO(t))return!1;var n=qO(e);return!(!n||!vm(n))&&(!t.schema||!!GO(t.schema).length)},$O=function(e){return function(t){return function(e,t){return e.getIn(["inspectioBoards","elementsTree",t])||new Bm}(t,e)}},JO=function(e){var t=$O(e);return Object(Fe.useSelector)(t)},QO=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.getSources().filter(function(e){return e.getType()===Dc.document||e.getType()===Dc.externalSystem||n&&e.getType()===Dc.event}),a=t?Object(zn.cloneDeep)(t):{};return r.forEach(function(e){switch(e.getType()){case Dc.document:var t=wm(e,!0);a[t]||(a[t]={type:"query",alias:Nl(e.getName()).propertyName});break;case Dc.externalSystem:var n=Nl(e.getName()).className;a[n]||(a[n]={type:"service",alias:Nl(e.getName()).propertyName});break;case Dc.event:var r=a.events||{type:"events"},o=r.options||{},i=o.match||{},s=i.$eventName||"[]";-1===s.search("]")&&(s="[".concat(s,"]"));var c=wm(e);-1===s.search(c)&&(s=s.replace("]",", '".concat(c,"']")).replace("[, ","[")),i.$eventName=s,o.match=i,r.options=o,a.events=r}}),a},YO=n(159),KO=["VB","VBP","VBD","VBG","VBN","VBZ"],ZO=["NN","NNS","NNP","NNPS"],XO=["JJ","JJR","JJS"],ex=n(1162)(),tx=function(){return NO||(NO=new YO.NounInflector),NO},nx=function(e){return function(){if(!AO){var e=new YO.Lexicon("EN","N","NNP"),t=new YO.RuleSet("EN");AO=new YO.BrillPOSTagger(e,t)}return AO}().tag(e.split(" ")).taggedWords},rx=function(e){return KO.includes(e.tag)},ax=function(e){return ZO.includes(e.tag)},ox=function(e){return XO.includes(e.tag)},ix=function(e){return ax(e)?tx().singularize(e.token):""},sx=function(e){var t="She is ".concat(e.toLowerCase(),"ing a thing.");return console.log("[CodyWizard] tagged test sentence (stemmed): ",nx(t)),"VBG"===nx(t)[2].tag},cx=function(e){var t=(LO||(LO=new YO.PresentVerbInflector),LO).singularize(e),n="She ".concat(t.toLowerCase()," a thing."),r=nx(n);return console.log("[CodyWizard] tagged test sentence: ",r),rx(r[1])||r[1]&&"NNS"===r[1].tag&&sx(e)},dx={are:"were",eat:"ate",go:"went",have:"had",inherit:"inherited",is:"was",run:"ran",sit:"sat",visit:"visited"},ux=function(e){function t(){return Object(Be.a)(this,t),Object(Pe.a)(this,Object(ze.a)(t).apply(this,arguments))}return Object(Me.a)(t,e),t}(Object(fe.Record)({expanded:!1,double:!1})),lx=function(e){return function(t){return function(e,t){return e.getIn(["inspectioSidebar","sidebar","editors",t])||new ux}(t,e)}},mx=function(e,t){if(e.isRef()){var n=t.getFilteredElementsByType(Dc.document,!1),r=!0,a=!1,o=void 0;try{for(var i,s=n.toArray()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value,d=em(c);if(rm(c,d,dm(e.getRef("")))===e.getRef())return c}}catch(u){a=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}}},px=function(e){return he.createElement("div",{style:{display:"flex",marginBottom:"10px"}},e.leftSideSlot,he.createElement("button",{className:"ui basic compact button noborder",style:{marginLeft:"auto",padding:0},onClick:function(t){t.ctrlKey?e.onExpandChanged(!0,!e.double):e.onExpandChanged(!e.expanded,!1),t.preventDefault()},title:"Expand the editor. Ctrl+Click doubles the expanded height."},he.createElement(Cp.a,{name:"expand",style:{margin:0,color:e.expanded?"#2185d0":"inherit",opacity:1}})))},fx=function(e){var t={$ref:"#/definitions/shorthand_object",definitions:{shorthand_both:{oneOf:[{$ref:"#/definitions/shorthand_string"},{$ref:"#/definitions/shorthand_object"}]},shorthand_string:{anyOf:[{type:"string"},{type:"string",enum:["string","string|format:uuid","string|format:email","string|format:","string|format:color","string|format:date","string|format:date|formatMinimum:","string|format:date|$formatMinimum:","string|format:date|formatExclusiveMinimum:","string|format:date|$formatExclusiveMinimum:","string|format:date|formatMaximum:","string|format:date|$formatMaximum:","string|format:date|formatExclusiveMaximum:","string|format:date|$formatExclusiveMaximum:","string|format:date-time","string|format:time","string|format:uri","string|format:uri-reference","string|minLength:","string|maxLength:","string|title:","integer","integer|minimum:","integer|exclusiveMinimum:","integer|maximum:","integer|exclusiveMaximum:","integer|multipleOf:","number","number|minimum:","number|exclusiveMinimum:","number|maximum:","number|exclusiveMaximum:","number|multipleOf:","number|title","boolean","enum:"].concat(Object(eo.a)(e))}]},shorthand_object:{type:"object",patternProperties:{"^[a-zA-Z]{1,}[a-zA-Z0-9]{0,}[?]{0,1}$":{$ref:"#/definitions/shorthand_both"},"^\\$title$":{type:"string"},"\\$ref$":{type:"string",enum:e},"\\$items":{$ref:"#/definitions/shorthand_both"}},additionalProperties:!1}}};return JSON.stringify(t)},hx={},gx=!1,bx=Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=JO(e.boardId),r=Object(he.useRef)(null),a=Object(he.useState)(!1),o=Object(Ke.a)(a,2),i=o[0],s=o[1],c=Object(he.useState)(!1),d=Object(Ke.a)(c,2),u=d[0],l=d[1],m=Object(Fe.useSelector)(lx("schema")),p=e.schema.toString();Object(he.useEffect)(function(){if(r.current){var t=!1;e.sessionId&&"string"===typeof hx[e.sessionId]&&(p=hx[e.sessionId],t=!0),r.current.initializeModel({fileId:"".concat(e.sessionId,"-schema.json"),language:"json",value:p,schema:e.schema.isShorthand()?fx(yx(n)):void 0}),l(t)}},[p]),Object(he.useEffect)(function(){gx&&window.setTimeout(function(){gx=!1},500)},[e.sessionId]),Object(he.useEffect)(function(){e.autofocus&&r.current&&r.current.focus()},[e.autofocus]);return he.createElement(UO.a,null,u&&he.createElement(nt.a,{error:!0,size:"small",content:e.t("insp.cody_wizard.schema_editor.invalid_json"),icon:"warning",style:{display:"flex"}}),he.createElement(px,{leftSideSlot:e.codySuggestSlot,expanded:m.expanded,double:m.double,onExpandChanged:function(e,n){return t(SE("schema",e,!!n))}}),he.createElement($v,{containerId:"cody-schema-editor-".concat(e.sessionId),ref:r,onOpenInformationReference:function(e){var r=mx(lm.fromString(e),n);r&&(gx=!0,t(IE(r.getId())))},repairJson:!0,options:{fontSize:12,folding:!0,glyphMargin:!1,lineNumbers:!0,lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,mouseWheelZoom:!0,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1},readOnly:e.readonly,fixedOverflowWidgets:!0},className:"code editor"+(i?" focus":"")+(m.expanded?" expanded":"")+(m.double?" double":""),onBlur:function(){if(r.current){var t=r.current.retrievePayload(),n=function(t,n){if(gx)return!0;if(""===t)return e.onSchemaChanged(void 0),e.sessionId&&hx[e.sessionId]&&delete hx[e.sessionId],!0;try{var r=Rc(t);return e.onSchemaChanged(new lm(r)),e.sessionId&&hx[e.sessionId]&&delete hx[e.sessionId],!0}catch(a){return console.error("[CodyWizard] Schema Editor invalid JSON: ",a),n||l(!0),!1}}(t);s(!1),!n&&e.sessionId&&(hx[e.sessionId]=t)}},onFocus:function(){s(!0)}}))}),yx=function(e,t){var n=[];return e.getFilteredElementsByType(Dc.document).forEach(function(e){var r=em(e),a=rm(e,r);if(n.includes(a)||n.push(a),r.schema&&!r.schema.isList()&&!t){var o=a+"[]";n.includes(o)||n.push(o)}}),n},vx="[Jexl Expression](https://wiki.prooph-board.com/board_workspace/Expressions.html)",Ex=function(e,t){var n={type:"string",default:"$> ",pattern:"^\\$> .+$",markdownDescription:e};return t?{anyOf:[{enum:t.map(function(e){return"$> ".concat(e)})},n]}:{type:"string",default:"$> ",pattern:"^\\$> .+$",markdownDescription:e}},Ox=function(e,t,n,r){return Object(Ye.a)({},e,xx(t,n,r))},xx=function(e,t,n){var r=[].concat(Object(eo.a)(t||[]),Object(eo.a)(n||[]));0===r.length&&(r=void 0);var a={oneOf:[Ex("Provide data to be merged into source object.\n\nType: ".concat(vx),r),{type:"array",markdownDescription:"List of data to be merged into source object.",items:Ex("Provide data to be merged.\n\nType: ".concat(vx),r)}]};return{rule_then_prop_mapping:{markdownDescription:"**Property Mapping**\n\nSet complex data structures using Jexl-flavoured JSON.\n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#property-mapping)",oneOf:[Ex("Provide data to be merged into source object.\n\nType: ".concat(vx),r),{type:"object",patternProperties:{"^$merge$":a,"^$not$":{type:"string",markdownDescription:"Removes the property."},"^[^$]+$":{$ref:"#/definitions/rule_then_prop_mapping"}}},{type:"array",items:{$ref:"#/definitions/rule_then_prop_mapping"}}]}}},jx=function(){for(var e={definitions:Object(Ye.a)({rule_definition:{markdownDescription:"**Cody Engine Rule**\n\nCan be always executed or if a condition is (not) met \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html)",oneOf:[{type:"object",default:{rule:"always",then:{}},properties:{rule:{type:"string",enum:["always"],markdownDescription:"This rule is always executed.\n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#always-vs-condition)"},then:{$ref:"#/definitions/rule_then"}},required:["rule","then"],additionalProperties:!1},{type:"object",default:{rule:"condition",if:"$> ",then:{}},properties:{rule:{type:"string",enum:["condition"],markdownDescription:"This rule is executed **if** condition is met.\n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#always-vs-condition)"},then:{$ref:"#/definitions/rule_then"},if:Ex("Define condition as a ".concat(vx)),else:{$ref:"#/definitions/rule_then",markdownDescription:"Alternative [rule](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#then), that is executed if condition is not met."},stop:{type:"boolean",markdownDescription:"Stop rule execution if condition is not met."}},required:["rule","then","if"],additionalProperties:!1},{type:"object",default:{rule:"condition",if_not:"$> ",then:{}},properties:{rule:{type:"string",enum:["condition"],markdownDescription:"This rule is executed **if** condition is **not** met.\n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#always-vs-condition)"},then:{$ref:"#/definitions/rule_then"},if_not:Ex("Define condition as a ".concat(vx)),else:{$ref:"#/definitions/rule_then",markdownDescription:"Alternative [rule](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#then), that is executed if condition is met."},stop:{type:"boolean",markdownDescription:"Stop rule execution if condition is met."}},required:["rule","then","if_not"],additionalProperties:!1}]},rule_then:{markdownDescription:"Execute a [rule](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#then)",oneOf:[]}},xx())},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){for(var n in t)e.definitions[n]=t[n],e.definitions.rule_then.oneOf.push({$ref:"#/definitions/".concat(n)})}),e.definitions},wx=function(e){return{rule_then_assign_variable:{type:"object",additionalProperties:!1,required:["assign"],properties:{assign:{type:"object",additionalProperties:!1,markdownDescription:"**Assign Variable**\n\nSet a new or override an existing variable in the rule execution context.\n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#assign-variable)",required:["variable","value"],properties:{variable:e?{const:e,markdownDescription:"Name of the variable"}:{type:"string",minLength:1,markdownDescription:"Name of the variable"},value:{$ref:"#/definitions/rule_then_prop_mapping"}}}}}}},kx=function(e){return{rule_then_call_service:{type:"object",additionalProperties:!1,required:["call"],properties:{call:{type:"object",additionalProperties:!1,markdownDescription:"**Call Service**\n\nInvoke a custom function or method.\n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#call-service)",required:["service"],default:{service:""},properties:{service:{type:"string",enum:e,markdownDescription:"Name of the service dependency"},arguments:{$ref:"#/definitions/rule_then_prop_mapping",markdownDescription:"Arguments passed to the service function.\n\n",default:[]},method:{type:"string",minLength:1},async:{type:"boolean",default:!0},result:{type:"object",additionalProperties:!1,required:["variable"],markdownDescription:"Save the result in a context variable",default:{variable:""},properties:{variable:{type:"string",minLength:1,markdownDescription:"Name of the context variable"},mapping:{$ref:"#/definitions/rule_then_prop_mapping"}}}}}}}}},Ix=function(e,t){return _x("resolve",e,t)},Sx=function(e,t){return _x("find",e,t)},Cx=function(e){return Object(Ye.a)({},e,Ix())},_x=function(e,t,n){var r=t?{type:"string",enum:t,markdownDescription:"Name of the property"}:{type:"string",minLength:1,markdownDescription:"Name of the property"},a={};return a["".concat(e,"_order_by")]={markdownDescription:"Order the result set by property values.\n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#sort-order)",oneOf:[{$ref:"#/definitions/".concat(e,"_order_by_item")},{type:"array",items:{$ref:"#/definitions/".concat(e,"_order_by_item")}}]},a["".concat(e,"_order_by_item")]={type:"object",additionalProperties:!1,required:["prop","sort"],properties:{prop:r,sort:{type:"string",enum:["asc","desc"]}}},a["".concat(e,"_filter")]={type:"object",additionalProperties:!1,required:["filter"],properties:{filter:{$ref:"#/definitions/".concat(e,"_filter_types")}}},a["".concat(e,"_filter_types")]={markdownDescription:"Filter the result set.\n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#filter)",oneOf:[{$ref:"#/definitions/".concat(e,"_filter_and")},{$ref:"#/definitions/".concat(e,"_filter_or")},{$ref:"#/definitions/".concat(e,"_filter_not")},{$ref:"#/definitions/".concat(e,"_filter_any")},{$ref:"#/definitions/".concat(e,"_filter_any_of_doc_id")},{$ref:"#/definitions/".concat(e,"_filter_any_of")},{$ref:"#/definitions/".concat(e,"_filter_doc_id")},{$ref:"#/definitions/".concat(e,"_filter_eq")},{$ref:"#/definitions/".concat(e,"_filter_exists")},{$ref:"#/definitions/".concat(e,"_filter_gte")},{$ref:"#/definitions/".concat(e,"_filter_gt")},{$ref:"#/definitions/".concat(e,"_filter_in_array")},{$ref:"#/definitions/".concat(e,"_filter_like")},{$ref:"#/definitions/".concat(e,"_filter_lte")},{$ref:"#/definitions/".concat(e,"_filter_lt")}]},a["".concat(e,"_filter_expr")]=Ex("Provide filter value as a ".concat(vx),n),a["".concat(e,"_filter_and")]={type:"object",additionalProperties:!1,required:["and"],properties:{and:{markdownDescription:"**And Filter**\n\nFind information where two or more filters match. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#and-filter)",type:"array",items:{$ref:"#/definitions/".concat(e,"_filter_types")},minItems:2}}},a["".concat(e,"_filter_or")]={type:"object",additionalProperties:!1,required:["or"],properties:{or:{markdownDescription:"**Or Filter**\n\nFind information where any of the given filters match. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#or-filter)",type:"array",items:{$ref:"#/definitions/".concat(e,"_filter_types")},minItems:2}}},a["".concat(e,"_filter_not")]={type:"object",additionalProperties:!1,required:["not"],properties:{not:{markdownDescription:"**Not Filter**\n\nFind information where a given filter does not match. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#not-filter)",$ref:"#/definitions/".concat(e,"_filter_types")}}},a["".concat(e,"_filter_any")]={type:"object",additionalProperties:!1,required:["any"],properties:{any:{markdownDescription:"**Any Filter**\n\nFind information without a specific filter. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#any-filter)",type:"boolean",default:!0}}},a["".concat(e,"_filter_any_of_doc_id")]={type:"object",additionalProperties:!1,required:["anyOfDocId"],properties:{anyOfDocId:{markdownDescription:"**Any Of DocId Filter**\n\nFilter information by a list of document ids. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#any-of-docid-filter)",$ref:"#/definitions/".concat(e,"_filter_expr")}}},a["".concat(e,"_filter_any_of")]={type:"object",additionalProperties:!1,required:["anyOf"],properties:{anyOf:{type:"object",additionalProperties:!1,markdownDescription:"**Any Of Filter**\n\nFind information by comparing the value of a property against a list of possible values. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#any-of-filter)",required:["prop","valueList"],properties:{prop:r,valueList:{$ref:"#/definitions/".concat(e,"_filter_expr")}}}}},a["".concat(e,"_filter_doc_id")]={type:"object",additionalProperties:!1,required:["docId"],properties:{docId:{$ref:"#/definitions/".concat(e,"_filter_expr"),markdownDescription:"**DocId Filter**\n\nFind information by its document id. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#docid-filter)"}}},a["".concat(e,"_filter_eq")]={type:"object",additionalProperties:!1,required:["eq"],properties:{eq:{type:"object",additionalProperties:!1,markdownDescription:"**Equal Filter**\n\nCheck that a property equals a specific value. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#equal-filter)",required:["prop","value"],properties:{prop:r,value:{$ref:"#/definitions/".concat(e,"_filter_expr")}}}}},a["".concat(e,"_filter_exists")]={type:"object",additionalProperties:!1,required:["exists"],properties:{exists:{type:"object",additionalProperties:!1,markdownDescription:"**Exists Filter**\n\nCheck that a specific property exists. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#exists-filter)",required:["prop"],properties:{prop:r}}}},a["".concat(e,"_filter_gte")]={type:"object",additionalProperties:!1,required:["gte"],properties:{gte:{type:"object",additionalProperties:!1,markdownDescription:"**Greater Than or Equal Filter**\n\nCheck that a property is greater than or equal to value. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#greater-than-or-equal-filter)",required:["prop","value"],properties:{prop:r,value:{$ref:"#/definitions/".concat(e,"_filter_expr")}}}}},a["".concat(e,"_filter_gt")]={type:"object",additionalProperties:!1,required:["gt"],properties:{gt:{type:"object",additionalProperties:!1,markdownDescription:"**Greater Than Filter**\n\nCheck that a property is greater than value. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#greater-than-filter)",required:["prop","value"],properties:{prop:r,value:{$ref:"#/definitions/".concat(e,"_filter_expr")}}}}},a["".concat(e,"_filter_in_array")]={type:"object",additionalProperties:!1,required:["inArray"],properties:{inArray:{type:"object",additionalProperties:!1,markdownDescription:"**InArray Filter**\n\nIf property is of type array, check that given value is one of the items. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#inarray-filter)",required:["prop","value"],properties:{prop:r,value:{$ref:"#/definitions/".concat(e,"_filter_expr")}}}}},a["".concat(e,"_filter_like")]={type:"object",additionalProperties:!1,required:["like"],properties:{like:{type:"object",additionalProperties:!1,markdownDescription:"**Like Filter**\n\nMatch a string property against a value string that contains a wildcard: % at the start and/or end. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#like-filter)",required:["prop","value"],properties:{prop:r,value:{$ref:"#/definitions/".concat(e,"_filter_expr")}}}}},a["".concat(e,"_filter_lte")]={type:"object",additionalProperties:!1,required:["lte"],properties:{lte:{type:"object",additionalProperties:!1,markdownDescription:"**Lower Than or Equal Filter**\n\nCheck that a property is lower than or equal to a value. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#lower-than-or-equal-filter)",required:["prop","value"],properties:{prop:r,value:{$ref:"#/definitions/".concat(e,"_filter_expr")}}}}},a["".concat(e,"_filter_lt")]={type:"object",additionalProperties:!1,required:["lt"],properties:{lt:{type:"object",additionalProperties:!1,markdownDescription:"**Lower Than Filter**\n\nCheck that a property is lower than a value. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#lower-than-filter)",required:["prop","value"],properties:{prop:r,value:{$ref:"#/definitions/".concat(e,"_filter_expr")}}}}},a},Tx=function(e,t){var n={type:"string",enum:e,markdownDescription:"Data Reference of the information"};return{then_find_information:{type:"object",additionalProperties:!1,required:["find"],properties:{find:{type:"object",additionalProperties:!1,markdownDescription:"**Find Information**\n\nFind a list of stored information using a Filter. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#find-information)",required:["information","filter"],properties:{information:n,filter:{$ref:"#/definitions/find_filter_types"},skip:{type:"integer",markdownDescription:"Select a subset of the result set skipping the given number of results"},limit:{type:"integer",markdownDescription:"Select a subset of the result set limited by the given number"},orderBy:{$ref:"#/definitions/find_order_by"},variable:{type:"string",minLength:1,markdownDescription:"Defines the context name where the result is stored.",default:"information"}}}}},then_find_one_information:{type:"object",additionalProperties:!1,required:["findOne"],properties:{findOne:{type:"object",additionalProperties:!1,markdownDescription:"**Find One Information**\n\nFind one information by using a Filter. If filter matches more than one information, the first match is used. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#find-one-information)",required:["information","filter"],properties:{information:n,filter:{$ref:"#/definitions/find_filter"},variable:{type:"string",minLength:1,markdownDescription:"Defines the context name where the result is stored.",default:"information"}}}}},then_find_information_by_id:{type:"object",additionalProperties:!1,required:["findById"],properties:{findById:{type:"object",additionalProperties:!1,markdownDescription:"**Find Information By Id**\n\nFind one information by its id. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#find-information-by-id)",required:["information","id"],properties:{information:n,id:Ex("Id filter defined as a ".concat(vx),t),variable:{type:"string",minLength:1,markdownDescription:"Defines the context name where the result is stored.",default:"information"}}}}},then_find_partial_information:{type:"object",additionalProperties:!1,required:["findPartial"],properties:{findPartial:{type:"object",additionalProperties:!1,markdownDescription:"**Find Partial Information**\n\nFind a list of information by using a Filter and Select a subset of the information. Partial queries also support Lookup of additional information aka. joining related information. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#find-partial-information)",required:["information","select","filter"],properties:{information:n,filter:{$ref:"#/definitions/find_filter_types"},select:{$ref:"#/definitions/find_partial_select"},skip:{type:"integer",markdownDescription:"Select a subset of the result set skipping the given number of results"},limit:{type:"integer",markdownDescription:"Select a subset of the result set limited by the given number"},orderBy:{$ref:"#/definitions/find_order_by"},variable:{type:"string",minLength:1,markdownDescription:"Defines the context name where the result is stored.",default:"information"}}}}},then_find_one_partial_information:{type:"object",additionalProperties:!1,required:["findOnePartial"],properties:{findOnePartial:{type:"object",additionalProperties:!1,markdownDescription:"**Find One Partial Information**\n\nFind one information by using a Filter and Select a subset of the information. Partial queries also support Lookup of additional information aka. joining related information. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#find-one-partial-information)",required:["information","select","filter"],properties:{information:n,select:{$ref:"#/definitions/find_partial_select"},filter:{$ref:"#/definitions/find_filter"},variable:{type:"string",minLength:1,markdownDescription:"Defines the context name where the result is stored.",default:"information"}}}}},then_find_partial_information_by_id:{type:"object",additionalProperties:!1,required:["findPartialById"],properties:{findPartialById:{type:"object",additionalProperties:!1,markdownDescription:"**Find Partial Information By Id**\n\nFind one information by id and Select a subset of the information. Partial queries also support Lookup of additional information aka. joining related information. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#find-partial-information-by-id)",required:["information","select","id"],properties:{information:n,select:{$ref:"#/definitions/find_partial_select"},id:Ex("Id filter defined as a ".concat(vx),t),variable:{type:"string",minLength:1,markdownDescription:"Defines the context name where the result is stored.",default:"information"}}}}},then_lookup_user:{type:"object",additionalProperties:!1,required:["lookup"],properties:{lookup:{oneOf:[{type:"object",additionalProperties:!1,required:["user"],properties:{user:{}}},{type:"object",additionalProperties:!1,required:["users"],properties:{users:{}}}]}}}}},Ax=function(e){return{find_partial_select:{type:"array",markdownDescription:"**Partial Select**\n\nDefine the list of properties to be included in the result. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#partial-select)",items:{oneOf:[{type:"string",minLength:1},{type:"object",additionalProperties:!1,required:["field","alias"],properties:{field:{type:"string",minLength:1,markdownDescription:"Name of the property in the database.\n\nCan be nested."},alias:{type:"string",minLength:1,markdownDescription:"Name of the property in the result set.\n\nCan be nested."}}},{$ref:"#/definitions/find_partial_select_lookup"}]}},find_partial_select_lookup:{type:"object",additionalProperties:!1,markdownDescription:"**Lookup**\n\nLookup additional information and include it in the main Select. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#lookup)",required:["lookup","on"],properties:{lookup:{type:"string",enum:e,markdownDescription:"Data Reference of the information to be looked up."},alias:{type:"string",minLength:1,markdownDescription:"Lookup name, that can be referenced in further lookups"},using:{type:"string",minLength:1,markdownDescription:"Defines the lookup to be used as the local basis."},optional:{type:"boolean",default:!1,markdownDescription:"Defines if the lookup is optional."},on:{type:"object",additionalProperties:!1,markdownDescription:"Defines the matching condition for the lookup.",required:["localKey"],properties:{localKey:{type:"string",minLength:1,markdownDescription:"Local property used to lookup foreign information"},foreignKey:{type:"string",minLength:1,markdownDescription:"Compare local key against this property in the foreign information.\n\n*If not set, localKey is matched against the document id of foreign information.*"},and:{$ref:"#/definitions/find_filter_types"}}},select:{markdownDescription:"Defines which properties of the looked up information should be included in the result",oneOf:[{type:"string",minLength:1},{type:"object",additionalProperties:!1,required:["field","alias"],properties:{field:{type:"string",minLength:1,markdownDescription:"Name of the property in the database.\n\nCan be nested."},alias:{type:"string",minLength:1,markdownDescription:"Name of the property in the result set.\n\nCan be nested."}}}]}}}}},Nx=function(){var e="Provide log message via ".concat(vx);return{then_log_msg:{type:"object",additionalProperties:!1,required:["log"],properties:{log:{type:"object",additionalProperties:!1,markdownDescription:"**Log Message**\n\nLog a message to console to provide debugging information. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#log-msg)",properties:{msg:{oneOf:[Ex(e),{type:"array",items:Ex(e)}]}}}}}}},Lx=function(){return{rule_then_throw_error:{type:"object",additionalProperties:!1,required:["throw"],properties:{throw:{type:"object",markdownDescription:"**Throw Error**\n\nStop the entire execution flow and throw an error. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#throw-error)",additionalProperties:!1,required:["error"],properties:{error:Ex("Provide the error message via ".concat(vx))}}}}}},Rx=function(e,t,n,r){var a={type:"array",items:{$ref:"#/definitions/rule_definition"},definitions:Object(Ye.a)({},Sx(void 0,r),Ax(n))};return a.definitions=Object(Ye.a)({},a.definitions,jx({rule_then_record_event:{type:"object",properties:{record:{type:"object",markdownDescription:"**Record Event**\n\nRecord an event in the event store. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#record-event)",properties:{event:{type:"string",enum:e},mapping:{$ref:"#/definitions/rule_then_prop_mapping",markdownDescription:"Data of the event"},meta:{$ref:"#/definitions/rule_then_prop_mapping",markdownDescription:"Metadata of the event"}},additionalProperties:!1,required:["event","mapping"]}},additionalProperties:!1,required:["record"]}},Lx(),wx(),kx(t),{rule_then_for_each:{type:"object",additionalProperties:!1,required:["forEach"],properties:{forEach:{type:"object",additionalProperties:!1,required:["variable","then"],markdownDescription:"**For Each**\n\nExecute a rule for each *item* of an array. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#foreach)",properties:{variable:{type:"string",minLength:1},then:{$ref:"#/definitions/rule_then"}}}}}},{rule_then_execute_rules:{type:"object",additionalProperties:!1,required:["execute"],properties:{execute:{type:"object",additionalProperties:!1,required:["rules"],markdownDescription:"**Execute Rules**\n\nExecute a list of additional rules. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#execute-rules)",default:{rules:[]},properties:{rules:{type:"array",items:{$ref:"#/definitions/rule_definition"},minItems:1,default:[]}}}}}},Nx(),Tx(n,r))),JSON.stringify(a)},Bx={},Dx=!1,Px=Object(Ue.b)()(function(e){var t=JO(e.boardId),n=Object(he.useRef)(null),r=Object(he.useState)(!1),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(he.useState)(!1),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(Fe.useSelector)(lx("business-rules")),m=Object(Fe.useDispatch)(),p=[];for(var f in e.dependencies)"service"===e.dependencies[f].type&&p.push(e.dependencies[f].alias||f);Object(he.useEffect)(function(){if(n.current){var r=Lc(e.rules,null,2),a=!1;e.sessionId&&"string"===typeof Bx[e.sessionId]&&(r=Bx[e.sessionId],a=!0),n.current.initializeModel({fileId:"".concat(e.sessionId,"-business-rules.json"),language:"json",value:r,schema:Rx(e.possibleEvents.map(function(e){return e.getTechnicalName()}).toArray(),p,yx(t,!0),zx(e.commandSchema))}),u(a)}},[e.elementId,e.dependencies,e.commandSchema.toString()]),Object(he.useEffect)(function(){Dx&&window.setTimeout(function(){Dx=!1},500)},[e.sessionId]),Object(he.useEffect)(function(){e.autofocus&&n.current&&n.current.focus()},[e.autofocus]);return he.createElement(UO.a,null,d&&he.createElement(nt.a,{error:!0,size:"small",content:e.t("insp.cody_wizard.schema_editor.invalid_json"),icon:"warning",style:{display:"flex"}}),he.createElement(px,{expanded:l.expanded,double:l.double,onExpandChanged:function(e,t){return m(SE("business-rules",e,!!t))}}),he.createElement($v,{containerId:"cody-business-rules-editor-".concat(e.sessionId),ref:n,onOpenInformationReference:function(e){var n=mx(lm.fromString(e),t);n&&(Dx=!0,m(IE(n.getId())))},repairJson:!0,options:{fontSize:12,folding:!0,glyphMargin:!1,lineNumbers:!0,lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,automaticLayout:!0,mouseWheelZoom:!0,scrollbar:{alwaysConsumeMouseWheel:!1},readOnly:e.readonly,fixedOverflowWidgets:!0},className:"code editor"+(o?" focus":"")+(l.expanded?" expanded":"")+(l.double?" double":""),onBlur:function(){if(n.current){var t=n.current.retrievePayload(),r=function(t,n){if(""===t)return e.onRulesChanged(void 0),e.sessionId&&Bx[e.sessionId]&&delete Bx[e.sessionId],!0;try{var r=Rc(t);return e.onRulesChanged(r),e.sessionId&&Bx[e.sessionId]&&delete Bx[e.sessionId],!0}catch(a){return console.error("[CodyWizard] Business Rules Editor invalid JSON: ",a),n||u(!0),!1}}(t);i(!1),!r&&e.sessionId&&(Bx[e.sessionId]=t)}},onFocus:function(){i(!0)}}))}),zx=function(e){var t=e.getObjectProperties().map(function(e){return"command.".concat(e)});return t.push("meta.user.userId"),t},Mx=function(e,t,n){var r={};Object.keys(e).forEach(function(a){var o=e[a];r[a]=Ux(o,t,n)});var a={type:"object",additionalProperties:!0,required:Object.keys(e),properties:r};return JSON.stringify(a)},Ux=function(e,t,n){return{type:"object",additionalProperties:!1,properties:{alias:{type:"string"},type:{type:"string",enum:["query","service","events"]},options:(e.type,{type:"object"})}}},Fx={},Gx=Object(Ue.b)()(function(e){var t=JO(e.boardId),n=Object(he.useRef)(null),r=Object(he.useState)(!1),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(he.useState)(!1),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(Fe.useSelector)(lx("dependencies")),m=Object(Fe.useDispatch)(),p=e.dependencies?qx(e.dependencies):"";Object(he.useEffect)(function(){if(n.current){var r=!1;e.sessionId&&"string"===typeof Fx[e.sessionId]&&(p=Fx[e.sessionId],r=!0),n.current.initializeModel({fileId:"".concat(e.sessionId,"-dependencies-schema.json"),language:"json",value:p,schema:e.dependencies?Mx(e.dependencies,e.messageSchema,t):void 0}),u(r)}},[e.sessionId,p]),Object(he.useEffect)(function(){e.autofocus&&n.current&&n.current.focus()},[e.autofocus]);return he.createElement(UO.a,null,d&&he.createElement(nt.a,{error:!0,size:"small",content:e.t("insp.cody_wizard.query_schema_editor.invalid_json"),icon:"warning",style:{display:"flex"}}),he.createElement(px,{leftSideSlot:e.toolbarSlot,expanded:l.expanded,double:l.double,onExpandChanged:function(e,t){return m(SE("dependencies",e,!!t))}}),he.createElement($v,{containerId:"cody-dependencies-editor-".concat(e.sessionId),ref:n,repairJson:!0,options:{fontSize:12,folding:!0,glyphMargin:!1,lineNumbers:!0,lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,mouseWheelZoom:!0,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1},readOnly:e.readonly,fixedOverflowWidgets:!0},className:"code editor small"+(o?" focus":"")+(l.expanded?" expanded":"")+(l.double?" double":""),onBlur:function(){if(n.current){var t=n.current.retrievePayload(),r=function(t,n){if(""===t)return e.onDependenciesChanged(void 0),e.sessionId&&Fx[e.sessionId]&&delete Fx[e.sessionId],!0;try{var r=Rc(t);return e.onDependenciesChanged(r),e.sessionId&&Fx[e.sessionId]&&delete Fx[e.sessionId],!0}catch(a){return console.error("[CodyWizard] Dependencies Editor invalid JSON: ",a),n||u(!0),!1}}(t);i(!1),!r&&e.sessionId&&(Fx[e.sessionId]=t)}},onFocus:function(){i(!0)}}))}),qx=function(e){return Lc(e,null,2)},Vx=function(e){var t,n=(t=e.label,function(e){return function(e,t){return!!e.getIn(["inspectioSidebar","sidebar","dividers",t])}(e,t)}),r=Object(Fe.useSelector)(n),a=!r,o=Object(Fe.useDispatch)(),i=e.content?a?{cursor:"pointer"}:{cursor:"pointer",textDecoration:"line-through"}:{},s=function(){return e.content&&o(function(e,t){return Object(at.action)(OE,{divider:e,collapsed:t})}(e.label,!r))};return he.createElement(he.Fragment,null,e.popupContent?he.createElement(Ip.a,{horizontal:!0,section:!0,style:i,onClick:s},e.label,"\xa0\xa0",he.createElement(kg.a,{trigger:he.createElement(Cp.a,{name:"question circle outline"}),hoverable:!0},e.popupContent)):he.createElement(Ip.a,{horizontal:!0,content:e.label,section:!0,style:i,onClick:s}),a&&e.content)},Wx=Object(Ue.b)()(function(e){return he.createElement(Vx,{label:e.label,content:e.content,popupContent:he.createElement(he.Fragment,null,he.createElement("p",null,e.t("insp.cody_wizard.editor.businessRules.help1")),he.createElement("p",null,e.t("insp.cody_wizard.editor.businessRules.help2")),he.createElement("p",null,e.t("insp.cody_wizard.editor.contextVariables")),he.createElement("ul",null,he.createElement("li",null,"command: command data"),he.createElement("li",null,"meta: command metadata"),e.isAggregate&&he.createElement("li",null,"information: aggregate state"),he.createElement("li",null,"Command Dependencies")),he.createElement("p",null,e.t("insp.cody_wizard.editor.autocomplete")),he.createElement("p",null,he.createElement("a",{href:"https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#business-rules",onClick:function(e){return e.stopPropagation()},target:"_blank",rel:"nofollow"},e.t("app.learnMore"))))})}),Hx=Object(Ue.b)()(function(e){return he.createElement(Vx,{label:e.label,content:e.content,popupContent:he.createElement(he.Fragment,null,he.createElement("p",null,e.t("insp.cody_wizard.editor.dependencies.help1")),he.createElement("p",null,e.t("insp.cody_wizard.editor.dependencies.help2")),he.createElement("p",null,e.t("insp.cody_wizard.editor.contextVariables")),he.createElement("ul",null,he.createElement("li",null,e.messageType,": ",e.messageType," data"),he.createElement("li",null,"meta: ",e.messageType," metadata"),he.createElement("li",null,"Loaded Query Dependencies")),he.createElement("p",null,he.createElement("a",{href:"https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#dependencies",onClick:function(e){return e.stopPropagation()},target:"_blank",rel:"nofollow"},e.t("app.learnMore"))))})}),$x=function(e){var t=e.pointDirection||"up";return he.createElement(Ni.a,{basic:!0,compact:!0,icon:"arrow alternate circle ".concat(t),className:"noborder",content:"Cody Suggest",disabled:!e.hasSuggestions,onClick:function(){return e.onSuggest()}})},Jx="",Qx=Object(Ue.b)()(function(e){var t=e.ctx.aggregate,n=e.ctx.aggregate?e.ctx.aggregate.getVersion():0,r=e.ctx.aggregate?e.ctx.aggregate.getId():"",a=NE(),o=Object(Ke.a)(a,1)[0],i=(JO(e.ctx.board.uid),Object(he.useState)(null)),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(he.useState)({}),l=Object(Ke.a)(u,2),m=l[0],p=l[1],f=Object(he.useState)(!1),h=Object(Ke.a)(f,2),g=h[0],b=h[1],y=Object(he.useState)({}),v=Object(Ke.a)(y,2),E=v[0],O=v[1],x=Object(he.useState)(!1),j=Object(Ke.a)(x,2),w=j[0],k=j[1];Object(he.useEffect)(function(){if(Jx!==r&&I(),t){d(t);var n=MO(t);p(n)}Jx!==r&&Object.keys(e.ctx.commandDependencies).length&&(k(!0),O(e.ctx.commandDependencies)),Jx=r},[r,n]),Object(he.useEffect)(function(){O(e.ctx.commandDependencies||{})},[e.ctx.commandDependencies]);var I=function(){d(null),p({}),b(!1),O({}),k(!1)},S=function(t){!function(t){if("sidebar"===e.mode&&c&&e.ctx.command){var n=mm(e.ctx.command);Lc(n.dependencies||{})!==Lc(t)&&(n.dependencies=t,o.changeNodeMetadata(e.ctx.command,Lc(n,null,2)))}e.onCtxChanged(Object(Ye.a)({},e.ctx,{commandDependencies:t})),O(t)}(t||{})},C=e.ctx.command&&mm(e.ctx.command).schema||new lm({});return he.createElement("form",{className:"ui form",onSubmit:function(e){e.preventDefault(),e.stopPropagation()}},he.createElement("div",{className:"field"},he.createElement(Ni.a,{basic:!0,icon:w?"minus":"add",labelPosition:"left",size:"mini",content:e.t("insp.cody_wizard.step_aggregate.manage_dependencies")+" (".concat(Object.keys(E).length,")"),color:"blue",className:"text",onClick:function(){return k(!w)},disabled:!c||!c.isEnabled()})),he.createElement("div",{className:(w?"slidedown":"slideup")+" smooth"},he.createElement(Hx,{messageType:"command",label:e.t("insp.cody_wizard.step_aggregate.dependencies_label"),content:he.createElement(he.Fragment,null,he.createElement(Gx,{boardId:e.ctx.board.uid,dependencies:E,messageSchema:C,autofocus:!1,onDependenciesChanged:S,readonly:!c||!c.isEnabled(),sessionId:c?c.getId():void 0}),he.createElement($x,{hasSuggestions:!!(c&&c.getSources().filter(function(e){return[Dc.document,Dc.externalSystem,Dc.event].includes(e.getType())}).count()>0),onSuggest:function(){if(c){var e=QO(c,E);Lc(e)!==Lc(E)&&S(e)}}}))})),he.createElement(Wx,{isAggregate:!0,label:e.t("insp.cody_wizard.step_aggregate.rules_label"),content:he.createElement(he.Fragment,null,he.createElement(Px,{rules:m.rules||Yx(e.ctx),boardId:e.ctx.board.uid,elementId:c?c.getId():"",sessionId:c?c.getId():void 0,commandSchema:C,dependencies:E,onRulesChanged:function(t){var n;t||(t=[]),e.onCtxChanged(Object(Ye.a)({},e.ctx,{commandHandler:t})),n=Object(Ye.a)({},m,{rules:t}),e.onUpdateMetadata&&e.onUpdateMetadata(Lc(n,null,2),!0),p(n)},autofocus:g,possibleEvents:e.ctx.events,readonly:!c||!c.isEnabled()}))}),he.createElement("div",{style:{marginTop:"100px"}}))}),Yx=function(e){var t=[];return e.events.forEach(function(e){t.push({rule:"always",then:{record:{event:e.getTechnicalName(),mapping:"$> command"}}})}),t},Kx=function(e){var t=[];return e.forEach(function(e){"-"!==e.charAt(0)&&(e=e.slice(1)),"-"!==e.charAt(0)&&(e=e.slice(1)),t.push(e)}),t},Zx={isSchemaLine:!1,isSubSchema:!1,type:"null",propName:"",raw:""},Xx=function(){function e(t){Object(Be.a)(this,e),this.lines=void 0,this.currentLine=0,this.schema=void 0,this.lines=t.split("\n"),this.schema=new lm({}),console.log(this.lines)}return Object(De.a)(e,[{key:"parse",value:function(){var t=this.parseNextLine();for(console.log("next line",t);t.isSchemaLine;){if("object"===t.type){var n=this.parseAllSubSchemaLines(),r=new e(Kx(n).join("\n")).parse();this.schema.setObjectProperty(t.propName,r)}else this.schema.setObjectProperty(t.propName,new lm(t.type));t=this.parseNextLine(),console.log("next line",t)}return this.schema}},{key:"parseAllSubSchemaLines",value:function(){for(var e=this.currentLine,t=this.parseNextLine(),n=[];t.isSubSchema;)n.push(t.raw),e=this.currentLine,t=this.parseNextLine();return this.currentLine=e,n}},{key:"parseNextLine",value:function(){var e=this.getNextLine();if(console.log(e),!e)return Zx;if("-"!==e.trimLeft().charAt(0))return Zx;var t=e.split(":"),n=Object(Ke.a)(t,2),r=n[0],a=n[1];console.log("line split",r,typeof a,"-"!==r.charAt(0));var o="-"!==r.charAt(0),i=Nl(r.trim().slice(1).trimLeft()).propertyName,s=i.toLowerCase().match(/id$/)?"string|format:uuid":"string";return"string"===typeof a&&(""===a.trim()?s="object":am(a.trim())&&(s=a.trim())),{isSchemaLine:!0,isSubSchema:o,propName:i,type:s,raw:e}}},{key:"getNextLine",value:function(){var e=this.lines[this.currentLine];return this.currentLine++,e}}]),e}(),ej=function(e){var t=e.getDescription();return""===t?new lm({}):new Xx(t).parse()},tj=Object(Ue.b)()(function(e){return he.createElement(Vx,{label:"Schema",content:e.content,popupContent:he.createElement(he.Fragment,null,he.createElement("p",null,e.t("insp.cody_wizard.editor.schema.help1")),he.createElement("p",null,e.t("insp.cody_wizard.editor.schema.help2")),he.createElement("p",null,e.t("insp.cody_wizard.editor.autocomplete")),he.createElement("p",null,e.t("insp.cody_wizard.editor.schema.help3")),he.createElement("p",null,he.createElement("a",{href:"https://wiki.prooph-board.com/board_workspace/Schema.html",onClick:function(e){return e.stopPropagation()},target:"_blank",rel:"nofollow"},e.t("app.learnMore"))))})}),nj=Object(Ue.b)()(function(e){return he.createElement(Vx,{label:"UI Schema",content:e.content,popupContent:he.createElement(he.Fragment,null,he.createElement("p",null,e.t("insp.cody_wizard.editor.uiSchema.help1"+e.type)),he.createElement("p",null,e.t("insp.cody_wizard.editor.autocomplete")),he.createElement("p",null,he.createElement("a",{href:"https://wiki.prooph-board.com/board_workspace/UI-Schema.html",target:"_blank",rel:"nofollow",onClick:function(e){return e.stopPropagation()}},e.t("app.learnMore"))))})}),rj={},aj=Object(Ue.b)()(function(e){var t=Object(he.useRef)(null),n=Object(he.useState)(!1),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(he.useState)(!1),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(Fe.useSelector)(lx("stream-id")),l=Object(Fe.useDispatch)();Object(he.useEffect)(function(){if(t.current){var n=Lc({streamId:e.streamId},null,2),r=!1;e.sessionId&&"string"===typeof rj[e.sessionId]&&(n=rj[e.sessionId],r=!0),t.current.initializeModel({fileId:"".concat(e.sessionId,"-stream-id.json"),language:"json",value:n,schema:JSON.stringify({type:"object",additionalProperties:!1,required:["streamId"],properties:{streamId:{type:"string",markdownDescription:"No two commands can record events with the same streamId at the same time.\n\n**Optimistic Locking** is used to block concurrent writes.\n\n**Jexl Expression**\n\nScope:\n\n- **command**\n- **meta**"}}})}),d(r)}},[e.streamId]),Object(he.useEffect)(function(){e.autofocus&&t.current&&t.current.focus()},[e.autofocus]);return he.createElement(UO.a,null,c&&he.createElement(nt.a,{error:!0,size:"small",content:e.t("insp.cody_wizard.schema_editor.invalid_json"),icon:"warning",style:{display:"flex"}}),he.createElement(px,{expanded:u.expanded,double:u.double,onExpandChanged:function(e,t){return l(SE("stream-id",e,!!t))}}),he.createElement($v,{containerId:"cody-stream-id-editor-".concat(e.sessionId),ref:t,repairJson:!0,options:{fontSize:12,folding:!0,glyphMargin:!1,lineNumbers:!0,lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,mouseWheelZoom:!0,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1},readOnly:e.readonly,fixedOverflowWidgets:!0},className:"code editor small"+(a?" focus":"")+(u.expanded?" expanded":"")+(u.double?" double":""),onBlur:function(){if(t.current){var n=t.current.retrievePayload(),r=function(t,n){if(""===t)return e.onStreamIdChanged(""),e.sessionId&&rj[e.sessionId]&&delete rj[e.sessionId],!0;try{var r=Rc(t);return e.onStreamIdChanged(r.streamId||""),e.sessionId&&rj[e.sessionId]&&delete rj[e.sessionId],!0}catch(a){return console.error("[CodyWizard] UI Config Editor invalid JSON: ",a),n||d(!0),!1}}(n);o(!1),!r&&e.sessionId&&(rj[e.sessionId]=n)}},onFocus:function(){o(!0)}}))}),oj=function(e){if(e.getType()!==Dc.document)return!1;if(tm(e))return!1;em(e);return!!em(e).querySchema},ij=function(e){return e.getFilteredElementsByType(Dc.document).filter(function(e){return nm(e)}).map(function(e){var t=em(e);return rm(e,t)}).toArray()},sj=function(e){return e.getFilteredElementsByType(Dc.document).filter(function(e){return oj(e)}).map(function(e){var t=em(e);return rm(e,t)}).toArray()},cj=function(e){var t=[];return e.getFilteredElementsByType(Dc.document).forEach(function(e){var n=em(e);if(n.querySchema&&tm(e)){var r=rm(e,n);t.includes(r)||t.push(r)}}),t},dj=function(e){var t=[];return e.getFilteredElementsByType(Dc.document).forEach(function(e){var n=em(e);if(n.querySchema&&n.querySchema.isEmpty()){var r=rm(e,n);t.includes(r)||t.push(r)}}),t},uj=function(e,t){if(!e.isList())return[];var n=e.getListItemsSchema(new lm({}));return n.isRef()&&(n=n.resolveRef(t)),n.getObjectProperties()},lj=function(e){return e.getFilteredElementsByType(Dc.ui).map(function(e){return Nl(e.getTechnicalName()).className}).toArray()},mj=function(e){return e.getFilteredElementsByType(Dc.command).map(function(e){return Nl(e.getTechnicalName()).className}).toArray()},pj=function(e){return e.getFilteredElementsByType(Dc.document).map(function(e){return Nl(e.getTechnicalName()).className}).toArray()},fj=function(e){return e.getFilteredElementsByType(Dc.document).map(function(e){return rm(e,em(e),!1,!0)}).toArray()},hj=function(){return{"mui-container":{anyOf:[{$ref:"#/definitions/sx_breakpoints"},{type:"object",additionalProperties:!0,properties:{sx:{$ref:"#/definitions/sx"},className:{type:"string"},spacing:{oneOf:[{type:"integer",default:2},{$ref:"#/definitions/sx_breakpoints"}]},rowSpacing:{oneOf:[{type:"integer",default:2},{$ref:"#/definitions/sx_breakpoints"}]},columnSpacing:{oneOf:[{type:"integer",default:2},{$ref:"#/definitions/sx_breakpoints"}]},columns:{oneOf:[{type:"integer",default:2},{$ref:"#/definitions/sx_breakpoints"}]},xsOffset:{oneOf:[{type:"integer",default:1},{const:"auto"}]},smOffset:{oneOf:[{type:"integer",default:1},{const:"auto"}]},mdOffset:{oneOf:[{type:"integer",default:1},{const:"auto"}]},lgOffset:{oneOf:[{type:"integer",default:1},{const:"auto"}]},xlOffset:{oneOf:[{type:"integer",default:1},{const:"auto"}]}}}]},sx:{anyOf:[{$ref:"#/definitions/css"},{patternProperties:{"^&":{$ref:"#/definitions/sx"}}},{type:"object",additionalProperties:!0}]},sx_breakpoints:{type:"object",additionalProperties:!0,properties:{xs:{oneOf:[{type:"integer",default:12},{type:"boolean",default:!0},{const:"auto"}]},sm:{oneOf:[{type:"integer",default:12},{type:"boolean",default:!0},{const:"auto"}]},md:{oneOf:[{type:"integer",default:12},{type:"boolean",default:!0},{const:"auto"}]},lg:{oneOf:[{type:"integer",default:12},{type:"boolean",default:!0},{const:"auto"}]},xl:{oneOf:[{type:"integer",default:12},{type:"boolean",default:!0},{const:"auto"}]}}},css:Object(Ye.a)({},gj(),{length:{type:"string"},time:{type:"string"},overflow:{type:"string",enum:["visible","scroll","hidden","auto"]}})}},gj=function(){return{type:"object",properties:{display:{type:"string",enum:["inline","table-row-group","table-row","table-header-group","table-footer-group","table-column-group","table-column","table-cell","table-caption","table","run-in","none","list-item","inline-table","inline-flex","inline-block","flex","compact","block"]},position:{type:"string",enum:["static","sticky","relative","page","fixed","center","absolute"]},color:{type:"string",format:"color",title:"color",default:"#ffa500"},background:{type:"string"},backgroundColor:{type:"string",format:"color",title:"background-color",default:"#ffa500"},fontFamily:{type:"string",title:"font-family"},float:{type:"string",enum:["none","right","left"]},all:{type:"string",enum:["initial","unset","inherit"]},animationDirection:{type:"string",enum:["normal","reverse","alternate-reverse","alternate"]},animationFillMode:{type:"string",enum:["none","forwards","both","backwards"]},animationPlayMode:{type:"string",enum:["running","paused"]},visibility:{type:"string",enum:["visible","hidden","collapse"]},backfaceVisibility:{type:"string",enum:["visible","hidden"]},backgroundAttachment:{type:"string",enum:["scroll","local","fixed"]},backgroundClip:{type:"string",enum:["border-box","padding-box","content-box"]},backgroundOrigin:{type:"string",enum:["padding-box","content-box","border-box"]},backgroundRepeat:{type:"string",enum:["repeat","space","round","repeat-y","repeat-x","repeat no-repeat","no-repeat"]},border:{type:"string"},borderRadius:{type:"string"},borderCollapse:{type:"string",enum:["separate","collapse"]},borderImageRepeat:{type:"string",enum:["stretch","space","round","repeat"]},boxDecorationBreak:{type:"string",enum:["slice","clone"]},boxSizing:{type:"string",enum:["content-box","padding-box","border-box"]},breakBefore:{type:"string",enum:["auto","right","page","left","column","avoid-page","avoid-column","avoid","always"]},breakAfter:{type:"string",enum:["auto","right","page","left","column","avoid-page","avoid-column","avoid","always"]},breakInside:{type:"string",enum:["auto","avoid-page","avoid-column","avoid"]},captionSide:{type:"string",enum:["top","bottom"]},clear:{type:"string",enum:["none","right","left","both"]},clearAfter:{type:"string",enum:["none","top","start","right","outside","left","inside","end","descendants","bottom","both"]},columnFill:{type:"string",enum:["balance","auto"]},columnSpan:{type:"string",enum:["none","all"]},columnRuleStyle:{type:"string",enum:["none","solid","ridge","outset","inset","hidden","groove","double","dotted","dashed"]},emptyCells:{type:"string",enum:["show","hide"]},flexDirection:{type:"string",enum:["row","row-reverse","column-reverse","column"]},flexWrap:{type:"string",enum:["nowrap","wrap-reverse","wrap"]},justifyContent:{type:"string",enum:["flex-start","space-between","space-around","flex-end","center"]},alignItems:{type:"string",enum:["stretch","flex-start","flex-end","center","baseline"]},alignSelf:{type:"string",enum:["auto","stretch","flex-start","flex-end","center","baseline"]},alignContent:{type:"string",enum:["stretch","space-between","space-around","flex-start","flex-end","center"]},fontStretch:{type:"string",enum:["normal","ultra-expanded","ultra-condensed","semi-expanded","semi-condensed","extra-expanded","extra-condensed","expanded","condensed"]},fontSynthesis:{type:"string",enum:["weight style","weight","style","none"]},fontKerning:{type:"string",enum:["auto","normal","none"]},fontVariant:{type:"string",enum:["normal","unicase","titling-caps","small-caps","petite-caps","all-small-caps","all-petite-caps"]},fontVariantCaps:{type:"string",enum:["normal","unicase","titling-caps","small-caps","petite-caps","all-small-caps","all-petite-caps"]},fontStyle:{type:"string",enum:["normal","oblique","italic"]},fontWeight:{type:"string",enum:["normal","lighter","bolder","bold","900","800","700","600","500","400","300","200","100"]},hangingPunctuation:{type:"string",enum:["none","last force-end","last allow-end","last","force-end","first force-end","first allow-end","first","allow-end"]},hyphens:{type:"string",enum:["manual","none","auto"]},imageResolution:{type:"string",enum:["1dppx","from-image"]},lineBreak:{type:"string",enum:["auto","strict","normal","loose"]},listStylePosition:{type:"string",enum:["outside","inside"]},listStyleType:{type:"string",enum:["disc","upper-roman","upper-latin","upper-alpha","square","none","lower-roman","lower-latin","lower-greek","lower-alpha","georgian","decimal-leading-zero","decimal","circle","armenian"]},objectFit:{type:"string",enum:["fill","scale-down","none","cover","contain"]},outlineStyle:{type:"string",enum:["none","solid","ridge","outset","inset","groove","double","dotted","dashed","auto"]},overflowWrap:{type:"string",enum:["normal","break-word"]},pageBreakAfter:{type:"string",enum:["auto","right","left","avoid","always"]},pageBreakBefore:{type:"string",enum:["auto","right","left","avoid","always"]},pageBreakInside:{type:"string",enum:["auto","avoid"]},pointerEvents:{type:"string",enum:["auto","none"]},resize:{type:"string",enum:["none","vertical","horizontal","alwbothays"]},tableLayout:{type:"string",enum:["auto","fixed"]},textAlignLast:{type:"string",enum:["auto","start","right","left","justify","end","center"]},textDecorationLine:{type:"string",enum:["none","underline","overline","line-through","blink"]},textDecorationSkip:{type:"string",enum:["none","spaces","objects","ink","edges","box-decoration"]},textDecorationPosition:{type:"string",enum:["auto","under right","under left","under","right","left"]},textDecorationStyle:{type:"string",enum:["solid","wavy","double","dotted","dashed"]},textEmphasisPosition:{type:"string",enum:["over right","over left","below right","below left"]},textJustify:{type:"string",enum:["auto","none","inter-word","distribute"]},textOrientation:{type:"string",enum:["mixed","use-glyph-orientation","upright","sideways-right","sideways-left","sideways"]},transformStyle:{type:"string",enum:["flat","preserve-3d"]},textTransform:{type:"string",enum:["none","uppercase","lowercase","full-width","capitalize"]},unicodeBidi:{type:"string",enum:["normal","embed","bidi-override"]},whiteSpace:{type:"string",enum:["normal","pre-wrap","pre-line","pre","nowrap"]},wordBreak:{type:"string",enum:["normal","keep-all","break-all"]},wordWrap:{type:"string",enum:["normal","break-word"]},writingWode:{type:"string",enum:["horizontal-tb","vertical-rl","vertical-lr"]},top:{$ref:"#/definitions/css/length"},left:{$ref:"#/definitions/css/length"},right:{$ref:"#/definitions/css/length"},bottom:{$ref:"#/definitions/css/length"},margin:{$ref:"#/definitions/css/length"},marginLeft:{$ref:"#/definitions/css/length"},marginRight:{$ref:"#/definitions/css/length"},marginTop:{$ref:"#/definitions/css/length"},marginBottom:{$ref:"#/definitions/css/length"},padding:{$ref:"#/definitions/css/length"},paddingRight:{$ref:"#/definitions/css/length"},paddingLeft:{$ref:"#/definitions/css/length"},paddingTop:{$ref:"#/definitions/css/length"},paddingBottom:{$ref:"#/definitions/css/length"},animationDelay:{$ref:"#/definitions/css/time"},animationDuration:{$ref:"#/definitions/css/time"},overflowX:{$ref:"#/definitions/css/overflow"},overflowY:{$ref:"#/definitions/css/overflow"}}}},bj=[],yj=!1;yj||(ke.a.create().get("https://raw.githubusercontent.com/Templarian/MaterialDesign/master/meta.json").then(function(e){200===e.status&&e.data.forEach(function(e){e.version<="7.7.0"&&bj.push(e.name)})}).catch(function(e){console.error("[CodyWizard] Could not fetch MDI icon meta.json",e)}),yj=!0);var vj=function(e,t,n,r,a,o,i){var s=wx("value");return{type:"object",properties:Object(Ye.a)({"ui:title":{oneOf:[{type:"string"},{type:"boolean"}]},"ui:hidden":{type:["string","boolean"]},"ui:description":{type:"string"},"ui:disabled":{type:"boolean"},"ui:options":{type:"object",additionalProperties:!0,properties:Object(Ye.a)({},i)}},e),definitions:Object(Ye.a)({ui_schema:{type:"object",properties:{"ui:title":{oneOf:[{type:"string"},{type:"boolean"}]},"ui:hidden":{type:"string"},"ui:description":{type:"string"},"ui:disabled":{type:"boolean"},"ui:widget":{anyOf:[{type:"string"},{const:"DataSelect"},{const:"color"},{const:"hidden"},{const:"password"},{const:"radio"},{const:"range"},{const:"select"},{const:"textarea"}]},"ui:options":{type:"object",additionalProperties:!0,properties:Object(Ye.a)({data:{type:"string",enum:t},text:{type:"string",minLength:1},value:{type:"string",minLength:1},addItemCommand:{type:"string",enum:n}},i)}}}},s,xx(),hj())}},Ej=function(e,t,n,r){return{type:"array",items:{oneOf:[{type:"string",enum:e,markdownDescription:"Name of the command"},Oj(e,t,n,r).actions.items]},markdownDescription:"List of Command Buttons.\n\nAvailable in the **Action Bar** of the page. Each item can be either the name of a command or a command/action configuration object."}},Oj=function(e,t,n,r){return{actions:{type:"array",items:{oneOf:[{type:"object",additionalProperties:!1,required:["button","type","command"],properties:{type:{const:"command"},command:{type:"string",enum:e},connectTo:{type:"string",enum:r,markdownDescription:"Connect the command button to a form on the page."},directSubmit:{type:"boolean",markdownDescription:"Directly submit the command on button click with the data provided via **data** config."},forceSchema:{type:"boolean",default:!1,markdownDescription:"When submitting a connected form, force the form to use the command schema for validation.\n\n_Useful, when multiple commands submit the same form e.g. interim save with optional properties vs. final save with required properties._"},uiSchema:{type:"object"},data:{$ref:"#/definitions/rule_then_prop_mapping"},button:xj()["ui:button"],position:{type:"string",enum:["top-right","bottom-left","bottom-center","bottom-right"]}},if:{oneOf:[{required:["connectTo"]},{required:["directSubmit"]}]},then:{properties:{uiSchema:Object(Ye.a)({},vj(Object(Ye.a)({},jj(t),xj()),n,e,0,0,0,{container:{$ref:"#/definitions/mui-container"}}),{markdownDescription:"Override or add uiSchema properties of the command"})}},else:{properties:{uiSchema:Object(Ye.a)({},vj(Object(Ye.a)({},xj()),n,e,0,0,0,{container:{$ref:"#/definitions/mui-container"}}),{markdownDescription:"Override or add uiSchema properties of the command"})}},markdownDescription:"Command configuration"},{type:"object",additionalProperties:!1,required:["button","type","href"],properties:{type:{const:"link"},href:{type:"string",format:"uri"},button:xj()["ui:button"],position:{type:"string",enum:["top-right","bottom-left","bottom-center","bottom-right"]}}},{type:"object",additionalProperties:!1,required:["button","type","pageLink"],properties:{type:{const:"link"},pageLink:{oneOf:[{type:"string",enum:t},{type:"object",additionalProperties:!1,required:["page"],properties:{page:{type:"string",enum:t},mapping:{$ref:"#/definitions/rule_then_prop_mapping"}}}]},button:xj()["ui:button"],position:{type:"string",enum:["top-right","bottom-left","bottom-center","bottom-right"]}}}]}}}},xj=function(){return{"ui:button":{type:"object",additionalProperties:!1,properties:{variant:{type:"string",enum:["text","outlined","contained"]},"variant:expr":Ex(),color:{type:"string",enum:["primary","secondary","success","error","info","warning"]},"color:expr":Ex(),style:{type:"object"},"style:expr":Ex(),label:{type:"string"},"label:expr":Ex(),disabled:{oneOf:[{type:"boolean"},Ex()]},"disabled:expr":Ex(),hidden:{oneOf:[{type:"boolean"},Ex()]},"hidden:expr":Ex(),icon:kj(),"icon:expr":Ex(),endIcon:kj(),"endIcon:expr":Ex()}}}},jj=function(e){return{"ui:form":{type:"object",additionalProperties:!1,markdownDescription:"Configure behavior of the command form",properties:{data:{$ref:"#/definitions/rule_then_prop_mapping",markdownDescription:"Set the initial data of the form"},successRedirect:{markdownDescription:"Redirect the user to another page when the command was successful",oneOf:[{type:"string",enum:e},{type:"object",additionalProperties:!1,required:["page","mapping"],properties:{page:{type:"string",enum:e},mapping:{$ref:"#/definitions/rule_then_prop_mapping"}}}]},"successRedirect:expr":Ex("Define success redirect as a ".concat(vx))}}}},wj=function(e,t,n){return{"ui:table":{type:"object",additionalProperties:!1,properties:{columns:{type:"array",items:{oneOf:[{type:"string",enum:e},{type:"object",additionalProperties:!1,properties:{field:{type:"string",enum:e},headerName:{type:"string"},value:{oneOf:[{type:"string"},{type:"array",items:{$ref:"#/definitions/rule_then_assign_variable"},minItems:1}]},flex:{type:"number"},width:{type:"string"},ref:{type:"object",additionalProperties:!1,required:["data","value"],properties:{data:{type:"string",enum:n},value:{oneOf:[{type:"string"},{type:"array",items:{$ref:"#/definitions/rule_then_assign_variable"},minItems:1}]},itemIdentifier:{type:"string"}}},pageLink:{oneOf:[{type:"string",enum:t},{type:"object",additionalProperties:!1,required:["page","mapping"],properties:{page:{type:"string",enum:t},mapping:{type:"object"}}}]}}}]}},density:{type:"string",enum:["compact","standard","comfortable"]},hideToolbar:{type:"boolean"},checkboxSelection:{type:"boolean"},pageSize:{type:"number",minimum:1},pageSizeOptions:{type:"array",items:{type:"number"}}}}}},kj=function(){return{type:"string",enum:bj}},Ij=function(e){return{type:"object",additionalProperties:!1,properties:{label:{type:"string",minLength:1},icon:kj(),hidden:{oneOf:[{type:"boolean"},{type:"string",minLength:1}]},"hidden:expr":{type:"string",minLength:1},position:{type:"integer"},group:{oneOf:[{type:"string",minLength:1},{type:"object",additionalProperties:!1,required:["label"],properties:{label:{type:"string",minLength:1},icon:kj()}}]},dynamic:{type:"object",additionalProperties:!1,required:["data"],properties:{data:{type:"string",enum:e},label:{type:"string",default:"''"},icon:{type:"string",default:"''"},hidden:{type:"string",default:"''"}}}}}},Sj={},Cj=Object(Ue.b)()(function(e){var t=JO(e.boardId),n=Object(Fe.useSelector)(Ay(e.boardId)),r=Object(he.useRef)(null),a=Object(he.useState)(!1),o=Object(Ke.a)(a,2),i=o[0],s=o[1],c=Object(he.useState)(!1),d=Object(Ke.a)(c,2),u=d[0],l=d[1],m=Object(Fe.useSelector)(lx("ui-schema")),p=Object(Fe.useDispatch)(),f=Lc(e.schema,null,2)||"{\n  \n}\n";Object(he.useEffect)(function(){if(r.current){var n=!1;e.sessionId&&"string"===typeof Sj[e.sessionId]&&(f=Sj[e.sessionId],n=!0);var a=cj(t),o=mj(t),i=lj(t),s=fj(t);r.current.initializeModel({fileId:"".concat(e.sessionId,"-ui-schema.json"),language:"json",value:f,schema:JSON.stringify(vj(Object(Ye.a)({},_j(e.nodeSchema),e.formSchema?jj(i):{},e.buttonSchema?xj():{},e.tableSchema?wj(uj(e.nodeSchema,t),i,a):{}),a,o,0,0,0,Object(Ye.a)({},Oj(o,i,a,s))))}),l(n)}},[f,e.nodeSchema.toString(),n.name]),Object(he.useEffect)(function(){e.autofocus&&r.current&&r.current.focus()},[e.autofocus]);return he.createElement(UO.a,null,u&&he.createElement(nt.a,{error:!0,size:"small",content:e.t("insp.cody_wizard.ui_schema_editor.invalid_json"),icon:"warning",style:{display:"flex"}}),he.createElement(px,{leftSideSlot:e.toolbarSlot,expanded:m.expanded,double:m.double,onExpandChanged:function(e,t){return p(SE("ui-schema",e,!!t))}}),he.createElement($v,{containerId:"cody-ui-schema-editor-".concat(e.sessionId),ref:r,repairJson:!0,options:{fontSize:12,folding:!0,glyphMargin:!1,lineNumbers:!0,lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,mouseWheelZoom:!0,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1},readOnly:e.readonly,fixedOverflowWidgets:!0},className:"code editor"+(i?" focus":"")+(m.expanded?" expanded":"")+(m.double?" double":""),onBlur:function(){if(r.current){var t=r.current.retrievePayload(),n=function(t,n){if(""===t)return e.onSchemaChanged(void 0),e.sessionId&&Sj[e.sessionId]&&delete Sj[e.sessionId],!0;try{var r=Rc(t);return e.onSchemaChanged(r),e.sessionId&&Sj[e.sessionId]&&delete Sj[e.sessionId],!0}catch(a){return console.error("[CodyWizard] UI Schema Editor invalid JSON: ",a),n||l(!0),!1}}(t||"{}");s(!1),!n&&e.sessionId&&(Sj[e.sessionId]=t)}},onFocus:function(){s(!0)}}))}),_j=function e(t){var n=t.getObjectProperties(),r={};return n.forEach(function(n){var a=t.getObjectPropertySchema(n,void 0);if(a&&a.isObject()){var o=e(a);r[n]={oneOf:[{$ref:"#/definitions/ui_schema"},{type:"object",properties:Object(Ye.a)({},o)}]}}else r[n]={$ref:"#/definitions/ui_schema"}}),r},Tj=function(e){var t=!e.command||e.disabled;return he.createElement(UO.a,{disabled:t,inline:!0},he.createElement(Sp.a,{value:1,checked:e.aggregateCommand,disabled:t,toggle:!0,onChange:function(){return e.onAggregateCommandChanged(!e.aggregateCommand)},label:"Aggregate Command"}))},Aj=Object(Ue.b)()(function(e){var t=!e.command||!e.deleteState;return he.createElement(UO.a,{disabled:t,inline:!0,className:t?"fadeout":"fadein"},he.createElement(Sp.a,{value:1,checked:e.deleteHistory,disabled:e.disabled||t,toggle:!0,onChange:function(){return e.onDeleteHistoryChanged(!e.deleteHistory)},label:e.t("insp.cody_wizard.step_command.delete_history_label")}),he.createElement(nt.a,{size:"small",warning:!0,icon:"eraser",content:e.t("insp.cody_wizard.step_command.delete_history_warning"),style:{display:e.deleteHistory?"flex":"none"}}))}),Nj=Object(Ue.b)()(function(e){var t=!e.command||e.newAggregate;return he.createElement(UO.a,{disabled:t,inline:!0,className:t?"fadeout":"fadein"},he.createElement(Sp.a,{value:1,checked:e.deleteState,disabled:e.disabled||t,toggle:!0,onChange:function(){return e.onDeleteStateChanged(!e.deleteState)},label:e.t("insp.cody_wizard.step_command.delete_state_label")}))}),Lj=Object(Ue.b)()(function(e){var t=!e.command||e.deleteState;return he.createElement(UO.a,{disabled:t,inline:!0,className:t?"fadeout":"fadein"},he.createElement(Sp.a,{value:1,checked:e.newAggregate,disabled:e.disabled||t,toggle:!0,onChange:function(){return e.onNewAggregateChanged(!e.newAggregate)},label:e.t("insp.cody_wizard.step_command.new_aggregate_select_label")}))}),Rj=function(e){var t=e.aggregateCommand;return he.createElement(UO.a,{disabled:e.disabled||t,inline:!0},he.createElement(Sp.a,{value:1,checked:e.streamLocking||e.aggregateCommand,disabled:e.disabled||t,toggle:!0,onChange:function(){return e.onStreamLockingChanged(!e.streamLocking)},label:"Optimistic Stream Locking"}))},Bj=function(e){var t=e.getParsedMetadata();return t.commands||(t.commands=[]),t.views||(t.views=[]),t},Dj=Object(Ue.b)()(function(e){return he.createElement(Vx,{label:e.label,content:e.content,popupContent:he.createElement(he.Fragment,null,he.createElement("p",null,e.t("insp.cody_wizard.editor.projector.help1")),he.createElement("p",null,e.t("insp.cody_wizard.editor.projector.help2")),he.createElement("p",null,e.t("insp.cody_wizard.editor.projector.help3")),he.createElement("p",null,e.t("insp.cody_wizard.editor.contextVariables")),he.createElement("ul",null,he.createElement("li",null,"event: event data"),he.createElement("li",null,"meta: event metadata")),he.createElement("p",null,e.t("insp.cody_wizard.editor.autocomplete")),he.createElement("p",null,he.createElement("a",{href:"https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#projector-rules",onClick:function(e){return e.stopPropagation()},target:"_blank",rel:"nofollow"},e.t("app.learnMore"))))})}),Pj=Object(Ue.b)()(function(e){return he.createElement(Vx,{label:e.label,content:e.content,popupContent:he.createElement(he.Fragment,null,he.createElement("p",null,e.t("insp.cody_wizard.editor.resolver.help1")),he.createElement("p",null,e.t("insp.cody_wizard.editor.resolver.help2")),he.createElement("p",null,e.t("insp.cody_wizard.editor.contextVariables")),he.createElement("ul",null,he.createElement("li",null,"query: query data"),he.createElement("li",null,"meta: query metadata"),he.createElement("li",null,"Query Dependencies")),he.createElement("p",null,e.t("insp.cody_wizard.editor.autocomplete")),he.createElement("p",null,he.createElement("a",{href:"https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#resolver-rules",onClick:function(e){return e.stopPropagation()},target:"_blank",rel:"nofollow"},e.t("app.learnMore"))))})}),zj=function(e,t){var n={type:"array",items:{$ref:"#/definitions/rule_definition"},definitions:Ox(jx(wx("data")),e.getObjectProperties(),["data"],Mj(e))};return JSON.stringify(n)},Mj=function(e){var t=["meta.user.userId"];return e.getObjectProperties().forEach(function(e){t.push("data.".concat(e))}),t},Uj={},Fj=Object(Ue.b)()(function(e){var t=Object(he.useRef)(null),n=Object(he.useState)(!1),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(he.useState)(!1),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(Fe.useSelector)(lx("initialize-rules")),l=Object(Fe.useDispatch)(),m=Lc(e.initializeRules,null,2);Object(he.useEffect)(function(){if(t.current){var n=!1;e.sessionId&&"string"===typeof Uj[e.sessionId]&&(m=Uj[e.sessionId],n=!0),t.current.initializeModel({fileId:"".concat(e.elementId,"-initialize-rules.json"),language:"json",value:m,schema:zj(e.dataSchema,e.ctx)}),d(n)}},[e.elementId,m,e.dataSchema.toString()]),Object(he.useEffect)(function(){e.autofocus&&t.current&&t.current.focus()},[e.autofocus]);return he.createElement(UO.a,null,c&&he.createElement(nt.a,{error:!0,size:"small",content:e.t("insp.cody_wizard.schema_editor.invalid_json"),icon:"warning",style:{display:"flex"}}),he.createElement(px,{expanded:u.expanded,double:u.double,onExpandChanged:function(e,t){return l(SE("initialize-rules",e,!!t))}}),he.createElement($v,{containerId:"cody-event-apply-rules-editor-".concat(e.sessionId),ref:t,repairJson:!0,options:{fontSize:12,folding:!0,glyphMargin:!1,lineNumbers:!0,lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,mouseWheelZoom:!0,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1},readOnly:e.readonly,fixedOverflowWidgets:!0},className:"code editor"+(a?" focus":"")+(u.expanded?" expanded":"")+(u.double?" double":""),onBlur:function(){if(t.current){var n=t.current.retrievePayload(),r=function(t,n){if(""===t)return e.onRulesChanged(void 0),e.sessionId&&Uj[e.sessionId]&&delete Uj[e.sessionId],!0;try{var r=Rc(t);return e.onRulesChanged(r),e.sessionId&&Uj[e.sessionId]&&delete Uj[e.sessionId],!0}catch(a){return console.error("[CodyWizard] Initialize Rules Editor invalid JSON: ",a),n||d(!0),!1}}(n);o(!1),!r&&e.sessionId&&(Uj[e.sessionId]=n)}},onFocus:function(){o(!0)}}))}),Gj=function(e){return Object(Ye.a)({},e,{rule_then_insert_projection:{type:"object",additionalProperties:!1,required:["insert"],properties:{insert:{type:"object",additionalProperties:!1,required:["id","set"],markdownDescription:"Add new information to the collection.\n\n[Learn More](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#insert-information)",properties:{id:Ex("Set the id of new information.\n\nType: ".concat(vx)),set:{$ref:"#/definitions/rule_then_prop_mapping"},meta:{$ref:"#/definitions/rule_then_prop_mapping"},version:{type:"number"}}}}},rule_then_upsert_projection:{type:"object",additionalProperties:!1,required:["upsert"],properties:{upsert:{type:"object",additionalProperties:!1,required:["id","set"],properties:{id:Ex("Set the id of information.\n\nType: ".concat(vx)),set:{$ref:"#/definitions/rule_then_prop_mapping"},meta:{$ref:"#/definitions/rule_then_prop_mapping"},version:{type:"number"}}}}},rule_then_update_projection:{type:"object",additionalProperties:!1,required:["update"],properties:{update:{type:"object",additionalProperties:!1,required:["filter","set"],properties:{filter:{$ref:"#/definitions/resolve_filter_types"},set:{$ref:"#/definitions/rule_then_prop_mapping"},meta:{$ref:"#/definitions/rule_then_prop_mapping"},version:{type:"number"},loadDocIntoVariable:{type:"string"}}}}},rule_then_replace_projection:{type:"object",additionalProperties:!1,required:["replace"],properties:{replace:{type:"object",additionalProperties:!1,required:["filter","set"],properties:{filter:{$ref:"#/definitions/resolve_filter_types"},set:{$ref:"#/definitions/rule_then_prop_mapping"},meta:{$ref:"#/definitions/rule_then_prop_mapping"},version:{type:"number"},loadDocIntoVariable:{type:"string"}}}}},rule_then_delete_projection:{type:"object",additionalProperties:!1,required:["delete"],properties:{delete:{type:"object",additionalProperties:!1,required:["filter"],properties:{filter:{$ref:"#/definitions/resolve_filter_types"}}}}}})},qj=function(e,t,n){var r={type:"object",additionalProperties:!1,required:["cases"],properties:{name:{type:"string"},live:{type:"boolean",default:!0},cases:{type:"array",items:{type:"object",additionalProperties:!1,required:["when","then"],properties:{given:{type:"array",items:{$ref:"#/definitions/rule_definition"}},when:{type:"string",enum:e},then:{oneOf:[{$ref:"#/definitions/rule_then_insert_projection"},{$ref:"#/definitions/rule_then_upsert_projection"},{$ref:"#/definitions/rule_then_update_projection"},{$ref:"#/definitions/rule_then_replace_projection"},{$ref:"#/definitions/rule_then_delete_projection"}]}}}}},definitions:Gj(Cx(jx(Lx(),wx(),kx(t),{rule_then_for_each:{type:"object",additionalProperties:!1,required:["forEach"],properties:{forEach:{type:"object",additionalProperties:!1,required:["variable","then"],markdownDescription:"**For Each**\n\nExecute a rule for each *item* of an array. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#foreach)",properties:{variable:{type:"string",minLength:1},then:{$ref:"#/definitions/rule_then"}}}}}},{rule_then_execute_rules:{type:"object",additionalProperties:!1,required:["execute"],properties:{execute:{type:"object",additionalProperties:!1,required:["rules"],markdownDescription:"**Execute Rules**\n\nExecute a list of additional rules. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#execute-rules)",default:{rules:[]},properties:{rules:{type:"array",items:{$ref:"#/definitions/rule_definition"},minItems:1,default:[]}}}}}},Nx())))};return JSON.stringify(r)},Vj={},Wj=Object(Ue.b)()(function(e){var t=Object(he.useRef)(null),n=Object(he.useState)(!1),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(he.useState)(!1),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(Fe.useSelector)(lx("projection")),l=Object(Fe.useDispatch)(),m=Lc(e.projection,null,2);Object(he.useEffect)(function(){if(t.current){var n=!1;e.sessionId&&"string"===typeof Vj[e.sessionId]&&(m=Vj[e.sessionId],n=!0);var r=["AuthService"];e.possibleServices.forEach(function(e){var t=wm(e);r.includes(t)||r.push(t)}),t.current.initializeModel({fileId:"".concat(e.sessionId,"-projection.json"),language:"json",value:m,schema:qj(e.possibleEvents.map(function(e){return e.getTechnicalName()}).toArray(),r,e.ctx)}),d(n)}},[e.sessionId,m]),Object(he.useEffect)(function(){e.autofocus&&t.current&&t.current.focus()},[e.autofocus]);return he.createElement(UO.a,null,c&&he.createElement(nt.a,{error:!0,size:"small",content:e.t("insp.cody_wizard.schema_editor.invalid_json"),icon:"warning",style:{display:"flex"}}),he.createElement(px,{leftSideSlot:e.toolbarSlot,expanded:u.expanded,double:u.double,onExpandChanged:function(e,t){return l(SE("projection",e,!!t))}}),he.createElement($v,{containerId:"cody-projection-editor-".concat(e.sessionId),ref:t,repairJson:!0,options:{fontSize:12,folding:!0,glyphMargin:!1,lineNumbers:!0,lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,mouseWheelZoom:!0,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1},readOnly:e.readonly,fixedOverflowWidgets:!0},className:"code editor"+(a?" focus":"")+(u.expanded?" expanded":"")+(u.double?" double":""),onBlur:function(){if(t.current){var n=t.current.retrievePayload(),r=function(t,n){if(""===t)return e.onProjectionChanged(void 0),e.sessionId&&Vj[e.sessionId]&&delete Vj[e.sessionId],!0;try{var r=Rc(t);return e.onProjectionChanged(r),e.sessionId&&Vj[e.sessionId]&&delete Vj[e.sessionId],!0}catch(a){return console.error("[CodyWizard] Projection Editor invalid JSON: ",a),n||d(!0),!1}}(n);o(!1),!r&&e.sessionId&&(Vj[e.sessionId]=n)}},onFocus:function(){o(!0)}}))}),Hj={},$j=Object(Ue.b)()(function(e){var t=JO(e.boardId),n=Object(he.useRef)(null),r=Object(he.useState)(!1),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(he.useState)(!1),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(Fe.useSelector)(lx("query-schema")),m=Object(Fe.useDispatch)(),p=e.schema?e.schema.toString():"";Object(he.useEffect)(function(){if(n.current){var r=!1;e.sessionId&&"string"===typeof Hj[e.sessionId]&&(p=Hj[e.sessionId],r=!0),n.current.initializeModel({fileId:"".concat(e.sessionId,"-query-schema.json"),language:"json",value:p,schema:e.schema&&e.schema.isShorthand()?fx(yx(t)):void 0}),u(r)}},[e.sessionId,p]),Object(he.useEffect)(function(){e.autofocus&&n.current&&n.current.focus()},[e.autofocus]);return he.createElement(UO.a,null,d&&he.createElement(nt.a,{error:!0,size:"small",content:e.t("insp.cody_wizard.query_schema_editor.invalid_json"),icon:"warning",style:{display:"flex"}}),he.createElement(px,{leftSideSlot:e.toolbarSlot,expanded:l.expanded,double:l.double,onExpandChanged:function(e,t){return m(SE("query-schema",e,!!t))}}),he.createElement($v,{containerId:"cody-query-schema-editor-".concat(e.sessionId),ref:n,repairJson:!0,options:{fontSize:12,folding:!0,glyphMargin:!1,lineNumbers:!0,lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,mouseWheelZoom:!0,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1},readOnly:e.readonly,fixedOverflowWidgets:!0},className:"code editor small"+(o?" focus":"")+(l.expanded?" expanded":"")+(l.double?" double":""),onBlur:function(){if(n.current){var t=n.current.retrievePayload(),r=function(t,n){if(""===t&&e.onSchemaRemoved)return e.onSchemaRemoved(),e.sessionId&&Hj[e.sessionId]&&delete Hj[e.sessionId],!0;try{var r=Rc(t);return e.onSchemaChanged(new lm(r)),e.sessionId&&Hj[e.sessionId]&&delete Hj[e.sessionId],!0}catch(a){return console.error("[CodyWizard] Query Schema Editor invalid JSON: ",a),n||u(!0),!1}}(t);i(!1),!r&&e.sessionId&&(Hj[e.sessionId]=t)}},onFocus:function(){i(!0)}}))}),Jj=function(e,t,n){var r={type:"object",additionalProperties:!1,properties:{rules:{type:"array",markdownDescription:"Execute rules **before** the main **where** query is performed or provide the query resolver result via **information** context variable. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#resolver-rules)",items:{$ref:"#/definitions/rule_definition"}},where:{$ref:"#/definitions/resolve_where_rule_definition",markdownDescription:"Main query resolver rule. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#resolver-rules)"},orderBy:{markdownDescription:"Order the main query result. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#resolver-rules)",oneOf:[{$ref:"#/definitions/resolve_order_by"},{type:"array",items:{$ref:"#/definitions/resolve_order_by"}}]}},definitions:Object(Ye.a)({resolve_where_rule_definition:{oneOf:[{type:"object",properties:{rule:{type:"string",enum:["always"],markdownDescription:"This rule is always executed.\n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#resolver-rules)"},then:{$ref:"#/definitions/resolve_filter",markdownDescription:"Defines the resolve filter. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#resolver-rules)"}},required:["rule","then"],additionalProperties:!1},{type:"object",properties:{rule:{type:"string",enum:["condition"],markdownDescription:"This rule is executed **if** condition is met.\n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#resolver-rules)"},then:{$ref:"#/definitions/resolve_filter",markdownDescription:"Defines the resolve filter. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#resolver-rules)"},if:{$ref:"#/definitions/resolve_filter_expr"},else:{$ref:"#/definitions/resolve_filter_else",markdownDescription:"Alternative resolve filter, that is used if condition is not met. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#resolver-rules)"}},required:["rule","then","if"],additionalProperties:!1},{type:"object",properties:{rule:{type:"string",enum:["condition"]},then:{$ref:"#/definitions/resolve_filter",markdownDescription:"Defines the resolve filter. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#resolver-rules)"},if_not:{$ref:"#/definitions/resolve_filter_expr",markdownDescription:"This rule is executed **if** condition is **not** met.\n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#resolver-rules)"},else:{$ref:"#/definitions/resolve_filter_else",markdownDescription:"Alternative resolve filter, that is used if condition is met. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#resolver-rules)"}},required:["rule","then","if_not"],additionalProperties:!1}]}},xx(),Ix(e,t),Sx(void 0,t),Ax(n),{resolve_filter_else:{oneOf:[{$ref:"#/definitions/resolve_filter"},{type:"object",additionalProperties:!1,required:["execute"],properties:{execute:{type:"object",additionalProperties:!1,required:["rules"],markdownDescription:"Execute a rule instead of performing a resolve query.",properties:{rules:{type:"array",items:{$ref:"#/definitions/rule_definition"},minItems:1,maxItems:1,markdownDescription:"You can only run one rule e.g. to throw an error or log a message.\n\nIf you need more flexibility use the top level **rules** definition instead. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#resolver-rules)"}}}}}]}})};return r.definitions=Object(Ye.a)({},r.definitions,jx(Lx(),wx(),{rule_then_for_each:{type:"object",additionalProperties:!1,required:["forEach"],properties:{forEach:{type:"object",additionalProperties:!1,required:["variable","then"],markdownDescription:"**For Each**\n\nExecute a rule for each *item* of an array. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#foreach)",properties:{variable:{type:"string",minLength:1},then:{$ref:"#/definitions/rule_then"}}}}}},{rule_then_execute_rules:{type:"object",additionalProperties:!1,required:["execute"],properties:{execute:{type:"object",additionalProperties:!1,required:["rules"],markdownDescription:"**Execute Rules**\n\nExecute a list of additional rules. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#execute-rules)",default:{rules:[]},properties:{rules:{type:"array",items:{$ref:"#/definitions/rule_definition"},minItems:1,default:[]}}}}}},Nx(),Tx(n,t))),JSON.stringify(r)},Qj={},Yj=!1,Kj=Object(Ue.b)()(function(e){var t=JO(e.boardId),n=Object(he.useRef)(null),r=Object(he.useState)(!1),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(he.useState)(!1),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(Fe.useSelector)(lx("resolve")),m=Object(Fe.useDispatch)(),p=e.resolve?Lc(e.resolve,null,2):"";Object(he.useEffect)(function(){if(n.current){var r=!1;e.sessionId&&"string"===typeof Qj[e.sessionId]&&(p=Qj[e.sessionId],r=!0),n.current.initializeModel({fileId:"".concat(e.sessionId,"-resolve-config.json"),language:"json",value:p,schema:Jj(Zj(e.nodeSchema,t),Xj(e.querySchema),yx(t,!0))}),u(r)}},[e.sessionId,p,e.nodeSchema.toString(),e.querySchema.toString()]),Object(he.useEffect)(function(){e.autofocus&&n.current&&n.current.focus()},[e.autofocus]),Object(he.useEffect)(function(){Yj&&window.setTimeout(function(){Yj=!1},500)},[e.sessionId]);return he.createElement(UO.a,null,d&&he.createElement(nt.a,{error:!0,size:"small",content:e.t("insp.cody_wizard.schema_editor.invalid_json"),icon:"warning",style:{display:"flex"}}),he.createElement(px,{leftSideSlot:e.toolbarSlot,expanded:l.expanded,double:l.double,onExpandChanged:function(e,t){return m(SE("resolve",e,!!t))}}),he.createElement($v,{containerId:"cody-resolve-config-editor-".concat(e.sessionId),ref:n,onOpenInformationReference:function(e){var n=mx(lm.fromString(e),t);n&&(Yj=!0,m(IE(n.getId())))},repairJson:!0,options:{fontSize:12,folding:!0,glyphMargin:!1,lineNumbers:!0,lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,mouseWheelZoom:!0,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1},readOnly:e.readonly,fixedOverflowWidgets:!0},className:"code editor"+(o?" focus":"")+(l.expanded?" expanded":"")+(l.double?" double":""),onBlur:function(){if(n.current){var t=n.current.retrievePayload(),r=function(t,n){if(""===t)return e.onResolveChanged(void 0),e.sessionId&&Qj[e.sessionId]&&delete Qj[e.sessionId],!0;try{var r=Rc(t);return e.onResolveChanged(r),e.sessionId&&Qj[e.sessionId]&&delete Qj[e.sessionId],!0}catch(a){return console.error("[CodyWizard] Resolve Config Editor invalid JSON: ",a),n||u(!0),!1}}(t);i(!1),!r&&e.sessionId&&(Qj[e.sessionId]=t)}},onFocus:function(){i(!0)}}))}),Zj=function e(t,n){if(t.isRef())return e(t.resolveRef(n),n);if(t.isObject())return t.getObjectProperties();if(!t.isList())return[];var r=t.getListItemsSchema(new lm({}));return r.isRef()&&(r=r.resolveRef(n)),r.getObjectProperties()},Xj=function(e){var t=e.getObjectProperties().map(function(e){return"query.".concat(e)});return t.push("meta.user.userId"),t},ew=function(e){var t=""===e.collection?{color:"rgba(51, 51, 51, 0.6)"}:void 0;return he.createElement(UO.a,null,he.createElement(oE,{required:!0,text:e.collection,minWidth:20,charSize:OS,widthUnit:xS,padding:jS,placeholder:"my_collection",textStyle:t,disabled:e.disabled,onTextChanged:e.onCollectionChanged}))},tw=Object(Ue.b)()(function(e){var t=e.disabled||!e.vo;return he.createElement(UO.a,{disabled:t,inline:!0},he.createElement(Sp.a,{value:1,checked:e.isEntity,disabled:t,toggle:!0,onChange:function(){return e.onIsEntityChanged(!e.isEntity)},label:e.t("insp.cody_wizard.step_any_vo.is_entity_label")}))}),nw=Object(Ue.b)()(function(e){var t=e.disabled||!e.vo;return he.createElement(UO.a,{disabled:t,inline:!0},he.createElement(Sp.a,{value:1,checked:e.isProjection,disabled:t,toggle:!0,onChange:function(){return e.onProjectionChanged(!e.isProjection)},label:e.t("insp.cody_wizard.step_any_vo.is_projection_label")}))}),rw=Object(Ue.b)()(function(e){var t=e.disabled||!e.vo;return he.createElement(UO.a,{disabled:t,inline:!0},he.createElement(Sp.a,{value:1,checked:e.isQueryable,disabled:t,toggle:!0,onChange:function(){return e.onQueryableChanged(!e.isQueryable)},label:e.t("insp.cody_wizard.step_any_vo.is_queryable_label")}))}),aw=Object(Ue.b)()(function(e){var t=e.disabled||!e.vo;return he.createElement(UO.a,{disabled:t,inline:!0},he.createElement(Sp.a,{value:1,checked:e.isStored,disabled:t,toggle:!0,onChange:function(){return e.onStoredStateChanged(!e.isStored)},label:e.t("insp.cody_wizard.step_any_vo.is_stored_in_db_label")}))}),ow=function(e){var t=""===e.ns?{color:"rgba(51, 51, 51, 0.6)"}:void 0;return he.createElement(UO.a,null,he.createElement(oE,{required:!0,text:e.ns,minWidth:20,charSize:OS,widthUnit:xS,padding:jS,placeholder:"/Namespace",textStyle:t,disabled:e.disabled,onTextChanged:function(t){"/"!==t[0]&&(t="/"+t),e.onNsChanged(t)}}))},iw=function(e){return he.createElement("div",{className:"ui blue secondary menu",style:{margin:0,position:"sticky",top:0,backgroundColor:"#fff",zIndex:1e4}},e.visibleSections.map(function(t){var n="home",r="home";switch(t){case"schema":n="file code",r="Schema";break;case"uiSchema":n="desktop",r="UI Schema";break;case"businessRules":n="shield alternate",r="Business Rules";break;case"advancedSettings":n="sliders horizontal",r="Advanced Settings";break;case"query":n="sync alternate",r="Query & Resolver";break;case"projection":n="video",r="Projection";break;case"pageConfig":n="columns",r="Page Config";break;case"content":n="object group outline",r="Content"}return he.createElement("a",{key:t,title:r,className:"item ".concat(t===e.activeSection?"active":""),onClick:function(){return e.onSectionChanged(t)}},he.createElement("i",{className:"".concat(n," icon")}))}))},sw="",cw="schema",dw=Object(Ue.b)()(function(e){var t=NE(),n=(Object(Ke.a)(t,1)[0],JO(e.ctx.board.uid)),r=Object(he.useState)({}),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(he.useState)(!1),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(he.useState)(new lm({})),m=Object(Ke.a)(l,2),p=m[0],f=m[1],h=Object(he.useState)(new lm({})),g=Object(Ke.a)(h,2),b=g[0],y=g[1],v=Object(he.useState)(!1),E=Object(Ke.a)(v,2),O=(E[0],E[1],Object(he.useState)({})),x=Object(Ke.a)(O,2),j=x[0],w=x[1],k=Object(he.useState)(!1),I=Object(Ke.a)(k,2),S=I[0],C=I[1],_=Object(he.useState)({cases:[]}),T=Object(Ke.a)(_,2),A=T[0],N=T[1],L=Object(he.useState)(!1),R=Object(Ke.a)(L,2),B=R[0],D=R[1],P=Object(he.useState)(!1),z=Object(Ke.a)(P,2),M=z[0],U=z[1],F=Object(he.useState)(!1),G=Object(Ke.a)(F,2),q=G[0],V=G[1],W=Object(he.useState)(cw),H=Object(Ke.a)(W,2),$=H[0],J=H[1],Q=function(e){J(e),cw=e},Y=function(t){e.onUpdateMetadata&&e.onUpdateMetadata(Lc(t,null,2),!0),t.schema&&Lc(t.schema)!==Lc(p)&&(f(t.schema),K(t.schema)),t.querySchema&&Lc(t.querySchema)!==Lc(b)&&y(t.querySchema),t.projection&&Lc(t.projection)!==Lc(A)&&N(t.projection),i(t)},K=function(e){!B&&function(e,t){if(e.isList()&&e.getListItemsSchema(new lm({}).isRef())){var n=mx(e.getListItemsSchema(new lm({})),t);if(n&&nm(n))return!0}return!1}(e,n)&&D(!0)},Z=e.ctx.vo?e.ctx.vo.getVersion():0,X=e.ctx.vo?e.ctx.vo.getId():"";Object(he.useEffect)(function(){if(sw!==X&&ee(),e.ctx.vo){var t=em(e.ctx.vo),r=!1;if(t.schema&&!t.schema.isEmpty()?(f(t.schema),K(t.schema)):(t.schema=mw(e.ctx.vo),r=!0,gm(e.ctx.vo,Dc.event).length>0&&(U(!0),t.querySchema||(t.querySchema=lw(e.ctx.vo,t)||new lm({})),t.resolve||(t.resolve=hw(t.querySchema||new lm({}))))),sw!==X&&Object.keys(e.ctx.queryDependencies).length&&(C(!0),t.queryDependencies&&t.queryDependencies===e.ctx.queryDependencies||(t.queryDependencies=e.ctx.queryDependencies,r=!0)),w(e.ctx.queryDependencies),!t.uiSchema){var a=pw(t.schema||new lm({}),t.uiSchema,n,e.ctx);a&&(r=!0,t.uiSchema=a)}if(t.querySchema&&(y(t.querySchema),U(!0)),t.ns&&"/"!==t.ns||(t.ns=fw(e.ctx.vo),r=!0),"undefined"!==typeof t.collection&&"_collection"!==t.collection||(t.collection=uw(e.ctx.vo,t,n),r=!0),t.projection&&(N(t.projection),V(!0)),r)return VO(e.ctx.vo)&&(t.querySchema||(t.querySchema=new lm({})),t.resolve||(t.resolve=hw(t.querySchema))),void Y(t);i(t)}sw=X},[X,Z]);var ee=function(){i({}),u(!1),f(new lm({})),y(new lm({})),w({}),C(!1),N({cases:[]}),U(!1),V(!1)},te=function(e){e||(e=new lm({}));var t=o.entity;e.isList()&&(t=!1),Y(Object(Ye.a)({},o,{schema:e,entity:t}))},ne=function(e){var t=o.resolve||hw(e);Y(Object(Ye.a)({},o,{querySchema:e,resolve:t}))},re=function(){Y(Object(Ye.a)({},o,{querySchema:void 0,resolve:void 0}))},ae=function(e){e||(e={}),Y(Object(Ye.a)({},o,{queryDependencies:e})),window.setTimeout(function(){w(e)},100)},oe=function(e){if(!e){var t=Object(Ye.a)({},o);return delete t.uiSchema,void Y(t)}Y(Object(Ye.a)({},o,{uiSchema:e}))},ie=function(e){if(!e){var t=Object(Ye.a)({},o);return delete t.projection,void Y(t)}Y(Object(Ye.a)({},o,{projection:e}))},se=Object(he.useMemo)(function(){return["schema","uiSchema","query","projection","advancedSettings"]},[X,Z]);return se.includes($)||Q("schema"),he.createElement(he.Fragment,null,he.createElement(iw,{visibleSections:se,onSectionChanged:Q,activeSection:$}),he.createElement("form",{className:"ui form",onSubmit:function(e){e.preventDefault(),e.stopPropagation()}},"schema"===$&&he.createElement(he.Fragment,null,he.createElement(Vx,{label:"Namespace",content:he.createElement(he.Fragment,null,he.createElement(ow,{ns:o.ns||"",onNsChanged:function(e){Y(Object(Ye.a)({},o,{ns:e}))},disabled:!e.ctx.vo.isEnabled()}))}),he.createElement(Vx,{label:o.schema&&o.schema.isList()?"Item Identifier":"Identifier",content:he.createElement(he.Fragment,null,he.createElement(FO,{identifier:o.identifier||"",schema:o.schema||new lm({}),disabled:!e.ctx.vo||!e.ctx.vo.isEnabled(),onIdentifierChanged:function(e){var t=Object(Ye.a)({},o);""===e?delete t.identifier:t.identifier=e,Y(t)},identifierCandidates:GO(o.schema||new lm({}),n)}))}),he.createElement(tj,null),he.createElement(bx,{boardId:e.ctx.board.uid,sessionId:e.ctx.vo?e.ctx.vo.getId():void 0,schema:p,readonly:!e.ctx.vo.isEnabled(),onSchemaChanged:te,autofocus:d,codySuggestSlot:he.createElement($x,{hasSuggestions:!0,onSuggest:function(){var t=mw(e.ctx.vo);t.isEmpty()||te(t)},pointDirection:"down"})})),"uiSchema"===$&&he.createElement(he.Fragment,null,he.createElement(nj,{type:p.isList()?"table":"state"}),he.createElement(Cj,{boardId:e.ctx.board.uid,sessionId:e.ctx.vo?e.ctx.vo.getId():void 0,nodeSchema:p,schema:o.uiSchema||{},readonly:!e.ctx.vo.isEnabled(),onSchemaChanged:oe,tableSchema:tm(e.ctx.vo),toolbarSlot:he.createElement(sb.a,null,he.createElement($x,{hasSuggestions:!0,onSuggest:function(){var t=pw(o.schema||new lm({}),o.uiSchema,n,e.ctx,!1);t&&oe(t)},pointDirection:"down"}),he.createElement(Ni.a,{basic:!0,compact:!0,icon:"search",className:"noborder",content:e.t("insp.cody_wizard.ui_schema_editor.choose_icon"),as:"a",href:"https://pictogrammers.com/library/mdi/",target:"_blank"}))})),"query"===$&&he.createElement(he.Fragment,null,he.createElement(Vx,{label:"Query Schema"}),he.createElement(rw,{isQueryable:M,onQueryableChanged:function(t){t?ne(lw(e.ctx.vo,o)||new lm({})):re(),U(t)},vo:e.ctx.vo,ctx:e.ctx,disabled:!e.ctx.vo.isEnabled()}),he.createElement("div",{className:(M?"slidedown":"slideup")+" smooth"},he.createElement($j,{boardId:e.ctx.board.uid,sessionId:e.ctx.vo?e.ctx.vo.getId():void 0,schema:b,readonly:!e.ctx.vo.isEnabled(),onSchemaChanged:ne,onSchemaRemoved:re,toolbarSlot:he.createElement($x,{hasSuggestions:!0,onSuggest:function(){var t=lw(e.ctx.vo,o);t&&ne(t)},pointDirection:"down"})}),he.createElement("div",{className:"field"},he.createElement(Ni.a,{basic:!0,icon:S?"minus":"add",labelPosition:"left",size:"mini",content:e.t("insp.cody_wizard.step_policy.manage_dependencies")+" (".concat(Object.keys(j).length,")"),color:"blue",className:"text",onClick:function(){return C(!S)},disabled:!e.ctx.vo})),he.createElement("div",{className:(S?"slidedown":"slideup")+" smooth"},he.createElement(Hx,{messageType:"query",label:e.t("insp.cody_wizard.step_policy.dependencies_label"),content:he.createElement(he.Fragment,null,he.createElement(Gx,{boardId:e.ctx.board.uid,sessionId:e.ctx.vo?e.ctx.vo.getId():void 0,dependencies:j,messageSchema:b,autofocus:!1,readonly:!(!e.ctx.vo||e.ctx.vo.isEnabled()),onDependenciesChanged:ae,toolbarSlot:he.createElement($x,{hasSuggestions:!!(e.ctx.vo&&e.ctx.vo.getSources().filter(function(e){return[Dc.document,Dc.externalSystem].includes(e.getType())}).count()>0),onSuggest:function(){if(e.ctx.vo){var t=QO(e.ctx.vo,j,!1);Lc(t)!==Lc(j)&&ae(t)}},pointDirection:"down"})}))})),he.createElement(Pj,{label:"Query Resolver",content:he.createElement(he.Fragment,null,he.createElement(Kj,{boardId:e.ctx.board.uid,sessionId:e.ctx.vo?e.ctx.vo.getId():void 0,nodeSchema:p,querySchema:b,resolve:o.resolve,readonly:!e.ctx.vo.isEnabled(),onResolveChanged:function(e){Y(Object(Ye.a)({},o,{resolve:e,querySchema:b}))},toolbarSlot:he.createElement($x,{hasSuggestions:!0,onSuggest:function(){var e=o.querySchema||new lm({}),t=hw(e);Y(Object(Ye.a)({},o,{resolve:t,querySchema:e}))},pointDirection:"down"})}))}))),"projection"===$&&he.createElement(he.Fragment,null,he.createElement(Dj,{label:"Projection"}),he.createElement(nw,{isProjection:q,onProjectionChanged:function(t){ie(t?gw(e.ctx.vo,o,e.ctx,n):void 0),V(t)},vo:e.ctx.vo,ctx:e.ctx,disabled:!e.ctx.vo.isEnabled()}),he.createElement("div",{className:(q?"slidedown":"slideup")+" smooth"},he.createElement(Wj,{projection:A,ctx:e.ctx,onProjectionChanged:ie,possibleEvents:e.ctx.vo?yw(e.ctx.vo,e.ctx,n):Object(fe.List)(),possibleServices:n.getFilteredElementsByType(Dc.externalSystem),sessionId:e.ctx.vo?e.ctx.vo.getId():void 0,readonly:!e.ctx.vo.isEnabled(),toolbarSlot:he.createElement($x,{hasSuggestions:!0,onSuggest:function(){var t=gw(e.ctx.vo,o,e.ctx,n);Lc(o.projection)!==Lc(t)&&ie(t)},pointDirection:"down"})}))),"advancedSettings"===$&&he.createElement(he.Fragment,null,he.createElement(Vx,{label:"Classification",content:he.createElement(he.Fragment,null,p.isObject()&&he.createElement(tw,{isEntity:!!o.entity,vo:e.ctx.vo,onIsEntityChanged:function(e){Y(Object(Ye.a)({},o,{entity:e}))},disabled:!e.ctx.vo.isEnabled()}),he.createElement(aw,{isStored:WO(o),ctx:e.ctx,vo:e.ctx.vo,onStoredStateChanged:function(t){var r=Object(Ye.a)({},o);t?(r.collection=uw(e.ctx.vo,o,n),Y(r)):(r.collection=!1,r.projection&&delete r.projection,Y(r))},disabled:!e.ctx.vo.isEnabled()}),e.ctx.vo&&WO(o)&&he.createElement(Vx,{label:"Collection",content:he.createElement(he.Fragment,null,he.createElement(ew,{collection:o.collection||"_collection",onCollectionChanged:function(e){Y(Object(Ye.a)({},o,{collection:e}))},disabled:!e.ctx.vo.isEnabled()}))}))}),he.createElement(Vx,{label:"Initialize Rules",content:he.createElement(he.Fragment,null,he.createElement(Fj,{elementId:e.ctx.vo?e.ctx.vo.getId():"",sessionId:e.ctx.vo?e.ctx.vo.getId():void 0,initializeRules:o.initialize||[],dataSchema:p,readonly:!(!e.ctx.vo||e.ctx.vo.isEnabled()),ctx:e.ctx,onRulesChanged:function(e){if(!e){var t=Object(Ye.a)({},o);return delete t.initialize,void Y(t)}Y(Object(Ye.a)({},o,{initialize:e}))}}))}))))}),uw=function(e,t,n){if(t.schema&&t.schema.getListItemsSchema(new lm({})).isRef()){var r=mx(t.schema.getListItemsSchema(new lm({})),n);if(r){var a=em(r);if(a.collection)return a.collection}}var o=[].concat(Object(eo.a)(gm(e,Dc.document)),Object(eo.a)(bm(e,Dc.document))),i=!0,s=!1,c=void 0;try{for(var d,u=o[Symbol.iterator]();!(i=(d=u.next()).done);i=!0){var l=d.value,m=em(l);if(m.collection)return m.collection}}catch(p){s=!0,c=p}finally{try{i||null==u.return||u.return()}finally{if(s)throw c}}return Nl(e.getTechnicalName()).constantName.toLowerCase()+"_collection"},lw=function(e,t){if(t.querySchema&&!t.querySchema.isEmpty())return t.querySchema;if(t.schema&&(t.schema.isObject()||t.schema.isRef())&&t.identifier){var n=new lm({});return n.setObjectProperty(t.identifier,t.schema.getObjectPropertySchema(t.identifier,new lm("string|format:uuid"))),n}},mw=function(e){var t=VO(e);if(t){var n=em(t);if(n.schema&&n.schema.isList()){var r=n.schema.getListItemsSchema(new lm({}));return r.isRef()?new lm({$ref:r.getRef("")}):r}var a=rm(t,n);return new lm({$items:a})}var o=qO(e);if(o){var i=pm(o);if(i.schema)return vm(o)?i.schema:new lm({$items:i.schema.toShorthand()})}var s=ej(e);return s||new lm({})},pw=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={},i=t&&t["ui:form"]||{},s=i.data||{};if(!t&&oI(r)&&!a&&r.command){var c=mm(r.command);c.uiSchema&&delete(t=c.uiSchema)["ui:form"]}if(!t&&oI(r)&&a&&r.state){var d=em(r.state);d.uiSchema&&(t=d.uiSchema)}if(oI(r)&&a&&r.uiViews.forEach(function(t){var n=em(t);if(n.schema&&n.schema.equals(e)){var r=rm(t,n);s="$> page|data('".concat(r,"')")}}),e.isObject())return e.getObjectProperties().forEach(function(t){var i=e.getObjectPropertySchema(t,new lm({}));if(i.isString("uuid")){if(o[t]={"ui:widget":"hidden"},a&&oI(r)&&r.ui){var c=Bj(r.ui);c.route&&c.route.split("/").includes(":".concat(t))||"object"===typeof s&&(s[t]="$> uuid()")}}else if(i.isRef()&&dm(i.getRef(""))){var d,u,l=um(i.getRef("")),m=Object(Ke.a)(l,2),p=m[0],f=m[1],h=i.resolveRef(n),g=h.getObjectPropertySchema(f,new lm({})),b=f;if(h.getObjectProperties().forEach(function(e){var t=h.getObjectPropertySchema(e,new lm({}));t.isString()&&!t.isString("uuid")&&(b=e)}),g.isString("uuid"))n.getFilteredElementsByType(Dc.document).forEach(function(e){if(tm(e)){var t=em(e);(t.schema||new lm({})).getListItemsSchema(new lm({})).getRef()===p&&(d=e,u=t)}}),d&&(o[t]={"ui:widget":"DataSelect","ui:options":{data:rm(d,u),value:"$> data.".concat(f),text:"$> data.".concat(b)}})}}),a&&Object.keys(i)&&Object.keys(s).length>0&&(i.data=s,o["ui:form"]=i),Object.keys(o).length?Object(Ye.a)({},o,t):t;if(e.isList()&&!e.getListItemsSchema(new lm({})).isEmpty()){var u=e.getListItemsSchema(new lm({})).isRef()?e.getListItemsSchema(new lm({})).resolveRef(n):e.getListItemsSchema(new lm({})),l=[];if(!u.isObject())return t;if(u.getObjectProperties().forEach(function(e){var t=u.getObjectPropertySchema(e,new lm({}));if(t.isPrimitive()&&!t.isString("uuid")&&l.push(e),t.isRef()){var r=t.getRef(""),a=um(r),o=Object(Ke.a)(a,2),i=o[0],s=o[1];if(s){var c,d,m=t.resolveRef(n),p=m.getObjectPropertySchema(s,new lm({})),f=s;if(m.getObjectProperties().forEach(function(e){var t=m.getObjectPropertySchema(e,new lm({}));t.isString()&&!t.isString("uuid")&&(f=e)}),p.isString("uuid"))n.getFilteredElementsByType(Dc.document).forEach(function(e){if(tm(e)){var t=em(e);(t.schema||new lm({})).getListItemsSchema(new lm({})).getRef()===i&&(c=e,d=t)}}),c&&l.push({field:e,ref:{data:rm(c,d),value:"$> data.".concat(f)}})}}}),!l.length)return t;if(!t||!t["ui:table"])return Object(Ye.a)({"ui:table":{columns:l}},t);if(t&&t["ui:table"]){var m=t["ui:table"].columns;return l.forEach(function(e){var t="string"===typeof e?e:e.field,n=!1;m.forEach(function(e){("string"===typeof e?e:e.field)===t&&(n=!0)}),n||m.push(e)}),t["ui:table"].columns=m,t}}return t},fw=function(e){var t=VO(e);return t&&em(t).ns||ispConst.DEFAULT_DOC_NS},hw=function(e){if(!e.isObject()||e.isEmpty())return{where:{rule:"always",then:{filter:{any:!0}}}};var t=e.getObjectProperties()[0];return e.isRequired(t)?{where:{rule:"always",then:{filter:{eq:{prop:t,value:"$> query.".concat(t)}}}}}:{where:{rule:"condition",if:"query.".concat(t),then:{filter:{eq:{prop:t,value:"$> query.".concat(t)}}},else:{filter:{any:!0}}}}},gw=function(e,t,n,r){var a=bw(t),o=Bc(t.projection||{name:Nl(e.getTechnicalName()).className+"Projection",live:!0,cases:[]}),i=o.cases.map(function(e){return e.when}).map(function(e){var t=e.split(".");return t[t.length-1]}).map(function(e){return Nl(e).className});return yw(e,n,r).forEach(function(e){var t=Nl(e.getTechnicalName()).className;if(!i.includes(t)){var n=a?"$> event.".concat(a):"$> uuid()";o.cases.push({when:e.getTechnicalName(),then:{upsert:{id:n,set:"$> event"}}})}}),o},bw=function(e){if(e.identifier)return e.identifier},yw=function(e,t,n){var r=n.getSimilarElements(e);r=r.push(e);var a={};return r.forEach(function(e){gm(e,Dc.event).forEach(function(e){return a[e.getTechnicalName()]=e})}),Object(fe.List)(Object.values(a))},vw="",Ew="schema",Ow=Object(Ue.b)()(function(e){var t=NE(),n=(Object(Ke.a)(t,1)[0],JO(e.ctx.board.uid)),r=Object(he.useState)(null),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(he.useState)(null),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(he.useState)({aggregateCommand:!1}),m=Object(Ke.a)(l,2),p=m[0],f=m[1],h=Object(he.useState)(!1),g=Object(Ke.a)(h,2),b=g[0],y=g[1],v=Object(he.useState)(!1),E=Object(Ke.a)(v,2),O=E[0],x=E[1],j=Object(he.useState)({}),w=Object(Ke.a)(j,2),k=w[0],I=w[1],S=Object(he.useState)(!1),C=Object(Ke.a)(S,2),_=C[0],T=C[1],A=Object(he.useState)(Ew),N=Object(Ke.a)(A,2),L=N[0],R=N[1],B=function(e){R(e),Ew=e},D=function(t){e.onUpdateMetadata&&e.onUpdateMetadata(Lc(t,null,2),!0),f(t)},P=e.ctx.command?e.ctx.command.getId():"",z=e.ctx.command?e.ctx.command.getVersion():0;Object(he.useEffect)(function(){if(vw!==P&&M(),e.ctx.command){i(e.ctx.command);var t=mm(e.ctx.command),r=!1;if(e.ctx.commandDependencies&&(t.dependencies=e.ctx.commandDependencies),!t.uiSchema){var a=pw(t.schema||new lm({}),void 0,n,e.ctx,!0);a&&(r=!0,t.uiSchema=a)}if(!t.aggregateCommand&&e.ctx.state&&nm(e.ctx.state)&&(t.aggregateCommand=!0,t.newAggregate=kw(e.ctx,n,!0),r=!0),(!t.rules||t.rules&&0===t.rules.length)&&!e.ctx.aggregate&&e.ctx.events.count()>0){var o=Yx(e.ctx);t.rules=o,r=!0,e.onCtxChanged(Object(Ye.a)({},e.ctx,{commandHandler:o}))}r&&D(t),vw!==P&&t.streamId&&T(!0),f(t)}vw!==P&&Object.keys(e.ctx.commandDependencies).length&&(x(!0),I(e.ctx.commandDependencies)),vw=P},[P,z]),Object(he.useEffect)(function(){I(e.ctx.commandDependencies||{})},[e.ctx.commandDependencies]);var M=function(){i(null),u(null),f({aggregateCommand:!1}),y(!1),I({}),x(!1),T(!1)},U=function(e){if(!e){var t=Object(Ye.a)({},p);return delete t.schema,void D(t)}D(Object(Ye.a)({},p,{schema:e}))},F=function(e){if(!e){var t=Object(Ye.a)({},p);return delete t.uiSchema,void D(t)}D(Object(Ye.a)({},p,{uiSchema:e}))},G=function(t){var n;n=t||{},D(Object(Ye.a)({},p,{dependencies:n})),e.onCtxChanged(Object(Ye.a)({},e.ctx,{commandDependencies:n})),I(n)},q=function(e){if(e)D(Object(Ye.a)({},p,{streamId:e}));else{var t=Object(Ye.a)({},p);delete t.streamId,D(t)}},V=p.schema||lm.fromString("{}"),W=Object(he.useMemo)(function(){var t=["schema","uiSchema"];return e.ctx.aggregate||t.push("businessRules"),t.push("advancedSettings"),t},[P,z]);return W.includes(L)||B("schema"),he.createElement(he.Fragment,null,he.createElement(iw,{visibleSections:W,onSectionChanged:B,activeSection:L}),he.createElement("form",{className:"ui form",onSubmit:function(e){e.preventDefault(),e.stopPropagation()}},"schema"===L&&he.createElement(he.Fragment,null,he.createElement(tj,null),he.createElement(bx,{boardId:e.ctx.board.uid,sessionId:e.ctx.command?e.ctx.command.getId():void 0,schema:V,readonly:!(!o||o.isEnabled()),onSchemaChanged:U,autofocus:b,codySuggestSlot:he.createElement($x,{hasSuggestions:!0,onSuggest:function(){if(e.ctx.state){var t=em(e.ctx.state);if(t.schema&&!t.schema.isEmpty())return void U(t.schema)}var n=e.ctx.events.first(void 0);if(n){var r=pm(n);if(r.schema&&!r.schema.isEmpty())return void U(r.schema)}if(e.ctx.uiViews.first(void 0)){var a=e.ctx.uiViews.first(),o=em(a);if(o.schema&&(o.schema.isObject()||o.schema.isRef()))return void U(o.schema)}var i=e.ctx.command?ej(e.ctx.command):new lm({});i.isEmpty()?U(new lm({})):U(i)},pointDirection:"down"})})),"uiSchema"===L&&he.createElement(he.Fragment,null,he.createElement(nj,{type:"command"}),he.createElement(Cj,{boardId:e.ctx.board.uid,sessionId:e.ctx.command?e.ctx.command.getId():void 0,nodeSchema:p.schema||lm.fromString("{}"),schema:p.uiSchema||{},readonly:!(!o||o.isEnabled()),onSchemaChanged:F,buttonSchema:!0,formSchema:!0,toolbarSlot:he.createElement(sb.a,null,he.createElement($x,{hasSuggestions:!0,onSuggest:function(){if(e.ctx.state){var t=em(e.ctx.state);if(t.uiSchema){var r=Object(Ye.a)({},p.uiSchema&&p.uiSchema["ui:button"]?{"ui:button":p.uiSchema["ui:button"]}:{},t.uiSchema);return void F(r)}}var a=pw(p.schema||new lm({}),p.uiSchema,n,e.ctx,!0);a&&F(a)},pointDirection:"down"}),he.createElement(Ni.a,{basic:!0,compact:!0,icon:"search",className:"noborder",content:e.t("insp.cody_wizard.ui_schema_editor.choose_icon"),as:"a",href:"https://pictogrammers.com/library/mdi/",target:"_blank"}))})),"businessRules"===L&&he.createElement(he.Fragment,null,he.createElement("div",{className:"field"},he.createElement(Hx,{messageType:"command",label:"Command Handler",content:he.createElement(he.Fragment,null,he.createElement(Ni.a,{basic:!0,icon:O?"minus":"add",labelPosition:"left",size:"mini",content:e.t("insp.cody_wizard.step_aggregate.manage_dependencies")+" (".concat(Object.keys(k).length,")"),color:"blue",className:"text",onClick:function(){return x(!O)},disabled:!o||!o.isEnabled()}))}),he.createElement("div",{className:(O?"slidedown":"slideup")+" smooth"},he.createElement(Gx,{boardId:e.ctx.board.uid,dependencies:k,messageSchema:p.schema||lm.fromString("{}"),autofocus:!1,onDependenciesChanged:G,readonly:!o||!o.isEnabled(),sessionId:e.ctx.command?e.ctx.command.getId():void 0,toolbarSlot:he.createElement($x,{hasSuggestions:!!(e.ctx.command&&e.ctx.command.getSources().filter(function(e){return[Dc.document,Dc.externalSystem,Dc.event].includes(e.getType())}).count()>0),onSuggest:function(){if(e.ctx.command){var t=QO(e.ctx.command,k);Lc(t)!==Lc(k)&&G(t)}},pointDirection:"down"})}))),he.createElement(Wx,{isAggregate:p.aggregateCommand,label:e.t("insp.cody_wizard.step_aggregate.rules_label"),content:he.createElement(he.Fragment,null,he.createElement(Px,{rules:p.rules||[],boardId:e.ctx.board.uid,elementId:e.ctx.command?e.ctx.command.getId():"",sessionId:e.ctx.command?e.ctx.command.getId():void 0,commandSchema:V,dependencies:k,onRulesChanged:function(t){t||(t=[]),e.onCtxChanged(Object(Ye.a)({},e.ctx,{commandHandler:t})),D(Object(Ye.a)({},p,{rules:t}))},autofocus:!1,possibleEvents:e.ctx.events,readonly:!o||!o.isEnabled()}))})),"advancedSettings"===L&&he.createElement(he.Fragment,null,he.createElement(Vx,{label:"Classification",content:he.createElement(he.Fragment,null,he.createElement(Tj,{command:o,aggregateCommand:p.aggregateCommand,ctx:e.ctx,onAggregateCommandChanged:function(e){D(Object(Ye.a)({},p,{aggregateCommand:e}))}}),p.aggregateCommand&&he.createElement(Lj,{command:e.ctx.command||d,disabled:!(!o||o.isEnabled()),ctx:e.ctx,newAggregate:p.newAggregate,deleteState:p.deleteState,onNewAggregateChanged:function(e){D(Object(Ye.a)({},p,{newAggregate:e}))}}),p.aggregateCommand&&he.createElement(Nj,{command:e.ctx.command||d,disabled:!(!o||o.isEnabled()),deleteState:p.deleteState,newAggregate:p.newAggregate,onDeleteStateChanged:function(e){D(Object(Ye.a)({},p,{deleteState:e,deleteHistory:!1}))}}),p.aggregateCommand&&he.createElement(Aj,{command:e.ctx.command||d,disabled:!(!o||o.isEnabled()),deleteHistory:p.deleteHistory,deleteState:p.deleteState,onDeleteHistoryChanged:function(e){D(Object(Ye.a)({},p,{deleteHistory:e}))}}),he.createElement(Rj,{command:o,aggregateCommand:p.aggregateCommand,streamLocking:_,ctx:e.ctx,onStreamLockingChanged:function(e){T(e),e||q("")}}),_&&he.createElement(aj,{ctx:e.ctx,streamId:p.streamId||"",sessionId:e.ctx.command?e.ctx.command.getId():void 0,autofocus:_,readonly:!o||!o.isEnabled(),boardId:e.ctx.board.uid,onStreamIdChanged:q}))}))))}),xw=function(e,t){var n=e.events.first(void 0),r=e.state;if(t&&r){var a=em(r);if(a.schema)return a.schema}if(n){var o=pm(n);if(o.schema)return o.schema}if(r){var i=em(r);if(i.identifier){var s={};return s[i.identifier]="string|format:uuid",new lm(s)}}return new lm({})},jw=function(e){if(e.state){var t=em(e.state);if(t.uiSchema)return t.uiSchema;if(t.identifier){var n={};return n[t.identifier]={"ui:widget":"hidden"},n}}return{}},ww=function(e){if(e.events.first(void 0)){var t=e.events.first(Wm({})).getTechnicalName(),n=Nl(t).title,r=nx(n);console.log("[CodyWizard] tagged words: ",r);var a=r.filter(function(e){return!rx(e)}).map(function(e){return e.token});return r.filter(function(e){return rx(e)}).map(function(e){return function(e){if(!rx(e))return"";var t=ex.toBaseForm(e.token);return!cx(t)&&sx(t)?t+"e":t}(e)}).join(" ")+" "+a.join(" ")}return""},kw=function(e,t,n){return e.aggregate?0===t.getFilteredElementsByTypeAndLabel(Dc.aggregate,e.aggregate.getTechnicalName()).filter(function(t){return t.getId()!==e.aggregate.getId()}).count():e.state?0===t.getFilteredElementsByTypeAndLabel(Dc.document,e.state.getTechnicalName()).filter(function(t){return t.getId()!==e.state.getId()}).count():!!n},Iw=function(e,t,n){var r={type:"array",items:{$ref:"#/definitions/rule_definition"},definitions:Ox(jx(wx("information")),t.getObjectProperties(),["information","event","meta"],Sw(e))};return JSON.stringify(r)},Sw=function(e){var t=["meta.user.userId"];return e.getObjectProperties().forEach(function(e){t.push("event.".concat(e))}),t},Cw={},_w=Object(Ue.b)()(function(e){var t=Object(he.useRef)(null),n=Object(he.useState)(!1),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(he.useState)(!1),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(Fe.useSelector)(lx("event-apply-rules")),l=Object(Fe.useDispatch)(),m=Lc(e.applyRules,null,2);Object(he.useEffect)(function(){if(t.current){var n=!1;e.sessionId&&"string"===typeof Cw[e.sessionId]&&(m=Cw[e.sessionId],n=!0),t.current.initializeModel({fileId:"".concat(e.elementId,"-event-apply-rules.json"),language:"json",value:m,schema:Iw(e.eventSchema,e.informationSchema,e.ctx)}),d(n)}},[e.elementId,m,e.eventSchema.toString(),e.informationSchema.toString()]),Object(he.useEffect)(function(){e.autofocus&&t.current&&t.current.focus()},[e.autofocus]);return he.createElement(UO.a,null,c&&he.createElement(nt.a,{error:!0,size:"small",content:e.t("insp.cody_wizard.schema_editor.invalid_json"),icon:"warning",style:{display:"flex"}}),he.createElement(px,{expanded:u.expanded,double:u.double,onExpandChanged:function(e,t){return l(SE("event-apply-rules",e,!!t))}}),he.createElement($v,{containerId:"cody-event-apply-rules-editor-".concat(e.sessionId),ref:t,repairJson:!0,options:{fontSize:12,folding:!0,glyphMargin:!1,lineNumbers:!0,lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,mouseWheelZoom:!0,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1},readOnly:e.readonly,fixedOverflowWidgets:!0},className:"code editor"+(a?" focus":"")+(u.expanded?" expanded":"")+(u.double?" double":""),onBlur:function(){if(t.current){var n=t.current.retrievePayload(),r=function(t,n){if(""===t)return e.onRulesChanged(void 0),e.sessionId&&Cw[e.sessionId]&&delete Cw[e.sessionId],!0;try{var r=Rc(t);return e.onRulesChanged(r),e.sessionId&&Cw[e.sessionId]&&delete Cw[e.sessionId],!0}catch(a){return console.error("[CodyWizard] Event Apply Rules Editor invalid JSON: ",a),n||d(!0),!1}}(n);o(!1),!r&&e.sessionId&&(Cw[e.sessionId]=n)}},onFocus:function(){o(!0)}}))}),Tw=Object(Ue.b)()(function(e){var t=e.ctx.events.first(null),n=t?t.getVersion():0,r=NE(),a=(Object(Ke.a)(r,1)[0],JO(e.ctx.board.uid),Object(he.useState)(null)),o=Object(Ke.a)(a,2),i=o[0],s=o[1],c=Object(he.useState)({}),d=Object(Ke.a)(c,2),u=d[0],l=d[1],m=Object(he.useState)(!1),p=Object(Ke.a)(m,2),f=p[0],h=p[1],g=Object(he.useState)(new lm({})),b=Object(Ke.a)(g,2),y=b[0],v=b[1],E=Object(he.useState)(new lm({})),O=Object(Ke.a)(E,2),x=O[0],j=O[1],w=function(t){e.onUpdateMetadata&&e.onUpdateMetadata(Lc(t,null,2),!0),t.schema&&Lc(t.schema)!==Lc(y)&&v(t.schema),l(t)};Object(he.useEffect)(function(){if(k(),t){s(t);var n=pm(t),r=!1;n.schema&&!n.schema.isEmpty()||(n.schema=Aw(e.ctx),r=!0),Em(t)&&!n.applyRules&&(n.applyRules=[Lw()],r=!0),r?w(n):(l(n),v(n.schema))}},[t,n]),Object(he.useEffect)(function(){j(Rw(e.ctx))},[e.ctx.state]);var k=function(){s(null),l({}),h(!1),v(new lm({})),j(new lm({}))},I=function(e){if(!e){var t=Bc(u);return delete t.schema,void w(t)}w(Object(Ye.a)({},u,{schema:e}))},S=!!t&&Em(t);return he.createElement("form",{className:"ui form",onSubmit:function(e){e.preventDefault(),e.stopPropagation()}},he.createElement(tj,{content:he.createElement(he.Fragment,null,he.createElement(bx,{boardId:e.ctx.board.uid,sessionId:i?i.getId():void 0,schema:y,readonly:!(!i||i.isEnabled()),onSchemaChanged:I,autofocus:f}),he.createElement($x,{hasSuggestions:!0,onSuggest:function(){if(e.ctx.command){var n=mm(e.ctx.command);if(n.schema&&!n.schema.isEmpty())return void I(n.schema)}if(e.ctx.state){var r=em(e.ctx.state);if(r.schema&&!r.schema.isEmpty())return void I(r.schema)}var a=t?ej(t):new lm({});a.isEmpty()?I({}):I(a)}}))}),S&&he.createElement(Vx,{label:"Information Update",content:he.createElement(he.Fragment,null,he.createElement(_w,{elementId:i?i.getId():"",sessionId:i?i.getId():void 0,ctx:e.ctx,applyRules:u.applyRules||[Lw()],readonly:!(!i||i.isEnabled()),eventSchema:y,informationSchema:x,onRulesChanged:function(e){e||(e=[]),w(Object(Ye.a)({},u,{applyRules:e}))}}))}))}),Aw=function(e){if(e.command){var t=mm(e.command);if(t.schema)return t.schema}if(e.state){var n=em(e.state);if(n.schema)return n.schema}return new lm({})},Nw=function(e,t){if(e.state)return e.state.getTechnicalName()+" Changed";if(e.aggregate)return e.aggregate.getTechnicalName()+" Changed";if(e.command){var n=nx(Nl(e.command.getTechnicalName()).title),r=n.filter(function(e){return!rx(e)}).map(function(e){return e.token}),a=n.filter(function(e){return rx(e)}).map(function(e){return function(e){if(!rx(e))return"";var t=e.token;return dx[t]?dx[t]:/e$/i.test(t)?t+"d":/[aeiou]c/i.test(t)?t+"ked":/el$/i.test(t)?t+"ed":/[aeio][aeiou][dlmnprst]$/.test(t)?t+"ed":/[aeiou][bdglmprst]$/i.test(t)?t.replace(/(.+[aeiou])([bdglmnprst])/,"$1$2$2ed"):t+"ed"}(e)});return r.join(" ")+" "+a.join(" ")}return""},Lw=function(){return{rule:"always",then:{assign:{variable:"information",value:{$merge:["information","event"]}}}}},Rw=function(e){return e.state&&em(e.state).schema||new lm({})},Bw=function(e){return e.getParsedMetadata()},Dw=function(e,t){if(function(e){return e.getTags().contains(ispConst.TAG_CONNECTED)}(e))return e;var n=e.getTags().push(ispConst.TAG_CONNECTED);return t.changeNodeTags(e,n),t.getNode(e.getId())},Pw=function(e){return"undefined"!==typeof e.if},zw=function(e){return"undefined"!==typeof e.if_not},Mw=Object(Ue.b)()(function(e){return he.createElement(Vx,{label:e.label,content:e.content,popupContent:he.createElement(he.Fragment,null,he.createElement("p",null,e.t("insp.cody_wizard.editor.processor.help1")),he.createElement("p",null,e.t("insp.cody_wizard.editor.processor.help2")),he.createElement("p",null,e.t("insp.cody_wizard.editor.contextVariables")),he.createElement("ul",null,he.createElement("li",null,"event: event data"),he.createElement("li",null,"meta: event metadata"),he.createElement("li",null,"Processor Dependencies")),he.createElement("p",null,e.t("insp.cody_wizard.editor.autocomplete")),he.createElement("p",null,he.createElement("a",{href:"https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#processor-rules",onClick:function(e){return e.stopPropagation()},target:"_blank",rel:"nofollow"},e.t("app.learnMore"))))})}),Uw=function(e,t,n,r,a){var o={type:"array",items:{$ref:"#/definitions/rule_definition"},definitions:Object(Ye.a)({},Sx(void 0,a),Ax(r))};return o.definitions=Object(Ye.a)({},o.definitions,Cx(jx({rule_then_trigger_command:{type:"object",properties:{trigger:{type:"object",markdownDescription:"**Trigger Command**\n\nAutomatically trigger a new command without user intervention. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#trigger-command)",properties:{command:{type:"string",enum:e},mapping:{$ref:"#/definitions/rule_then_prop_mapping",markdownDescription:"Set command data"},meta:{$ref:"#/definitions/rule_then_prop_mapping",markdownDescription:"Set command metadata"}},additionalProperties:!1,required:["command","mapping"]}},additionalProperties:!1,required:["trigger"]}},kx(t),Lx(),wx(),{rule_then_for_each:{type:"object",additionalProperties:!1,required:["forEach"],properties:{forEach:{type:"object",additionalProperties:!1,required:["variable","then"],markdownDescription:"**For Each**\n\nExecute a rule for each *item* of an array. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#foreach)",properties:{variable:{type:"string",minLength:1},then:{$ref:"#/definitions/rule_then"}}}}}},{rule_then_execute_rules:{type:"object",additionalProperties:!1,required:["execute"],properties:{execute:{type:"object",additionalProperties:!1,required:["rules"],markdownDescription:"**Execute Rules**\n\nExecute a list of additional rules. \n\n[Learn more](https://wiki.prooph-board.com/board_workspace/Rule-Engine.html#execute-rules)",default:{rules:[]},properties:{rules:{type:"array",items:{$ref:"#/definitions/rule_definition"},minItems:1,default:[]}}}}}},function(e){return{rule_then_insert_information:{type:"object",additionalProperties:!1,required:["insert"],properties:{insert:{type:"object",additionalProperties:!1,required:["information","id","set"],properties:{information:{type:"string",enum:e},id:{type:"string",minLength:1},set:{$ref:"#/definitions/rule_then_prop_mapping"},meta:{$ref:"#/definitions/rule_then_prop_mapping"},version:{type:"number"}}}}},rule_then_upsert_information:{type:"object",additionalProperties:!1,required:["upsert"],properties:{upsert:{type:"object",additionalProperties:!1,required:["information","id","set"],properties:{information:{type:"string",enum:e},id:{type:"string",minLength:1},set:{$ref:"#/definitions/rule_then_prop_mapping"},meta:{$ref:"#/definitions/rule_then_prop_mapping"},version:{type:"number"}}}}},rule_then_update_information:{type:"object",additionalProperties:!1,required:["update"],properties:{update:{type:"object",additionalProperties:!1,required:["information","filter","set"],properties:{information:{type:"string",enum:e},filter:{$ref:"#/definitions/resolve_filter_types"},set:{$ref:"#/definitions/rule_then_prop_mapping"},meta:{$ref:"#/definitions/rule_then_prop_mapping"},version:{type:"number"}}}}},rule_then_replace_information:{type:"object",additionalProperties:!1,required:["replace"],properties:{replace:{type:"object",additionalProperties:!1,required:["information","filter","set"],properties:{information:{type:"string",enum:e},filter:{$ref:"#/definitions/resolve_filter_types"},set:{$ref:"#/definitions/rule_then_prop_mapping"},meta:{$ref:"#/definitions/rule_then_prop_mapping"},version:{type:"number"}}}}},rule_then_delete_information:{type:"object",additionalProperties:!1,required:["delete"],properties:{delete:{type:"object",additionalProperties:!1,required:["information","filter"],properties:{information:{type:"string",enum:e},filter:{$ref:"#/definitions/resolve_filter_types"}}}}}}}(n),Nx(),Tx(r,a)))),JSON.stringify(o)},Fw={},Gw=!1,qw=Object(Ue.b)()(function(e){var t=JO(e.boardId),n=Object(he.useRef)(null),r=Object(he.useState)(!1),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(he.useState)(!1),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(Fe.useSelector)(lx("policy-rules")),m=Object(Fe.useDispatch)(),p=[];for(var f in e.dependencies)"service"===e.dependencies[f].type&&p.push(e.dependencies[f].alias||f);var h=Lc(e.rules,null,2);Object(he.useEffect)(function(){if(n.current){var r=!1;e.sessionId&&"string"===typeof Fw[e.sessionId]&&(h=Fw[e.sessionId],r=!0),n.current.initializeModel({fileId:"".concat(e.sessionId,"-policy-rules.json"),language:"json",value:h,schema:Uw(e.policyTargets.filter(function(e){return e.getType()===Dc.command}).map(function(e){return wm(e)}).toArray(),p,ij(t),yx(t),Vw(e.eventSchema))}),u(r)}},[e.elementId,h,e.policyTargets,e.dependencies,e.eventSchema.toString()]),Object(he.useEffect)(function(){Gw&&window.setTimeout(function(){Gw=!1},500)},[e.sessionId]),Object(he.useEffect)(function(){e.autofocus&&n.current&&n.current.focus()},[e.autofocus]);return he.createElement(UO.a,null,d&&he.createElement(nt.a,{error:!0,size:"small",content:e.t("insp.cody_wizard.schema_editor.invalid_json"),icon:"warning",style:{display:"flex"}}),he.createElement(px,{expanded:l.expanded,double:l.double,onExpandChanged:function(e,t){return m(SE("policy-rules",e,!!t))}}),he.createElement($v,{containerId:"cody-policy-rules-editor-".concat(e.sessionId),ref:n,onOpenInformationReference:function(e){var n=mx(lm.fromString(e),t);n&&(Gw=!0,m(IE(n.getId())))},repairJson:!0,options:{fontSize:12,folding:!0,glyphMargin:!1,lineNumbers:!0,lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,mouseWheelZoom:!0,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1},readOnly:e.readonly,fixedOverflowWidgets:!0},className:"code editor"+(o?" focus":"")+(l.expanded?" expanded":"")+(l.double?" double":""),onBlur:function(){if(n.current){var t=n.current.retrievePayload();console.log("[CodyWizard] editor rules",t);var r=function(t,n){if(""===t)return e.onRulesChanged(void 0),e.sessionId&&Fw[e.sessionId]&&delete Fw[e.sessionId],!0;try{var r=Rc(t);return e.onRulesChanged(r),e.sessionId&&Fw[e.sessionId]&&delete Fw[e.sessionId],!0}catch(a){return console.error("[CodyWizard] Business Rules Editor invalid JSON: ",a),n||u(!0),!1}}(t);i(!1),!r&&e.sessionId&&(Fw[e.sessionId]=t)}},onFocus:function(){i(!0)}}))}),Vw=function(e){var t=e.getObjectProperties().map(function(e){return"event.".concat(e)});return t.push("meta.user.userId"),t},Ww=(Object(Ue.b)()(function(e){var t,n=e.selected?e.selected.getId():"",r=[],a=e.selected?Ww(e.selected,!!e.withNs):"",o=(t=e.nodeOptions.filter(function(t){return t.getId()!==n&&!(e.uniqueName&&Ww(t,!!e.withNs)===a)})).push.apply(t,Object(eo.a)(e.selected?[e.selected]:[])).map(function(t){return{key:t.getId(),text:Ww(t,!!e.withNs),value:t.getId(),icon:he.createElement(Xv,{cellType:t.getType()})}}).filter(function(t){return!e.uniqueName||!r.includes(t.text)&&(r.push(t.text),!0)}).toArray();return console.log("[CodyWizard] NodeSelect",e.selected,o),he.createElement(tt.a,{placeholder:e.placeholder||e.t("insp.cody_wizard.node_select.default_placeholder"),disabled:e.disabled,selection:!0,clearable:!0,options:o,onChange:function(t,n){return function(t){var n=e.nodeOptions.find(function(e){return e.getId()===t});e.onChange(n||null)}(n.value)},value:e.selected?e.selected.getId():"",search:!0})}),function(e,t){if(t&&e.getType()===Dc.document){var n=em(e);if(n.ns)return e.getName()+" (".concat(n.ns,")")}return e.getName()}),Hw=Object(Ue.b)()(function(e){var t,n=e.selected.map(function(e){return e.getId()}).toArray(),r=[],a=e.selected.map(function(t){return Ww(t,!!e.withNs)}).toArray(),o=(t=e.nodeOptions.filter(function(t){return!n.includes(t.getId())&&!(e.uniqueName&&a.includes(Ww(t,!!e.withNs)))})).push.apply(t,Object(eo.a)(e.selected.toArray())).map(function(t){return{key:t.getId(),text:Ww(t,!!e.withNs),value:t.getId(),icon:he.createElement(Xv,{cellType:t.getType()})}}).filter(function(t){return!e.uniqueName||!r.includes(t.text)&&(r.push(t.text),!0)}).toArray();return console.log("[CodyWizard] NodeSelect",e.selected,o),he.createElement(tt.a,{placeholder:e.placeholder||e.t("insp.cody_wizard.node_select.default_placeholder"),disabled:e.disabled,selection:!0,fluid:!0,multiple:!0,clearable:!0,options:o,onChange:function(t,n){return function(t){var n=e.nodeOptions.filter(function(e){return t.includes(e.getId())});e.onChange(n)}(n.value)},value:n,search:!0})}),$w="",Jw=Object(Ue.b)()(function(e){var t=e.ctx.policy,n=t?t.getVersion():0,r=t?t.getId():"",a=NE(),o=Object(Ke.a)(a,1)[0],i=JO(e.ctx.board.uid),s=Object(he.useState)(null),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(he.useState)({}),m=Object(Ke.a)(l,2),p=m[0],f=m[1],h=Object(he.useState)(!1),g=Object(Ke.a)(h,2),b=g[0],y=g[1],v=Object(he.useState)({}),E=Object(Ke.a)(v,2),O=E[0],x=E[1],j=Object(he.useState)(!1),w=Object(Ke.a)(j,2),k=w[0],I=w[1],S=Object(he.useState)(e.ctx.policyTargets),C=Object(Ke.a)(S,2),_=C[0],T=C[1],A=function(t){e.onUpdateMetadata&&e.onUpdateMetadata(Lc(t,null,2),!0),f(t)};Object(he.useEffect)(function(){if($w!==r&&N(),t){u(t);var n=Bw(t);f(n)}$w!==r&&Object.keys(e.ctx.policyDependencies).length&&I(!0),$w!==r&&Object.keys(e.ctx.policyDependencies).length&&(I(!0),x(e.ctx.policyDependencies)),T(e.ctx.policyTargets),$w=r},[r,n]),Object(he.useEffect)(function(){x(e.ctx.policyDependencies||{})},[e.ctx.policyDependencies]);var N=function(){u(null),f({}),y(!1),x({}),I(!1),T(Object(fe.List)([]))},L=function(e){e||(e=[]),A(Object(Ye.a)({},p,{rules:e}))},R=function(t){var n;t||(t={}),n=t,e.onCtxChanged(Object(Ye.a)({},e.ctx,{policyDependencies:n})),x(n),A(Object(Ye.a)({},p,{dependencies:t}))},B=i.getFilteredElementsByTypes([Dc.command,Dc.externalSystem]),D=e.ctx.event&&pm(e.ctx.event).schema||new lm({});return he.createElement("form",{className:"ui form",onSubmit:function(e){e.preventDefault(),e.stopPropagation()}},he.createElement("div",{className:"field"},he.createElement(Ni.a,{basic:!0,icon:k?"minus":"add",labelPosition:"left",size:"mini",content:e.t("insp.cody_wizard.step_policy.manage_dependencies")+" (".concat(Object.keys(O).length,")"),color:"blue",className:"text",onClick:function(){return I(!k)},disabled:!d})),he.createElement("div",{className:(k?"slidedown":"slideup")+" smooth"},he.createElement(Hx,{messageType:"event",label:e.t("insp.cody_wizard.step_policy.dependencies_label"),content:he.createElement(he.Fragment,null,he.createElement(Gx,{boardId:e.ctx.board.uid,sessionId:d?d.getId():void 0,dependencies:O,messageSchema:D,autofocus:!1,readonly:!(!d||d.isEnabled()),onDependenciesChanged:R}),he.createElement($x,{hasSuggestions:!!(d&&d.getSources().filter(function(e){return[Dc.document,Dc.externalSystem].includes(e.getType())}).count()>0),onSuggest:function(){if(d){var e=QO(d,O,!1);Lc(e)!==Lc(O)&&R(e)}}}))})),he.createElement(Mw,{label:e.t("insp.cody_wizard.step_policy.rules_label"),content:he.createElement(he.Fragment,null,he.createElement(Hw,{selected:_,nodeOptions:B,placeholder:e.t("insp.cody_wizard.step_policy.targets_placeholder"),uniqueName:!0,onChange:function(t){!function(t){if("sidebar"===e.mode&&d){var n=Zw(d,e.ctx,t,o),r=tk(o.getNode(d.getId()),e.ctx.board);if(n&&e.ctx.feature){var a=Ok(e.ctx.feature,tk(o.getNode(d.getId()),e.ctx.board),o);o.resizeNode(a,a.getSize())}e.onCtxChanged(r)}T(t)}(t),L(Qw(t,p,e.ctx))},disabled:!d||!d.isEnabled()}),he.createElement("p",null,"\xa0"),he.createElement(qw,{rules:p.rules||Qw(_,p,e.ctx),boardId:e.ctx.board.uid,elementId:d?d.getId():"",sessionId:d?d.getId():void 0,eventSchema:D,policyTargets:_,dependencies:O,onRulesChanged:L,autofocus:b,ctx:e.ctx,readonly:!(!d||d.isEnabled())}))}),he.createElement("div",{style:{marginTop:"100px"}}))}),Qw=function(e,t,n){var r=t.rules?Object(eo.a)(t.rules):[];return e.forEach(function(e){if(e.getType()===Dc.command){var t=wm(e);Yw(t,r)||r.push({rule:"always",then:{trigger:{command:wm(e),mapping:"event"}}})}}),r},Yw=function e(t,n){var r=!0,a=!1,o=void 0;try{for(var i,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;if(Kw(t,c.then))return!0;if("undefined"!==typeof c.then.execute&&e(t,c.then.execute.rules))return!0;if((Pw(c)||zw(c))&&c.else&&Kw(t,c.else))return!0}}catch(d){a=!0,o=d}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return!1},Kw=function e(t,n){return!(!function(e){return"undefined"!==typeof e.trigger}(n)||n.trigger.command!==t)||!(!function(e){return"undefined"!==typeof e.forEach}(n)||!e(t,n.forEach.then))},Zw=function(e,t,n,r){var a=t.policyTargets,o=a.map(function(e){return e.getId()}),i=n.map(function(e){return e.getId()}),s=a.filter(function(e){return!i.contains(e.getId())}),c=n.filter(function(e){return!o.contains(e.getId())});s.forEach(function(e){return r.deleteNode(e)});var d=a.last(void 0)||null,u=Pc.below,l=gS;if(r.isEventModelingEnabled()){if(u=Pc.right,!d){d=e,u=Pc.belowRight;var m=t.sliceApiLabel?t.sliceApiLabel.getGeometry().y-e.getGeometry().y-bS:vS;l={x:gS,y:m}}}else d||(d=e,u=Pc.right);return c.forEach(function(t){var n=Wm({id:r.createCellId(),type:t.getType(),name:t.getTechnicalName(),metadata:t.getMetadata()});r.addNodeNextToAnother(n,d,u,l),r.connectNodes(e,n),Dw(n,r),d=r.getNode(n.getId()),u=Pc.below}),c.count()>0||s.count()>0},Xw=function(e,t){var n=function(e){var t="On ";return e.event&&(t+=e.event.getTechnicalName()),t}(e),r=Cm(t).getSimilarElements(Wm({id:t.createCellId(),type:Dc.policy,name:n})),a=r.count()>0?Bw(r.first()):{rules:[]},o=Wm({id:t.createCellId(),type:Dc.policy,name:n,metadata:Lc(a,null,2)});if(e.event){if(t.isEventModelingEnabled()){var i=e.sliceApiLabel?e.event.getGeometry().y-e.sliceApiLabel.getGeometry().y-bS+yS:ES;t.addNodeNextToAnother(o,e.event,Pc.aboveRight,{x:gS,y:i})}else t.addNodeNextToAnother(o,e.event,Pc.right,gS);t.connectNodes(e.event,o,void 0,void 0,!0),ek(o,e,t),window.setTimeout(function(){t.selectNode(o)},200)}else alert("[CodyWizard] Unable to create policy. An event card is missing to connect the policy card to.")},ek=function(e,t,n){if(t.feature){var r=Ok(t.feature,tk(n.getNode(e.getId()),t.board),n);n.resizeNode(r,r.getSize())}},tk=function(e,t){switch(e.getType()){case Dc.event:return uk(e,t);case Dc.policy:return ak(e,t);case Dc.externalSystem:case Dc.command:return lk(e,t);case Dc.feature:return mk(e,t);default:throw new Error("Policy context cannot be created from this node type: ".concat(e.getType(),". This seems to be a developer bug. Please contact the prooph board team!"))}},nk=function(e){return"policy"===e.type},rk=function(e){switch(e.getType()){case Dc.policy:return!0;case Dc.event:return e.getTargets().filter(function(e){return e.getType()===Dc.policy}).count()>0;case Dc.command:case Dc.externalSystem:return e.getSources().filter(function(e){return e.getType()===Dc.policy}).count()>0;case Dc.feature:return e.children().filter(function(e){return e.getType()===Dc.policy}).count()>0;default:return!1}},ak=function(e,t){var n=e.getSources().filter(function(e){return e.getType()===Dc.event}).first(null),r=e.getTargets().filter(function(e){return e.getType()===Dc.command||e.getType()===Dc.externalSystem}),a=Bw(e),o=fk(e),i=null;return o&&t.eventModelingEnabled&&o.children().forEach(function(e){e.getTags().contains(ispConst.TAG_SLICE_API_LABEL)&&(i=e)}),{board:t,type:"policy",feature:pk(e),eventModel:o,policy:e,event:n,policyDependencies:a.dependencies||{},policyTargets:r,sliceApiLabel:i,nextStep:dk,previousStep:ck,installCodyGraphSuggestions:ok}},ok=function(e,t,n){var r=ck(e,t),a=dk(e,t);r&&ik(r,t,n),a&&sk(a,t,n)},ik=function(e,t,n){switch(e){case"policy":if(t.policy)return;n.setCodyLeftCb(function(){return Xw(t,n)});break;case"policyEvent":if(t.event)return;n.setCodyLeftCb(function(){return function(e,t){var n=Wm({id:t.createCellId(),type:Dc.event,name:""});if(e.policy){if(t.isEventModelingEnabled()){var r=e.sliceApiLabel?e.sliceApiLabel.getGeometry().y-e.policy.getGeometry().y:vS;t.addNodeNextToAnother(n,e.policy,Pc.belowLeft,{x:gS,y:r+vS})}else t.addNodeNextToAnother(n,e.policy,Pc.left,gS);t.connectNodes(n,e.policy,void 0,void 0,!0),ek(n,e,t),window.setTimeout(function(){t.selectNode(n)},200)}else alert("[CodyWizard] Unable to create event. A policy card is missing to connect the event card to.")}(t,n)});break;case"feature":if(t.feature||n.isEventModelingEnabled())return;n.setCodyLeftCb(function(){return function(e,t){var n=Ek(e),r=Wm({id:t.createCellId(),type:Dc.feature,name:n}),a=null,o=xk(e);o.forEach(function(e){var t=e.getParent();t&&t.getType()===Dc.boundedContext&&(a=t)}),a&&(o.forEach(function(e){var n=e.getParent();n&&n.getId()!==a.getId()&&t.switchParent(e,n)}),r=r.changeParent(a)),r=Ok(r,e,t),t.addNode(r),xk(e).forEach(function(e){return t.switchParent(e,r)}),t.selectNode(r)}(t,n)})}},sk=function(e,t,n){switch(e){case"policy":if(t.policy)return;n.setCodyRightCb(function(){return Xw(t,n)})}},ck=function(e,t){switch(e){case"command":case"externalSystem":return"policy";case"policy":return"policyEvent";case"policyEvent":return"feature";default:return null}},dk=function(e,t){switch(e){case"feature":return"policyEvent";case"policyEvent":return"policy";default:return null}},uk=function(e,t){var n=e.getTargets().filter(function(e){return e.getType()===Dc.policy}).first(void 0);if(n)return ak(n,t);var r=pk(e),a=fk(e),o=null;return a&&t.eventModelingEnabled&&a.children().forEach(function(e){e.getTags().contains(ispConst.TAG_SLICE_API_LABEL)&&(o=e)}),{board:t,type:"policy",policy:null,feature:r,eventModel:a,event:e,policyDependencies:{},policyTargets:Object(fe.List)([]),sliceApiLabel:o,nextStep:dk,previousStep:ck,installCodyGraphSuggestions:ok}},lk=function(e,t){var n=e.getSources().filter(function(e){return e.getType()===Dc.policy}).first(void 0);if(n)return ak(n,t);throw new Error("Cannot find policy source of ".concat(e.getType(),": ").concat(e.getName(),". Please connect a plicy with the card"))},mk=function(e,t){var n=e.children().filter(function(e){return e.getType()===Dc.policy||e.getType()===Dc.event}).first(void 0);if(n)return tk(n,t);var r=fk(e),a=null;return r&&t.eventModelingEnabled&&r.children().forEach(function(e){e.getTags().contains(ispConst.TAG_SLICE_API_LABEL)&&(a=e)}),{board:t,type:"policy",policy:null,feature:e,eventModel:r,event:null,policyDependencies:{},policyTargets:Object(fe.List)([]),sliceApiLabel:a,nextStep:dk,previousStep:ck,installCodyGraphSuggestions:ok}},pk=function(e){var t=e.getParent();return t&&t.getType()===Dc.feature?t:null},fk=function(e){var t=e.getParent();return t&&t.getType()===Dc.feature&&(t=t.getParent()),t&&t.getType()===Dc.boundedContext&&t.getTags().contains(ispConst.TAG_EVENT_MODEL)?t:null},hk=Object(Ue.b)()(function(e){var t=yk.map(function(e){return{key:e,text:e,value:e}});return he.createElement(UO.a,null,he.createElement(tt.a,{inline:!0,placeholder:e.t("insp.cody_wizard.feature_status_select.placeholder"),value:e.status,options:t,disabled:e.disabled,onChange:function(t,n){return e.onStatusChanged(n.value)},className:"cody-wizard-inline-select"}))}),gk=function(e){return""===e||null!==e.match(/^https?:\/\/.+$/)},bk=function(e){return he.createElement(oE,{text:e.link||"",placeholder:"https://issue.tracker.com/tasks/1234",charSize:1,fixedWidth:!0,widthUnit:"%",minWidth:100,onTextChanged:function(t){""===t?e.onLinkChanged(null):e.onLinkChanged(t)},disabled:e.disabled,validate:gk,textStyle:null===e.link?{color:"#909090"}:void 0})},yk=["important","planned","ready","deployed"],vk=Object(Ue.b)()(function(e){var t=NE(),n=Object(Ke.a)(t,1)[0],r=(JO(e.ctx.board.uid),Object(he.useState)(null)),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(he.useState)(void 0),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(he.useState)(null),m=Object(Ke.a)(l,2),p=m[0],f=m[1],h=e.ctx.feature?e.ctx.feature.getVersion():0;Object(he.useEffect)(function(){g(),e.ctx.feature?(i(e.ctx.feature),u(kk(e.ctx.feature)),f(n.getFeatureTaskLink(e.ctx.feature))):(u(void 0),f(null))},[e.ctx.feature,h]);var g=function(){i(null),u(void 0),f(null)};return he.createElement("form",{className:"ui form",onSubmit:function(e){e.preventDefault(),e.stopPropagation()}},he.createElement(Vx,{label:"Status",content:he.createElement(he.Fragment,null,he.createElement(hk,{status:d,disabled:!o||!o.isEnabled(),onStatusChanged:function(t){u(t),"sidebar"===e.mode&&o&&t&&n.changeFeatureStatus(o,t)}}))}),he.createElement(Vx,{label:"Task",content:he.createElement(he.Fragment,null,he.createElement(bk,{link:p,onLinkChanged:function(e){f(e),o&&n.setFeatureTaskLink(o,e)},disabled:!o||!o.isEnabled()}))}),he.createElement("div",{style:{marginTop:"100px"}}))}),Ek=function(e){if(oI(e))return e.command?e.command.getTechnicalName():ww(e);if(nk(e)){if(e.event)return"On ".concat(e.event.getTechnicalName());if(e.policy)return e.policy.getTechnicalName()}},Ok=function(e,t,n){if(n.isEventModelingEnabled())return e;var r,a,o,i,s=xk(t);if(0===s.count())return e;s.forEach(function(e){var t=n.getNode(e.getId());t&&(e=t);var s=e.getGeometry();e.getParent()&&e.getParent().getGeometry()&&(s={x:s.x+e.getParent().getGeometry().x,y:s.y+e.getParent().getGeometry().y});var c=e.getSize();(s.x<r||"undefined"===typeof r)&&(r=s.x),(s.y<a||"undefined"===typeof a)&&(a=s.y),(s.x+c.width>o||"undefined"===typeof o)&&(o=s.x+c.width),(s.y+c.height>i||"undefined"===typeof i)&&(i=s.y+c.height)});var c={x:r-160,y:a-160},d={width:Math.abs(o+160-(r-160)),height:Math.abs(a-160-(i+160))};return e.changeGeometry(c).changeSize(d)},xk=function(e){switch(e.type){case"dddAction":return wk(e);case"policy":return jk(e);case"feature":return e.feature.children();default:return Object(fe.List)([])}},jk=function(e){var t=[];return e.event&&t.push(e.event),e.policy&&t.push(e.policy),t.push.apply(t,Object(eo.a)(e.policyTargets.toArray())),Object(fe.List)(t)},wk=function(e){var t=[];return e.uiViews&&t.push.apply(t,Object(eo.a)(e.uiViews.toArray())),e.parentUi&&t.push(e.parentUi),e.ui&&t.push(e.ui),e.command&&t.push(e.command),e.aggregate&&t.push(e.aggregate),t.push.apply(t,Object(eo.a)(e.events.toArray())),e.state&&t.push(e.state),e.stateList&&t.push(e.stateList),Object(fe.List)(t)},kk=function(e){var t=e.getTags().toArray(),n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;if(yk.includes(s))return s}}catch(c){r=!0,a=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}},Ik=function(e,t){var n={};if(!nm(e))return n;var r=[];return t.schema.getObjectProperties().forEach(function(e){if(e!==t.identifier){var n=t.schema.getObjectPropertySchema(e,new lm({}));n&&n.isPrimitive()&&r.push({field:e,headerName:Nl(e).title,flex:1})}}),n["ui:table"]={columns:r},n},Sk="schema",Ck=Object(Ue.b)()(function(e){var t=NE(),n=(Object(Ke.a)(t,1)[0],JO(e.ctx.board.uid)),r=Object(he.useState)(null),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(he.useState)({}),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(he.useState)(!1),m=Object(Ke.a)(l,2),p=m[0],f=m[1],h=Object(he.useState)(!1),g=Object(Ke.a)(h,2),b=(g[0],g[1],Object(he.useState)(new lm({}))),y=Object(Ke.a)(b,2),v=y[0],E=y[1],O=e.ctx.state?e.ctx.state.getVersion():0,x=Object(he.useState)(Sk),j=Object(Ke.a)(x,2),w=j[0],k=j[1],I=function(e){k(e),Sk=e},S=function(t){e.onUpdateMetadata&&e.onUpdateMetadata(Lc(t,null,2),!0),t.schema&&Lc(t.schema)!==Lc(v)&&E(t.schema),u(t)};Object(he.useEffect)(function(){if(C(),e.ctx.state){i(e.ctx.state);var t=em(e.ctx.state),r=!1;if(t.schema&&!t.schema.isEmpty()||(t.schema=_k(e.ctx),r=!0),!t.uiSchema){var a=pw(t.schema||new lm({}),t.uiSchema,n,e.ctx);a&&(r=!0,t.uiSchema=a)}"undefined"!==typeof t.collection&&"_collection"!==t.collection||(t.collection=uw(e.ctx.state,t,n),r=!0),r&&S(t),u(t),E(t.schema)}},[e.ctx.state,O]);var C=function(){i(null),u({}),f(!1),E(new lm({}))},_=function(t){if(!t){var r=Bc(d);return delete r.schema,void S(r)}var a=pw(t,d.uiSchema,n,e.ctx);S(Object(Ye.a)({},d,{schema:t,uiSchema:a}))},T=function(e){if(!e){var t=Bc(d);return delete t.uiSchema,void S(t)}S(Object(Ye.a)({},d,{uiSchema:e}))},A=Object(he.useMemo)(function(){return["schema","uiSchema","query","advancedSettings"]},[e.ctx.state,O]);return A.includes(w)||I("schema"),he.createElement(he.Fragment,null,he.createElement(iw,{visibleSections:A,onSectionChanged:I,activeSection:w}),he.createElement("form",{className:"ui form",onSubmit:function(e){e.preventDefault(),e.stopPropagation()}},"schema"===w&&he.createElement(he.Fragment,null,he.createElement(Vx,{label:"Namespace",content:he.createElement(he.Fragment,null,he.createElement(ow,{ns:d.ns||"",onNsChanged:function(e){S(Object(Ye.a)({},d,{ns:e}))},disabled:!(!o||o.isEnabled())}))}),he.createElement(Vx,{label:"Identifier",content:he.createElement(he.Fragment,null,he.createElement(FO,{identifier:d.identifier||"",schema:v,disabled:!(!o||o.isEnabled()),onIdentifierChanged:function(e){var t=Object(Ye.a)({},d);""===e?delete t.identifier:t.identifier=e,S(t)},identifierCandidates:GO(v,n)}))}),he.createElement(tj,null),he.createElement(bx,{boardId:e.ctx.board.uid,sessionId:o?o.getId():void 0,schema:v,readonly:!(!o||o.isEnabled()),onSchemaChanged:_,autofocus:p,codySuggestSlot:he.createElement($x,{hasSuggestions:!0,onSuggest:function(){if(o){var t=qO(o);if(t){var n=pm(t);if(n.schema)return void _(n.schema)}}if(e.ctx.command){var r=mm(e.ctx.command);if(r.schema)return void _(r.schema)}if(o){var a=ej(o);a&&_(a)}},pointDirection:"down"})})),"query"===w&&he.createElement(he.Fragment,null,he.createElement(Vx,{label:"Query Schema"}),he.createElement($j,{boardId:e.ctx.board.uid,sessionId:o?o.getId():void 0,schema:d.querySchema||lm.fromString("{}"),readonly:!(!o||o.isEnabled()),onSchemaChanged:function(e){S(Object(Ye.a)({},d,{querySchema:e}))}})),"uiSchema"===w&&he.createElement(he.Fragment,null,he.createElement(nj,{type:"state"}),he.createElement(Cj,{boardId:e.ctx.board.uid,sessionId:o?o.getId():void 0,nodeSchema:v,schema:d.uiSchema||{},readonly:!(!o||o.isEnabled()),onSchemaChanged:T,toolbarSlot:he.createElement(sb.a,null,he.createElement($x,{hasSuggestions:!0,onSuggest:function(){var t=pw(d.schema||new lm({}),d.uiSchema,n,e.ctx,!1);t&&T(t)},pointDirection:"down"}),he.createElement(Ni.a,{basic:!0,compact:!0,icon:"search",className:"noborder",content:e.t("insp.cody_wizard.ui_schema_editor.choose_icon"),as:"a",href:"https://pictogrammers.com/library/mdi/",target:"_blank"}))})),"advancedSettings"===w&&he.createElement(he.Fragment,null,he.createElement(Vx,{label:"Classification",content:he.createElement(he.Fragment,null,he.createElement(tw,{isEntity:!!d.entity,vo:o,onIsEntityChanged:function(e){S(Object(Ye.a)({},d,{entity:e}))},disabled:!(!o||o.isEnabled())}),he.createElement(aw,{isStored:WO(d),ctx:e.ctx,vo:o,onStoredStateChanged:function(e){if(e){var t=Object(Ye.a)({},d);t.collection=uw(o,d,n),S(t)}else S(Object(Ye.a)({},d,{collection:!1}))},disabled:!(!o||o.isEnabled())}),o&&WO(d)&&he.createElement(Vx,{label:"Collection",content:he.createElement(he.Fragment,null,he.createElement(ew,{collection:d.collection||"_collection",onCollectionChanged:function(e){S(Object(Ye.a)({},d,{collection:e}))},disabled:!o.isEnabled()}))}))}),he.createElement(Vx,{label:"Initialize Rules",content:he.createElement(he.Fragment,null,he.createElement(Fj,{elementId:o?o.getId():"",sessionId:o?o.getId():void 0,initializeRules:d.initialize||[],dataSchema:v,readonly:!(!o||o.isEnabled()),ctx:e.ctx,onRulesChanged:function(e){e||(e=[]),S(Object(Ye.a)({},d,{initialize:e}))}}))}))))}),_k=function(e){var t=e.events.first(void 0),n=e.command;if(n){var r=mm(n);if(r.schema)return r.schema}if(t){var a=pm(t);if(a.schema)return a.schema}return new lm({})},Tk=function(e,t){var n={};for(var r in e)"function"!==typeof e[r]&&"string"!==typeof e[r]?e[r]instanceof fe.List?t&&e[r].find(function(e){return e.getId()===t.getId()})?n[r]=fe.List.of(t):n[r]=Object(fe.List)():t&&e[r]&&"object"===typeof e[r]&&e[r].getId&&e[r].getId()===t.getId()?n[r]=t:n[r]=null:n[r]=e[r];return n},Ak={},Nk=Object(Ue.b)()(function(e){var t=JO(e.boardId),n=Object(he.useRef)(null),r=Object(he.useState)(!1),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(he.useState)(!1),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(Fe.useSelector)(lx("page-content")),m=Object(Fe.useDispatch)(),p=e.uiConfig,f=Lc({commands:p.commands,views:p.views},null,2);Object(he.useEffect)(function(){if(n.current){var r=!1;e.sessionId&&"string"===typeof Ak[e.sessionId]&&(f=Ak[e.sessionId],r=!0),n.current.initializeModel({fileId:"".concat(e.sessionId,"-ui-page-content.json"),language:"json",value:f,schema:Lk(mj(t),pj(t),cj(t),fj(t),lj(t))}),u(r)}},[e.sessionId,f]),Object(he.useEffect)(function(){e.autofocus&&n.current&&n.current.focus()},[e.autofocus]);return he.createElement(UO.a,null,d&&he.createElement(nt.a,{error:!0,size:"small",content:e.t("insp.cody_wizard.schema_editor.invalid_json"),icon:"warning",style:{display:"flex"}}),he.createElement(px,{leftSideSlot:e.toolbarSlot,expanded:l.expanded,double:l.double,onExpandChanged:function(e,t){return m(SE("page-content",e,!!t))}}),he.createElement($v,{containerId:"cody-ui-page-content-editor-".concat(e.sessionId),ref:n,repairJson:!0,options:{fontSize:12,folding:!0,glyphMargin:!1,lineNumbers:!0,lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,mouseWheelZoom:!0,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1},readOnly:e.readonly,fixedOverflowWidgets:!0},className:"code editor"+(o?" focus":"")+(l.expanded?" expanded":"")+(l.double?" double":""),onBlur:function(){if(n.current){var t=n.current.retrievePayload(),r=function(t,n){if(""===t)return e.onUiConfigChanged(Object(Ye.a)({},e.uiConfig,{commands:[],views:[]})),e.sessionId&&Ak[e.sessionId]&&delete Ak[e.sessionId],!0;try{var r=Rc(t);return e.onUiConfigChanged(Object(Ye.a)({},e.uiConfig,r)),e.sessionId&&Ak[e.sessionId]&&delete Ak[e.sessionId],!0}catch(a){return console.error("[CodyWizard] UI Config Editor invalid JSON: ",a),n||u(!0),!1}}(t);i(!1),!r&&e.sessionId&&(Ak[e.sessionId]=t)}},onFocus:function(){i(!0)}}))}),Lk=function(e,t,n,r,a){var o={type:"array",markdownDescription:'List of View Components on the page.\n\nEach queryable Information becomes one component on the page. If you want to load the Information but not show it (e.g. to access it in a Jexl Expression), you can use:\n\n```{ "view": "MyInformation", "hidden": true }```',items:{oneOf:[{type:"string",enum:t,markdownDescription:"Name of the view"},{type:"object",additionalProperties:!1,required:["view"],markdownDescription:"View configuration",properties:{view:{type:"string",enum:t,markdownDescription:"Name of the view"},hidden:{type:"boolean",default:!0,markdownDescription:"Is the information visible on the page?"},"hidden:expr":Ex("Is the information visible on the page?\n\nType: ".concat(vx)),type:{type:"string",enum:["auto","form","state","table"],default:"auto",markdownDescription:"Type of the view. In most cases Cody will automatically detect the correct view type, but if you want to show information in an editable form, use the 'form' type."},"type:expr":Ex("Dynamically set the view type via ".concat(vx)),loadState:{type:"boolean",default:!0,markdownDescription:"Cody will try to load the information when the user navigates to the page. You can disable the behavior e.g. when rendering a form to create new information."},props:{type:"object",additionalProperties:!0,properties:{container:{$ref:"#/definitions/mui-container"}}},"props:expr":{$ref:"#/definitions/rule_then_prop_mapping"},data:{$ref:"#/definitions/rule_then_prop_mapping"},uiSchema:{type:"object"}},if:{properties:{type:{const:"form"}},required:["type"]},then:{properties:{uiSchema:Object(Ye.a)({},vj(Object(Ye.a)({},jj(a)),n,e,0,0,0,Object(Ye.a)({container:{$ref:"#/definitions/mui-container"}},Oj(e,a,n,r))),{markdownDescription:"Override or add uiSchema properties of the view"})}},else:{properties:{uiSchema:Object(Ye.a)({},vj({},n,e,0,0,0,Object(Ye.a)({container:{$ref:"#/definitions/mui-container"}},Oj(e,a,n,r))),{markdownDescription:"Override or add uiSchema properties of the view"})}}}]}};return Lc({type:"object",additionalProperties:!1,required:["commands","views"],properties:{commands:Ej(e,a,n,r),views:o},definitions:Object(Ye.a)({},xx(),hj())})},Rk=function(e,t,n){var r={type:"object",additionalProperties:!1,required:["route"],properties:{route:{type:"string",minLength:1,pattern:"^/[a-z]+"},routeParams:{type:"array",items:{type:"string"}},type:{type:"string",enum:["standard","dialog","drawer"],default:"standard"},title:{type:"string"},"title:expr":Ex("Define page title via ".concat(vx)),mainPage:{type:"string",enum:n},sidebar:Ij(t),tab:{type:"object",additionalProperties:!1,required:["group","label"],properties:{group:{type:"string",minLength:1},label:{type:"string",minLength:1},icon:kj(),style:{type:"object",additionalProperties:!0},"style:expr":{type:"string",minLength:1},hidden:{oneOf:[{type:"boolean"},{type:"string",minLength:1}]},"hidden:expr":{type:"string",minLength:1},disabled:{oneOf:[{type:"boolean"},{type:"string",minLength:1}]},"disabled:expr":{type:"string",minLength:1}}},props:{type:"object",additionalProperties:!0,properties:{container:{$ref:"#/definitions/mui-container"}}},"props:expr":{$ref:"#/definitions/rule_then_prop_mapping"},breadcrumb:{oneOf:[{type:"string",minLength:1},{type:"object",additionalProperties:!1,required:["data","label"],properties:{data:{type:"string",enum:e},label:{oneOf:[{type:"string",minLength:1},{$ref:"#/definitions/rule_then_assign_variable"}]}}}]}},definitions:Object(Ye.a)({},wx("value"),xx(),hj())};return JSON.stringify(r)},Bk={},Dk=Object(Ue.b)()(function(e){var t=JO(e.boardId),n=Object(he.useRef)(null),r=Object(he.useState)(!1),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(he.useState)(!1),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(Fe.useSelector)(lx("ui-config")),m=Object(Fe.useDispatch)(),p=Bc(e.uiConfig);delete p.commands,delete p.views,delete p.parent,delete p.$nodeName,delete p.$nodeType,delete p.service;var f=Lc(p,null,2);Object(he.useEffect)(function(){if(n.current){var r=!1;e.sessionId&&"string"===typeof Bk[e.sessionId]&&(f=Bk[e.sessionId],r=!0),n.current.initializeModel({fileId:"".concat(e.sessionId,"-ui-config.json"),language:"json",value:f,schema:Rk(sj(t),dj(t),lj(t))}),u(r)}},[f]),Object(he.useEffect)(function(){e.autofocus&&n.current&&n.current.focus()},[e.autofocus]);return he.createElement(UO.a,null,d&&he.createElement(nt.a,{error:!0,size:"small",content:e.t("insp.cody_wizard.schema_editor.invalid_json"),icon:"warning",style:{display:"flex"}}),he.createElement(px,{leftSideSlot:e.toolbarSlot,expanded:l.expanded,double:l.double,onExpandChanged:function(e,t){return m(SE("ui-config",e,!!t))}}),he.createElement($v,{containerId:"cody-ui-config-editor-".concat(e.sessionId),ref:n,repairJson:!0,options:{fontSize:12,folding:!0,glyphMargin:!1,lineNumbers:!0,lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,mouseWheelZoom:!0,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1},readOnly:e.readonly,fixedOverflowWidgets:!0},className:"code editor"+(o?" focus":"")+(l.expanded?" expanded":"")+(l.double?" double":""),onBlur:function(){if(n.current){var t=n.current.retrievePayload(),r=function(t,n){var r={commands:e.uiConfig.commands,views:e.uiConfig.views,$nodeType:e.uiConfig.$nodeType,$nodeName:e.uiConfig.$nodeName,service:e.uiConfig.service,parent:e.uiConfig.parent};if(""===t)return e.onUiConfigChanged(r),e.sessionId&&Bk[e.sessionId]&&delete Bk[e.sessionId],!0;try{var a=Rc(t);return e.onUiConfigChanged(Object(Ye.a)({},r,a)),e.sessionId&&Bk[e.sessionId]&&delete Bk[e.sessionId],!0}catch(o){return console.error("[CodyWizard] UI Config Editor invalid JSON: ",o),n||u(!0),!1}}(t);i(!1),!r&&e.sessionId&&(Bk[e.sessionId]=t)}},onFocus:function(){i(!0)}}))}),Pk=Object(Ue.b)()(function(e){var t=JO(e.boardId);return he.createElement(UO.a,{disabled:!e.ui||e.disabled,inline:!0},he.createElement("label",null,e.t("insp.cody_wizard.step_ui.accessible_from_select_label")),he.createElement(tt.a,{inline:!0,disabled:!e.ui||e.disabled,value:zk(e.accessibleFrom),onChange:function(t,n){return function(t){if(t)if("$sidebar"!==t){var n=e.graph.getNode(t);n&&e.onAccessibleFromChanged(n)}else e.onAccessibleFromChanged("sidebar");else e.onAccessibleFromChanged(void 0)}(n.value)},placeholder:e.t("insp.cody_wizard.step_command.new_aggregate_select_placeholder"),options:Mk(e.ui,e.accessibleFrom,t)}))}),zk=function(e){if(e)return"string"===typeof e?"$sidebar":e.getId()},Mk=function(e,t,n){var r=[];r.push({key:"$sidebar",text:"App Sidebar",value:"$sidebar",icon:he.createElement(Cp.a,{name:"sidebar"})});var a=t&&"string"!==typeof t,o=t&&"string"!==typeof t?t.getName():"";return n.getFilteredElementsByType(Dc.ui,!0).forEach(function(t){a&&o===t.getName()||e&&e.getName()===t.getName()||r.push({key:t.getId(),text:t.getName(),value:t.getId(),icon:he.createElement(Xv,{cellType:Dc.ui})})}),t&&"string"!==typeof t&&r.push({key:t.getId(),text:t.getName(),value:t.getId(),icon:he.createElement(Xv,{cellType:Dc.ui})}),r},Uk=(Object(fe.List)([]),"pageConfig"),Fk=Object(Ue.b)()(function(e){var t=e.ctx.ui,n=t?t.getVersion():0,r=NE(),a=Object(Ke.a)(r,1)[0],o=JO(e.ctx.board.uid),i=Object(he.useState)(null),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(he.useState)({commands:[],views:[]}),l=Object(Ke.a)(u,2),m=l[0],p=l[1],f=Object(he.useState)(!1),h=Object(Ke.a)(f,2),g=h[0],b=h[1],y=Object(he.useState)(!0),v=Object(Ke.a)(y,2),E=v[0],O=v[1],x=Object(he.useState)(null),j=Object(Ke.a)(x,2),w=j[0],k=j[1],I=Object(he.useState)(Object(fe.List)()),S=Object(Ke.a)(I,2),C=S[0],_=S[1],T=Object(he.useState)(Uk),A=Object(Ke.a)(T,2),N=A[0],L=A[1],R=function(t){e.onUpdateMetadata&&e.onUpdateMetadata(Lc(t,null,2),!0),p(t)},B=function(t,n){if(w&&!t){var r=Object(Ye.a)({},n);delete r.parent,R(r)}else t&&(R(Object(Ye.a)({},n,{parent:t.getId()})),oI(e.ctx)&&c&&e.ctx.state&&Jk(c,t,e.ctx.state,a,o));var i,s;k(t),e.onCtxChanged((i=e.ctx,s={parentUi:t},Object(Ye.a)({},i,s)))};Object(he.useEffect)(function(){if(D(),_(e.ctx.uiViews),t){d(t);var n=Bj(t),r=e.ctx.parentUi||n.parent&&a.getNode(n.parent)||null,o=Vk(r,e.ctx);O(o),p(n),r&&k(r)}},[t,n]);var D=function(){d(null),p({commands:[],views:[]}),b(!1),O(!0),k(null)},P=function(e){R(e)},z=w||(E?"sidebar":void 0),M=Object(he.useMemo)(function(){return["pageConfig","content"]},[t,n]);return he.createElement(he.Fragment,null,he.createElement(iw,{visibleSections:M,onSectionChanged:function(e){L(e),Uk=e},activeSection:N}),he.createElement("form",{className:"ui form",onSubmit:function(e){e.preventDefault(),e.stopPropagation()}},"pageConfig"===N&&he.createElement(he.Fragment,null,he.createElement(Vx,{label:e.t("insp.cody_wizard.step_ui.page_config_label")}),he.createElement(Pk,{graph:a,boardId:e.ctx.board.uid,disabled:!(!c||c.isEnabled()),ctx:e.ctx,accessibleFrom:z,ui:c,onAccessibleFromChanged:function(t){return t?"string"===typeof t?(O(!0),void B(null,Gk(m,c,null,!0,C,e.ctx))):(O(!1),void B(t,Gk(m,c,t,!1,C,e.ctx))):(O(!1),void B(null,Gk(m,c,null,!1,C,e.ctx)))}}),he.createElement(Dk,{boardId:e.ctx.board.uid,sessionId:c?c.getId():void 0,uiConfig:m,readonly:!(!c||c.isEnabled()),onUiConfigChanged:P,autofocus:g,ctx:e.ctx,toolbarSlot:he.createElement(sb.a,null,he.createElement($x,{hasSuggestions:!0,onSuggest:function(){if(c){var t=Gk(m,c,w,E,C,e.ctx,!1,!0);Lc(t)!==Lc(m)&&P(t)}},pointDirection:"down"}),he.createElement(Ni.a,{basic:!0,compact:!0,icon:"search",className:"noborder",content:e.t("insp.cody_wizard.ui_schema_editor.choose_icon"),as:"a",href:"https://pictogrammers.com/library/mdi/",target:"_blank"}))})),"content"===N&&he.createElement(he.Fragment,null,he.createElement(Vx,{label:e.t("insp.cody_wizard.step_ui.page_content_label")}),he.createElement(Nk,{boardId:e.ctx.board.uid,sessionId:c?c.getId():void 0,uiConfig:m,readonly:!(!c||c.isEnabled()),onUiConfigChanged:P,autofocus:g,ctx:e.ctx,toolbarSlot:he.createElement($x,{hasSuggestions:!0,onSuggest:function(){if(c){var t=Gk(m,c,w,E,C,e.ctx,!0,!1);Lc(t)!==Lc(m)&&P(t)}},pointDirection:"down"})}))))}),Gk=function(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=Bc(e),d=Hk(a);(i||(c.route=$k(t,n,r,d,o),!r||c.sidebar&&c.sidebar.label||(c.sidebar={label:t.getName(),icon:"square"}),!r&&c.sidebar&&delete c.sidebar,c.breadcrumb||(c.breadcrumb=t.getName())),s)||(bm(t,Dc.command,!0).forEach(function(e){var t=wm(e);c.commands.includes(t)||c.commands.push(t)}),gm(t,Dc.document,!0).forEach(function(e){var t=wm(e,!1,!0);c.views.map(function(e){return"string"===typeof e?e:e.view}).includes(t)||c.views.push(t)}));return c},qk=function(e,t,n,r){return e?t?"/".concat(Nl(e.getTechnicalName()).fileName):n.length?"/"+n.map(function(e){return":".concat(e)}).join("/"):"/":"/"},Vk=function(e,t){if(e)return!1;if(oI(t)&&t.command){var n=mm(t.command);if(n.aggregateCommand&&"undefined"!==typeof n.newAggregate)return n.newAggregate}return!0},Wk=function(e,t,n){var r="",a=n?"":" Details";if(oI(e)){if(e.state?r=e.state.getTechnicalName():e.aggregate?r=e.aggregate.getTechnicalName():e.command?r=e.command.getTechnicalName():e.events.count()&&(r=e.events.first(Wm({})).getTechnicalName()),""===r)return a;var o=Nl(r),i=nx(o.title);return console.log("[CodyWizard] tagged words: ",i),i.filter(function(e){return ax(e)||ox(e)}).map(function(e){return ax(e)?n?function(e){return ax(e)?tx().pluralize(e.token):""}(e):ix(e):e.token}).join(" ")+"".concat(a)}var s=e.uiViews.first(void 0);return s?s.getTechnicalName()+"".concat(a):e.parentUi?nx(e.parentUi.getTechnicalName()).map(function(e){return ax(e)?ix(e):e.token}).join(" ")+"".concat(a):void 0},Hk=function(e){var t=[];return e.forEach(function(e){var n=em(e);n.schema&&n.schema.isObject()&&n.identifier&&t.push(n.identifier)}),t},$k=function(e,t,n,r,a){var o="";if(t){var i=Bj(t);i.route?o+=i.route:o+="/"+Nl(t.getTechnicalName()).fileName}return e&&(o+=qk(e,n,r)),""===o&&(o=qk(e,n,r)),o},Jk=function(e,t,n,r,a){var o=em(n),i=rm(n,o),s=Nl(e.getTechnicalName()).className,c=Yk(i,t,a);if(c){var d=Object(Ke.a)(c,2),u=d[0],l=d[1],m=l.uiSchema||{};if(m.table&&m.table.columns){var p=m.table.columns,f=!1,h=!1;p.forEach(function(e){e.pageLink&&Qk(e.pageLink)===s&&(f=!0)});var g=p[0];return f||!g||g.pageLink||(g.pageLink=s,h=!0),h?(m.table.columns=p,r.changeNodeMetadata(u,Lc(Object(Ye.a)({},l,{uiSchema:m}),null,2)),u):void 0}}},Qk=function(e){return"string"===typeof e?e:e.page},Yk=function(e,t,n){var r=n.getFilteredElementsByTypeAndLabel(Dc.ui,t.getName()),a=[];r.forEach(function(e){a.push.apply(a,Object(eo.a)(gm(e,Dc.document)))});var o=null,i=null;return a.forEach(function(t){if(tm(t)){var n=em(t),r=n.schema.getListItemsSchema(new lm({}));r.isRef()&&r.getRef()===e&&(o=t,i=n)}}),o&&i?[o,i]:null},Kk=function(e,t){if(function(e){return e.getTags().contains(ispConst.TAG_DISCONNECTED)}(e))return e;var n=e.getTags().push(ispConst.TAG_DISCONNECTED);return t.changeNodeTags(e,n),t.getNode(e.getId())},Zk=function(e,t){var n=Vk(e.parentUi,e),r=Wk(e,0,n),a=Wm({id:t.createCellId(),type:Dc.ui,name:r,metadata:JSON.stringify({},null,2)}),o=Cm(t).getSimilarElements(a),i=function(e,t){return t.uiViews.count()>0?t.uiViews:!e&&oI(t)&&t.state?fe.List.of(t.state):Object(fe.List)()}(n,e),s=o.count()>0?Bj(o.first()):Gk({commands:[],views:[]},a,e.parentUi,n,i,e),c=Wm({id:t.createCellId(),type:Dc.ui,name:r,metadata:Lc(s,null,2)}),d=!1;oI(e)&&e.command&&(t.addNodeNextToAnother(c,e.command,Pc.above,t.isEventModelingEnabled()?yS-bS:gS),t.connectNodes(c,e.command),d=!0),e.parentUi&&(d||(t.addNodeNextToAnother(c,e.parentUi,Pc.right,gS),d=!0),t.connectNodes(e.parentUi,c)),d?(function(e,t,n,r,a){var o=n.uiViews.map(function(e){return e.getId()}),i=r.map(function(e){return e.getId()}),s=n.uiViews.filter(function(e){return!i.contains(e.getId())}),c=r.filter(function(e){return!o.contains(e.getId())});s.forEach(function(e){return a.deleteNode(e)});var d=n.uiViews.last(void 0),u=d||t,l=Pc.above,m=gS;if(a.isEventModelingEnabled()){if(u=d||null,l=Pc.left,!u){u=e,l=Pc.belowLeft;var p=n.sliceApiLabel?n.sliceApiLabel.getGeometry().y-e.getGeometry().y-bS:vS;m={x:gS,y:p}}}else u||(u=e,l=Pc.left);c.forEach(function(t){var n=Wm({id:a.createCellId(),type:t.getType(),name:t.getTechnicalName(),metadata:t.getMetadata()});a.addNodeNextToAnother(n,u,l,m),a.connectNodes(n,e,void 0,void 0,!0),Dw(n,a),u=a.getNode(n.getId()),l=Pc.above}),c.count()>0||s.count()}(c=Dw(c,t),e.parentUi,e,i,t),aI(c,e,t),window.setTimeout(function(){t.selectNode(c)},200)):alert("[CodyWizard] Unable to create UI. A parent UI or command card is missing to connect the UI card to.")},Xk=function(e,t){var n=ww(e),r=kw(e,Cm(t)),a={aggregateCommand:r,newAggregate:r,schema:xw(e,r),uiSchema:jw(e),dependencies:e.commandDependencies},o=Wm({id:t.createCellId(),type:Dc.command,name:n,metadata:Lc(a,null,2)}),i=!1;if(e.aggregate){var s=e.sliceApiLabel?e.aggregate.getGeometry().y-e.sliceApiLabel.getGeometry().y-bS:gS;t.addNodeNextToAnother(o,e.aggregate,Pc.above,s),t.connectNodes(o,e.aggregate),i=!0}if(!i&&e.events.count()){var c=e.events.first(void 0);if(c){var d=e.sliceApiLabel?c.getGeometry().y-e.sliceApiLabel.getGeometry().y-bS:ES;t.addNodeNextToAnother(o,c,Pc.above,d),t.connectNodes(o,c),i=!0}}i?(o=Dw(o,t),aI(o,e,t),window.setTimeout(function(){t.selectNode(o)},200)):alert("[CodyWizard] Unable to create Command. An aggregate or event is missing to connect the command card to.")},eI=function(e,t){var n=function(e,t){var n="";if(e.state)return e.state.getTechnicalName();if(e.command?n=e.command.getTechnicalName():e.events.count()&&(n=e.events.first(Wm({})).getTechnicalName()),""!==n){var r=Nl(n),a=nx(r.title);return console.log("[CodyWizard] tagged words: ",a),a.filter(function(e){return ax(e)||ox(e)}).map(function(e){return ax(e)?ix(e):e.token}).join(" ")}}(e)||"",r={rules:Yx(e)},a=Wm({id:t.createCellId(),type:Dc.aggregate,name:n,metadata:Lc(r,null,2)}),o=!1;e.events.first(void 0)&&(t.addNodeNextToAnother(a,e.events.first(),Pc.above,gS),t.connectNodes(a,e.events.first()),o=!0),e.command&&(o||(t.addNodeNextToAnother(a,e.command,Pc.below,t.isEventModelingEnabled()?ES:gS),o=!0),t.connectNodes(e.command,a)),o?(a=Kk(a,t),aI(a,e,t),window.setTimeout(function(){t.selectNode(a)},200)):alert("[CodyWizard] Unable to create Aggregate. A command or event card is missing to connect the aggregate card to.")},tI=function(e,t){var n=Nw(e),r={schema:Aw(e),applyRules:[Lw()]},a=Wm({id:t.createCellId(),type:Dc.event,name:n,metadata:Lc(r,null,2)}),o=!1;e.aggregate&&(t.addNodeNextToAnother(a,e.aggregate,Pc.below,gS),t.connectNodes(e.aggregate,a),o=!0),e.state&&(o||(e.eventModel?t.addNodeNextToAnother(a,e.state,Pc.belowLeft,{x:gS,y:ES}):t.addNodeNextToAnother(a,e.state,Pc.above,gS),o=!0),t.connectNodes(a,e.state)),e.eventModel&&e.command&&(o||(t.addNodeNextToAnother(a,e.command,Pc.below,ES),t.connectNodes(e.command,a),o=!0)),o?(a=Dw(a,t),aI(a,e,t),window.setTimeout(function(){t.selectNode(a)},200)):alert("[CodyWizard] Unable to create Event. An aggregate or state card is missing to connect the event card to.")},nI=function(e,t){var n=function(e){var t="";if(e.aggregate?t=e.aggregate.getTechnicalName():e.command?t=e.command.getTechnicalName():e.events.count()&&(t=e.events.first(Wm({})).getTechnicalName()),""!==t){var n=Nl(t),r=nx(n.title);return console.log("[CodyWizard] tagged words: ",r),r.filter(function(e){return ax(e)||ox(e)}).map(function(e){return ax(e)?ix(e):e.token}).join(" ")}}(e)||"Information",r=Nl(n),a={},o={},i={},s=r.propertyName+"Id";a[s]="string|format:uuid",o[s]="string|format:uuid",i[s]={"ui:widget":"hidden"};var c=_k(e),d=Cm(t).getSimilarElements(Wm({id:t.createCellId(),type:Dc.document,name:n,metadata:Lc({ns:"/"+r.className},null,2)})),u=d.count()>0?em(d.first()):{ns:ispConst.DEFAULT_DOC_NS,schema:c.isEmpty()?new lm(a):c,querySchema:new lm(o),uiSchema:i,identifier:s},l=Wm({id:t.createCellId(),type:Dc.document,name:n,metadata:Lc(u,null,2)}),m=e.events.first(void 0);if(m){if(t.isEventModelingEnabled())if(e.command)t.addNodeNextToAnother(l,e.command,Pc.right,gS);else{var p=e.sliceApiLabel?m.getGeometry().y-e.sliceApiLabel.getGeometry().y-bS:ES;t.addNodeNextToAnother(l,m,Pc.aboveRight,{x:gS,y:p})}else t.addNodeNextToAnother(l,m,Pc.below,gS);t.connectNodes(m,l),l=Dw(l,t),e.feature&&aI(l,e,t),window.setTimeout(function(){t.selectNode(l)},200)}else alert("[CodyWizard] Unable to create Data Entity. An event is missing to connect the information card to.")},rI=function(e,t){if(e.state){var n=t.getNode(e.state.getId());if(n){var r=em(n),a=Cm(t),o=function(e,t,n,r){if(!nm(e))return null;var a=rm(e,t),o=r.getSimilarElements(Wm({id:n.createCellId(),type:Dc.document,name:e.getTechnicalName()+" List",metadata:Lc({ns:t.ns||ispConst.DEFAULT_DOC_NS},null,2)})),i=o.count()>0?em(o.first()):{ns:t.ns||ispConst.DEFAULT_DOC_NS,schema:new lm({$items:a}),querySchema:new lm({}),uiSchema:Ik(e,t)};return Wm({id:n.createCellId(),name:e.getTechnicalName()+" List",type:Dc.document,metadata:Lc(i,null,2)})}(n,r,t,a);o&&(t.addNodeNextToAnother(o,n,Pc.right,gS),t.connectNodes(n,o),Dw(o,t),e.feature&&aI(n,e,t),window.setTimeout(function(){t.selectNode(o)},200))}else alert("Cannot suggest state list, because state is missing in DDDAction context. This seems to be a bug. Please contact the prooph board team.")}else alert("Cannot suggest state list, because state is missing in DDDAction context. This seems to be a bug. Please contact the prooph board team.")},aI=function(e,t,n){if(t.feature){var r=Ok(t.feature,iI(n.getNode(e.getId()),t.board),n);n.resizeNode(r,r.getSize())}},oI=function(e){return"dddAction"===e.type},iI=function e(t,n){var r={board:n,type:"dddAction",ui:null,parentUi:null,uiViews:Object(fe.List)([]),command:null,commandDependencies:{},commandHandler:[],aggregate:null,events:Object(fe.List)([]),state:null,stateList:null,feature:null,sliceApiLabel:null,eventModel:null,previousStep:sI,nextStep:cI,installCodyGraphSuggestions:dI};switch(t.getType()){case Dc.feature:var a=[Dc.ui,Dc.command,Dc.aggregate,Dc.event,Dc.externalSystem,Dc.document],o=t.children().filter(function(e){return a.includes(e.getType())});if(o.count()>0)return e(o.toArray()[0],n);r.feature=t;break;case Dc.ui:pI(t,r);break;case Dc.command:fI(t,r);break;case Dc.aggregate:hI(t,r);break;case Dc.event:mI(t,r);break;case Dc.externalSystem:var i=hm(t,Dc.aggregate);i&&hI(i,r);break;case Dc.document:if(HO(t)){gI(t,r);var s=fm(t,Dc.event,!0);if(s){mI(s,r);break}}var c=hm(t,Dc.aggregate);if(c){hI(c,r);break}var d=hm(t,Dc.ui);d&&pI(d,r)}return r},sI=function(e,t){switch(e){case"feature":return null;case"ui":return"feature";case"command":return"ui";case"aggregate":return"command";case"dddEvent":return t.eventModel?"command":"aggregate";case"state":return"dddEvent";default:return null}},cI=function(e,t){switch(e){case"feature":return"ui";case"ui":return"command";case"command":return t.eventModel?"dddEvent":"aggregate";case"aggregate":return"dddEvent";case"dddEvent":return"state";case"state":default:return null}},dI=function(e,t,n){var r=sI(e,t),a=cI(e,t);r&&uI(r,t,n),a?lI(a,t,n):"state"===e&&lI("anyVO",t,n)},uI=function(e,t,n){switch(e){case"feature":if(t.feature)return;n.setCodyUpCb(function(){return function(e,t){var n=Ek(e),r=Wm({id:t.createCellId(),type:Dc.feature,name:n}),a=null,o=xk(e);o.forEach(function(e){var t=e.getParent();t&&t.getType()===Dc.boundedContext&&(a=t)}),a&&(o.forEach(function(e){var n=e.getParent();n&&n.getId()!==a.getId()&&t.switchParent(e,n)}),r=r.changeParent(a)),r=Ok(r,e,t),t.addNode(r),xk(e).forEach(function(e){return t.switchParent(e,r)}),t.selectNode(r)}(t,n)});break;case"ui":if(t.ui)return;n.setCodyUpCb(function(){return Zk(t,n)});break;case"command":if(t.command)return;n.setCodyUpCb(function(){return Xk(t,n)});break;case"aggregate":if(t.aggregate)return;n.setCodyUpCb(function(){return eI(t,n)});break;case"dddEvent":if(t.events.count()>0)return;n.setCodyUpCb(function(){return tI(t,n)})}},lI=function(e,t,n){switch(e){case"command":if(t.command)return;n.setCodyDownCb(function(){return Xk(t,n)});break;case"aggregate":if(t.aggregate)return;n.setCodyDownCb(function(){return eI(t,n)});break;case"dddEvent":if(t.events.count()>0)return;n.setCodyDownCb(function(){return tI(t,n)});break;case"state":if(t.state)return;n.isEventModelingEnabled()?n.setCodyRightCb(function(){return nI(t,n)}):n.setCodyDownCb(function(){return nI(t,n)});break;case"anyVO":if(t.stateList)return;n.isEventModelingEnabled()?n.setCodyRightCb(function(){return rI(t,n)}):n.setCodyDownCb(function(){return rI(t,n)})}},mI=function(e,t){if(!t.events.map(function(e){return e.getId()}).includes(e.getId())){t.events=t.events.push(e),bI(e,t),yI(e,t);var n=fm(e,Dc.aggregate);n&&!t.aggregate&&hI(n,t);var r=fm(e,Dc.command);if(r&&!t.command&&fI(r,t),!t.state){var a=bm(e,Dc.document),o=!0,i=!1,s=void 0;try{for(var c,d=a[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var u=c.value;if(HO(u))return void gI(u,t)}}catch(l){i=!0,s=l}finally{try{o||null==d.return||d.return()}finally{if(i)throw s}}}}},pI=function e(t,n){if(function(e,t){return e.getType()===Dc.ui&&bm(e,Dc.ui).length>0}(t)){var r=bm(t,Dc.ui)[0];if(r)return void e(r,n)}if(!n.ui){if(n.ui=t,n.uiViews=Object(fe.List)(gm(t,Dc.document,!0)),!n.command){var a=hm(t,Dc.command,!1,!0);a&&fI(a,n)}if(!n.parentUi){var o=fm(t,Dc.ui,!0);o&&(n.parentUi=o)}bI(t,n),yI(t,n)}},fI=function(e,t){if(!t.command){t.command=e;var n=mm(e);if(t.commandDependencies=n.dependencies||{},t.commandHandler=n.rules||[],bI(e,t),yI(e,t),!t.ui){var r=fm(e,Dc.ui);r&&pI(r,t)}if(n.aggregateCommand&&!t.aggregate){var a=hm(e,Dc.aggregate);a&&hI(a,t)}bm(e,Dc.event).forEach(function(e){return mI(e,t)})}},hI=function(e,t){if(!t.aggregate){if(t.aggregate=e,bI(e,t),yI(e,t),!t.command){var n=fm(e,Dc.command);n&&fI(n,t)}bm(e,Dc.event).forEach(function(e){return mI(e,t)});var r=t.command?mm(t.command):{dependencies:{},rules:[]},a=MO(e);t.commandDependencies=r.dependencies||{},t.commandHandler=a.rules||r.rules||[]}},gI=function(e,t){t.state||(t.state=e,bI(e,t),yI(e,t),e.getTargets().filter(function(e){return e.getType()===Dc.document}).forEach(function(e){var n=em(e);n.schema&&n.schema.isList()&&(t.stateList=e)}),gm(e,Dc.event).forEach(function(e){return mI(e,t)}))},bI=function(e,t){if(!t.feature){var n=e.getParent();n&&n.getType()===Dc.feature&&(t.feature=n,t.board.eventModelingEnabled&&t.feature.children().forEach(function(e){e.getTags().contains(ispConst.TAG_SLICE_API_LABEL)&&(t.sliceApiLabel=e)}))}},yI=function(e,t){if(!t.eventModel){var n=e.getParent(),r=Object(fe.List)();n&&(r=n.children()),n&&n.getType()===Dc.feature&&(n=n.getParent()),n&&n.getType()===Dc.boundedContext&&n.getTags().contains(ispConst.TAG_EVENT_MODEL)&&(t.eventModel=n,t.board.eventModelingEnabled&&r.forEach(function(e){e.getTags().contains(ispConst.TAG_SLICE_API_LABEL)&&(t.sliceApiLabel=e)}))}},vI=function(e,t){return{board:t,type:"feature",feature:e,nextStep:function(e){return null},previousStep:function(e){return null},installCodyGraphSuggestions:function(){}}},EI=function(e){return"feature"===e.type},OI=function(e,t){var n=em(e),r=jI(e),a=null;return r&&t.eventModelingEnabled&&r.children().forEach(function(e){e.getTags().contains(ispConst.TAG_SLICE_API_LABEL)&&(a=e)}),{board:t,type:"information",vo:e,sliceApiLabel:a,queryDependencies:n.queryDependencies||{},nextStep:function(e){return null},previousStep:function(e){return null},installCodyGraphSuggestions:function(){}}},xI=function(e){return"information"===e.type},jI=function(e){var t=e.getParent();return t&&t.getType()===Dc.feature?t:null},wI=function(e,t){return{board:t,type:"ui",ui:e,parentUi:II(e),uiViews:Object(fe.List)(SI(e)),sliceApiLabel:CI(e),nextStep:function(e){return null},previousStep:function(e){return null},installCodyGraphSuggestions:function(){}}},kI=function(e){return"ui"===e.type},II=function(e){return fm(e,Dc.ui,!0)},SI=function(e){return gm(e,Dc.document,!0)},CI=function(e){var t=e.getParent(),n=null;return!t||t.getType()!==Dc.feature&&t.getType()!==Dc.boundedContext||t.children().forEach(function(e){e.getTags().contains(ispConst.TAG_SLICE_API_LABEL)&&(n=e)}),n},_I=function(e){return!!hm(e,Dc.command)},TI=function(e){var t=!1;return e.children().forEach(function(e){switch(rk(e)&&(t=!0),e.getType()){case Dc.ui:_I(e)&&(t=!0);break;case Dc.command:case Dc.aggregate:case Dc.event:t=!0}}),t},AI=function(e){var t=e.getSources();if(0===t.count())return!0;if(1!==t.count())return!1;var n=t.toArray()[0];return n.getType()===Dc.aggregate||n.getType()===Dc.command},NI=function(e,t){switch(e){case"state":return"Information";case"dddEvent":return"Domain Event";case"publicEvent":return"Public Domain Event";case"policyEvent":return"Domain Event";case"anyVO":return"Information";case"runCody":return"Run Cody";default:return wS(e)?t("insp.cody_wizard.step_header"):Nl(e).className}},LI=n(1183),RI=function(){return function(e){return e.getIn([hT,"runCodyOn"])}},BI=n(1163),DI=function(e){var t=e.width||30;return he.createElement("object",{className:"console-avatar",data:BI,type:"image/svg+xml",style:Object(Ye.a)({width:t+"px"},e.style)})},PI=n(1061),zI=function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o="#414141",i="#414141",s="normal",c="normal",d="white";e.codyResponse.type===XE.Error&&(o="#f31c30",i="#f31c30",s="bold",c="bold",d="#f1bec5"),e.codyResponse.type!==XE.Warning&&e.codyResponse.type!==XE.Question&&e.codyResponse.type!==XE.SyncRequired||(o="#653a12",i="#653a12",s="bold",d="#fdd299"),e.codyResponse.type&&e.codyResponse.type!==XE.Info||(o="#32c0e7",s="bold");var u,l=Array.isArray(e.codyResponse.cody)?e.codyResponse.cody:[e.codyResponse.cody];e.codyResponse.details&&(u=e.codyResponse.details,Array.isArray(u)||(u=[u]));var m={color:o,fontWeight:s},p={color:i,fontWeight:c},f=r?he.createElement(Cp.a,{name:"caret down",size:"large"}):he.createElement(Cp.a,{name:"caret right",size:"large"});return he.createElement(he.Fragment,null,he.createElement("div",{className:"console-message",style:{backgroundColor:d}},he.createElement(DI,null),he.createElement("div",{className:"console-text"},MI(l,m,e.codyName),u&&he.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),a(!r)}},f))),u&&r&&he.createElement("div",{className:"console-message",style:{backgroundColor:d}},he.createElement(DI,null),he.createElement("div",{className:"console-text"},MI(u,p))))},MI=function(e,t,n){var r=e[0]||"";if("string"!==typeof r){if("function"!==typeof(r=r).toString)return[];r=r.toString()}var a=r.split("%c"),o=e.slice(1),i=[],s=t,c=!0;for(var d in a)if("undefined"!==typeof a[d]){var u=a[d],l=!1,m=!1,p=u.length;p>0&&(" "===u.charAt(p-1)&&(m=!0,u=u.slice(0,p-1))," "===u.charAt(0)&&(l=!0,u=u.slice(1))),p>0&&(c&&n&&(u="[".concat(n,"]: ")+u,c=!1),i.push(he.createElement("span",{key:i.length+1,style:s},l&&he.createElement(he.Fragment,null,"\xa0"),he.createElement(he.Fragment,null,u),m&&he.createElement(he.Fragment,null,"\xa0")))),s=o[d]?UI(o[d]):t}return i},UI=function(e){var t={},n=e.split(";"),r=!0,a=!1,o=void 0;try{for(var i,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value.split(":"),d=Object(Ke.a)(c,2),u=d[0],l=d[1];"string"===typeof u&&"string"===typeof l&&(t[Object(PI.camelize)(u.trim())]=l)}}catch(m){a=!0,o=m}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return t},FI=function(e){switch(e){case"aggregate":return Dc.aggregate;case"dddEvent":case"publicEvent":case"policyEvent":return Dc.event;case"feature":return Dc.feature;case"command":return Dc.command;case"state":return Dc.document;case"ui":return Dc.ui;case"anyVO":return Dc.document;case"policy":return Dc.policy;default:return Dc.freeText}},GI=function(e){return he.createElement(he.Fragment,null,!e.activeStep&&he.createElement(Cp.a,{name:"question circle outline"}),e.activeStep&&"runCody"!==e.activeStep&&!wS(e.activeStep)&&he.createElement(Xv,{cellType:FI(e.activeStep),size:"normal"}),e.activeStep&&wS(e.activeStep)&&he.createElement(Cp.a,{name:"code branch"}),e.activeStep&&"runCody"===e.activeStep&&he.createElement(DI,{width:40,style:{top:"7px",position:"relative",marginLeft:"5px"}}))},qI=n(1200),VI=function(e){return he.createElement(qI.a,{title:e.step.title,description:e.step.description,icon:e.step.error?he.createElement(Cp.a,{name:"x",color:"red"}):e.step.completed?he.createElement(Cp.a,{name:"check",color:"green"}):e.step.icon,completed:!e.step.error&&e.step.completed,active:e.step.active,id:e.step.id,style:{border:"1px solid rgba(34, 36, 38, 0.15)"},disabled:e.step.disabled,link:e.step.linkable,onClick:function(){return e.step.linkable?e.onStepClicked():void 0}})},WI=function(e){return"generate"===e.action},HI=Object(Ue.b)()(Object(Ge.o)(function(e){var t=Object(Fe.useSelector)(Ii()),n=NE(),r=Object(Ke.a)(n,1)[0],a=eO(),o=Object(he.useState)([]),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)(0),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(he.useState)(!1),f=Object(Ke.a)(p,2),h=f[0],g=f[1],b=Object(he.useState)(!1),y=Object(Ke.a)(b,2),v=y[0],E=y[1],O=Object(Fe.useSelector)(RI()),x=s.filter(function(e){return e.active})[0];Object(he.useEffect)(function(){Object(je.a)(xe.a.mark(function n(){return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=c,n.next=3,nS(e.ctx,e.t,t,r,e.match.params.uid,a,O);case 3:n.t1=n.sent,(0,n.t0)(n.t1),g(!1),E(!1);case 7:case"end":return n.stop()}},n,this)}))().catch(function(e){throw e})},[e.ctx]),Object(he.useEffect)(function(){if(x){var t=document.querySelector("#"+x.id);t&&t.scrollIntoView({behavior:"smooth"}),x.completed||x.error||ZI(x,r,a).then(function(t){var n=YI(t,s);if(t.error)WI(t)?e.onBackToStepChanged(t.wizardStep):"connect"===t.action?g(!0):"healthcheck"===t.action&&E(!0),n=KI(n),e.onCodyFinished(!1);else{var r=QI(t,n);r?n=$I(r,n):(n=JI(n),e.onCodyFinished(!0))}c(n)})}},[x]);return he.createElement("div",{id:"run-cody-step-container",style:{width:"100%",overflow:"auto"},onScroll:function(){var e=document.querySelector("#run-cody-step-container");e&&m(e.scrollLeft)}},he.createElement(LI.a,{size:"mini",fluid:!0,className:"noborder"},s.map(function(e){return he.createElement(VI,{step:e,key:e.id,onStepClicked:function(){return c($I(e,s))}})})),he.createElement(Og.a,{style:{minHeight:"300px",width:"auto",padding:0,left:l+"px"}},!x||!x.codyResponse&&he.createElement(Ug.a,{indeterminate:!0,size:"massive"}),x&&x.codyResponse&&he.createElement("div",{className:"cody console",style:{position:"relative",height:"100%"}},he.createElement(zI,{codyResponse:x.codyResponse,codyName:"Cody"}))),he.createElement(nt.a,{warning:!0,hidden:!h,icon:"exclamation",content:he.createElement("div",null,he.createElement("p",null,e.t("insp.cody_wizard.step_run_cody.message_install_cody_engine")),he.createElement("p",null,he.createElement("a",{href:"https://github.com/proophboard/cody-engine#readme"},"Cody Engine on Github")))}),he.createElement(nt.a,{warning:!0,hidden:!v,icon:"exclamation",content:he.createElement("div",null,he.createElement("p",null,e.t("insp.cody_wizard.step_run_cody.message_restart_cody")),he.createElement("p",null,e.t("insp.cody_wizard.step_run_cody.message_perform_cody_restart")),he.createElement("p",null,e.t("insp.cody_wizard.step_run_cody.message_cody_still_failing")),he.createElement("p",null,he.createElement("a",{href:"https://github.com/proophboard/cody-engine/issues"},e.t("insp.cody_wizard.step_run_cody.message_cody_failed_get_help"))))}))})),$I=function(e,t){return t.map(function(t){return Object(Ye.a)({},t,{active:t.id===e.id,disabled:!1})})},JI=function(e){return e.map(function(e){return Object(Ye.a)({},e,{linkable:!0})})},QI=function(e,t){var n=!1,r=!0,a=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;if(n)return c;c.id===e.id&&(n=!0)}}catch(d){a=!0,o=d}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}},YI=function(e,t){return t.map(function(t){return t.id===e.id?e:t})},KI=function(e){return e.map(function(e){return Object(Ye.a)({},e,{disabled:!e.completed})})},ZI=function(e,t,n){var r=Object(Ye.a)({},e),a=!1;return new Promise(function(o){window.setTimeout(function(){!function(o){var i="Cody",s=window.setTimeout(function(){r.error=!0,r.completed=!0,r.codyResponse={cody:"Something went wrong. I could not finish the task.",details:"Try restarting the Cody Engine and check the logs for errors.",type:XE.Error},c(),n.disconnect(i),o(r)},1e4),c=n.attachCodyResponseListener(function(t){t.type!==XE.SyncRequired?t.type!==XE.Empty&&(!a||"connect"===e.action||t.type&&t.type!==XE.Info?(r.error=!!t.type&&t.type!==XE.Info,r.completed=!0,r.codyResponse=t,window.clearTimeout(s),c(),o(r)):a=!1):a=!0});switch(e.action){case"connect":n.isConnected()?n.ping.Cody():("play"===e.arguments[0]&&(i="Cody Play"),n.connect.Cody.apply(n.connect.Cody,e.arguments));break;case"generate":WI(e)&&(t.selectNode(e.node),t.triggerCody());break;case"healthcheck":c(),window.clearTimeout(s),XI(e.arguments).then(function(e){r.error=!!e.type&&e.type!==XE.Info,r.completed=!0,r.codyResponse=e,o(r)})}}(o)},800)})},XI=function(e){var t=ke.a.create(),n=function(){var e=Object(je.a)(xe.a.mark(function e(r,a,o){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){0!==o?window.setTimeout(Object(je.a)(xe.a.mark(function a(){return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.get(r).then(function(){var t=Object(je.a)(xe.a.mark(function t(a){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(200!==a.status){t.next=4;break}e(!0),t.next=10;break;case 4:return console.error("[CodyHealthCheck] failed: ","ResponseStatus: ",a.status,"message: ",a.data),t.t0=e,t.next=8,n(r,3e3,o-1);case 8:t.t1=t.sent,(0,t.t0)(t.t1);case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(je.a)(xe.a.mark(function t(a){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.error("[CodyHealthCheck] ",a),t.t0=e,t.next=4,n(r,3e3,o-1);case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return a.stop()}},a,this)})),a):e(!1)}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}();return new Promise(function(t){var r=e.map(function(e){return n(e,3e3,14)}),a={cody:"At least one health check failed. Try to restart the Cody Engine app and check the logs for more information.",type:XE.Error};Promise.all(r).then(function(e){var n=!0;e.forEach(function(e){e||(n=!1)}),t(n?{cody:"All good! Cody Engine is responding normally."}:a)}).catch(function(e){console.error("[CodyHealthCheck] error: ",e),t(a)})})},eS=function(e){return{description:e("insp.cody_wizard.step_run_cody.action_generate.desc"),action:"generate",arguments:[],active:!1,completed:!1,error:!1,disabled:!0}},tS="auto",nS=function(){var e=Object(je.a)(xe.a.mark(function e(t,n,r,a,o,i,s){var c,d,u,l;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=[],"auto"!==s){e.next=15;break}return d=ke.a.create(),e.prev=3,e.next=6,d.post("http://localhost:3311/messages/IioSaidHello",{user:"Connection Test"},{timeout:500});case 6:u=e.sent,s=200===u.status?"engine":"play",e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),s="play";case 13:tS!==s&&i.isConnected()&&i.disconnect("engine"===tS?"Cody":"Cody Play"),tS=s;case 15:return l="play"===s?"play":"http://localhost:3311",c.push({id:"cody-connect-step",title:n("insp.cody_wizard.step_run_cody.action_connect.title"),description:n("insp.cody_wizard.step_run_cody.action_connect.desc"),action:"connect",arguments:[l,r.displayName,o],active:!0,completed:!1,error:!1,icon:he.createElement(DI,{style:{position:"relative",marginRight:"20px"}})}),oI(t)?cS(t,c,n,a):xI(t)?rS(t,c,n,a):nk(t)?sS(t,c,n,a):kI(t)?aS(t,c,n,a):EI(t)&&iS(t,c,n,a),"play"!==s&&c.push({id:"healthcheck-step",title:"Health Check",description:n("insp.cody_wizard.step_run_cody.action_healthcheck.desc"),action:"healthcheck",arguments:["http://localhost:4200/api/health","http://localhost:4200"],active:!1,completed:!1,error:!1,disabled:!0,icon:he.createElement(Cp.a,{name:"heartbeat",color:"red"})}),e.abrupt("return",c);case 20:case"end":return e.stop()}},e,this,[[3,10]])}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),rS=function(e,t,n,r){var a=eS(n),o=r.getNode(e.vo.getId());o&&t.push(Object(Ye.a)({id:"generate-"+e.vo.getId(),title:e.vo.getTechnicalName(),icon:he.createElement(GI,{activeStep:"anyVO"}),node:o,wizardStep:"anyVO"},a))},aS=function(e,t,n,r){var a=eS(n);if(e.ui){var o=r.getNode(e.ui.getId());o&&t.push(Object(Ye.a)({id:"generate-"+e.ui.getId(),title:e.ui.getTechnicalName(),icon:he.createElement(GI,{activeStep:"ui"}),node:o,wizardStep:"ui"},a))}},oS=[Dc.freeText,Dc.edge,Dc.icon,Dc.misc],iS=function(e,t,n,r){var a=eS(n),o=[];e.feature.children().forEach(function(e){if(!oS.includes(e.getType())){var n=r.getNode(e.getId());if(n){var i=Object(Ye.a)({id:"generate-"+e.getId(),title:e.getTechnicalName(),icon:he.createElement(Xv,{cellType:e.getType(),size:"normal"}),node:n,wizardStep:"feature"},a);if(e.getType()!==Dc.document)return void o.push(i);t.push(i)}}}),t.push.apply(t,o)},sS=function(e,t,n,r){var a=eS(n);if(e.event){var o=r.getNode(e.event.getId());o&&t.push(Object(Ye.a)({id:"generate-"+e.event.getId(),title:e.event.getTechnicalName(),icon:he.createElement(GI,{activeStep:"dddEvent"}),node:o,wizardStep:"policyEvent"},a))}if(e.policy){var i=r.getNode(e.policy.getId());i&&t.push(Object(Ye.a)({id:"generate-"+e.policy.getId(),title:e.policy.getTechnicalName(),icon:he.createElement(GI,{activeStep:"policy"}),node:i,wizardStep:"policy"},a))}dS(e,t,n,r)},cS=function(e,t,n,r){var a=eS(n);if(e.state){var o=r.getNode(e.state.getId());o&&t.push(Object(Ye.a)({id:"generate-"+e.state.getId(),title:e.state.getTechnicalName(),icon:he.createElement(GI,{activeStep:"state"}),node:o,wizardStep:"state"},a))}if(e.command){var i=r.getNode(e.command.getId());i&&t.push(Object(Ye.a)({id:"generate-"+e.command.getId(),title:e.command.getTechnicalName(),icon:he.createElement(GI,{activeStep:"command"}),node:i,wizardStep:"command"},a))}if(e.aggregate){var s=r.getNode(e.aggregate.getId());s&&t.push(Object(Ye.a)({id:"generate-"+e.aggregate.getId(),title:e.aggregate.getTechnicalName(),icon:he.createElement(GI,{activeStep:"aggregate"}),node:s,wizardStep:"aggregate"},a))}if(e.events&&e.events.forEach(function(e){var n=r.getNode(e.getId());n&&t.push(Object(Ye.a)({id:"generate-"+e.getId(),title:e.getTechnicalName(),icon:he.createElement(GI,{activeStep:"dddEvent"}),node:n,wizardStep:"dddEvent"},a))}),e.ui){var c=r.getNode(e.ui.getId());c&&t.push(Object(Ye.a)({id:"generate-"+e.ui.getId(),title:e.ui.getTechnicalName(),icon:he.createElement(GI,{activeStep:"ui"}),node:c,wizardStep:"ui"},a))}if(e.stateList){var d=r.getNode(e.stateList.getId());d&&t.push(Object(Ye.a)({id:"generate-"+e.stateList.getId(),title:e.stateList.getTechnicalName(),icon:he.createElement(GI,{activeStep:"state"}),node:d,wizardStep:"state"},a))}dS(e,t,n,r)},dS=function(e,t,n,r){if(e.feature){var a=eS(n),o=t.map(function(e){return e.title});e.feature.children().forEach(function(e){if(!oS.includes(e.getType())&&!o.includes(e.getTechnicalName())){o.push(e.getTechnicalName());var n=r.getNode(e.getId());n&&t.splice(1,0,Object(Ye.a)({id:"generate-"+e.getId(),title:e.getTechnicalName(),icon:he.createElement(Xv,{cellType:e.getType(),size:"normal"}),node:n,wizardStep:"feature"},a))}})}},uS=[{key:"auto",text:"auto",value:"auto"},{key:"play",text:"Cody Play",value:"play"},{key:"engine",text:"Cody Engine",value:"engine"}],lS=function(e){var t=Object(Fe.useSelector)(RI()),n=Object(Fe.useDispatch)(),r=eO();return he.createElement(UO.a,{inline:!0},he.createElement("label",null,"run on:\xa0\xa0"),he.createElement(tt.a,{inline:!0,placeholder:"Select target",value:t,options:uS,onChange:function(e,t){return a=t.value,r.isConnected()&&r.disconnect("Cody"),void n(bl(a));var a},className:"cody-wizard-inline-select"}))},mS=Object(Ue.b)()(function(e){var t=e.activeStep?e.ctx.nextStep(e.activeStep,e.ctx):null;return t?he.createElement(Ni.a,{icon:"right chevron",labelPosition:"right",basic:!0,className:"noborder leftborder",content:NI(t,e.t),onClick:function(){return e.onNextStep(t)}}):he.createElement(he.Fragment,null)}),pS=null,fS=Object(Ue.b)()(function(e){var t=e.forcedPreviousStep||(e.activeStep?e.ctx.previousStep(e.activeStep,e.ctx):null);return!t&&e.activeStep&&"runCody"===e.activeStep&&pS&&(t=pS),"runCody"!==e.activeStep&&(pS=e.activeStep),t?he.createElement(Ni.a,{icon:"left chevron",labelPosition:"left",basic:!0,className:"noborder rightborder",content:NI(t,e.t),onClick:function(){return e.onPreviousStep(t)}}):he.createElement(he.Fragment,null)}),hS=Object(Ue.b)()(function(e){return he.createElement(nt.a,{error:!0},e.t("insp.cody_wizard.unsupported_node",{name:e.node.getName(),type:e.node.getType()}))}),gS=80,bS=100,yS=300,vS=yS-bS,ES=yS-bS,OS=9,xS="px",jS=10,wS=function(e){return!!e&&"object"===typeof e&&"selectContext"===e.step},kS=null,IS={board:new ql(Ml),type:"empty",nextStep:function(){return null},previousStep:function(){return null},installCodyGraphSuggestions:function(){}},SS=Object(Ue.b)()(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(Fe.useSelector)(Ay(e.boardId)),i=Object(Fe.useSelector)(zO()),s=Object(Ye.a)({},IS,{board:o}),c=Object(he.useState)(s),d=Object(Ke.a)(c,2),u=d[0],l=d[1],m=Object(he.useState)(s),p=Object(Ke.a)(m,2),f=p[0],h=p[1],g=Object(he.useState)(!1),b=Object(Ke.a)(g,2),y=b[0],v=b[1],E=Object(he.useState)(null),O=Object(Ke.a)(E,2),x=O[0],j=O[1],w=Object(he.useState)(null),k=Object(Ke.a)(w,2),I=k[0],S=k[1],C=Object(he.useState)(void 0),_=Object(Ke.a)(C,2),T=_[0],A=_[1],N=NE(),L=(Object(Ke.a)(N,1)[0],Object(he.useState)(!1)),R=Object(Ke.a)(L,2),B=(R[0],R[1]),D=i.width+10,P=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null,r=(arguments.length>2?arguments[2]:void 0)||s;switch(B(!e.isEnabled()),e.getType()){case Dc.command:rk(e)?(r=tk(e,o),n="policy"):(r=iI(e,o),n="command");break;case Dc.aggregate:r=iI(e,o),n="aggregate";break;case Dc.event:oI(r)?n="dddEvent":ym(e)?(n="dddEvent",r=iI(e,o)):nk(r)?n="policyEvent":rk(e)?(n="policyEvent",r=tk(e,o)):n={step:"selectContext",contexts:["dddAction","policy"],node:e};break;case Dc.ui:r=_I(e)?iI(e,o):wI(e,o),n="ui";break;case Dc.document:if(HO(e)){r=iI(e,o),n="state";break}r=OI(e,o),n="anyVO";break;case Dc.feature:r=TI(e)?rk(e)?tk(e,o):iI(e,o):vI(e,o),n="feature";break;case Dc.policy:r=tk(e,o),n="policy";break;case Dc.externalSystem:rk(e)?(r=tk(e,o),n="policy"):j(e);break;default:j(e)}return l(r),h(Tk(r)),t&&S(n),r};e.openHandle(function(e,t,n){if(a(e),t)if(function(e){switch(e.getType()){case Dc.event:return AI(e);default:return!0}}(t)){var r=P(t,!I);n&&(t.getType()===Dc.feature?h(r):h(Tk(r,t)),S("runCody"))}else j(t),l(s),h(s)});var z=function(){l(s),h(s),v(!1),j(null),S(null),kS=null,e.onClose()},M=function(){kS&&function(e){var t=Object(Ye.a)({},f);for(var n in e)u[n]!==e[n]&&("feature"===n?t=e:t[n]=e[n]);h(t),wS(I)?P(I.node,!0,e):l(e)}(kS()),kS=null},U=function(e){"runCody"===I?y||h(Tk(u)):M(),S(e),A(void 0)},F=function(){M(),z()},G=function(e){switch(e){case"command":return"https://wiki.prooph-board.com/event_storming/basic-concepts.html#command";case"aggregate":return"https://wiki.prooph-board.com/event_storming/basic-concepts.html#aggregate";case"state":case"anyVO":return"https://wiki.prooph-board.com/event_storming/basic-concepts.html#information";case"dddEvent":case"publicEvent":case"policyEvent":return"https://wiki.prooph-board.com/event_storming/basic-concepts.html#domain-event";default:return null}}(I);return he.createElement(Ai.a,{open:r,closeIcon:!0,onClose:F,size:"large",style:{left:"calc(5% + ".concat(D,"px)"),width:"calc(90% - ".concat(D,"px)"),height:"calc(80% - 64px)"},closeOnEscape:!1},he.createElement(Ai.a.Header,null,"Cody Wizard",I?": "+NI(I,e.t):"","\xa0",he.createElement(GI,{activeStep:I}),G&&he.createElement(Ni.a,{as:"a",href:G,target:"_blank",floated:"right",circular:!0,basic:!0,icon:"question",size:"mini"}),he.createElement("p",{style:{float:"right",fontSize:"1rem"}},he.createElement(lS,null))),he.createElement(Ai.a.Content,{scrolling:!0,style:{height:"calc(80vh - 10em)"}},x&&he.createElement(hS,{node:x}),!x&&"runCody"===I&&he.createElement(HI,{ctx:f,onBackToStepChanged:function(e){return A(e)},onCodyFinished:function(e){e||v(!0)}})),he.createElement(Ai.a.Actions,null,he.createElement(sb.a,{floated:"left"},he.createElement(fS,{activeStep:I,ctx:u,forcedPreviousStep:T,onPreviousStep:function(e){return U(e)}}),I&&he.createElement(Ni.a,{className:"noborder",basic:!0,content:NI(I,e.t),style:{cursor:"default"}}),he.createElement(mS,{activeStep:I,ctx:u,onNextStep:function(e){return U(e)}})),he.createElement(Ni.a,{basic:!0,className:"noborder",content:e.t("app.form.close"),onClick:F}),he.createElement(Ni.a,{primary:!0,icon:"play circle",content:e.t("insp.cody_wizard.run_cody"),onClick:function(){"runCody"===I?h(Object(Ye.a)({},f)):M(),v(!1),"feature"===I&&h(Object(Ye.a)({},u)),S("runCody")},disabled:"runCody"===I&&!y||wS(I)})))}),CS=function(e,t,n){var r=Object(Ye.a)({},IS,{board:t}),a=null;if(!e)return{ctx:r,step:a};switch(e.getType()){case Dc.command:r=iI(e,t),a="command";break;case Dc.aggregate:r=iI(e,t),a="aggregate";break;case Dc.event:ym(e)?(a="dddEvent",r=iI(e,t)):rk(e)?(a="policyEvent",r=tk(e,t)):a={step:"selectContext",contexts:["dddAction","policy"],node:e};break;case Dc.ui:r=_I(e)?iI(e,t):wI(e,t),a="ui";break;case Dc.document:if(HO(e)){r=iI(e,t),a="state";break}r=OI(e,t),a="anyVO";break;case Dc.feature:r=TI(e)?rk(e)?tk(e,t):iI(e,t):vI(e,t),a="feature";break;case Dc.policy:r=tk(e,t),a="policy";break;case Dc.externalSystem:rk(e)&&(r=tk(e,t),a="policy")}return{ctx:r,step:a}},_S=function(e){e.setCodyUpCb(null),e.setCodyDownCb(null),e.setCodyLeftCb(null),e.setCodyRightCb(null)},TS=function(e){e.ctrlKey&&(e.preventDefault(),e.stopImmediatePropagation())},AS=function(e){function t(e){var n;Object(Be.a)(this,t),(n=Object(Pe.a)(this,Object(ze.a)(t).call(this,e))).mxGraph=void 0,n.divGraph=void 0,n.divDimmer=void 0,n.editorUi=void 0,n.codec=void 0,n.initialized=!1,n.mouseSync=void 0,n.boardSync=void 0,n.boardAgent=void 0,n.iioCody=void 0,n.lastFocusedCells="",n.lastClicks=null,n.uploadOpenHandle=void 0,n.boardLinkHandle=void 0,n.taskLinkHandle=void 0,n.codyEngineWizardHandle=void 0,n.imageUploadedListener=null,n.boardLinkListener=null,n.taskLinkListener=null,n.setUsedGraph=void 0,n.setUsedMouseSync=void 0,n.activeGraphElement=void 0,n.board=void 0,n.mxGraphWrapper=void 0,n.syncChangesWithCody=function(){var e=Object(je.a)(xe.a.mark(function e(t,r){var a,o,i,s,c,d,u,l,m,p,f,h,g,b,y,v,E,O,x,j,w,k,I,S,C,_,T,A,N,L,R,B,D,P,z;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.iioCody&&n.iioCody.syncRequired()){e.next=3;break}return console.log("Skipping sync with cody, because no server is listening for syncs at the moment",t),e.abrupt("return");case 3:if(console.log("syncing changes with cody",t.toJS()),a=n.editorUi.editor.graph,o=n.editorUi,i=Fm(a,o),s=n.props.board.uid,c=Tt(s),t.action!==zm.deleted){e.next=59;break}d=[],u=[],l=!0,m=!1,p=void 0,e.prev=15,f=r[Symbol.iterator]();case 17:if(l=(h=f.next()).done){e.next=32;break}if(g=h.value,!(b=g.child)){e.next=29;break}if(inspectioUtils.getTypeInclEdge(b)!==ap.edge){e.next=24;break}return u.push(b),e.abrupt("continue",29);case 24:if(y=a.getVerticesTree(b),d.push.apply(d,Object(eo.a)(y.map(function(e){return e.getId()}))),!y.length){e.next=29;break}return e.next=29,n.iioCody.syncDeletedNodes(s,y.map(function(e){return new Jm(e,a.getModel(),a,i,!1,c)}));case 29:l=!0,e.next=17;break;case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(15),m=!0,p=e.t0;case 38:e.prev=38,e.prev=39,l||null==f.return||f.return();case 41:if(e.prev=41,!m){e.next=44;break}throw p;case 44:return e.finish(41);case 45:return e.finish(38);case 46:v=0;case 47:if(!(v<u.length)){e.next=58;break}if(E=u[v],O=[],E.source&&!d.includes(E.source.getId())&&O.push(new Jm(E.source,a.getModel(),a,i,!1,c)),E.target&&!d.includes(E.target.getId())&&O.push(new Jm(E.target,a.getModel(),a,i,!1,c)),!O.length){e.next=55;break}return e.next=55,n.iioCody.syncChangedNodes(s,O);case 55:v++,e.next=47;break;case 58:return e.abrupt("return");case 59:if(t.cellId){e.next=62;break}return console.log("no cellId given for transaction"),e.abrupt("return");case 62:x=t.cellId.split(";"),j=[],w=[],k=!0,I=!1,S=void 0,e.prev=68,C=x[Symbol.iterator]();case 70:if(k=(_=C.next()).done){e.next=107;break}if(T=_.value,A=a.model.getCell(T)){e.next=76;break}return console.log("skipping cellId, cause not found in graph model",T),e.abrupt("continue",104);case 76:if(inspectioUtils.getTypeInclEdge(A)!==ap.edge){e.next=81;break}return console.log("change effected edge",A),A.source&&!w.includes(A.source.getId())&&(console.log("adding edge source to effected cells"),w.push(A.source.getId()),j.push(new Jm(A.source,a.getModel(),a,i,!1,c))),A.target&&!w.includes(A.target.getId())&&(console.log("adding edge target to effected cells"),w.push(A.target.getId()),j.push(new Jm(A.target,a.getModel(),a,i,!1,c))),e.abrupt("continue",104);case 81:if(a.isVertex(A)){e.next=103;break}for(N=a.getVerticesTree(A),L=!0,R=!1,B=void 0,e.prev=86,D=N[Symbol.iterator]();!(L=(P=D.next()).done);L=!0)z=P.value,w.includes(z.getId())||(w.push(z.getId()),j.push(new Jm(z,a.getModel(),a,i,!1,c)));e.next=94;break;case 90:e.prev=90,e.t1=e.catch(86),R=!0,B=e.t1;case 94:e.prev=94,e.prev=95,L||null==D.return||D.return();case 97:if(e.prev=97,!R){e.next=100;break}throw B;case 100:return e.finish(97);case 101:return e.finish(94);case 102:return e.abrupt("continue",104);case 103:w.includes(A.getId())||(w.push(A.getId()),j.push(new Jm(A,a.getModel(),a,i,!1,c)));case 104:k=!0,e.next=70;break;case 107:e.next=113;break;case 109:e.prev=109,e.t2=e.catch(68),I=!0,S=e.t2;case 113:e.prev=113,e.prev=114,k||null==C.return||C.return();case 116:if(e.prev=116,!I){e.next=119;break}throw S;case 119:return e.finish(116);case 120:return e.finish(113);case 121:return e.next=123,n.iioCody.syncChangedNodes(s,j);case 123:case"end":return e.stop()}},e,this,[[15,34,38,46],[39,,41,45],[68,109,113,121],[86,90,94,102],[95,,97,101],[114,,116,120]])}));return function(t,n){return e.apply(this,arguments)}}(),n.LoadGraph=n.LoadGraph.bind(Object(ev.a)(Object(ev.a)(n))),n.divGraph=ge.a.createRef(),n.divDimmer=ge.a.createRef(),n.codec=new mxCodec,n.codec.lookup=function(e){var t=n.editorUi.editor.graph.model.getCell(e);return t||null};var r=NE(),a=Object(Ke.a)(r,2)[1];n.setUsedGraph=a;var o=BE(),i=Object(Ke.a)(o,2)[1];return n.setUsedMouseSync=i,n}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUserBoard(this.props.match.params.uid)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this;return!this.board&&e.board&&""!==e.user.name?!!e.board.detailsFetched&&(this.initGraphBoard(e),!0):(this.board&&this.board.uid!==e.board.uid&&e.history.replace(_t,{href:kt(e.board.uid)}),this.editorUi&&!this.board.writeAccess&&e.board.writeAccess&&this.editorUi.editor.graph.setEnabled(!0),this.editorUi&&this.props.liteMode!==e.liteMode&&this.setLiteMode(e),this.board&&this.board.videoSessionActive!==e.board.videoSessionActive?(this.board=this.board.set("videoSessionActive",e.board.videoSessionActive),!0):(this.editorUi&&e.board.shouldImport&&(this.editorUi.actions.get("import").funct(function(t){var r=mxUtils.getXml(n.editorUi.editor.getGraphXml());n.board=n.board.updateXml(r,e.user.uid),e.onBoardImported(e.board.uid,n.board,Fm(n.editorUi.editor.graph,n.editorUi))}),e.onBoardImportStarted(this.board.uid)),this.editorUi&&e.board.shouldExport&&(this.editorUi.actions.get("export").funct(),e.onBoardExported(e.board.uid)),this.editorUi&&this.checkScrollToCells(e),!1))}},{key:"componentWillUnmount",value:function(){this.editorUi&&this.editorUi.destroy(),this.setUsedGraph(void 0),this.mxGraphWrapper=void 0,this.setUsedMouseSync(void 0),document.body.style.overflow="auto",document.body.classList.remove("workspace"),document.title="prooph board";var e=document.getElementById("topmenuUsers");e&&(e.innerHTML=""),this.props.board&&this.props.clearBoardHistory(this.props.board.uid),this.boardSync&&this.boardSync.stopSync(),this.mouseSync&&this.mouseSync.stopSync({userId:this.props.user.uid,boardId:this.props.board.uid}),this.boardAgent&&this.boardAgent.destroy(),this.iioCody&&(this.iioCody.onSyncRequired(void 0),this.iioCody.disconnect()),window.removeEventListener("wheel",TS)}},{key:"render",value:function(){var e=this;return ge.a.createElement(ge.a.Fragment,null,ge.a.createElement("div",{className:"graph-container disable-user-select",ref:this.divGraph,id:"divGraph"}),ge.a.createElement("div",{ref:this.divDimmer},ge.a.createElement(Mg.a,{active:!0,className:"page"},ge.a.createElement(Ug.a,{size:"large"},"Loading Board"))),this.props.board&&ge.a.createElement(_O,{boardId:this.props.board.uid,openHandle:function(t){return e.uploadOpenHandle=t},onCancel:function(){e.uploadOpenHandle(!1)},onFileUploaded:function(t,n,r,a){e.imageUploadedListener&&e.imageUploadedListener(t,n,r,a)}}),this.props.board&&ge.a.createElement(xO,{boardId:this.props.board.uid,openHandle:function(t){return e.boardLinkHandle=t},onCancel:function(){e.boardLinkHandle(!1)},onLinkChosen:function(t){e.boardLinkListener&&e.boardLinkListener(t)}}),this.props.board&&ge.a.createElement(TO,{openHandle:function(t){return e.taskLinkHandle=t},onCancel:function(){e.taskLinkHandle(!1)},onLinkChosen:function(t){e.taskLinkListener&&e.taskLinkListener(t)}}),this.props.board&&ge.a.createElement(SS,{boardId:this.props.board.uid,openHandle:function(t){return e.codyEngineWizardHandle=t},onClose:function(){return e.codyEngineWizardHandle(!1,null)}}))}},{key:"initGraphBoard",value:function(e){window.scroll(0,0),document.body.style.overflow="hidden",document.body.classList.add("workspace"),document.title=e.board.name+" - prooph board",inspectioUtils.metadataToJSON=function(e){if(!e)return{};try{return Rc(e)}catch(t){return{}}},inspectioUtils.metadataJsonToString=function(e){return e?Lc(e,null,2):"{}"},this.mxGraph=TE(),this.LoadGraph(e,{},this.mxGraph),this.board=e.board}},{key:"saveBoard",value:function(){this.board&&this.props.saveBoard(this.board,Fm(this.editorUi.editor.graph,this.editorUi))}},{key:"LoadGraph",value:function(e,t,n){var r=this,a=this.divGraph.current;a.innerHTML="",mxUtils.alert=function(e){r.props.onError("Board Error",e)};var o=zn.clone(MXGRAPH_ROOT_UUIDS),i=Wl()();mxGraphModel.prototype.createId=function(e){var t=o.pop();return t||i.fromUUID(it.a.v4())};var s=EditorUi.prototype.init;EditorUi.prototype.init=function(){s.apply(this,arguments),this.actions.get("export").setEnabled(!1)},mxResources.loadDefaultBundle=!1;var c=mxResources.getDefaultBundle(RESOURCE_BASE,mxLanguage)||mxResources.getSpecialBundle(RESOURCE_BASE,mxLanguage);n.mxUtils.getAll([c,STYLE_PATH+"/"+ispConst.THEME+"/style.xml"],function(t){mxResources.parse(t[0].getText());var n={};if(n[Graph.prototype.defaultThemeName]=t[1].getDocumentElement(),r.editorUi=new EditorUi(new Editor("0"===urlParams.chrome,n,void 0,void 0,!0,e.board.eventModelingEnabled),a,!1,e.board.name,"boardSidebarContainer",e.board.eventModelingEnabled),function(e,t,n,r,a){var o=e.editor.graph;o.setHistory(t),o.enableCopyToClipboard(n),o.setDeeplinkFactory(r),o.enableNotifications(a)}(r.editorUi,e.history,_E.a,Tt(e.board.uid),function(t,n,r){"info"===r?e.onInfo(t,n):e.onError(t,n)}),r.attachImageUploadListener(),r.attachLinkBoardListener(),r.attachLinkTaskListener(),r.attachCodyEngineWizardListener(),r.attachImageReplaceListener(),r.attachCodySuggestionsListener(),r.attachChangeActiveGraphElementListener(),r.attachSyncLabelChangedListener(),r.attachLookupElementListener(e),r.attachShowElementDetailsListener(),r.attachCellConnectedListener(),r.attachCodyListener(),r.initializeAutoSaveManager(e),r.setLiteMode(e),r.setCodySuggestEnabled(e),r.setEventModelingEnabled(e),e.board.xml){var i=mxUtils.parseXml(e.board.xml);r.editorUi.editor.graph.model.beginUpdateWithoutChangeNotifications();try{r.editorUi.editor.graph.enableLazyTextPaint(),r.editorUi.editor.graph.importGraphModel(i.documentElement,void 0,void 0,void 0,!1)}finally{r.editorUi.editor.graph.model.endUpdateWithoutChangeNotifications(),r.editorUi.editor.graph.disableLazyTextPaint()}if(r.editorUi.editor.graph.setEnabled(e.board.writeAccess),r.editorUi.editor.graph.initContainerStyles(),r.editorUi.editor.graph.zoom(.19,!0,!1,!1),r.editorUi.editor.graph.showAll(),e.location.search){var s=new URLSearchParams(e.location.search);s.get("clicks")?r.lastClicks=s.get("clicks"):r.lastClicks="0"}window.setTimeout(function(){r.initialized=!0,r.setCodySuggestEnabled(r.props),r.setEventModelingEnabled(r.props);var t=r.checkScrollToCells(e);r.checkPlayshotsModal(e),t||r.editorUi.editor.graph.center(),r.divDimmer.current.innerHTML="",r.initBoardAgent(),r.setLiteMode(r.props),console.log("board wheel listener installed"),window.addEventListener("wheel",TS,{passive:!1})},e.location.search?3e3:1e3)}else r.initialized=!0,r.divDimmer.current.innerHTML="",r.initBoardAgent(),window.addEventListener("wheel",TS,{passive:!1});r.editorUi.editor.graph.setDefaultParent(r.editorUi.editor.graph.model.getCell(MXGRAPH_ROOT_UUIDS[0])),r.mxGraphWrapper=Fm(r.editorUi.editor.graph,r.editorUi),r.setUsedGraph(r.mxGraphWrapper),o=[],e.onBoardInitialized(e.board,Fm(r.editorUi.editor.graph,r.editorUi)),r.initCody()})}},{key:"attachImageUploadListener",value:function(){var e=this;this.editorUi.editor.graph.onInsertImage(function(t){e.imageUploadedListener=function(n,r,a,o){t(n,r,a,o),e.uploadOpenHandle(!1),e.imageUploadedListener=null},e.uploadOpenHandle(!0)})}},{key:"attachLinkBoardListener",value:function(){var e=this;this.editorUi.editor.graph.onLinkBoard(function(t,n){e.boardLinkListener=function(t){n(t),e.boardLinkHandle(!1),e.boardLinkListener=null},e.boardLinkHandle(!0,t)})}},{key:"attachLinkTaskListener",value:function(){var e=this;this.editorUi.editor.graph.onLinkTask(function(t,n){e.taskLinkListener=function(t){n(t),e.taskLinkHandle(!1),e.taskLinkListener=null},e.taskLinkHandle(!0,t)})}},{key:"attachCodyEngineWizardListener",value:function(){var e=this;this.editorUi.editor.graph.onCodyWizard(function(t,n){var r=Tt(e.props.board.uid);e.codyEngineWizardHandle(!0,new Jm(t,e.editorUi.editor.graph.getModel(),e.editorUi.editor.graph,Fm(e.editorUi.editor.graph,e.editorUi),!1,r),n)})}},{key:"attachImageReplaceListener",value:function(){var e=this;this.editorUi.editor.graph.onReplaceImage(function(t,n){e.imageUploadedListener=function(t,r,a,o){n(t,r,a,o),e.uploadOpenHandle(!1),e.imageUploadedListener=null},e.uploadOpenHandle(!0,t)})}},{key:"attachCodySuggestionsListener",value:function(){var e=this;this.editorUi.editor.graph.setUpdateCodySuggestionsCb(function(t){if(e.mxGraphWrapper){var n=e.mxGraphWrapper.getNode(t.getId());n&&function(e,t,n){_S(n);var r=CS(e,t),a=r.ctx,o=r.step;wS(o)?o.contexts.forEach(function(r){var a=Object(Ye.a)({},IS,{board:t}),o=null;switch(r){case"dddAction":a=iI(e,t),o="dddEvent";break;case"policy":a=tk(e,t),o="policyEvent"}o&&a.installCodyGraphSuggestions(o,a,n)}):o&&a.installCodyGraphSuggestions(o,a,n)}(n,e.props.board,e.mxGraphWrapper)}})}},{key:"attachChangeActiveGraphElementListener",value:function(){var e=this;this.editorUi.editor.graph.onChangeActiveGraphElement(function(t,n,r,a){if(!t)return e.activeGraphElement=void 0,void e.props.onActiveGraphElementChanged(e.props.board.uid,void 0);if(t.isEdge()){var o,i="Edge";return t.source&&t.target&&(i=inspectioUtils.getLabelText(t.source)+" -> "+inspectioUtils.getLabelText(t.target),o={source:t.source.getId(),target:t.target.getId()}),void e.props.onActiveGraphElementChanged(e.props.board.uid,{id:t.getId(),type:Dc.edge,label:i,metadata:inspectioUtils.getMetadata(t),edgeData:o,updateMetadata:n,updateSimilarElements:r,replaceTags:a,locked:!e.editorUi.editor.graph.isCellEnabled(t)})}t.isVertex()&&e.props.onActiveGraphElementChanged(e.props.board.uid,{id:t.getId(),type:inspectioUtils.isEventModel(t)?ap.swimlanes:inspectioUtils.getTypeInclEdge(t),label:inspectioUtils.getLabelText(t),metadata:inspectioUtils.getMetadata(t),tags:inspectioUtils.getTags(t),updateMetadata:n,updateSimilarElements:r,replaceTags:a,locked:!e.editorUi.editor.graph.isCellEnabled(t)}),e.clearGraphElementCache(t.getId()),e.activeGraphElement=t})}},{key:"attachSyncLabelChangedListener",value:function(){var e=this;this.editorUi.editor.graph.addListener(mxEvent.LABEL_CHANGED,function(t,n){var r=n.getProperty("cell");r.isVertex()&&e.activeGraphElement&&e.activeGraphElement.getId()===r.getId()&&(e.clearGraphElementCache(r.getId()),e.props.onActiveGraphElementLabelChanged(e.props.board.uid,r.getId(),inspectioUtils.getLabelText(r)))})}},{key:"syncActiveGraphElementWithRemoteChange",value:function(e){if(e instanceof mxValueChange){var t=e.cell;t&&t.isVertex()&&this.activeGraphElement&&this.activeGraphElement.getId()===t.getId()&&(this.clearGraphElementCache(t.getId()),this.props.onActiveGraphElementLabelChanged(this.props.board.uid,t.getId(),inspectioUtils.getLabelText(t)),this.props.onActiveGraphElementMetadataChanged(this.props.board.uid,t.getId(),inspectioUtils.getMetadata(t)))}}},{key:"attachLookupElementListener",value:function(e){this.editorUi.editor.graph.onLookupElement(function(t,n){n&&(t="type:".concat(n.toLowerCase(),";").concat(t)),e.filterElementsTree(e.board.uid,t,!0)})}},{key:"initializeAutoSaveManager",value:function(e){var t=this,n=mxAutoSaveManager.prototype.graphModelChanged,r=new mxAutoSaveManager(this.editorUi.editor.graph);r.autoSaveDelay=1,r.autoSaveThrottle=1,r.autoSaveThreshold=1,r.graphModelChanged=function(a){var o=[];t.sortChanges(a).forEach(function(e){return o.push(mxUtils.getXml(t.codec.encode(e)))}),t.boardSync?t.board=t.board.updateVersion(new zl({userId:e.user.uid,version:t.boardSync.currentVersion()})):t.board=t.board.updateVersion(new zl({userId:e.user.uid,version:t.board.version.version+1}));var i=t.detectHistoryAttributesFromChanges(a),s=i.action,c=i.type,d=i.label,u=i.cellId,l=M.localBoardChanged(e.board.uid,Object(fe.List)(o),t.boardSync?t.boardSync.currentVersion():t.board.version.version,e.user.uid,s,c,d,u);t.boardSync?t.boardSync.publishChanges(l):t.saveBoard(),t.syncChangesWithCody(l,a).catch(function(e){return console.error(e)}),e.onLocalBoardChanged(l),n.call(r,a)}}},{key:"setLiteMode",value:function(e){e.liteMode?this.editorUi.editor.graph.enableLiteMode():this.editorUi.editor.graph.disableLiteMode()}},{key:"setCodySuggestEnabled",value:function(e){e.board&&this.editorUi.editor.graph.setCodySuggestEnabled(e.board.codySuggestEnabled)}},{key:"setEventModelingEnabled",value:function(e){e.board&&this.editorUi.editor.graph.setEventModelingEnabled(e.board.eventModelingEnabled)}},{key:"attachShowElementDetailsListener",value:function(){var e=this;this.editorUi.editor.graph.onShowMetadata(function(t,n){!e.props.board.shouldShowElementDetails||t?e.props.toggleElementDetails(e.props.board.uid,!0,t):n&&e.props.setSideBySideCell(n.getId())})}},{key:"attachCellConnectedListener",value:function(){var e=this;this.editorUi.editor.graph.addListener(mxEvent.CELL_CONNECTED,function(t,n){!n.getProperty("source")&&window.setTimeout(function(){e.editorUi.editor.graph.setSelectionCell(n.getProperty("terminal"))},10)})}},{key:"checkPlayshotsModal",value:function(e){if(!this.initialized)return!1;if(e.board.xml&&e.location.search){var t=new URLSearchParams(e.location.search);t.has("playshots")&&!e.board.shouldShowPlayshotModal&&(t.delete("playshots"),e.togglePlayshotModal(e.board.uid,!0))}}},{key:"checkScrollToCells",value:function(e){if(!this.initialized)return!1;var t=!1;if(e.board.xml&&e.location.search){var n=new URLSearchParams(e.location.search),r=this.editorUi.editor.graph,a=n.get("cells");if(a){if(this.lastFocusedCells===a&&this.lastClicks===n.get("clicks"))return!1;var o=null!==this.lastClicks;this.lastFocusedCells=a,this.lastClicks=n.get("clicks");var i=a.split(";"),s=[];i.forEach(function(e){var t=r.model.getCell(e);t&&s.push(t)}),s.length>0&&(r.scrollCellsIntoView(s,!0,!0,o),t=!0,1===parseInt(n.get("select")||"0")&&r.setSelectionCells(s))}}return t}},{key:"attachCodySyncListener",value:function(){var e=this;this.iioCody&&this.iioCody.onSyncRequired(Object(je.a)(xe.a.mark(function t(){var n,r,a,o,i,s,c,d,u,l,m,p;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.iioCody){t.next=46;break}if(n=e.editorUi.editor.graph,r=e.editorUi,a=n.getAllVertexElementsOfActiveLayer(),o=[],i=Tt(e.props.board.uid),!a||!Array.isArray(a)){t.next=45;break}s=!0,c=!1,d=void 0,t.prev=10,u=a[Symbol.iterator]();case 12:if(s=(l=u.next()).done){t.next=25;break}if(p=l.value,(m=o).push.apply(m,Object(eo.a)(Um([new Jm(p,n.getModel(),n,Fm(n,r),!1,i)]))),!(o.length>=10)){t.next=22;break}return t.next=18,e.iioCody.syncNodes(e.props.board.uid,o);case 18:if(t.sent){t.next=21;break}return t.abrupt("return");case 21:o=[];case 22:s=!0,t.next=12;break;case 25:t.next=31;break;case 27:t.prev=27,t.t0=t.catch(10),c=!0,d=t.t0;case 31:t.prev=31,t.prev=32,s||null==u.return||u.return();case 34:if(t.prev=34,!c){t.next=37;break}throw d;case 37:return t.finish(34);case 38:return t.finish(31);case 39:if(!(o.length>0)){t.next=45;break}return t.next=42,e.iioCody.syncNodes(e.props.board.uid,o);case 42:if(t.sent){t.next=45;break}return t.abrupt("return",!1);case 45:e.iioCody.syncFinished();case 46:case"end":return t.stop()}},t,this,[[10,27,31,39],[32,,34,38]])})))}},{key:"attachCodyListener",value:function(){var e=this,t=this.editorUi.editor.graph;t.onTriggerCody(function(t){if(e.props.board&&!e.props.board.shouldShowCodyConsole&&e.props.toggleCodyConsole(e.props.board.uid,!0),e.iioCody){var n=t.map(function(t){return e.makeGraphElement(t)});e.iioCody.trigger.Cody(e.props.board.uid,e.props.board.name,e.props.user.uid,Um(n).filter(function(e){return e.getType()!==Dc.edge}))}}),t.onMergeSchema(function(t,n){e.mxGraphWrapper&&e.mxGraphWrapper.mergeIntoSchema(e.makeGraphElement(t),e.makeGraphElement(n))})}},{key:"makeGraphElement",value:function(e){var t=this.editorUi.editor.graph;return new Jm(e,t.getModel(),t,Fm(t,this.editorUi),!1,Tt(this.props.board.uid))}},{key:"clearGraphElementCache",value:function(e){var t=this.editorUi.editor.graph,n=Fm(t,this.editorUi).getNode(e);n&&n instanceof Jm&&n.setPotentiallyStale()}},{key:"initRealtimeBoardSync",value:function(e){var t=this;this.boardSync=new pO(Ce,e.board,e.user.uid,e.user.displayName,function(n,r){var a=[];if(n.action===zm.added&&t.editorUi.editor.graph.model.getCell(n.cellId))console.log("[BoardSync] skipping patch, because it wants to add a cell that already exists: ",n.toJS());else{n.changeSet.forEach(function(e){var n=mxUtils.parseXml(e),r=t.codec.decode(n.documentElement);r.model=t.editorUi.editor.graph.model,r.execute(),a.push(r),t.syncActiveGraphElementWithRemoteChange(r)});var o=new mxUndoableEdit(t.editorUi.editor.graph.model,!1);o.changes=a,o.notify=function(){o.source.fireEvent(new mxEventObject(mxEvent.CHANGE,"edit",o,"changes",o.changes))},t.editorUi.editor.graph.model.fireEvent(new mxEventObject(mxEvent.CHANGE,"edit",o,"changes",a)),t.syncChangesWithCody(n,a).catch(function(e){return console.error(e)}),console.log("[BoardSync] Applied remote board change: ",n.toBoardVersion().version),t.board=t.board.updateVersion(new zl({userId:e.user.uid,version:t.boardSync.currentVersion()})),e.onLocalBoardUpdatedWithRemoteChange(t.board.uid,t.board,Fm(t.editorUi.editor.graph,t.editorUi)),r&&e.onRemoteBoardChanged(n)}},function(){t.board=t.board.updateVersion(new zl({userId:e.user.uid,version:t.boardSync.currentVersion()})),t.saveBoard()}),this.boardSync.startSync()}},{key:"initBoardAgent",value:function(){0}},{key:"initCody",value:function(){this.iioCody=ZE,this.attachCodySyncListener()}},{key:"initMouseSync",value:function(e){var t=this,n=0,r=this.editorUi.editor.graph,a=document.getElementById("topmenu");a&&(n=a.clientHeight),this.mouseSync=new EO(Ce,this.divGraph.current,r,function(e){var t=r.view.scale,a=r.view.translate;return{x:(e.x+a.x)*t,y:(e.y+a.y)*t+n}}),this.mouseSync.onUserJoined(function(n,r,a,o){return t.addActiveUser(e,n,r,a,o)}),this.mouseSync.onUserLeft(function(e){return t.removeActiveUser(e)}),this.mouseSync.startSync({userId:e.user.uid,name:e.user.displayName,avatar:e.user.avatarUrl,boardId:e.board.uid}),r.addListener(mxEvent.FIRE_MOUSE_EVENT,function(n,a){var o=a.getProperty("eventName"),i=a.getProperty("event");if(i){var s=r.view.scale,c=r.view.translate,d=i.getGraphX()/s-c.x,u=i.getGraphY()/s-c.y;o!==mxEvent.MOUSE_MOVE||!t.mouseSync||r.panningHandler.isActive()||r.panningHandler.physicsActive||t.mouseSync.emitUserMouseMove({userId:e.user.uid,boardId:e.board.uid,point:{x:d,y:u},vT:c,scale:s,isPanning:!1})}}),r.addListener(r.EVT_USER_IS_PANNING,function(n,r){if(t.mouseSync){var a=r.getProperty("me"),o=r.getProperty("scale"),i=r.getProperty("translate"),s=r.getProperty("mouseDelta");if(!a)return;var c=a.getGraphX()/o-i.x,d=a.getGraphY()/o-i.y;t.mouseSync.emitUserMouseMove({userId:e.user.uid,boardId:e.board.uid,point:{x:c,y:d},vT:i,scale:o,isPanning:!0},s)}}),r.addListener(r.EVT_PANNING_PHYSICS_CLEARED,function(){t.mouseSync&&t.mouseSync.syncLastKnownAbsolutePointsAfterPanning()}),r.addListener(r.EVT_USER_IS_ZOOMING,function(n,a){t.mouseSync.emitUserMouseScroll({userId:e.user.uid,boardId:e.board.uid,vT:r.view.translate,scale:r.view.scale})}),r.addListener(r.EVT_USER_IS_TYPING,function(n,r){var a=r.getProperty("typing");t.mouseSync.emitUserGestureChanged({userId:e.user.uid,boardId:e.board.uid,gesture:a?mO.Typing:mO.Default})}),r.addListener(r.EVT_USER_IS_MOVING,function(n,r){var a=r.getProperty("moving");t.mouseSync.emitUserGestureChanged({userId:e.user.uid,boardId:e.board.uid,gesture:a?mO.Moving:mO.Default})}),r.addListener(r.EVT_USER_IS_AUTO_SCROLLING,function(n,r){t.mouseSync&&t.mouseSync.emitUserIsAutoScrolling({userId:e.user.uid,boardId:e.board.uid,scale:r.getProperty("scale"),translate:r.getProperty("translate"),isPanning:r.getProperty("isPanning")})}),this.setUsedMouseSync(this.mouseSync)}},{key:"addActiveUser",value:function(e,t,n,r,a){var o=this;if(t!==e.user.uid){console.log("[mousesync] Adding active user to topmenu: ",t);var i=document.getElementById("topmenuUsers"),s=document.createElement("div");s.classList.add("item");var c=document.createElement("div");c.id="topmenuUsers-"+t,c.classList.add("ui","circular","label","observable","user"),c.style.backgroundColor=a,c.style.backgroundSize="cover",""!==r?c.style.backgroundImage="url('"+r+"')":c.innerText=n[0].toUpperCase(),c.setAttribute("data-tooltip",n),c.setAttribute("data-position","bottom center"),c.addEventListener("click",function(e){return o.toggleObserveUser(e.target)}),s.append(c),i.append(s)}}},{key:"removeActiveUser",value:function(e){console.log("[mousesync] Removing active user from topmenu: ",e);var t=document.getElementById("topmenuUsers-"+e);t&&t.parentElement.remove()}},{key:"toggleObserveUser",value:function(e){e instanceof HTMLElement&&(e.classList.contains("observed")?(e.classList.remove("observed"),this.mouseSync.stopObservingUser()):(this.unsetCurrentObservedUser(),this.mouseSync.stopObservingUser(),e.classList.add("observed"),this.mouseSync.observeUser(this.getUserIdFromLabelId(e.id))))}},{key:"unsetCurrentObservedUser",value:function(){document.getElementById("topmenuUsers").childNodes.forEach(function(e){e.firstChild instanceof HTMLElement&&e.firstChild.classList.remove("observed")})}},{key:"getUserIdFromLabelId",value:function(e){return e.replace("topmenuUsers-","")}},{key:"sortChanges",value:function(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(e){e instanceof mxGeometryChange?1===e.cell.edge||!0===e.cell.edge?n.push(e):t.push(e):e instanceof mxChildChange&&(1===e.child.edge||!0===e.child.edge)?n.push(e):t.push(e)}),t.push.apply(t,n),t}},{key:"detectHistoryAttributesFromChanges",value:function(e){if(2===(e=this.filterOutMxStyleChange(e)).length&&e[0]instanceof mxGeometryChange&&e[1]instanceof mxChildChange)return Object(Ye.a)({action:null===e[1].previous?zm.added:zm.moved},this.detectHistoryCellTypeAndLabelFromChange(e[1]));if(3===e.length&&e[0]instanceof mxGeometryChange&&e[1]instanceof mxGeometryChange&&e[2]instanceof mxChildChange)return Object(Ye.a)({action:null===e[2].previous?zm.added:zm.moved},this.detectHistoryCellTypeAndLabelFromChange(e[2]));if(1===e.length&&e[0]instanceof mxGeometryChange)return Object(Ye.a)({action:zm.moved},this.detectHistoryCellTypeAndLabelFromChange(e[0]));if(1===e.length&&e[0]instanceof mxChildChange&&null===e[0].parent)return Object(Ye.a)({action:zm.deleted},this.detectHistoryCellTypeAndLabelFromChange(e[0]));if(1===e.length&&e[0]instanceof mxValueChange)return Object(Ye.a)({action:zm.edited},this.detectHistoryCellTypeAndLabelFromChange(e[0]));if(2===e.length&&e[0]instanceof mxValueChange&&e[1]instanceof mxGeometryChange)return Object(Ye.a)({action:zm.edited},this.detectHistoryCellTypeAndLabelFromChange(e[0]));if(e.length>=4&&e[1]instanceof mxTerminalChange&&e[2]instanceof mxTerminalChange)return Object(Ye.a)({action:zm.added},this.detectHistoryCellTypeAndLabelFromChange(e[0]));var t=!0,n=[];if(e.forEach(function(e){e instanceof mxGeometryChange?n.push(e.cell.id):t=!1}),t)return{action:zm.moved,type:ap.multiple,label:"",cellId:n.join(";")};var r=!0;if(n=[],e.forEach(function(e){e instanceof mxChildChange&&null===e.parent?n.push(e.child.id):r=!1}),r)return{action:zm.deleted,type:ap.multiple,label:"",cellId:n.join(";")};var a=!0,o=null;if(e.forEach(function(t,n){n%2===0&&(!(t instanceof mxChildChange&&e[n+1]instanceof mxGeometryChange)||null!==o&&o!==t.parent&&1!==t.child.edge||!inspectioUtils.isContainer(t.parent)&&1!==t.child.edge?a=!1:1!==t.child.edge&&(o=t.parent))}),o&&a)return{action:zm.edited,type:inspectioUtils.getTypeInclEdge(o)||ap.misc,label:inspectioUtils.getLabelText(o),cellId:o.id};if(e[e.length-1]instanceof mxChildChange&&null===e[e.length-1].parent){var i=e[e.length-1].child;return{action:zm.deleted,type:inspectioUtils.getTypeInclEdge(i)||ap.misc,label:inspectioUtils.getLabelText(i),cellId:i.id}}var s=!0;return n=[],e.forEach(function(e,t){e instanceof mxGeometryChange||e instanceof mxChildChange?e instanceof mxGeometryChange&&n.push(e.cell.id):s=!1}),s?{action:zm.moved,type:ap.multiple,label:"",cellId:n.join(";")}:{action:zm.edited,type:ap.misc,label:""}}},{key:"detectHistoryCellTypeAndLabelFromChange",value:function(e){var t,n=!1,r="";return e.cell?(n=inspectioUtils.getTypeInclEdge(e.cell),r=inspectioUtils.getLabelText(e.cell),t=e.cell.id):e.child&&(n=inspectioUtils.getTypeInclEdge(e.child),r=inspectioUtils.getLabelText(e.child),t=e.child.id),n||(n=ap.misc),{type:n,label:r,cellId:t}}},{key:"filterOutMxStyleChange",value:function(e){return e.filter(function(e){return!(e instanceof mxStyleChange)})}}]),t}(he.Component),NS=ce.makeMapStateToPropsMxGraphBoard(),LS=Object(Fe.connect)(NS,function(e){return Object(gt.bindActionCreators)({fetchUserBoard:B.fetchUserBoard,onError:i.Command.error,onInfo:i.Command.info,saveBoard:L.saveBoard,clearBoardHistory:L.clearBoardHistory,onBoardImportStarted:R.boardImportStarted,onBoardImported:R.boardImported,onBoardExported:R.boardExported,onBoardInitialized:R.boardInitialized,onLocalBoardChanged:R.localBoardChanged,onRemoteBoardChanged:R.remoteBoardChanged,onLocalBoardUpdatedWithRemoteChange:R.localBoardUpdatedWithRemoteChange,filterElementsTree:L.filterElementsTree,onActiveGraphElementChanged:R.activeGraphElementChanged,onActiveGraphElementLabelChanged:R.activeGraphElementLabelChanged,onActiveGraphElementMetadataChanged:R.activeGraphElementMetadataChanged,toggleElementDetails:L.toggleElementDetails,toggleCodyConsole:L.toggleCodyConsole,togglePlayshotModal:L.togglePlayshotModal,setSideBySideCell:IE},e)},void 0,{pure:!1})(AS),RS=xe.a.mark(DS),BS=xe.a.mark(PS);function DS(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.i)(Zg(e.payload.boardId,e.payload.teamId));case 2:if(!(t=a.sent)){a.next=18;break}return t=t.changePermissions(e.payload.permissions),a.next=7,Object(gn.c)(D.Api.adminChangeTeamBoardPermissions,e.payload.boardId,e.payload.teamId,e.payload.permissions);case 7:if(n=a.sent,r=n.response,!n.error){a.next=13;break}return a.next=13,Object(gn.g)(i.Command.error("Request Error","Could not change team permissions."));case 13:if(!r){a.next=18;break}return a.next=16,Object(gn.g)(D.Event.teamBoardPermissionsChanged(t));case 16:return a.next=18,Object(gn.g)(i.Command.info("Permissions Changed","Team permissions changed successfully."));case 18:case"end":return a.stop()}},RS,this)}function PS(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([D.Type.ADMIN_CHANGE_TEAM_BOARD_PERMISSIONS]);case 3:return e=t.sent,t.next=6,Object(gn.f)(DS,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},BS,this)}var zS=xe.a.mark(MS);function MS(){var e,t,n;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(gn.k)([A.CHANGE_BOARD_ABBREVIATION]);case 3:return e=r.sent,r.next=6,Object(gn.c)(N.changeBoardAbbreviation,e.payload.board.uid,e.payload.board.nameAbbreviation);case 6:if(t=r.sent,n=t.response,!t.error){r.next=14;break}return r.next=12,Object(gn.g)(i.Command.error("Request Error","Could not change abbr."));case 12:return r.next=14,Object(gn.g)(B.fetchUserBoards());case 14:if(!n){r.next=17;break}return r.next=17,Object(gn.g)(i.Command.info("Abbreviation changed",""));case 17:r.next=0;break;case 19:case"end":return r.stop()}},zS,this)}var US=xe.a.mark(GS),FS=xe.a.mark(function e(t){var n,r;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.c)(N.changeBoardPermissions,t.payload.boardId,t.payload.userId,t.payload.permissions);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(gn.g)(i.Command.error("Request Error","Failed changing the board permissions."));case 8:if(!r){e.next=13;break}return e.next=11,Object(gn.g)(i.Command.info("Permissions Changed","Board permissions were changed successfully."));case 11:return e.next=13,Object(gn.g)(R.boardPermissionsChanged(t.payload.boardId,t.payload.userId,t.payload.permissions));case 13:case"end":return e.stop()}},e,this)});function GS(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.CHANGE_BOARD_PERMISSIONS]);case 3:return e=t.sent,t.next=6,Object(gn.f)(FS,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},US,this)}var qS=xe.a.mark(VS);function VS(){var e,t,n;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(gn.k)([A.CHANGE_RESPONSIBLE_TEAM]);case 3:return e=r.sent,r.next=6,Object(gn.c)(N.changeResponsibleTeam,e.payload.board.uid,e.payload.board.responsibleTeam);case 6:if(t=r.sent,n=t.response,!t.error){r.next=14;break}return r.next=12,Object(gn.g)(i.Command.error("Request Error","Could not change responsible team."));case 12:return r.next=14,Object(gn.g)(B.fetchUserBoards());case 14:if(!n){r.next=17;break}return r.next=17,Object(gn.g)(i.Command.info("Responsible team changed",""));case 17:r.next=0;break;case 19:case"end":return r.stop()}},qS,this)}var WS=function(e){return"@@Inspectio/Board/:id".replace(":id",e)},HS=function(){var e=localStorage.getItem("@@Inspectio/Boards");return null===e?Object(fe.List)():Object(fe.fromJS)(JSON.parse(e))},$S=function(e,t){try{var n=HS();n.includes(e)&&(n=n.delete(n.indexOf(e)),localStorage.setItem("@@Inspectio/Boards",JSON.stringify(n.toJSON())),localStorage.removeItem(WS(e)))}catch(r){t(r)}},JS=xe.a.mark(YS),QS=xe.a.mark(KS);function YS(e){var t,n,r,a;return xe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=null,$S(e.payload.boardId,function(e){t=e}),!t){o.next=6;break}return n=i.Command.error("Failed to delete board in local storage",t),o.next=6,Object(gn.g)(n);case 6:return o.next=8,Object(gn.c)(N.deleteBoard,e.payload.boardId);case 8:if(r=o.sent,a=r.response,!r.error){o.next=14;break}return o.next=14,Object(gn.g)(i.Command.error("Request Error","Could not delete board."));case 14:if(!a){o.next=17;break}return o.next=17,Object(gn.g)(i.Command.info("Board deleted","Board deleted"));case 17:case"end":return o.stop()}},JS,this)}function KS(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.DELETE_BOARD]);case 3:return e=t.sent,t.next=6,Object(gn.f)(YS,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},QS,this)}var ZS=xe.a.mark(aC),XS=xe.a.mark(function e(t){var n,r,a,o;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.c)(N.fetchBoardClient,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!(a=n.error)){e.next=13;break}if(404!==a.status){e.next=11;break}return e.next=9,Object(gn.g)(R.boardClientNotConfigured(t.payload.boardId));case 9:e.next=13;break;case 11:return e.next=13,Object(gn.g)(i.Command.error("Request Error","Failed to load board client"));case 13:if(!r){e.next=21;break}if(!_n(o=Pn(r.data,Rn([Mn("clientId"),"Response data does not contain key clientId"])))){e.next=18;break}return e.next=18,Object(gn.g)(i.Command.error("Request Error","Could not load board client"));case 18:if(!Tn(o)){e.next=21;break}return e.next=21,Object(gn.g)(R.boardClientFetched(t.payload.boardId,o.value));case 21:case"end":return e.stop()}},e,this)}),eC=xe.a.mark(function e(t){var n,r,a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.c)(N.fetchBoardClientSecret,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(gn.g)(i.Command.error("Request Error","Failed to load board client secret"));case 8:if(!r){e.next=16;break}if(!_n(a=Pn(r.data,Rn([Mn("clientSecret"),"Response data does not contain key clientSecret"])))){e.next=13;break}return e.next=13,Object(gn.g)(i.Command.error("Request Error","Could not load board client secret"));case 13:if(!Tn(a)){e.next=16;break}return e.next=16,Object(gn.g)(R.boardClientSecretFetched(t.payload.boardId,a.value.clientSecret));case 16:case"end":return e.stop()}},e,this)}),tC=xe.a.mark(function e(t){var n,r;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.c)(N.createBoardClient,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(gn.g)(i.Command.error("Request Error","Failed to create board client"));case 8:if(!r){e.next=11;break}return e.next=11,Object(gn.c)(XS,t);case 11:case"end":return e.stop()}},e,this)}),nC=xe.a.mark(function e(t){var n,r;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.c)(N.removeBoardClient,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(gn.g)(i.Command.error("Request Error","Failed to remove board client"));case 8:if(!r){e.next=11;break}return e.next=11,Object(gn.g)(R.boardClientNotConfigured(t.payload.boardId));case 11:case"end":return e.stop()}},e,this)}),rC=xe.a.mark(function e(t){var n,r;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.c)(N.resetBoardClientSecret,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(gn.g)(i.Command.error("Request Error","Failed to reset board client secret"));case 8:if(!r){e.next=11;break}return e.next=11,Object(gn.c)(eC,t);case 11:case"end":return e.stop()}},e,this)});function aC(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.FETCH_BOARD_CLIENT,A.FETCH_BOARD_CLIENT_SECRET,A.CREATE_BOARD_CLIENT,A.REMOVE_BOARD_CLIENT,A.RESET_BOARD_CLIENT_SECRET]);case 3:if((e=t.sent).type!==A.FETCH_BOARD_CLIENT){t.next=9;break}return t.next=7,Object(gn.f)(XS,e);case 7:t.next=27;break;case 9:if(e.type!==A.FETCH_BOARD_CLIENT_SECRET){t.next=14;break}return t.next=12,Object(gn.f)(eC,e);case 12:t.next=27;break;case 14:if(e.type!==A.CREATE_BOARD_CLIENT){t.next=19;break}return t.next=17,Object(gn.f)(tC,e);case 17:t.next=27;break;case 19:if(e.type!==A.REMOVE_BOARD_CLIENT){t.next=24;break}return t.next=22,Object(gn.f)(nC,e);case 22:t.next=27;break;case 24:if(e.type!==A.RESET_BOARD_CLIENT_SECRET){t.next=27;break}return t.next=27,Object(gn.f)(rC,e);case 27:t.next=0;break;case 29:case"end":return t.stop()}},ZS,this)}var oC=xe.a.mark(sC),iC=xe.a.mark(function e(t){var n,r,a,o;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.c)(N.fetchBoardGraphElements,t.payload.boardId,t.payload.type);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(gn.g)(i.Command.error("Request Error","Failed to load board graph elements"));case 8:if(!r){e.next=17;break}if(!_n(a=Pn(r.data,Rn([Un(),"Response data is no array"]),Dn(function(e){return hp(e)})))){e.next=13;break}return e.next=13,Object(gn.g)(i.Command.error("Request Error","Could not load board graph elements"));case 13:if(!Tn(a)){e.next=17;break}return o=Object(fe.List)(a.value),e.next=17,Object(gn.g)(R.boardGraphElementsFetched(t.payload.boardId,o));case 17:case"end":return e.stop()}},e,this)});function sC(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)(A.FETCH_BOARD_GRAPH_ELEMENTS);case 3:return e=t.sent,t.next=6,Object(gn.f)(iC,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},oC,this)}var cC=xe.a.mark(lC),dC=xe.a.mark(function e(t){var n,r,a,o;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.c)(N.fetchBoardPermissionsForUsers,t);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(gn.g)(i.Command.error("Request Error","Failed to load board permissions"));case 8:if(!r){e.next=18;break}if(!_n(a=Pn(r.data,Rn([Un(),"Response data is not of type Array"]),Dn(function(e){return Bl(e)})))){e.next=14;break}return console.error("Failed to process board permissions response from server",a.value,r.data),e.next=14,Object(gn.g)(i.Command.error("Request Error","Could not load board permissions"));case 14:if(!Tn(a)){e.next=18;break}return o=Object(fe.List)(a.value),e.next=18,Object(gn.g)(R.boardPermissionsForUsersFetched(o));case 18:case"end":return e.stop()}},e,this)}),uC=xe.a.mark(function e(t){var n,r,a,o;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.c)(N.fetchBoardPermissionsForTeams,t);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(gn.g)(i.Command.error("Request Error","Failed to load board permissions"));case 8:if(!r){e.next=18;break}if(!_n(a=Pn(r.data,Rn([Un(),"Response data is not of type Array"]),Dn(function(e){return Op(e)})))){e.next=14;break}return console.error("Failed to process board permissions response from server",a.value,r.data),e.next=14,Object(gn.g)(i.Command.error("Request Error","Could not load board permissions"));case 14:if(!Tn(a)){e.next=18;break}return o=Object(fe.List)(a.value),e.next=18,Object(gn.g)(R.boardPermissionsForTeamsFetched(o));case 18:case"end":return e.stop()}},e,this)});function lC(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.FETCH_BOARD_PERMISSIONS_FOR_USERS,A.FETCH_BOARD_PERMISSIONS_FOR_TEAMS,W.Type.TEAM_ACCESS_TO_BOARD_GRANTED,W.Type.TEAM_ACCESS_TO_BOARD_REVOKED]);case 3:e=t.sent,t.t0=e.type,t.next=t.t0===wc?7:t.t0===kc?10:t.t0===W.Type.TEAM_ACCESS_TO_BOARD_GRANTED?10:t.t0===W.Type.TEAM_ACCESS_TO_BOARD_REVOKED?10:13;break;case 7:return t.next=9,Object(gn.f)(dC,e.payload.boardId);case 9:return t.abrupt("break",13);case 10:return t.next=12,Object(gn.f)(uC,e.payload.boardId);case 12:return t.abrupt("break",13);case 13:t.next=0;break;case 15:case"end":return t.stop()}},cC,this)}var mC=xe.a.mark(fC),pC=xe.a.mark(hC);function fC(e){var t,n,r,a;return xe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(gn.c)(D.Api.fetchBoardStickyTemplates,e.payload.boardId);case 2:if(t=o.sent,n=t.response,!t.error){o.next=8;break}return o.next=8,Object(gn.g)(i.Command.error("Request Error","Failed to load sticky templates"));case 8:if(!n){o.next=18;break}if(!_n(r=Pn(n.data,Rn([Un(),"Response data is not of type Array"]),Dn(function(e){return Vy(e)})))){o.next=14;break}return console.error("Failed to process sticky templates response from server",r.value,n.data),o.next=14,Object(gn.g)(i.Command.error("Request Error","Could not load sticky templates"));case 14:if(!Tn(r)){o.next=18;break}return a=Object(fe.List)(r.value),o.next=18,Object(gn.g)(D.Event.boardStickyTemplatesFetched(a));case 18:case"end":return o.stop()}},mC,this)}function hC(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([D.Type.FETCH_BOARD_STICKY_TEMPLATES]);case 3:return e=t.sent,t.next=6,Object(gn.f)(fC,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},pC,this)}var gC=xe.a.mark(yC),bC=xe.a.mark(function e(t){var n,r,a,o;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.c)(N.fetchOpenBoardInvitations,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(gn.g)(i.Command.error("Request Error","Failed to load open board invitations"));case 8:if(!r){e.next=18;break}if(!_n(a=Pn(r.data,Rn([Un(),"Response data is not of type Array"]),Dn(function(e){return yp(e)})))){e.next=14;break}return console.error("Failed to process open board invitations response from server",a.value,r.data),e.next=14,Object(gn.g)(i.Command.error("Request Error","Could not load open board invitations"));case 14:if(!Tn(a)){e.next=18;break}return o=Object(fe.List)(a.value),e.next=18,Object(gn.g)(R.openBoardInvitationsFetched(o));case 18:case"end":return e.stop()}},e,this)});function yC(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.FETCH_OPEN_BOARD_INVITATIONS]);case 3:return e=t.sent,t.next=6,Object(gn.f)(bC,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},gC,this)}var vC={uid:"",aggregateType:"PlayshotSummary",boardId:"",name:"",savedAt:"",savedBy:""},EC=function(e){var t=Ln(e,[Mn("playshotId"),"playshotId missing"],[Mn("boardId"),"boardId missing"],[Mn("name"),"name missing"],[Mn("savedAt"),"savedAt missing"],[Mn("savedBy"),"savedBy missing"]);return _n(t)?t:Nn(new OC(Object(Ye.a)({},vC,e,{uid:e.playshotId})))},OC=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=ot.v4()),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),t}(Object(fe.Record)(vC)),xC=xe.a.mark(wC),jC=xe.a.mark(function e(t){var n,r,a,o;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.c)(N.fetchPlayshots,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(gn.g)(i.Command.error("Request Error","Failed to load playshots"));case 8:if(!r){e.next=18;break}if(!_n(a=Pn(r.data,Rn([Un(),"Response data is not of type Array"]),Dn(function(e){return EC(e)})))){e.next=14;break}return console.error("Failed to process playshot summary response from server",a.value,r.data),e.next=14,Object(gn.g)(i.Command.error("Request Error","Could not load playshots"));case 14:if(!Tn(a)){e.next=18;break}return o=Object(fe.List)(a.value),e.next=18,Object(gn.g)(R.playshotSummaryListFetched(o));case 18:case"end":return e.stop()}},e,this)});function wC(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.FETCH_PLAYSHOT_SUMMARY_LIST]);case 3:return e=t.sent,t.next=6,Object(gn.f)(jC,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},xC,this)}var kC=xe.a.mark(CC),IC=xe.a.mark(function e(t){var n,r;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<4)){e.next=14;break}return e.next=4,Object(gn.e)(1e3*n);case 4:return e.next=6,Object(gn.c)(N.fetchUserBoard,t);case 6:if(!(r=e.sent).response){e.next=9;break}return e.abrupt("return",r);case 9:if(3!==n){e.next=11;break}return e.abrupt("return",r);case 11:n++,e.next=1;break;case 14:case"end":return e.stop()}},e,this)}),SC=xe.a.mark(function e(t){var n,r,a,o,s,c,d,u,l;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.i)(Ay(t.payload.boardId));case 2:if(!(n=e.sent)||!n.tempBoard){e.next=7;break}return e.next=6,Object(gn.g)(L.setBoardDetailsFetched(t.payload.boardId,!1));case 6:return e.abrupt("return");case 7:return e.next=9,Object(gn.c)(N.fetchUserBoard,t.payload.boardId);case 9:if(r=e.sent,a=r.error,o=r.response,!a){e.next=42;break}return e.next=15,Object(gn.c)(N.checkBoardAccess,t.payload.boardId);case 15:if(!(s=e.sent).response){e.next=40;break}c=s.response.data,e.t0=c.access,e.next="allowed"===e.t0?21:"denied"===e.t0?31:"requestable"===e.t0?34:38;break;case 21:return e.next=23,Object(gn.c)(IC,t.payload.boardId);case 23:if(!(d=e.sent).response){e.next=28;break}o=d.response,e.next=30;break;case 28:return e.next=30,Object(gn.g)(i.Command.error("Request Error","Failed to load board"));case 30:return e.abrupt("break",38);case 31:return e.next=33,Object(gn.g)(i.Command.error("Access Error","You cannot access the board. Either you do not have permissions or the organization has not enough user quota. Please contact the board owner for details."));case 33:return e.abrupt("break",38);case 34:return console.warn("@TODO: Implement request access to board"),e.next=37,Object(gn.g)(i.Command.error("Request Error","Failed to load board"));case 37:return e.abrupt("break",38);case 38:e.next=42;break;case 40:return e.next=42,Object(gn.g)(i.Command.error("Request Error","Failed to load board"));case 42:if(!o){e.next=53;break}return u=new z.Board({uid:o.data.boardId,name:o.data.name,nameAbbreviation:o.data.nameAbbreviation,tags:Object(fe.List)(o.data.tags),createdAt:o.data.createdAt,lastModified:o.data.lastModified,version:new P.BoardVersion(o.data.boardVersion),shared:o.data.shared,sharedWith:Object(fe.List)(o.data.sharedWith),assignedTeams:Object(fe.List)(o.data.assignedTeams),responsibleTeam:o.data.responsibleTeam?o.data.responsibleTeam:void 0,writeAccess:o.data.writeAccess,owner:o.data.owner,creator:o.data.creator,organization:o.data.organization,tempBoard:!1,orgaMemberPermissions:o.data.orgaMemberPermissions,anyonePermissions:o.data.anyonePermissions,codySuggestEnabled:o.data.codySuggestEnabled,eventModelingEnabled:o.data.eventModelingEnabled}),l=null,o.data.snapshot&&(l=new U.BoardSnapshot({boardId:o.data.boardId,xml:o.data.snapshot.content,boardVersion:new P.BoardVersion(o.data.snapshot.boardVersion)})),e.next=48,Object(gn.g)(L.updateBoards([u]));case 48:if(!l){e.next=51;break}return e.next=51,Object(gn.g)(Fd(l));case 51:return e.next=53,Object(gn.g)(L.setBoardDetailsFetched(u.uid,u.writeAccess));case 53:case"end":return e.stop()}},e,this)});function CC(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.FETCH_USER_BOARD]);case 3:return e=t.sent,t.next=6,Object(gn.f)(SC,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},kC,this)}var _C=function(e){var t=Ln(e,[Mn("userId"),"userId missing"],[Mn("values"),"values missing in "+e.userId]);return _n(t)?t:Nn(new TC({userId:e.userId,values:e.values}))},TC=function(e){function t(e){return Object(Be.a)(this,t),Object(Pe.a)(this,Object(ze.a)(t).call(this,e))}return Object(Me.a)(t,e),t}(Object(fe.Record)({userId:"",values:{}})),AC=xe.a.mark(NC);function NC(){var e,t,n;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(gn.c)(d.getUserSettings);case 2:if(e=r.sent,t=e.response,!e.error){r.next=8;break}return r.next=8,Object(gn.g)(i.Command.error("Request Error","Could not load user settings"));case 8:if(!t){r.next=17;break}if(!_n(n=_C(t.data))){r.next=14;break}return console.error("Failed to process user settings response from server",n.value,t.data),r.next=14,Object(gn.g)(i.Command.error("Request Error","Could not load user settings"));case 14:if(!Tn(n)){r.next=17;break}return r.next=17,Object(gn.g)(u.userSettingsLoaded(n.value));case 17:case"end":return r.stop()}},AC,this)}var LC=xe.a.mark(zC),RC=xe.a.mark(MC),BC=xe.a.mark(UC),DC=xe.a.mark(FC),PC=xe.a.mark(GC);function zC(e){var t;return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(gn.i)(T.currentUserSelector,void 0);case 2:return t=(t=(t=(t=(t=n.sent).set("quota",e.data.quota)).set("teamQuota",e.data.teamQuota)).set("signedIn",!0)).set("activeOrganization",e.data.activeOrganization||null),n.next=9,Object(gn.g)(f.Command.signIn(t));case 9:case"end":return n.stop()}},LC,this)}function MC(){var e,t,n;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(gn.g)(B.startFetchUserBoards());case 2:return r.next=4,Object(gn.c)(N.fetchUserBoards);case 4:if(e=r.sent,t=e.response,!e.error){r.next=10;break}return r.next=10,Object(gn.g)(i.Command.error("Request Error","Could not load boards"));case 10:if(!t){r.next=14;break}return n=Object(zn.map)(t.data,function(e){return new z.Board({uid:e.boardId,name:e.name,nameAbbreviation:e.nameAbbreviation,tags:Object(fe.List)(e.tags),createdAt:e.createdAt,lastModified:e.lastModified,version:new zl(e.version),shared:e.shared,sharedWith:Object(fe.List)(e.sharedWith),assignedTeams:Object(fe.List)(e.assignedTeams),responsibleTeam:e.responsibleTeam||void 0,example:e.example||!1,owner:e.ownerId,creator:e.creatorId,organization:e.organization,tempBoard:!1,orgaMemberPermissions:e.orgaMemberPermissions,anyonePermissions:e.anyonePermissions,codySuggestEnabled:e.codySuggestEnabled,eventModelingEnabled:e.eventModelingEnabled})}),r.next=14,Object(gn.g)(Md(n));case 14:case"end":return r.stop()}},RC,this)}function UC(e){var t,n,r,a,o,s;return xe.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(gn.c)(f.Api.getUser,e.payload.kc.tokenParsed.sub);case 2:if(t=c.sent,n=t.response,!(r=t.error)||404!==r.status){c.next=21;break}return a=it.a.v4(),c.next=9,Object(gn.c)(k.Api.installUserOrganization,a);case 9:if(!(o=c.sent).error){c.next=13;break}return c.next=13,Object(gn.g)(i.Command.error("Request Error","Could not initialize organization."));case 13:if(!o.response){c.next=19;break}return c.next=16,Object(gn.c)(f.Api.getUser,e.payload.kc.tokenParsed.sub);case 16:return s=c.sent,c.next=19,zC(s.response);case 19:c.next=23;break;case 21:return c.next=23,zC(n);case 23:return c.next=25,Object(gn.c)(NC);case 25:return c.next=27,Object(gn.g)(k.Query.fetchUserOrganizations());case 27:return c.next=29,Object(gn.e)(500);case 29:return c.next=31,Object(gn.c)(MC);case 31:return c.next=33,Object(gn.c)(Xf);case 33:return c.next=35,Object(gn.g)(Wu());case 35:case"end":return c.stop()}},BC,this)}function FC(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MC();case 2:case"end":return e.stop()}},DC,this)}function GC(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([te.Type.USER_AUTHENTICATED,A.FETCH_USER_BOARDS]);case 3:e=t.sent,t.t0=e.type,t.next=t.t0===te.Type.USER_AUTHENTICATED?7:t.t0===A.FETCH_USER_BOARDS?10:13;break;case 7:return t.next=9,Object(gn.f)(UC,e);case 9:return t.abrupt("break",13);case 10:return t.next=12,Object(gn.f)(FC);case 12:return t.abrupt("break",13);case 13:t.next=0;break;case 15:case"end":return t.stop()}},PC,this)}var qC=xe.a.mark(WC),VC=xe.a.mark(HC);function WC(e){var t,n,r,a;return xe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.board,o.next=3,Object(gn.i)(Ay(t.uid));case 3:return n=o.sent,o.next=6,Object(gn.g)(L.forceUpdateBoards([t]));case 6:return o.next=8,Object(gn.c)(N.takeBoardSnapshot,t.uid,t.version,t.xml);case 8:if(r=o.sent,a=r.response,!r.error){o.next=17;break}return o.next=14,Object(gn.g)(i.Command.error("Server Error","Could not import existing board."));case 14:return o.next=16,Object(gn.g)(L.forceUpdateBoards([n]));case 16:return o.abrupt("return");case 17:if(!a){o.next=20;break}return o.next=20,Object(gn.g)(i.Command.info("Board imported:",t.name));case 20:case"end":return o.stop()}},qC,this)}function HC(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.IMPORT_EXISTING_BOARD]);case 3:return e=t.sent,t.next=6,Object(gn.f)(WC,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},VC,this)}var $C=xe.a.mark(QC),JC=xe.a.mark(YC);function QC(e){var t,n,r,a,o,s,c,d,u,l;return xe.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload.boardId||ot.v4(),m.next=3,Object(gn.i)(Al());case 3:if(n=m.sent){m.next=8;break}return m.next=7,Object(gn.g)(i.Command.error("Board Import Failed","No organization selected."));case 7:return m.abrupt("return");case 8:if(r=null,e.payload.importTemporary){m.next=13;break}return m.next=12,Object(gn.c)(N.installOrganizationBoard,n.organizationId,t,e.payload.boardName,Ul(e.payload.boardName),[]);case 12:r=m.sent;case 13:if(!r||!r.error){m.next=16;break}return m.next=16,Object(gn.g)(i.Command.error("Request Error","Could not add board."));case 16:if(!(r&&r.response||e.payload.importTemporary)){m.next=32;break}if(e.payload.importTemporary){m.next=20;break}return m.next=20,Object(gn.g)(i.Command.info("Board created","Board created"));case 20:return a=T.makeGetCurrentUser(),m.next=23,Object(gn.i)(a);case 23:return o=m.sent,s=new ql({uid:t,name:e.payload.boardName,nameAbbreviation:Ul(e.payload.boardName),tags:Object(fe.List)(),createdAt:(new Date).toISOString(),xml:e.payload.boardXml,version:new zl({userId:o.uid,version:1}),shared:!1,sharedWith:Object(fe.List)(),assignedTeams:Object(fe.List)(),owner:null,creator:o.uid,organization:n.organizationId,tempBoard:!!e.payload.importTemporary,orgaMemberPermissions:Ll,anyonePermissions:Ll,codySuggestEnabled:!0,eventModelingEnabled:!0}),m.next=27,Object(gn.g)(L.updateBoards([s]));case 27:return c=NE(),d=Object(Ke.a)(c,2),d[0],u=d[1],l=Gm(s.xml||void 0),u(l),m.next=32,Object(gn.g)(L.saveBoard(s,l));case 32:case"end":return m.stop()}},$C,this)}function YC(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.IMPORT_NEW_BOARD]);case 3:return e=t.sent,t.next=6,Object(gn.f)(QC,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},JC,this)}var KC=xe.a.mark(XC),ZC=xe.a.mark(e_);function XC(e){var t,n,r,a,o,s,c,d,u;return xe.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=e.payload.stickyTemplates.toJS(),n=[],r=!0,a=!1,o=void 0,l.prev=5,s=t[Symbol.iterator]();case 7:if(r=(c=s.next()).done){l.next=28;break}return d=c.value,l.next=11,Object(gn.c)(D.Api.setStickyTemplate,d.boardId,d.cellType,d.template);case 11:if(u=l.sent,u.response,!u.error){l.next=18;break}return l.next=17,Object(gn.g)(i.Command.error("Request Error","Could not set sticky template for "+d.cellType));case 17:return l.abrupt("continue",25);case 18:return n.push(d),l.next=21,Object(gn.c)(D.Api.updateStickyAdvancedConfig,d.boardId,d.cellType,d.templateType,d.templateSchema||void 0);case 21:if(!l.sent.error){l.next=25;break}return l.next=25,Object(gn.g)(i.Command.error("Request Error","Could not update sticky advanced config for "+d.cellType));case 25:r=!0,l.next=7;break;case 28:l.next=34;break;case 30:l.prev=30,l.t0=l.catch(5),a=!0,o=l.t0;case 34:l.prev=34,l.prev=35,r||null==s.return||s.return();case 37:if(l.prev=37,!a){l.next=40;break}throw o;case 40:return l.finish(37);case 41:return l.finish(34);case 42:return l.next=44,Object(gn.g)(i.Command.info("Card Templates imported","You can now use them on the board!"));case 44:return l.next=46,Object(gn.g)(D.Event.stickyTemplatesImported(Object(fe.List)(n)));case 46:e.payload.finishedCb();case 47:case"end":return l.stop()}},KC,this,[[5,30,34,42],[35,,37,41]])}function e_(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([D.Type.IMPORT_STICKY_TEMPLATES]);case 3:return e=t.sent,t.next=6,Object(gn.f)(XC,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},ZC,this)}var t_=xe.a.mark(n_);function n_(){var e,t,n,r,a,o;return xe.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=3,Object(gn.k)([A.ADD_BOARD]);case 3:return e=s.sent,s.next=6,Object(gn.i)(Al());case 6:if(t=s.sent,console.log("install user board flow: ",e.payload.board.toJS()),!t){s.next=38;break}return s.next=11,Object(gn.c)(N.installOrganizationBoard,t.organizationId,e.payload.board.uid,e.payload.board.name,e.payload.board.nameAbbreviation,e.payload.board.tags.toJS(),e.payload.board.responsibleTeam,e.payload.board.codySuggestEnabled,e.payload.board.eventModelingEnabled);case 11:if(n=s.sent,r=n.response,!n.error){s.next=17;break}return s.next=17,Object(gn.g)(i.Command.error("Request Error","Could not add board."));case 17:if(!r){s.next=36;break}return s.next=20,Object(gn.e)(300);case 20:return s.next=22,Object(gn.g)(i.Command.info("Board created","Board created"));case 22:return s.next=24,Object(gn.c)(N.fetchUserBoard,e.payload.board.uid);case 24:return a=s.sent,s.next=27,Object(gn.c)(e.payload.history.push,kt(e.payload.board.uid));case 27:return s.next=29,Object(gn.e)(1e3);case 29:if(!a.error){s.next=32;break}return s.next=32,Object(gn.g)(i.Command.error("Request Error","Failed to load board"));case 32:if(!a.response){s.next=36;break}return o=new z.Board({uid:a.response.data.boardId,name:a.response.data.name,nameAbbreviation:r.data.nameAbbreviation,tags:Object(fe.List)(a.response.data.tags),createdAt:a.response.data.createdAt,lastModified:a.response.data.lastModified,version:new P.BoardVersion(a.response.data.boardVersion),shared:a.response.data.shared,sharedWith:Object(fe.List)(a.response.data.sharedWith),assignedTeams:Object(fe.List)(a.response.data.assignedTeams),responsibleTeam:a.response.data.responsibleTeam?a.response.data.responsibleTeam:void 0,writeAccess:a.response.data.writeAccess,owner:a.response.data.owner,creator:a.response.data.creator,organization:a.response.data.organization,tempBoard:!1,orgaMemberPermissions:a.response.data.orgaMemberPermissions,anyonePermissions:a.response.data.anyonePermissions,codySuggestEnabled:a.response.data.codySuggestEnabled,eventModelingEnabled:a.response.data.eventModelingEnabled}),s.next=36,Object(gn.g)(L.forceUpdateBoards([o]));case 36:s.next=40;break;case 38:return s.next=40,Object(gn.g)(i.Command.error("Board Installation Failed","No organization selected."));case 40:s.next=0;break;case 42:case"end":return s.stop()}},t_,this)}var r_=xe.a.mark(o_),a_=xe.a.mark(i_);function o_(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.c)(D.Api.moveUserBoardToOrganization,e.payload.organizationId,e.payload.boardId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(gn.g)(i.Command.error("Request Error","Could not move board to organization."));case 8:if(!n){a.next=21;break}return a.next=11,Object(gn.g)(D.Query.fetchUserBoards());case 11:return a.next=13,Object(gn.g)(k.Query.fetchUserOrganizations());case 13:return a.next=15,Object(gn.i)(Ay(e.payload.boardId));case 15:if(!(r=a.sent)){a.next=19;break}return a.next=19,Object(gn.g)(D.Event.userBoardMovedToOrganization(r.moveToOrganization(e.payload.organizationId)));case 19:return a.next=21,Object(gn.g)(i.Command.info("Board moved","The board has been moved to the organization."));case 21:case"end":return a.stop()}},r_,this)}function i_(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([D.Type.MOVE_USER_BOARD_TO_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(o_,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},a_,this)}var s_=xe.a.mark(c_);function c_(){var e,t,n;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(gn.k)([A.RENAME_BOARD]);case 3:return e=r.sent,r.next=6,Object(gn.c)(N.renameBoard,e.payload.board.uid,e.payload.board.name);case 6:if(t=r.sent,n=t.response,!t.error){r.next=14;break}return r.next=12,Object(gn.g)(i.Command.error("Request Error","Could not rename board."));case 12:return r.next=14,Object(gn.g)(B.fetchUserBoards());case 14:if(!n){r.next=17;break}return r.next=17,Object(gn.g)(i.Command.info("Board renamed",""));case 17:r.next=0;break;case 19:case"end":return r.stop()}},s_,this)}var d_=xe.a.mark(l_),u_=xe.a.mark(m_);function l_(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.i)(lb(e.payload.invitationId));case 2:if(!(t=a.sent)){a.next=17;break}return a.next=6,Object(gn.c)(N.resendBoardInvitation,e.payload.invitationId);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(gn.g)(i.Command.error("Request Error","Could not resend board invitation"));case 12:if(!r){a.next=15;break}return a.next=15,Object(gn.g)(i.Command.info("insp.board.notify.invitation_resend.success.title","insp.board.notify.invitation_resend.success.msg"));case 15:return a.next=17,Object(gn.g)(R.boardInvitationResent(t.resend()));case 17:case"end":return a.stop()}},d_,this)}function m_(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.RESEND_BOARD_INVITATION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(l_,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},u_,this)}var p_=xe.a.mark(h_),f_=xe.a.mark(g_);function h_(e){var t,n;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(gn.c)(N.revokeAccessToBoard,e.payload.boardId,e.payload.userId);case 2:if(t=r.sent,n=t.response,!t.error){r.next=8;break}return r.next=8,Object(gn.g)(i.Command.error("Request Error","Failed to revoke access to board."));case 8:if(!n){r.next=13;break}return r.next=11,Object(gn.g)(i.Command.info("Access Revoked","Access to board revoked."));case 11:return r.next=13,Object(gn.g)(R.boardAccessRevoked(e.payload.boardId,e.payload.userId));case 13:case"end":return r.stop()}},p_,this)}function g_(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.REVOKE_ACCESS_TO_BOARD]);case 3:return e=t.sent,t.next=6,Object(gn.f)(h_,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},f_,this)}var b_=xe.a.mark(v_),y_=xe.a.mark(E_);function v_(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.i)(lb(e.payload.invitationId));case 2:if(!(t=a.sent)){a.next=17;break}return a.next=6,Object(gn.c)(N.revokeBoardInvitation,e.payload.invitationId);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(gn.g)(i.Command.error("Request Error","Could not revoke board invitation"));case 12:if(!r){a.next=17;break}return a.next=15,Object(gn.g)(i.Command.info("insp.board.notify.invitation_revoke.success.title","insp.board.notify.invitation_revoke.success.msg"));case 15:return a.next=17,Object(gn.g)(R.boardInvitationRevoked(t.revoke()));case 17:case"end":return a.stop()}},b_,this)}function E_(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.REVOKE_BOARD_INVITATION]);case 3:return e=t.sent,t.next=6,Object(gn.f)(v_,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},y_,this)}var O_=xe.a.mark(j_),x_=xe.a.mark(w_);function j_(e,t){var n,r,a,o,s,c,d,u;return xe.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(n=NE(),r=Object(Ke.a)(n,1),a=r[0],console.log("saveBoardFlow: ",e.payload.board.version.version,e.payload.board.version.version%20),!e.payload.board.tempBoard){l.next=5;break}return console.log("saveBoardFlow: ","Skipping save of temp board"),l.abrupt("return");case 5:if(!(e.payload.board.version.version%20===0||e.payload.board.version.version<5||t)){l.next=18;break}o=a.exportXmlSnapshot(),s=3;case 8:return c=new zl({userId:e.payload.board.version.userId,version:e.payload.board.version.version+(3-s)}),l.next=11,Object(gn.c)(N.takeBoardSnapshot,e.payload.board.uid,c,o);case 11:if(d=l.sent,(u=d.error)?s--:s=0,0!==s||!u){l.next=17;break}return l.next=17,Object(gn.g)(i.Command.error("Server Error","Could not take board snapshot."));case 17:if(s>0){l.next=8;break}case 18:case"end":return l.stop()}},O_,this)}function w_(){var e,t;return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(gn.k)([A.SAVE_BOARD,A.BOARD_IMPORTED]);case 3:return e=n.sent,t=!1,e.type===A.BOARD_IMPORTED&&(t=!0),n.next=8,Object(gn.f)(j_,e,t);case 8:n.next=0;break;case 10:case"end":return n.stop()}},x_,this)}var k_=xe.a.mark(I_);function I_(){var e,t,n;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(gn.k)([A.SET_BOARD_TAGS]);case 3:return e=r.sent,r.next=6,Object(gn.c)(N.setBoardTags,e.payload.board.uid,e.payload.board.tags);case 6:if(t=r.sent,n=t.response,!t.error){r.next=14;break}return r.next=12,Object(gn.g)(i.Command.error("Request Error","Could not set tags."));case 12:return r.next=14,Object(gn.g)(B.fetchUserBoards());case 14:if(!n){r.next=17;break}return r.next=17,Object(gn.g)(i.Command.info("Tags set",""));case 17:r.next=0;break;case 19:case"end":return r.stop()}},k_,this)}var S_=xe.a.mark(__),C_=xe.a.mark(T_);function __(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.c)(N.shareBoard,e.payload.boardId,e.payload.email,e.payload.permissions);case 2:if(t=a.sent,n=t.response,!(r=t.error)||404!==r.status){a.next=8;break}return a.next=8,Object(gn.g)(i.Command.error("User not found","Please check the entered username. Also the user needs to sign in at least once before you can share your board with them."));case 8:if(!r){a.next=11;break}return a.next=11,Object(gn.g)(i.Command.error("Action Failed",r.data.error.message));case 11:if(!n){a.next=18;break}return a.next=14,Object(gn.g)(i.Command.info("Board shared with "+e.payload.email,""));case 14:return a.next=16,Object(gn.g)(B.fetchOpenBoardInvitations(e.payload.boardId));case 16:return a.next=18,Object(gn.g)(B.fetchBoardPermissionsForUsers(e.payload.boardId));case 18:case"end":return a.stop()}},S_,this)}function T_(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.SHARE_BOARD]);case 3:return e=t.sent,t.next=6,Object(gn.f)(__,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},C_,this)}var A_=xe.a.mark(L_),N_=xe.a.mark(R_);function L_(e){var t,n;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(gn.c)(D.Api.shareBoardWithAnyone,e.payload.boardId,e.payload.permissions);case 2:if(t=r.sent,n=t.response,!t.error){r.next=8;break}return r.next=8,Object(gn.g)(i.Command.error("Request Error","Failed to share board with anyone."));case 8:if(!n){r.next=13;break}return r.next=11,Object(gn.g)(i.Command.info("Access Granted","Anyone now has access to the board."));case 11:return r.next=13,Object(gn.g)(D.Event.boardSharedWithAnyone(e.payload.boardId,e.payload.permissions));case 13:case"end":return r.stop()}},A_,this)}function R_(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([D.Type.SHARE_BOARD_WITH_ANYONE]);case 3:return e=t.sent,t.next=6,Object(gn.f)(L_,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},N_,this)}var B_=xe.a.mark(P_),D_=xe.a.mark(z_);function P_(e){var t,n;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(gn.c)(D.Api.shareBoardWithOrganizationMembers,e.payload.boardId,e.payload.permissions);case 2:if(t=r.sent,n=t.response,!t.error){r.next=8;break}return r.next=8,Object(gn.g)(i.Command.error("Request Error","Failed to share board with organization members."));case 8:if(!n){r.next=13;break}return r.next=11,Object(gn.g)(i.Command.info("Access Granted","Organization members now have access to the board."));case 11:return r.next=13,Object(gn.g)(D.Event.boardSharedWithOrganizationMembers(e.payload.boardId,e.payload.permissions));case 13:case"end":return r.stop()}},B_,this)}function z_(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([D.Type.SHARE_BOARD_WITH_ORGANIZATION_MEMBERS]);case 3:return e=t.sent,t.next=6,Object(gn.f)(P_,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},D_,this)}var M_,U_=1,F_=function(){function e(){var t=this;Object(Be.a)(this,e),this.initializationPromise=void 0,this.db=void 0,this.initializationPromise=new Promise(function(e,n){var r=indexedDB.open("insp_boards",U_);r.onupgradeneeded=function(e){t.updateDatabaseToLatestVersion(r.result,e.oldVersion)},r.onerror=function(){n("IndexedDB could not be initialized")},r.onsuccess=function(){t.db=r.result,e()}})}return Object(De.a)(e,[{key:"get",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(je.a)(xe.a.mark(function e(a,o){var i,s;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.db.transaction(t,"readonly"),e.next=3,i.objectStore(t).get(n);case 3:(s=e.sent).onsuccess=function(){return a(s.result)},s.onerror=function(){return o()};case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(je.a)(xe.a.mark(function e(r,a){var o,i;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.db.transaction(t,"readonly"),e.next=3,o.objectStore(t).getAll();case 3:(i=e.sent).onsuccess=function(){return r(i.result)},i.onerror=function(){return a()};case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(je.a)(xe.a.mark(function e(a,o){var i,s;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.db.transaction(t,"readwrite"),(s=i.objectStore(t).add(n)).onsuccess=function(){return a()},s.onerror=function(){return o()};case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(je.a)(xe.a.mark(function e(a,o){var i,s;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.db.transaction(t,"readwrite"),(s=i.objectStore(t).put(n)).onsuccess=function(){return a()},s.onerror=function(){return o()};case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var r=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(je.a)(xe.a.mark(function e(a,o){var i,s;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.db.transaction(t,"readwrite"),(s=i.objectStore(t).delete(n)).onsuccess=function(){return a()},s.onerror=function(){return o()};case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"assertDBInitialized",value:function(){var e=Object(je.a)(xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializationPromise;case 2:if(this.db){e.next=4;break}throw new Error("IndexedDB is not initialized");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateDatabaseToLatestVersion",value:function(e,t){switch(console.log("Starting upgrade for DB insp_boards from version ".concat(t," to ").concat(U_)),t){case 0:e.createObjectStore("overview",{keyPath:"key"})}}}]),e}(),G_=function(){function e(t){Object(Be.a)(this,e),this.db=void 0,this.db=t,this.getOverviewSorting=this.getOverviewSorting.bind(this),this.setOverviewSorting=this.setOverviewSorting.bind(this),this.getOverviewResponsibleTeam=this.getOverviewResponsibleTeam.bind(this),this.setOverviewResponsibleTeam=this.setOverviewResponsibleTeam.bind(this)}return Object(De.a)(e,[{key:"getOverviewSorting",value:function(){var e=Object(je.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.get("overview","sorting");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={key:"sorting",value:Wh.LAST_MODIFIED_DESC};case 5:return t=e.t0,e.abrupt("return",t.value);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setOverviewSorting",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.put("overview",{key:"sorting",value:t});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getOverviewResponsibleTeam",value:function(){var e=Object(je.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.get("overview","responsibleTeam");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={key:"responsibleTeam",value:void 0};case 5:return t=e.t0,e.abrupt("return",t.value);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setOverviewResponsibleTeam",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.put("overview",{key:"responsibleTeam",value:t});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),q_=function(){return M_||(M_=new G_(new F_)),M_},V_=xe.a.mark($_),W_=xe.a.mark(J_),H_=xe.a.mark(Q_);function $_(e,t){return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.setOverviewSorting(e.payload.sort);case 2:case"end":return n.stop()}},V_,this)}function J_(e,t){return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.setOverviewResponsibleTeam(e.payload.teamId);case 2:case"end":return n.stop()}},W_,this)}function Q_(){var e,t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=q_(),a.next=3,Object(gn.c)(e.getOverviewSorting);case 3:return t=a.sent,a.next=6,Object(gn.c)(e.getOverviewResponsibleTeam);case 6:return n=a.sent,a.next=9,Object(gn.g)(D.Command.sortBoardOverview(t));case 9:return a.next=11,Object(gn.g)(D.Command.filterBoardOverviewByResponsibleTeam(n));case 11:return a.next=14,Object(gn.k)([D.Type.SORT_BOARD_OVERVIEW,D.Type.FILTER_BOARD_OVERVIEW_BY_RESPONSIBLE_TEAM]);case 14:if((r=a.sent).type!==D.Type.SORT_BOARD_OVERVIEW||r.payload.sort===t){a.next=18;break}return a.next=18,Object(gn.f)($_,r,e);case 18:if(r.type!==D.Type.FILTER_BOARD_OVERVIEW_BY_RESPONSIBLE_TEAM||r.payload.teamId===n){a.next=21;break}return a.next=21,Object(gn.f)(J_,r,e);case 21:a.next=11;break;case 23:case"end":return a.stop()}},H_,this)}var Y_=xe.a.mark(Z_),K_=xe.a.mark(X_);function Z_(e,t){var n;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return(n=t.getRoot())instanceof Jm&&(console.log("set potentially stale"),n.setPotentiallyStale()),r.next=4,Object(gn.g)(L.updateBoardElementsTree(e,n.children()));case 4:case"end":return r.stop()}},Y_,this)}function X_(){var e,t,n,r,a;return xe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=!1,r=!1;case 2:return o.next=5,Object(gn.k)([A.SAVE_BOARD,A.LOCAL_BOARD_UPDATED_WITH_REMOTE_CHANGE,A.BOARD_IMPORTED,A.BOARD_INITIALIZED,le.TOGGLE_SIDEBAR_COLLAPSED]);case 5:if(a=o.sent,!r||a.type!==le.TOGGLE_SIDEBAR_COLLAPSED){o.next=11;break}if((e=a.payload.collapsed)||!t||!n){o.next=11;break}return o.next=11,Object(gn.f)(Z_,n,t);case 11:o.t0=a.type,o.next=o.t0===A.SAVE_BOARD?14:o.t0===A.LOCAL_BOARD_UPDATED_WITH_REMOTE_CHANGE?14:o.t0===A.BOARD_IMPORTED?14:o.t0===A.BOARD_INITIALIZED?14:22;break;case 14:if(r&&n!==a.payload.board.uid&&(r=!1),t=a.payload.graph,n=a.payload.board.uid,e){o.next=21;break}return r=!0,o.next=21,Object(gn.f)(Z_,n,t);case 21:return o.abrupt("break",22);case 22:o.next=2;break;case 24:case"end":return o.stop()}},K_,this)}var eT=xe.a.mark(nT),tT=xe.a.mark(rT);function nT(e){var t,n;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(gn.c)(D.Api.toggleCodySuggest,e.payload.board.uid,e.payload.board.codySuggestEnabled);case 2:if(t=r.sent,n=t.response,!t.error){r.next=10;break}return r.next=8,Object(gn.g)(i.Command.error("Request Error","Could not toggle cody suggest."));case 8:return r.next=10,Object(gn.g)(D.Query.fetchUserBoards());case 10:if(!n){r.next=13;break}return r.next=13,Object(gn.g)(i.Command.info("Cody Suggestions "+(e.payload.board.codySuggestEnabled?"enabled":"disabled"),""));case 13:case"end":return r.stop()}},eT,this)}function rT(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([D.Type.TOGGLE_CODY_SUGGEST_ENABLED]);case 3:return e=t.sent,t.next=6,Object(gn.f)(nT,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},tT,this)}var aT=xe.a.mark(iT),oT=xe.a.mark(sT);function iT(e){var t,n;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(gn.c)(D.Api.toggleEventModeling,e.payload.board.uid,e.payload.board.eventModelingEnabled);case 2:if(t=r.sent,n=t.response,!t.error){r.next=10;break}return r.next=8,Object(gn.g)(i.Command.error("Request Error","Could not toggle event modeling."));case 8:return r.next=10,Object(gn.g)(D.Query.fetchUserBoards());case 10:if(!n){r.next=13;break}return r.next=13,Object(gn.g)(i.Command.info("Event Modeling "+(e.payload.board.eventModelingEnabled?"enabled":"disabled"),""));case 13:case"end":return r.stop()}},aT,this)}function sT(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([D.Type.TOGGLE_EVENT_MODELING_ENABLED]);case 3:return e=t.sent,t.next=6,Object(gn.f)(iT,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},oT,this)}var cT=xe.a.mark(lT),dT=xe.a.mark(mT),uT=xe.a.mark(pT);function lT(e){var t,n,r,a,o,s,c;return xe.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Object(gn.i)(Qy(qy(e.payload.boardId,e.payload.cellType)));case 2:return t=d.sent,n=e.payload,r=n.boardId,a=n.cellType,o=n.template,t||(t=Wy(r,a,o)),d.next=7,Object(gn.c)(D.Api.setStickyTemplate,t.boardId,t.cellType,o);case 7:if(s=d.sent,c=s.response,!s.error){d.next=13;break}return d.next=13,Object(gn.g)(i.Command.error("Request Error","Could not set sticky template."));case 13:if(!c){d.next=19;break}if(e.payload.disableNotification){d.next=17;break}return d.next=17,Object(gn.g)(i.Command.info("Sticky Template set","Sticky template for "+a+" set"));case 17:return d.next=19,Object(gn.g)(D.Event.stickyTemplateSet(t.setTemplate(o)));case 19:case"end":return d.stop()}},cT,this)}function mT(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.i)(Qy(qy(e.payload.boardId,e.payload.cellType)));case 2:return(t=a.sent)||(t=Wy(e.payload.boardId,e.payload.cellType,"")),a.next=6,Object(gn.c)(D.Api.updateStickyAdvancedConfig,t.boardId,t.cellType,e.payload.templateType,e.payload.templateSchema||void 0);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(gn.g)(i.Command.error("Request Error","Could not update sticky advanced config."));case 12:if(!r){a.next=20;break}if(e.payload.disableNotification){a.next=16;break}return a.next=16,Object(gn.g)(i.Command.info("Advanced Sticky Config updated","Advanced Sticky Config for "+t.cellType+" updated"));case 16:return t=t.setTemplateType(e.payload.templateType),e.payload.templateSchema&&(t=t.setTemplateSchema(e.payload.templateSchema)),a.next=20,Object(gn.g)(D.Event.stickyAdvancedConfigUpdated(t));case 20:case"end":return a.stop()}},dT,this)}function pT(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([D.Type.SET_STICKY_TEMPLATE,D.Type.UPDATE_STICKY_ADVANCED_CONFIG]);case 3:if((e=t.sent).type!==D.Type.SET_STICKY_TEMPLATE){t.next=9;break}return t.next=7,Object(gn.f)(lT,e);case 7:t.next=11;break;case 9:return t.next=11,Object(gn.f)(mT,e);case 11:t.next=0;break;case 13:case"end":return t.stop()}},uT,this)}var fT,hT="inspectioBoards",gT=n(126),bT=n.n(gT),yT=n(534),vT=n(1410),ET=n(1400),OT=function(e){var t=e.maxLength||50,n=Object(he.useState)(!1),r=Object(Ke.a)(n,2),a=r[0],o=r[1];return a&&!e.onClick||e.label.length<=t?he.createElement(he.Fragment,null,e.label):he.createElement(he.Fragment,null,e.label.slice(0,t)+" ",he.createElement("span",{onClick:function(t){t.preventDefault(),e.onClick&&e.onClick(!a),o(!a)}},"..."))},xT=function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1];return he.createElement(Kv.a.Item,{as:qe.Link,key:e.key,className:"ui vertical segment",style:{borderRadius:"0"},onClick:e.onClick,to:{pathname:kt(e.entry.boardId),search:"?cells=".concat(e.entry.cellId,"&clicks=").concat(e.clicks)}},he.createElement(Xv,{cellType:e.entry.cellType}),he.createElement(Kv.a.Content,null,he.createElement(Kv.a.Header,null,he.createElement(OT,{label:e.entry.label,maxLength:24,onClick:function(e){return a(e)}})),he.createElement(Kv.a.Description,null,"".concat(e.entry.action," by ").concat(e.entry.username)),he.createElement(Kv.a.Description,null,he.createElement("span",{className:"date",style:{color:"grey",fontSize:"10px"}},new Date(e.entry.date).toLocaleString()))),r&&he.createElement(Kv.a.List,{style:{padding:"0"}},he.createElement(Kv.a.Item,null,he.createElement(Kv.a.Description,null,e.entry.label))))},jT=n(533),wT=function(e){var t=Object(he.useState)(e.isActiveByDefault||!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1];return he.createElement(he.Fragment,null,he.createElement(jT.a,{content:e.title,index:e.index,active:r,onClick:function(){return a(!r)}}),he.createElement(yT.a,{active:r},he.createElement(Kv.a,{selection:!0},e.entries)))},kT=function(e,t,n){e(n?eu(t,n):tu(t))},IT=Object(Ue.b)()(Object(Ge.o)(function(e){var t=Object(he.useMemo)(function(){return Ay(e.match.params.uid)},[]),n=Object(he.useMemo)(function(){return mE(e.match.params.uid)},[]),r=Object(he.useState)(1),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(Fe.useSelector)(t),c=Object(Fe.useSelector)(n),d=Object(Fe.useDispatch)(),u=s&&s.shouldShowHistory||!!e.elementId,l=function(){i(o+1)},m=Object(he.useMemo)(function(){var t=bT()(),n=function(e){var t=bT()(e).startOf("isoWeek"),n=bT()(e).startOf("month"),r=bT()(n).subtract(1,"days").startOf("month");return{today:bT()(e).startOf("day"),startOfWeek:t,startOfMonth:n,startOfLastMonth:r}}(t),r={today:[],yesterday:[],twoDaysAgo:[],threeDaysAgo:[],fourDaysAgo:[],fiveDaysAgo:[],sixDaysAgo:[],lastWeek:[],twoWeeksAgo:[],threeWeeksAgo:[],fourWeeksAgo:[],lastMonth:[],older:[]};return c.history.filter(function(t){return!e.elementId||t.cellId===e.elementId}).forEach(function(e,t){var a=bT()(e.date,bT.a.ISO_8601),i=function(e,t,n,r){return he.createElement(xT,{entry:e,key:t,clicks:n,onClick:r})}(e,t+1,o,l),s=function(e,t,n){var r=n.today,a=n.startOfWeek,o=n.startOfMonth,i=n.startOfLastMonth;if(e.isBefore(i,"month"))return"older";if(e.isBefore(o))return"lastMonth";if(e.isBefore(a)){var s=e.diff(a,"weeks");return 0===s?"lastWeek":-1===s?"twoWeeksAgo":-2===s?"threeWeeksAgo":"fourWeeksAgo"}if(e.isBefore(r)){var c=e.diff(r,"days");return 0===c?"yesterday":-1===c?"twoDaysAgo":-2===c?"threeDaysAgo":-3===c?"fourDaysAgo":-4===c?"fiveDaysAgo":"sixDaysAgo"}return"today"}(a,0,n);r[s].push(i)}),r},[c,o,e.elementId]),p=function(t){var n=t.target;n instanceof HTMLDivElement&&n.scrollHeight-n.scrollTop===n.clientHeight&&!c.loading&&c.olderPatchesAvailable&&kT(d,e.match.params.uid,c.oldestBoardVersion)};Object(he.useEffect)(function(){var t=c.history.filter(function(t){return!e.elementId||t.cellId===e.elementId}),n=!1;if(e.elementId){var r=t.last(void 0);r&&r.action===zm.added&&(n=!0)}t.count()<50&&!c.loading&&c.olderPatchesAvailable&&!n&&kT(d,e.match.params.uid,c.oldestBoardVersion)},[c]);var f,h=Object(he.useMemo)(function(){return function(){d(Wd(e.match.params.uid,!1))}},[e.match.params.uid]),g=[],b=0;for(f in m)m.hasOwnProperty(f)&&m[f].length>0&&(g.push(he.createElement(wT,{key:f,title:e.t("insp.history.".concat(f)),index:b,entries:m[f],isActiveByDefault:0===b})),b++);return u&&c.loading&&g.push(he.createElement(yT.a,{active:!0},he.createElement(Kv.a,null,he.createElement(Kv.a.Item,{key:"item-loader",style:{paddingTop:"10px"}},he.createElement(Ug.a,{active:!0,inline:"centered"}))))),u&&!c.loading&&0===b&&g.push(he.createElement(nt.a,{warning:!0,content:"No activity available for this element. This happens when the element was added together with other elements, e.g. by importing an entire board or pasting a group of elements. We'll remove this limitation in the future."})),he.createElement(he.Fragment,null,!e.elementId&&he.createElement(vT.a.Group,{animation:"slide down"},u&&he.createElement("div",{className:"touch-only-pan",style:{position:"absolute",paddingTop:"50px",top:"0px",right:"0px",height:"100%",overflow:"hidden",borderLeft:"5px solid #eee",zIndex:99}},he.createElement(Eg.a,{style:{height:"100%",borderRadius:"0"}},he.createElement(Eg.a.Content,null,he.createElement(Eg.a.Header,null,he.createElement(Cp.a,{name:"close",className:"right floated",onClick:h,style:{cursor:"pointer"}})," Activity")),he.createElement(Eg.a.Content,{onScroll:p,style:{position:"relative",height:"100%",overflowY:"scroll"}},he.createElement(ET.a,null,g))))),!!e.elementId&&he.createElement("div",{onScroll:p},he.createElement(ET.a,null,g)))})),ST=Object(Ue.b)()(function(e){var t=e.match.params.invitation,n=Ii(),r=Object(Fe.useSelector)(n),a=Object(he.useState)(!1),o=Object(Ke.a)(a,2),s=o[0],c=o[1],d=Object(he.useState)(jt),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(Fe.useDispatch)();return Object(he.useEffect)(function(){r.signedIn&&hd(t).then(function(n){var r=n.response;if(n.error)return p(i.Command.error("Request failed","Failed to process board invitation")),void c(!0);if(r){var a=r.data.name,o=r.data.boardId,s=r.data.organizationId,d=0;ad(t).then(function n(r){if(r.error)return d<2?(d++,void window.setTimeout(function(){ad(t).then(n)},100)):(p(i.Command.error("Command failed","Failed to process board invitation")),void c(!0));s&&p(f.Command.switchActiveOrganization(s)),p(i.Command.info(e.t("insp.board.joined.title"),e.t("insp.board.joined.details",{name:a}))),m(kt(o)),c(!0)})}})},[r.signedIn]),s?he.createElement(Ge.c,{to:l}):he.createElement(Mg.a,{active:!0,className:"page"},he.createElement(Ug.a,{size:"large"},"Processing Board Invitation"))}),CT=Object(Ue.b)()(function(e){var t=e.match.params.invitation,n=Ii(),r=Object(Fe.useSelector)(n),a=Object(he.useState)(!1),o=Object(Ke.a)(a,2),s=o[0],c=o[1],d=Object(Fe.useDispatch)();return Object(he.useEffect)(function(){r.signedIn&&Fp(t).then(function(n){var r=n.response;if(n.error)return d(i.Command.error("Request failed","Failed to process team invitation")),void c(!0);if(r){var a=r.data.name,o=r.data.organizationId||null,s=0;Up(t).then(function n(r){if(r.error)return s<2?(s++,void window.setTimeout(function(){Up(t).then(n)},100)):(d(i.Command.error("Command failed","Failed to process team invitation")),void c(!0));d(i.Command.info(e.t("insp.team.joined.title"),e.t("insp.team.joined.details",{team:a}))),o&&d(f.Command.switchActiveOrganization(o)),d(D.Query.fetchUserBoards()),c(!0)})}})},[r.signedIn]),s?he.createElement(Ge.c,{to:jt}):he.createElement(Mg.a,{active:!0,className:"page"},he.createElement(Ug.a,{size:"large"},"Processing Team Invitation"))}),_T=Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(ue.BoardListSelector.makeGetAllBoards()),n=Object(he.useState)(""),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(Fe.useSelector)(Ii()),s=Object(Fe.useSelector)(Ei(i.activeOrganization)),c=!!s&&s.isAdmin(i.uid),d=t.filter(function(t){return(t.organization?c:!t.shared)&&!t.assignedTeams.contains(e.teamId)}).map(function(e){return{key:e.uid,value:e.uid,text:e.name}}).toArray();return he.createElement(Ai.a,{open:e.open,closeIcon:!0,onClose:e.onClose,size:"mini"},he.createElement(Ai.a.Header,null,e.t("insp.team.grant_access")),he.createElement(Ai.a.Content,null,he.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit(a),o("")}},he.createElement(tt.a,{placeholder:e.t("insp.team.choose_board"),fluid:!0,search:!0,selection:!0,options:d,onChange:function(e,t){return o(t.value)},value:a}),he.createElement("div",{style:{marginTop:"10px"}},he.createElement(Ni.a,{primary:!0,type:"submit",disabled:""===a},e.t("app.form.confirm"))))))}),TT=n(1204),AT=Object(Ue.b)()(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(!1),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)(!1),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(Fe.useDispatch)();return l?he.createElement(Ge.c,{push:!0,to:kt(e.board.uid)}):he.createElement(he.Fragment,null,he.createElement(kg.a,{open:r,onOpen:function(){a(!0)},onClose:function(){a(!1)},on:"click",position:"bottom center",disabled:e.readonly,content:he.createElement(TT.a,{secondary:!0,vertical:!0,compact:!0},he.createElement(TT.a.Item,{content:e.t("app.open"),onClick:function(){return m(!0)}}),he.createElement(TT.a.Item,{content:e.t("app.form.remove"),onClick:function(){a(!1),c(!0)}})),trigger:he.createElement("div",{className:"ui large basic orange button",key:e.board.uid,onClick:function(){e.readonly&&m(!0)}},he.createElement("div",null,e.board.name))}),he.createElement($g.a,{open:s,header:e.t("insp.team.remove_board_confirm_title"),content:e.t("insp.team.remove_board_confirm_text",{board_name:e.board.name}),confirmButton:e.t("insp.team.remove_board_confirm_button"),cancelButton:he.createElement(Ni.a,{content:e.t("app.form.cancel"),className:"basic noborder"}),onCancel:function(){return c(!1)},onConfirm:function(){e.readonly||p(q.adminRevokeTeamAccessToBoard(e.board.uid,e.team.uid)),c(!1)}}))}),NT=Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(Al()),n=Object(Fe.useDispatch)();return he.createElement("h3",{style:{margin:0,cursor:"pointer"},id:e.team.uid},he.createElement(oE,{text:e.team.name,charSize:9,widthUnit:"px",padding:20,required:!0,onTextChanged:function(r){e.addTeamMode?(n(W.Command.addTeam(e.team.uid,r,t?t.uid:null)),e.onNameChanged&&e.onNameChanged(r)):n(W.Command.renameTeam(e.team.uid,r))},focus:e.addTeamMode,onCancel:e.onCancelName,placeholder:e.t("insp.team.team_name")}),he.createElement("span",null," \u2014 "),he.createElement("span",{className:"sub header",style:{margin:0,cursor:"pointer"}},he.createElement(oE,{text:e.team.description,charSize:9,widthUnit:"px",padding:20,placeholder:e.t("insp.team.team_description"),onTextChanged:function(t){n(W.Command.changeTeamDescription(e.team.uid,t))},onCancel:e.onCancelDescription})))}),LT=n(1297),RT=Object(Ue.b)()(function(e){var t=Object(he.useState)(Wn()),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(!1),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)(!1),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(he.useState)(!1),h=Object(Ke.a)(p,2),b=h[0],y=h[1],v=Object(Fe.useDispatch)(),E=Object(Fe.useSelector)(Ch(e.teamInvitation.uid));Object(he.useEffect)(function(){f.Api.getInspectioUserInfoByEmail(e.teamInvitation.invitedUser).then(function(e){var t=e.response;if(e.error,t){var n=g.createIioUserInfoFromServerData(t.data);Tn(n)&&a(n.value)}})},[e.teamInvitation.invitedUser]),Object(he.useEffect)(function(){s&&c(!1),l&&E&&E.status===pp.revoked&&y(!0)},[E]);return b?he.createElement(he.Fragment,null):he.createElement(LT.a,null,he.createElement(ub,{user:r,size:"mini"}),he.createElement("span",{style:{paddingLeft:"10px"}},e.teamInvitation.invitedUser),he.createElement(sb.a,{floated:"right"},he.createElement(cb,{content:e.t("app.form.resend"),icon:"paper plane",loading:s,onClick:function(){c(!0),v(q.resendTeamInvitation(e.teamInvitation.uid))}}),he.createElement(cb,{content:e.t("app.form.revoke"),icon:"delete",loading:l,onClick:function(){m(!0),v(q.revokeTeamInvitation(e.teamInvitation.uid))}})))}),BT=function(e){var t=e.invitations.map(function(e){return he.createElement(RT,{teamInvitation:e,key:e.uid})});return he.createElement(Kv.a,{relaxed:!0,divided:!0},t)},DT=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},PT=Object(Ue.b)()(Object(Ge.o)(function(e){var t=Object(he.useState)(""),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(!0),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)(Object(fe.List)()),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(he.useState)(!1),f=Object(Ke.a)(p,2),h=f[0],g=f[1],b=Object(Fe.useSelector)(Ii()),y=Object(Fe.useSelector)(Ei(b.activeOrganization)),v=Object(fe.List)(y?[y.ownerId].concat(Object(eo.a)(y.members.toJS())):[]),E=Object(Fe.useSelector)(ri(v)),O=Object(Fe.useDispatch)();Object(he.useEffect)(function(){e.open&&(c(!0),Gp(e.team.uid).then(function(e){var t=e.response,n=e.error;if(c(!1),n&&(console.error(n),g(!0)),t){var r=Pn(t.data,Rn([Un(),"Response data is not of type Array"]),Dn(Wf));_n(r)&&(console.error("Failed to process open team invitations loaded from server",r.value,t.data),g(!0)),Tn(r)&&(m(Object(fe.List)(r.value)),O(V.teamInvitationsLoaded(Object(fe.List)(r.value))))}})),e.open||m(Object(fe.List)())},[e.open]);var x=!(!s&&0===l.count()),j=E.filter(function(e){return e.username.toLocaleLowerCase().includes(r.toLocaleLowerCase())||e.email.toLocaleLowerCase().includes(r.toLocaleLowerCase())}).sortBy(function(e){return e.username}).map(function(e){return{id:e.userId,title:e.username,description:e.email,image:e.avatarUrl}});return he.createElement(Ai.a,{open:e.open,closeIcon:!0,onClose:e.onClose},he.createElement(Ai.a.Header,null,e.t("insp.team.invite_user")),he.createElement(Ai.a.Content,null,he.createElement("form",{onSubmit:function(){O(q.inviteUserToTeam(ot.v4(),e.team.uid,r)),a(""),e.onClose()}},he.createElement("div",{style:{marginBottom:"10px"}},he.createElement(Tg.a,{style:{width:"100%"},fluid:!0,value:r,results:j.toArray(),placeholder:e.t("insp.team.user_email"),showNoResults:!1,resultRenderer:function(e){return he.createElement("div",{key:e.id},he.createElement("div",{className:"ui image avatar"},he.createElement("img",{src:e.image,alt:e.title})),he.createElement("div",{className:"content"},he.createElement("div",{className:"title"},e.title),he.createElement("div",{className:"description"},e.description)))},onSearchChange:function(e,t){return a(t.value||"")},onResultSelect:function(e,t){a(t.result.description)},autoFocus:!0})),he.createElement(Ni.a,{primary:!0,type:"submit",disabled:!DT(r)},e.t("insp.team.send_invitation"))),he.createElement("div",{className:"ui horizontal divider"},e.t("insp.team.open_invitations")),s&&he.createElement(Cp.a,{loading:!0,name:"spinner"}),x&&he.createElement(BT,{invitations:l}),!x&&!h&&he.createElement("p",{className:"infotextSecondary"},e.t("insp.team.empty_invitations")),h&&he.createElement("p",{className:"infotextSecondary",style:{color:"red"}},e.t("insp.team.error_loading_invitations"))))})),zT=Object(Ue.b)()(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(!1),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)(!1),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(Fe.useDispatch)();rt(function(){a(!1)});var f=function(t){return!e.isOwner&&!e.readonly},h=function(t){f(e.member.userId)&&(t.stopPropagation(),a(!r))},g=e.isOwner?"admin-member":"";return he.createElement("div",{className:"item "+g,key:e.member.userId,style:f(e.member.userId)?{cursor:"pointer"}:{}},he.createElement(tt.a,{open:r,icon:!1,pointing:"top",disabled:e.readonly},he.createElement(tt.a.Menu,null,he.createElement(tt.a.Item,{text:e.t("app.form.remove"),onClick:function(){return m(!0)}}))),!s&&he.createElement("span",{className:"ui avatar image placeholder",onClick:h}),he.createElement("img",{className:"ui avatar image",src:e.member.avatar(),onClick:h,alt:e.member.username,onLoad:function(){return c(!0)},style:{display:s?"inline-block":"none"}}),he.createElement("div",{className:"content",onClick:h},he.createElement("div",{className:"header"},e.member.username)),he.createElement($g.a,{open:!e.readonly&&l,header:e.t("insp.team.remove_user_confirm_title"),content:e.t("insp.team.remove_user_confirm_text",{user_name:e.member.username}),confirmButton:e.t("insp.team.remove_user_confirm_button"),cancelButton:he.createElement(Ni.a,{content:e.t("app.form.cancel"),className:"basic noborder"}),onCancel:function(){return m(!1)},onConfirm:function(){e.readonly||p(q.removeMemberFromTeam(e.teamId,e.member.userId)),m(!1)}}))}),MT=Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=Object(he.useState)(),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=e.organizations.map(function(e){return{key:e.uid,value:e.uid,text:e.organizationName}});return he.createElement(Xe.a,{columns:2},he.createElement(_g.a,{mobile:16,tablet:16,computer:12,largeScreen:12,widescreen:12},he.createElement(Ky.a,{options:i.toJS(),fluid:!0,placeholder:e.t("insp.team.move_to_organization_select"),onChange:function(e,t){return o(t.value)}})),he.createElement(_g.a,{mobile:16,tablet:16,computer:4,largeScreen:4,widescreen:4},he.createElement(Ni.a,{primary:!0,floated:"right",onClick:function(){a&&t(q.moveTeamToOrganization(e.teamId,a))}},e.t("insp.team.move_to_organization_submit"))),he.createElement(nt.a,{size:"small",info:!0},e.t("insp.team.move_to_organization_desc")))}),UT=Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(ri(e.team.members)),n=Object(he.useState)(!1),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(he.useState)(!1),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(he.useState)(!1),l=Object(Ke.a)(u,2),m=l[0],p=l[1],f=Object(Fe.useSelector)(lg(e.team.uid)),h=Object(Fe.useDispatch)(),g=t.sortBy(function(e){return e.username}).sort(function(t,n){return t.userId===e.team.ownerId?-1:n.userId===e.team.ownerId?1:0}).map(function(t){return he.createElement(zT,{key:t.userId,member:t,isOwner:e.team.ownerId===t.userId,teamId:e.team.uid})}),b=f.map(function(t){return he.createElement(AT,{board:t,team:e.team,key:t.uid})});return he.createElement("div",{className:"ui segment"},!e.blueprint&&he.createElement("a",{href:"#",className:"ui small right floated basic button noborder",onClick:function(e){e.preventDefault(),o(!0)}},"Delete"),he.createElement(NT,{team:e.team,addTeamMode:e.blueprint,onNameChanged:function(t){e.blueprint&&e.onTeamAdded&&e.onTeamAdded(e.team.uid)},onCancelName:function(){e.onCancelName&&e.onCancelName(e.team.uid)},onCancelDescription:function(){e.onCancelDescription&&e.onCancelDescription(e.team.uid)}}),he.createElement("div",{className:"ui horizontal divider"},"Teammember"),he.createElement("div",{className:"ui horizontal list"},he.createElement(Ni.a,{basic:!0,icon:!0,color:"blue",size:"large",onClick:function(e){e.preventDefault(),d(!0)},disabled:e.blueprint},he.createElement("i",{className:"blue user icon"})),!e.blueprint&&g),he.createElement("div",{className:"ui horizontal divider"},"Teamboards"),he.createElement("div",{className:"ui horizontal list"},he.createElement(Ni.a,{basic:!0,icon:!0,color:"orange",size:"large",onClick:function(e){e.preventDefault(),p(!0)},disabled:e.blueprint},he.createElement("i",{className:"orange sticky note icon"})),!e.blueprint&&b),e.isMovable&&he.createElement("div",{className:"ui horizontal divider"},e.t("insp.team.move_to_organization_title")),e.isMovable&&he.createElement(MT,{organizations:e.targetOrganizations,teamId:e.team.uid}),he.createElement(PT,{team:e.team,open:c,onClose:function(){d(!1)}}),he.createElement(_T,{teamId:e.team.uid,open:m,onClose:function(){p(!1)},onSubmit:function(t){h(W.Command.adminGrantTeamAccessToBoard(t,[e.team.uid])),p(!1)}}),he.createElement($g.a,{open:a,header:e.t("insp.team.remove_team_confirm_title"),confirmButton:e.t("app.form.remove"),cancelButton:he.createElement(Ni.a,{content:e.t("app.form.cancel"),className:"basic noborder"}),content:e.t("insp.team.remove_team_confirm_text",{team_name:e.team.name}),onCancel:function(){return o(!1)},onConfirm:function(){h(W.Command.deleteTeam(e.team.uid))}}))}),FT=Object(Ue.b)()(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(!1),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useMemo)(function(){return Gf(it.a.v4())},[r]),u=Object(Fe.useSelector)(Yh());s&&u.find(function(e){return e.uid===d.uid})&&(c(!1),a(!1));return he.createElement(he.Fragment,null,he.createElement("div",null,he.createElement("button",{className:"ui huge basic button",onClick:function(e){e.preventDefault(),a(!r)}},he.createElement("i",{className:"plus icon"}),e.t("insp.team.overview_add"))),r&&he.createElement(UT,{team:d,blueprint:!0,onTeamAdded:function(){return c(!0)},onCancelName:function(){return a(!1)},isMovable:!1,targetOrganizations:Object(fe.List)()}))}),GT=Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(ri(e.team.members)),n=Object(Fe.useSelector)(lg(e.team.uid)),r=t.sortBy(function(e){return e.username}).sort(function(t,n){return t.userId===e.team.ownerId?-1:n.userId===e.team.ownerId?1:0}).map(function(t){return he.createElement(zT,{key:t.userId,member:t,isOwner:e.team.ownerId===t.userId,teamId:e.team.uid,readonly:!0})}),a=n.map(function(t){return he.createElement(AT,{board:t,team:e.team,key:t.uid,readonly:!0})});return he.createElement("div",{className:"ui segment"},he.createElement("h3",{style:{margin:0}},e.team.name,he.createElement("span",null," \u2014 "),he.createElement("span",{className:"sub header"},e.team.description)),he.createElement("div",{className:"ui horizontal divider"},"Teammember"),he.createElement("div",{className:"ui horizontal list"},r),he.createElement("div",{className:"ui horizontal divider"},"Teamboards"),he.createElement("div",{className:"ui horizontal list"},a))}),qT=Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(Al()),n=Object(Fe.useSelector)(Tl(e.currentUser.uid)),r=!t||!t.explicitOrganization,a=r?n.filter(function(e){return e.explicitOrganization&&!e.userIsGuest}):Object(fe.List)(),o=r&&a.count()>0,i=function(e,t,n){return!!(e.organizationId&&n&&e.organizationId===n.organizationId&&n.userIsAdmin)||e.isAdmin(t)},s=e.teams.filter(function(n){return i(n,e.currentUser.uid,t)}).sortBy(function(e){return e.name}).sortBy(function(e){return!e.isNew}).map(function(e){return he.createElement(UT,{isMovable:o,targetOrganizations:a,team:e,key:e.uid})}),c=e.teams.filter(function(n){return!i(n,e.currentUser.uid,t)}).sortBy(function(e){return e.name}).map(function(e){return he.createElement(GT,{team:e,key:e.uid})});return he.createElement(he.Fragment,null,he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),he.createElement(Xe.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},he.createElement(et.a,{as:"h1",icon:!0,textAlign:"center"},he.createElement(et.a.Content,null,"Manage Your Teams",he.createElement(et.a.Subheader,null))))),he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,null,he.createElement("div",null,he.createElement(FT,{disabled:!1}),s))),0===s.count()&&0===c.count()&&he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,null,he.createElement(nt.a,{info:!0,floating:!0,content:e.t("insp.team.no_teams")}))),c.count()>0&&he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),he.createElement(Xe.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},he.createElement(et.a,{as:"h2",icon:!0,textAlign:"center"},he.createElement(et.a.Content,null,"Joined Teams",he.createElement(et.a.Subheader,null))))),he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,null,c)))});!function(e){e.organization="organization",e.teams="teams"}(fT||(fT={}));var VT,WT=Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(Yh()),n=Object(Fe.useSelector)(Ii());return he.createElement(Ve.a,null,he.createElement(Xe.a,{stackable:!0,padded:!0},he.createElement(qT,{teams:t,currentUser:n})))}),HT=n(1287),$T=n(1406),JT=Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(eg("lite_mode",!1)),n=Object(Fe.useDispatch)(),r=t?"#2eba46":"inherit",a=t?"high":"half",o=t?"lite_mode_is_active":"activate_lite_mode";return he.createElement(kg.a,{trigger:he.createElement(HT.a,{onClick:function(){n($t("lite_mode",!t))}},he.createElement(Cp.a,{name:"battery ".concat(a),style:{color:r}})),content:he.createElement(he.Fragment,null,he.createElement("p",null,e.t("insp.top_menu."+o)),t&&he.createElement("p",null,he.createElement("small",null,e.t("insp.top_menu.lite_mode_is_active_details"))))})}),QT=Object(ht.c)(function(e){var t=Object(Fe.useSelector)(Ii()),n=Object(Fe.useSelector)(Ei(t.activeOrganization)),r=Object(Fe.useSelector)(Ay(e.match.params.uid)),a=Object(Fe.useSelector)(ng()),o=Object(Fe.useSelector)(eg("show_timer_hint",!1)),i=Object(he.useState)(!1),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(Fe.useDispatch)();Object(he.useEffect)(function(){a&&o&&d(!0)},[a,o]);var l=n?n.isAdmin(t.uid)||r&&r.isCreator(t.uid):r&&r.owner===t.uid;return he.createElement(he.Fragment,null,he.createElement(JT,null),he.createElement(kg.a,{open:c,trigger:he.createElement(HT.a,{icon:"hourglass half",onClick:function(){return u(Qd(e.match.params.uid,!0))}}),openOnTriggerClick:!1,openOnTriggerFocus:!1,openOnTriggerMouseEnter:!1,position:"bottom left",content:he.createElement(he.Fragment,null,he.createElement("p",null,e.t("insp.board.timer.hint")),he.createElement("p",null,he.createElement("span",{style:{color:"#9cc8f5",cursor:"pointer",float:"right"},onClick:function(){u($t("show_timer_hint",!1)),d(!1)}},e.t("insp.hint.got_it"))))}),he.createElement(tt.a,{item:!0,icon:"ellipsis vertical"},he.createElement(tt.a.Menu,{direction:"left"},he.createElement(tt.a.Item,{icon:"history",text:"Activity",onClick:function(){return u(Wd(e.match.params.uid,!0))}}),he.createElement(tt.a.Item,{icon:"clipboard outline",text:e.t("insp.top_menu.element_details"),onClick:function(){return u(Hd(e.match.params.uid,!0,!1))}}),he.createElement(tt.a.Item,{icon:"code",text:"Cody",onClick:function(){return u($d(e.match.params.uid,!0))}}),he.createElement(tt.a.Item,{icon:"play",text:"Cody Play",onClick:function(){return u(Jd(e.match.params.uid,!0))}}),r&&(r.organization?l:!r.shared)&&he.createElement(tt.a.Item,{icon:"cog",text:"Settings",to:Ct(e.match.params.uid),as:qe.NavLink}),he.createElement(tt.a.Item,{icon:"upload",text:"Export Board",onClick:function(){return u(Vd(e.match.params.uid))}}),he.createElement(tt.a.Item,{icon:"question",text:"FAQs",as:"a",href:"https://wiki.prooph-board.com",target:"_blank"}))))}),YT=Object(Ue.b)()(Object(Ge.o)(QT)),KT=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},ZT=Object(Ue.b)()(function(e){var t=Object(he.useState)(e.email),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(Fe.useSelector)(Ii()),i=Object(Fe.useSelector)(Ei(o.activeOrganization)),s=Object(fe.List)(i?[i.ownerId].concat(Object(eo.a)(i.members.toJS())):[]),c=Object(Fe.useSelector)(ri(s));Object(he.useEffect)(function(){a(e.email)},[e.email]);var d=c.filter(function(e){return e.username.toLocaleLowerCase().includes(r.toLocaleLowerCase())||e.email.toLocaleLowerCase().includes(r.toLocaleLowerCase())}).sortBy(function(e){return e.username}).map(function(e){return{id:e.userId,title:e.username,description:e.email,image:e.avatarUrl}});return he.createElement(Ai.a,{open:e.open,closeIcon:!0,onClose:e.onClose,size:"tiny"},he.createElement(Ai.a.Header,null,e.t("insp.board.invite_user")),he.createElement(Ai.a.Content,null,he.createElement("div",{style:{marginBottom:"10px"}},he.createElement(Xe.a,{container:!0,stackable:!0,doubling:!0},he.createElement(_g.a,{mobile:16,tablet:8,computer:10},he.createElement(Tg.a,{fluid:!0,value:r,results:d.toArray(),placeholder:e.t("insp.board.form.email"),showNoResults:!1,resultRenderer:function(e){return he.createElement("div",{key:e.id},he.createElement("div",{className:"ui image avatar"},he.createElement("img",{src:e.image,alt:e.title})),he.createElement("div",{className:"content"},he.createElement("div",{className:"title"},e.title),he.createElement("div",{className:"description"},e.description)))},onSearchChange:function(t,n){return r=n.value||"",a(r),void(KT(r)&&e.onEmailChange(r));var r},onResultSelect:function(t,n){a(n.result.description),e.onEmailChange(n.result.description)}})),he.createElement(_g.a,{mobile:16,tablet:8,computer:6},he.createElement(Ni.a.Group,null,he.createElement(Ni.a,{type:"button",className:"positive",children:"Read",onClick:function(){return e.onPermissionsChange(Object(Ye.a)({},e.permissions,{writeAccess:!1}))}}),he.createElement(Ni.a.Or,{text:"+"}),he.createElement(Ni.a,{type:"button",className:e.permissions.writeAccess?"positive":"",children:"Write",onClick:function(){return e.onPermissionsChange(Object(Ye.a)({},e.permissions,{writeAccess:!e.permissions.writeAccess}))}})))))),he.createElement(Ai.a.Actions,null,he.createElement(Ni.a,{primary:!0,type:"submit",onClick:e.onSubmit,disabled:!KT(r)},e.t("app.form.confirm"))))}),XT=Object(Ge.o)(function(e){var t=Object(Fe.useSelector)(Ii()),n=Object(Fe.useSelector)(Ei(t.activeOrganization)),r=Object(he.useState)(""),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(he.useState)(!1),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(he.useState)({adminAccess:!1,writeAccess:!0,readAccess:!0}),m=Object(Ke.a)(l,2),p=m[0],f=m[1],h=Object(Fe.useSelector)(Ay(e.match.params.uid)),g=Object(Fe.useDispatch)(),b=!!n&&(n.isAdmin(t.uid)||h&&h.isCreator(t.uid)),y=function(){u(!1)};return he.createElement(he.Fragment,null,h&&(h.organization?b:!h.shared)&&he.createElement(he.Fragment,null,he.createElement(HT.a,null,he.createElement(Ni.a,{icon:!0,className:"share",onClick:function(e){e.stopPropagation(),u(!0)}},he.createElement(Cp.a,{name:"share alternate"}),"\xa0share")),he.createElement(ZT,{open:d,onClose:y,onSubmit:function(){g(L.shareBoard(h.uid,o,p)),i(""),y()},email:o,onEmailChange:function(e){i(e)},permissions:p,onPermissionsChange:f})))}),eA=function(e){var t=Ii(),n=Object(Fe.useSelector)(t),r=Object(he.useState)(!1),a=Object(Ke.a)(r,2),o=a[0],i=a[1];return he.createElement(he.Fragment,null,he.createElement(kg.a,{on:"click",position:"bottom center",open:o,onOpen:function(){i(!0)},onClose:function(){i(!1)},trigger:he.createElement(HT.a,null,he.createElement(ab.a,{circular:!0,className:"user",style:{backgroundImage:"url(".concat(n.avatarUrl,")"),backgroundSize:"cover"}})),content:he.createElement(TT.a,{vertical:!0,secondary:!0,compact:!0},he.createElement(HT.a,{to:wt,as:qe.NavLink,activeClassName:"active",onClick:function(){return i(!1)}},he.createElement(Cp.a,{name:"user"}),"Profile"),he.createElement(HT.a,{onClick:function(){return LD()}},he.createElement(Cp.a,{name:"sign-out"}),"Sign Out"))}))},tA=function(e){return he.createElement(qe.Link,{to:kt(e.boardId),className:(e.activeCrumb?"active ":"")+"section"},e.children)},nA=Object(Ge.o)(function(e){var t=Ay(e.match.params.uid),n=Object(Fe.useSelector)(t),r="Unknown",a=he.createElement(he.Fragment,null);return n&&(r=n.name,n.writeAccess||(a=he.createElement($T.a.Section,null,"\xa0(read only)"))),he.createElement(he.Fragment,null,he.createElement($T.a.Divider,null),he.createElement($T.a.Section,{active:!0,as:tA,activeCrumb:!0,boardId:e.match.params.uid},r),a)}),rA=function(e){return he.createElement(qe.Link,{to:jt},e.children)},aA=function(e){return he.createElement($T.a.Section,{as:rA},"Boards")},oA=function(e){return he.createElement($T.a.Section,null,"Organization")},iA=function(e){return he.createElement($T.a.Section,null,"Teams")},sA=function(e){return he.createElement($T.a.Section,null,"Updates")},cA=function(e){return he.createElement($T.a.Section,null,"Profile")},dA=Object(Ue.b)()(Object(Ge.o)(function(e){var t=Object(Fe.useSelector)(zO()),n=It(e.location.pathname)?t.width+20+"px":"270px";return he.createElement(TT.a,{fixed:"top",inverted:!1,id:"topmenu",style:{paddingLeft:n},className:"touch-only-pan"},he.createElement(Ge.d,{path:jt},he.createElement(HT.a,null,he.createElement($T.a,null,he.createElement(Ge.d,{exact:!0,path:[jt,"/inspectio/board/:uid",St],component:aA}),he.createElement(Ge.d,{exact:!0,path:wt,component:cA}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/updates",component:sA}),he.createElement(Ge.d,{exact:!0,path:["/inspectio/board/:uid",St],component:nA}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/teams",component:iA}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/organization",component:oA})))),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:XT}),he.createElement(TT.a.Menu,{position:"right",id:"topmenuUsers"}),he.createElement(eA,null),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:YT}))})),uA=n(130),lA=n.n(uA),mA=Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(Al());return he.createElement(Ai.a,{open:e.open,closeIcon:!0,onClose:e.onClose},he.createElement(Ai.a.Header,null,e.t("insp.board.add")),he.createElement(Ai.a.Content,null,he.createElement(nt.a,{icon:"dollar",warning:!0,content:t&&t.userIsGuest?e.t("insp.user.quota_reached_guest"):t&&t.explicitOrganization?e.t("insp.user.quota_reached"):e.t("insp.user.quota_reached_user")})))}),pA=Object(Ue.b)()(Object(Ge.o)(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(!1),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)(""),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(he.useState)(!1),f=Object(Ke.a)(p,2),h=f[0],g=f[1],b=Object(he.useRef)(null),y=T.makeGetCurrentBoardQuota(),v=Object(Fe.useSelector)(y),E=T.makeGetCurrentUser(),O=Object(Fe.useSelector)(E),x=Object(Fe.useDispatch)();return he.createElement("div",{className:"item"},he.createElement(Ni.a,{className:"large basic",onClick:function(){a(!r),r||window.setTimeout(function(){b.current.focus()},200)}},he.createElement("i",{className:"plus icon"})," Add\xa0Board"),he.createElement(vT.a,{animation:"fade down",visible:r,duration:200},he.createElement("div",{className:"ui icon input"},he.createElement("form",{onSubmit:function(t){if(t.preventDefault(),""!==l)if(0!==v){var n=z.createUserBoard(O.uid,l);x(L.addBoard(n,e.history))}else c(!0);else g(!0)}},he.createElement(kp.a,{placeholder:"Board name ...",fluid:!0,ref:b,error:h,value:l,onChange:function(e){m(e.target.value),g(""===e.target.value)}})))),he.createElement(mA,{open:s,onClose:function(){m(""),a(!1),c(!1)}}))})),fA=function(e,t){return!!t.find(function(t){return t.uid===e})},hA=Object(Ue.b)()(function(e){var t=Ii(),n=(Object(Fe.useSelector)(t),Object(Fe.useSelector)(Yh(!0))),r=Object(he.useState)(""),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=n.map(function(e){return{key:e.uid,value:e.uid,text:e.name}}).toArray();return he.createElement(Ai.a,{open:e.open,closeIcon:!0,onClose:e.onClose},he.createElement(Ai.a.Header,null,e.t("insp.team.add_to_board",{board_name:e.board.name})),he.createElement(Ai.a.Content,null,he.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit(o),i("")}},he.createElement(tt.a,{placeholder:e.t("insp.team.choose"),fluid:!0,search:!0,selection:!0,options:s,onChange:function(e,t){return i(t.value)},value:o}),he.createElement("div",{style:{marginTop:"10px"}},he.createElement(Ni.a,{primary:!0,type:"submit",disabled:!fA(o,n)},e.t("app.form.confirm"))))))}),gA=function(e,t){var n=t.find(function(t){return t.uid===e});return n?n.name:"Unknown Team"},bA=Object(Ue.b)()(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=(n[0],n[1],Object(he.useState)(!1)),a=Object(Ke.a)(r,2),o=(a[0],a[1],Object(he.useState)("")),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)({adminAccess:!1,writeAccess:!0,readAccess:!0}),u=Object(Ke.a)(d,2),l=u[0],m=u[1],f=Object(he.useState)(!1),h=Object(Ke.a)(f,2),g=h[0],b=h[1],y=Object(he.useState)(!1),v=Object(Ke.a)(y,2),E=v[0],O=v[1],x=Object(he.useState)(!1),j=Object(Ke.a)(x,2),w=j[0],k=j[1],I=Object(he.useState)(!1),S=Object(Ke.a)(I,2),C=S[0],_=S[1],T=Object(he.useState)(void 0),A=Object(Ke.a)(T,2),N=A[0],R=(A[1],Object(he.useState)(void 0)),B=Object(Ke.a)(R,2),D=B[0],P=(B[1],Object(Fe.useDispatch)()),z=Object(Fe.useSelector)(ni()),M=Object(Fe.useSelector)(Yh()),U=Object(Fe.useSelector)(eg(Kh(e.board.uid),!1));Object(he.useEffect)(function(){e.board.sharedWith.count()<1||P(p.loadUsersInfo(e.board.sharedWith.toArray()))},[e.board.sharedWith]);var F=function(e){var t=z.find(function(t){return t.userId===e});return t?t.username:""},G=function(){b(!1)},q=function(e){e.stopPropagation()},V=U?"eye slash icon":"eye icon";return he.createElement("div",{className:"ui item",style:{cursor:"pointer"}},!1,he.createElement(qe.NavLink,{className:"board-list board",to:kt(e.board.uid)},e.board.name),he.createElement(Cp.a,{className:V,onClick:function(t){t.stopPropagation(),P($t(Kh(e.board.uid),!U))}}),!1,he.createElement("div",{onClick:q},he.createElement(hA,{open:E,onClose:function(){O(!1)},onSubmit:function(t){P(W.Command.adminGrantTeamAccessToBoard(e.board.uid,[t])),O(!1)},board:e.board}),he.createElement(ZT,{open:g,onClose:G,onSubmit:function(){P(L.shareBoard(e.board.uid,s,l)),c(""),G()},email:s,onEmailChange:function(e){c(e)},permissions:l,onPermissionsChange:m}),he.createElement($g.a,{open:w,header:e.t("insp.board.remove_user_confirm_title"),content:e.t("insp.board.remove_user_confirm_text",{user_name:N?F(N):""}),onCancel:function(){return k(!1)},onConfirm:function(){N&&(P(L.revokeAccessToBoard(e.board.uid,N)),k(!1))}}),he.createElement($g.a,{open:C,header:e.t("insp.team.remove_from_board_confirm_title"),content:e.t("insp.team.remove_from_board_confirm_text",{team_name:D?gA(D,M):""}),onCancel:function(){return _(!1)},onConfirm:function(){D&&(P(W.Command.adminRevokeTeamAccessToBoard(e.board.uid,D)),_(!1))}})))});!function(e){e.all="all",e.onlyShared="onlyShared",e.noShared="noShared"}(VT||(VT={}));var yA,vA=Object(Ue.b)()(function(e){return he.createElement("div",{className:"ui item",style:{cursor:"pointer",textAlign:"center",color:"#00b5ad"},onClick:function(){return e.onClick()}},e.showAll?e.t("app.showLess"):e.t("app.showAll"))}),EA=function(e){var t,n=Object(Fe.useSelector)(Ii()),r=Object(Fe.useSelector)(Ei(n.activeOrganization)),a=!!r&&r.isAdmin(n.uid),o=Object(he.useState)(!1),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=ug(!0),u=Object(Fe.useSelector)(d),l=Object(Fe.useSelector)(tg()),m=(Object(he.useMemo)(function(){return u.filter(function(e){return e.shared&&!a}).count()},[u]),Object(fe.List)()),p=Object(fe.List)();u.filter(function(e){return!e.shared||a}).sortBy(function(e){return e.name},function(e,t){return e===t?0:e<t?-1:1}).forEach(function(e){!0===l[Kh(e.uid)]?p=p.push(e):!s&&m.count()>=3?p=p.push(e):m=m.push(e)}),s&&(m=(t=m).push.apply(t,Object(eo.a)(p.toArray())));var f=m.map(function(e){return he.createElement(bA,{key:e.uid,board:e})}).toArray();return p.count()>0||m.count()>3?f.push(he.createElement(vA,{showAll:s,key:"sidebar-show-more-boards",onClick:function(){c(!s)}})):s&&c(!1),he.createElement(he.Fragment,null,f)},OA=Object(Ge.o)(function(e){var t=ug(!0),n=Object(Fe.useSelector)(t),r="ui small label";return e.location.pathname===jt&&(r+=" teal"),he.createElement(qe.NavLink,{exact:!0,className:"item",activeClassName:"active",to:jt},he.createElement(Cp.a,{className:"sticky note icon"}),he.createElement("div",{className:r},n.count()),"Boards")}),xA=n(1055),jA=(n(1392),Object(Ue.b)()(function(e){var t=Object(he.useState)(""),n=Object(Ke.a)(t,2),r=n[0],a=n[1];return e.reset&&""!==r&&a(""),he.createElement(Ai.a,{open:e.open,closeIcon:!0,onClose:e.onClose},he.createElement(Ai.a.Header,null,e.t("insp.feedback.header")),he.createElement(Ai.a.Content,null,he.createElement(nt.a,null,he.createElement(xA.a,null,e.t("insp.feedback.info_text"),he.createElement("p",null,"\xa0"),he.createElement("p",null,he.createElement("a",{href:"https://gitter.im/proophboard/community",target:"_blank"},he.createElement(Cp.a,{name:"arrow right"}),"\xa0Chat")),he.createElement("p",null,he.createElement("a",{href:"https://github.com/proopboard/issue-tracker/issues",target:"_blank"},he.createElement(Cp.a,{name:"arrow right"}),"\xa0Issue Tracker")))),!1),!1)})),wA="Failed to send feedback. Please try again or send an email to contact@prooph.de",kA=function(e){var t=Object(Fe.useDispatch)(),n=Object(he.useState)(!1),r=Object(Ke.a)(n,2),a=r[0],o=r[1],s=Object(he.useState)(!1),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(Fe.useSelector)(Ii());return he.createElement(he.Fragment,null,he.createElement("div",{className:"ui item"},he.createElement(Ni.a,{className:"big",onClick:function(){u(!1),o(!0)}},he.createElement("div",{className:"header"},"Feedback"),he.createElement("div",{className:"sub header",style:{textTransform:"none",fontWeight:"normal"}},"Send Bugs & Feature Requests"))),he.createElement(jA,{open:a,onClose:function(){return o(!1)},onSubmit:function(e){var n,r;(n=e,r=l.email,Le("Feedback.SendUserFeedback",{text:n,userEmail:r})).then(function(e){var n=e.response;e.error&&t(i.Command.error("Request Error",wA)),n&&(u(!0),o(!1),t(i.Command.info("Feedback sent","We received your feedback. Thank you!")))}).catch(function(){t(i.Command.error("Request Error",wA))})},reset:d}))};!function(e){e.newBoard="new_board",e.replaceBoard="replace_board",e.tempBoard="temp_board"}(yA||(yA={}));var IA,SA,CA,_A=function(e,t){var n=new FileReader;n.onload=function(){var e=n.result;null===e&&(e=""),t(e)},n.readAsText(e)},TA=function(e){return e.name.split(".").slice(0,-1).join(".")},AA=Object(Ue.b)()(function(e){var t=Object(he.useRef)(null),n=Object(he.useState)(!1),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(he.useState)(!1),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(he.useState)(!1),l=Object(Ke.a)(u,2),m=l[0],p=l[1],f=Object(he.useState)(null),h=Object(Ke.a)(f,2),g=h[0],b=h[1],y=T.makeGetCurrentBoardQuota(),v=Object(Fe.useSelector)(y),E=T.makeGetCurrentUser(),O=Object(Fe.useSelector)(E),x=dg(),j=Object(Fe.useSelector)(x),w=Object(he.useState)("undefined"),k=Object(Ke.a)(w,2),I=k[0],S=k[1],C=Object(he.useState)(void 0),_=Object(Ke.a)(C,2),A=_[0],N=_[1],R=Object(Fe.useDispatch)(),B=function(e,n,r){if(r===yA.newBoard){if(0===v)return d(!0),void o(!1);_A(n,function(t){var n=ot.v4();R(L.importNewBoard(e,t,n)),o(!1),N(n)})}else{var a=j.filter(function(t){return t.name===e});if(a.count()>0){var i=a.first();_A(n,function(e){var t=i.updateXml(e,O.uid);R(L.importExistingBoard(t)),window.setTimeout(function(){N(t.uid)},50),o(!1)})}}t.current.value=""};return A&&1===j.filter(function(e){return e.uid===A}).count()?he.createElement(Ge.c,{to:kt(A)}):he.createElement("div",{className:"item"},he.createElement(Ni.a,{className:"large basic",onClick:function(){t.current.click()},disabled:a},he.createElement("i",{className:"download icon"})," Import\xa0Board"),he.createElement("input",{type:"file",ref:t,style:{display:"none"},onChange:function(e){o(!0);var t=e.target.files[0]||null,n=TA(t);if(0!==j.filter(function(e){return e.name===n}).count())return b(t),S(n),void p(!0);B(TA(t),t,yA.newBoard)}}),he.createElement(mA,{open:c,onClose:function(){d(!1)}}),he.createElement(Ai.a,{open:m,closeIcon:!0,onClose:function(){p(!1)}},he.createElement(Ai.a.Header,null,e.t("insp.board.import")),he.createElement(Ai.a.Content,null,he.createElement(nt.a,{icon:"warning",warning:!0,content:e.t("insp.board.import_existing_board").replace("%name%",I)})),he.createElement(Ai.a.Actions,null,he.createElement(Ni.a,{primary:!0,onClick:function(){p(!1),g&&B(TA(g)+" (Copy)",g,yA.newBoard)}},he.createElement(Cp.a,{name:"plus"})," ",e.t("insp.board.btn_import_as_new")),he.createElement(Ni.a,{basic:!0,onClick:function(){p(!1),g&&B(TA(g),g,yA.replaceBoard)}},e.t("insp.board.btn_replace_board")))))}),NA=Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=Object(he.useState)(!1),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(he.useState)(!1),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(Fe.useSelector)(ng()),l=Object(Fe.useSelector)(eg("show_logo_hint",!1));Object(he.useEffect)(function(){u&&c&&l&&o(!0)},[u,c,l]);return he.createElement(kg.a,{open:a,position:"bottom center",content:he.createElement(he.Fragment,null,he.createElement("p",null,he.createElement("strong",null,e.t("insp.hint.new_logo_header"))),he.createElement("p",null,e.t("insp.hint.new_logo_text"),"!"),he.createElement("p",null,he.createElement(Cp.a,{name:"arrow right"}),"\xa0",he.createElement("a",{href:"https://github.com/event-engine/inspectio/wiki/Rebranding",target:"_blank"},e.t("insp.hint.learn_more"))),he.createElement("p",null,he.createElement("span",{style:{color:"#9cc8f5",cursor:"pointer",float:"right"},onClick:function(){o(!1),t($t("show_logo_hint",!1))}},e.t("insp.hint.got_it")))),trigger:he.createElement(HT.a,{className:"logo-item"},he.createElement(qe.Link,{to:jt},he.createElement("img",{className:"logo",src:"img/prooph-board-logo.png",alt:"prooph board logo",onLoad:function(){d(!0)}})))})}),LA=n(1078),RA=n(1205),BA=n(1079),DA="",PA=function(e,t){return t?e.replace("type:".concat(t,";"),""):e},zA=function(e,t){return t?"type:".concat(t,";")+e:e},MA=function(e){switch(e){case Dc.event:case Dc.command:case Dc.role:case Dc.aggregate:case Dc.document:case Dc.policy:case Dc.externalSystem:case Dc.hotSpot:case Dc.ui:case Dc.boundedContext:case Dc.feature:case Dc.icon:case Dc.image:case Dc.freeText:return!0;default:return!1}},UA=!1,FA=function(e){switch(e){case ap.boundedContext.toLowerCase():return ap.boundedContext;case ap.freeText.toLowerCase():return ap.freeText;case ap.hotSpot.toLowerCase():return ap.hotSpot;case ap.externalSystem.toLowerCase():return ap.externalSystem;default:return e}},GA=Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=$O(e.match.params.uid),r=Object(Fe.useSelector)(n),a=Object(he.useState)(r.filter),o=Object(Ke.a)(a,2),i=o[0],s=o[1],c=Object(he.useRef)(null),d=Object(he.useState)(!1),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(he.useState)(),f=Object(Ke.a)(p,2),h=f[0],g=f[1],b=Object(he.useState)(!1),y=Object(Ke.a)(b,2),v=y[0],E=y[1];if(DA!==r.filter){DA=r.filter,IA=h;var O=Tm(r.filter);O.nodeTypes.length&&(IA=O.nodeTypes[0],Object.values(ap).map(function(e){return e.toLowerCase()}).includes(IA)?g(IA):IA=h),s(PA(r.filter,IA))}else if(IA&&!h){var x=Tm(r.filter);x.nodeTypes.length&&x.nodeTypes[0]===IA&&(s(PA(r.filter,IA)),g(IA))}r.focus&&c&&c.current&&(c.current.focus(),t(du(e.match.params.uid,r.filter,!1)));var j=zn.debounce(function(n){DA=zA(n,h),t(du(e.match.params.uid,DA))},500),w=function(){s(""),g(void 0),DA="",IA=void 0,t(du(e.match.params.uid,""))},k=h?Zv.stickyColors[h]:"#909090",I=v?" focus":"";return he.createElement("div",{className:"item"},he.createElement("div",{className:"ui left action right icon input"},he.createElement(tt.a,{open:l,icon:!1,onClose:function(){m(!1)},scrolling:!0},he.createElement(LA.a,{style:{zIndex:99e3}},he.createElement(RA.a,{text:"Clear Filter",icon:"close",disabled:!h,onClick:function(){DA=PA(DA,h),IA=void 0,g(void 0),t(du(e.match.params.uid,DA))}}),he.createElement(BA.a,null),Object.values(ap).filter(MA).map(function(n){return he.createElement(RA.a,{key:n,onClick:function(){return function(n){DA=PA(DA,h),g(n),IA=n,DA=zA(DA,n),t(du(e.match.params.uid,DA))}(n.toLowerCase())},icon:he.createElement(Xv,{cellType:n}),text:e.t("app.stickyTypes."+n)})}))),he.createElement("div",{className:"ui left action input search filter"+I,style:{borderTop:"1px solid #dedede",borderBottom:"1px solid #dedede",borderLeft:"1px solid #dedede",borderTopLeftRadius:"0.28571429rem",borderBottomLeftRadius:"0.28571429rem"}},he.createElement("button",{className:"ui basic icon button",onMouseDown:function(){UA=l},onClick:function(){UA||m(!0)}},!h&&he.createElement("i",{className:"filter icon",style:{color:k}}),h&&he.createElement(Xv,{cellType:FA(h),size:"normal"}))),he.createElement("input",{type:"text",placeholder:"Search...",onChange:function(e){s(e.target.value),j(e.target.value)},onFocus:function(){return E(!0)},onBlur:function(){return E(!1)},className:"tree search",value:i,ref:c,onKeyDown:function(e){27===e.keyCode&&w()},style:{width:"80%"}}),!r.isFiltered()&&!h&&he.createElement("i",{className:"search icon"}),(r.isFiltered()||h)&&he.createElement("i",{className:"close link icon",style:{cursor:"pointer"},onClick:w})))}),qA=Object(Ge.o)(function(e){return he.createElement(Ge.g,null,he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:GA}))}),VA=n(1056),WA=function(e){var t=Object(Fe.useDispatch)(),n=Object(Fe.useSelector)(ng()),r=Object(Fe.useSelector)(eg(Zh(e.date),!1));return Object(he.useEffect)(function(){window.setTimeout(function(){n&&!r&&t($t(Zh(e.date),!0))},5e3)},[r,n]),he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},he.createElement(nt.a,null,he.createElement(ab.a,{className:"".concat(r?"black":"red"," top left attached")},"New Features released ",bT()(e.date).format("LL")),e.children)))},HA=[{date:"2025-09-23",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Colorful Information Flow"),he.createElement("p",null,"We've made the information flow more colorful. Arrows now change their color when two cards are connected in a valid combination:"),he.createElement("ul",null,he.createElement("li",null,"UI ",he.createElement("span",{style:{color:ispConst.COMMAND_COLOR}},"->")," Command"),he.createElement("li",null,"Command ",he.createElement("span",{style:{color:ispConst.COMMAND_COLOR}},"->")," Event"),he.createElement("li",null,"Event ",he.createElement("span",{style:{color:ispConst.EVENT_COLOR}},"->")," Information"),he.createElement("li",null,"Event ",he.createElement("span",{style:{color:ispConst.EVENT_COLOR}},"->")," Policy"),he.createElement("li",null,"Policy ",he.createElement("span",{style:{color:ispConst.COMMAND_COLOR}},"->")," Command"),he.createElement("li",null,"Information ",he.createElement("span",{style:{color:ispConst.DOCUMENT_COLOR}},"->")," UI"),he.createElement("li",null,"Information ",he.createElement("span",{style:{color:ispConst.DOCUMENT_COLOR}},"->")," Command"),he.createElement("li",null,"External System ",he.createElement("span",{style:{color:ispConst.DOCUMENT_COLOR}},"->")," Command"),he.createElement("li",null,"Command ",he.createElement("span",{style:{color:ispConst.COMMAND_COLOR}},"->")," External System"),he.createElement("li",null,"UI ",he.createElement("span",null,"- - ->")," UI")),he.createElement("p",null,"If you want to migrate existing boards, just right click on the modeling space and choose ",he.createElement("strong",null,"Select all edges")," from the context menu. Right click on one of the selected edges again and choose ",he.createElement("strong",null,"Highlight Flow")," from the context menu."))},{date:"2025-09-19",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Cody Sidebar Tabs"),he.createElement("p",null,"The Cody Tab in the Metadata Sidebar was restructured to work with section tabs for the various settings like ",he.createElement("strong",null,"Schema"),", ",he.createElement("strong",null,"UI Schema"),", etc. Access each section with a single click (each section is represented by an icon), instead of scrolling through all sections. The last viewed section stays active if you switch to another card type and then back to the first one. So you can quickly lookup information on the board without losing context."))},{date:"2025-02-7",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Side-by-Side View"),he.createElement("p",null,'A long requested feature was to quickly look up the metadata of an element while editing another element. This is now possible with the new "Side-by-Side" view. There are various new ways to open this view:'),he.createElement("ul",null,he.createElement("li",null,'Select two elements on the board and pick "Side-by-Side" from the context menu'),he.createElement("li",null,"Click on the new metadata icon in the context menu of the elements tree in the left sidebar"),he.createElement("li",null,"Press Ctrl/Cmd and click on a connection in the Metadata sidebar"),he.createElement("li",null,"Press Ctrl/Cmd and click on a schema reference in the schema editor")),he.createElement("p",null,"The last option listed above, is a new feature of its own. Schema references are not only suggested, but now also turn into clickable links, that let you look up the details of the reference."))},{date:"2025-02-05",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Reworked Lite Mode"),he.createElement("p",null,"Large Event Models are common. You usually want to have the full story on a board, right? However, working on large Event Models can get slow due to the amount of elements a browser can handle at once. We realized, that the present Lite Mode is not enough for really large models, so we did a rework to tackle the issues. If you now turn the ",he.createElement("a",{href:"https://wiki.prooph-board.com/board_workspace/Lite-Mode.html",target:"_blank"},"Lite Mode")," on, you have to double click on a frame to show its details, and press Ctrl/Cmd + double click to hide the details again. The behavior is inspired by navigating a folder structure. The effect is, that as long as you organize your Event Model using frames the Lite Mode can hide many elements and reduce the work the browser has to do while navigating on the board."))},{date:"2024-07-10",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Cody goes Event Modeling first"),he.createElement("p",null,"The next major update has landed in prooph board. The whole Cody specific design and configuration as well as Cody Play is now focused on an Event Modeling first approach. This means, that you can freely design your software using Event Modeling and in a second step make it work in Cody Play. No more design limitations to make Cody happy. It can handle a whole new bunch of scenarios like information projections, pure command handlers, aggregateless events, and more. This update also marks the end of the Cody beta phase. We're going to work on the Cody Play tutorial and wiki next, so that you get detailed instructions of how to develop prototypes and software with it. Stay tuned!"))},{date:"2024-05-19",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Laser Focus on Event Modeling"),he.createElement("p",null,"Three months ago we started our journey to shift the primary focus of prooph board towards Event Modeling. The first update introduced Slices, which worked similar to Feature boxes, but had Swimlanes built-in. With this update, we are moving Swimlanes into a dedicated element (available in sidebar) and bring the feature boxes back. The Swimlanes element is similar to a Context box and is the container for an entire Event Model (or part of it). With the feature boxes back in the game, you can mark Vertical Slices of the Event Model."))},{date:"2024-03-04",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Draggable Tree View Elements"),he.createElement("p",null,"You can now drag elements from the Tree View in the left sidebar on the board. Dragged elements are copied so you're not moving the original element. This is very useful when you want to reuse an element in another place. Especially events and information cards are often reused across the board."))},{date:"2024-02-25",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Event Modeling Mode"),he.createElement("p",null,"prooph board supports ",he.createElement("a",{href:"https://eventmodeling.org/posts/what-is-event-modeling/",target:"_blank"},"Event Modeling")," from day one, but with this new update we are shifting focus, and make Event Modeling the recommended format on prooph board. For this, an Event Modeling Mode has been introduced. It's activated by default for all new boards. You can activate the mode for an existing board in the board settings. In Event Modeling mode feature frames become \"Slices\" with typical Event Modeling swim lanes. Cody suggestions are also tuned to place cards in the correct lanes. Cody looks for slices and only provides suggestions for cards that are in a Slice. The card types itself are the same and Cody Play and Cody Engine continue to work as before. With the next updates we'll make a few more backwards compatible changes to further align with ideas from Event Modeling. Tell us if you like or don't like the direction we are heading to! We hope, you'll jump on the Event Modeling train and do the journey together with us!"))},{date:"2023-11-20",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Playshots"),he.createElement("p",null,"So far, it was only possible to save Cody Play in the browser's local storage. With this update, Cody Play snapshots (short Playshots) are saved on the server (only SaaS version). You can start Cody Play from a Playshot listed in the new Cody Play dialog. The dialog can be accessed from the prooph board top menu."))},{date:"2023-11-17",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Collaborative Schema Design"),he.createElement("p",null,"When building software systems, data structures always play an important role. Cody reads the schema of a data structure from the metadata of Information/Command/Event Cards. You can define the schema in the metadata sidebar. That works good when working alone on an Event Map. In an Event Storming session it is better to use Information Cards for all properties of a data structure. This way, it is easier to collaborate as a group. Now you can combine both approaches. First brainstorm with Information Cards, then drag & drop them on Commands, Events or other Information Cards to let Cody fill the schema from dropped Information Cards."))},{date:"2023-11-16",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Disable Cody Suggestions"),he.createElement("p",null,"Cody Suggestions are useful for Design-Level Event Storming. Cody helps you to prepare the Event Map for Cody Play or Cody Engine. But it can get in your way on architecture or high-level boards. Therefor, we added an option to deactivate Cody Suggestions. You can find the option in the board settings."))},{date:"2023-10-06",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Cody Play"),he.createElement("p",null,"We're striving for instant feedback-loops to avoid hand overs at all costs. To achieve that goal, a browser-only version of Cody Engine is now available. You can use it for ultra rapid prototyping. No installation needed, no servers, nothing that might get in the way between you and the feedback-loop. It's hosted on ",he.createElement("a",{href:"https://play.prooph-board.com",target:"cody_play"},"https://play.prooph-board.com"),". prooph board can connect to Cody Play by using ",he.createElement("strong",null,"/connect play")," in the Cody Console. However, the easiest way is to run Cody from the Cody Wizard (modal or metadata sidebar). You'll find a new ",he.createElement("strong",null,"run on:")," dropdown that let's you select the Cody environment. The default setting is ",he.createElement("strong",null,"auto"),", which means that Cody Wizard first tries to connect to a locally running Cody Engine and if that fails switches to Cody Play."))},{date:"2023-09-23",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"improophed Cody Wizard (beta)"),he.createElement("p",null,"We ran a couple of design sessions using the new Cody Wizard and while it is working great, we noticed one drawback: the Cody Wizard forces you to leave the collaboration space and switch to a configuration-driven workflow. That's not what we aim for. On prooph board it should be possible to design software together. Hence, we redesigned the Cody Wizard, so that it integrates seamlessly into the collaboration workflow. You'll notice that Cody appears on the collaboration space to suggest Cards. Cody also found a way into the toolbar. A click will open the metadata sidebar, which has a new \"Cody\" tab. Everything you could do in the Cody Wizard is now possible as a combination of Cody suggestions on the collaboration space + settings in the Cody tab."))},{date:"2023-08-21",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Element Activity"),he.createElement("p",null,'You might know the board activity sidebar, that you can open from the board top menu. It shows the history of each action done on the board. While this is useful to get an overview of what happened, it\'s not that easy to find actions related to a specific element. Who wrote that card and when? Now you can answer such questions with the new "Activity" tab in the metadata sidebar. Select a card, open the sidebar from the top or context menu and switch to the tab to get activity filtered by the selected card.'))},{date:"2023-07-16",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Cody wizard (beta)"),he.createElement("p",null,"prooph board and Cody are a powerful combination for code assistance. With ",he.createElement("a",{href:"https://github.com/proophboard/cody-engine",target:"_blank"},"Cody Engine"),' we push the limits of Cody\'s capabilities to a new level. Cody Engine is a ready-to-use, open source application stack to support cross-functional teams in product development. And the new integrated "Cody Wizard" is the counterpart on prooph board to boost Design-Level Event Storming and prepare everything for Cody to generate fully working application source code. You can start the wizard by right clicking on a card on the board and selecting "Cody Wizard" from the context menu. The wizard is available as a beta version at the moment. We\'re adding more features in the next weeks and document everything.'))},{date:"2023-02-26",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Tagging"),he.createElement("p",null,"Tagging cards and other elements is now possible by prefixing words with ",he.createElement("strong",null,"#"),". Tags are detected automatically and added to the element. They can be used in the Tree-View search to filter elements and also Cody can make use of them. More about tagging is documented in the ",he.createElement("a",{href:"https://wiki.prooph-board.com/board_workspace/Cards.html#tagging",target:"_blank"},"wiki"),"."))},{date:"2022-07-27",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Anyone Permissions"),he.createElement("p",null,"We've added a new permissions level that allows you to grant access to a board to all organization members or even anyone with a valid prooph board account. More about all available permission levels is documented in the ",he.createElement("a",{href:"https://wiki.prooph-board.com/access_management/Access-Rights.html",target:"_blank"},"wiki"),"."))},{date:"2022-04-04",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Sort & Filter Overview"),he.createElement("p",null,"The board overview can now be sorted by name, created at and last modified date. You can change sort direction by clicking on the sort icon. A team dropdown lets you quickly filter all boards of a team. Your sort and filter settings are stored in the browser's local storage. Additionally, board search supports tags now. Add tags to existing boards on the board edit page or in the advanced settings while adding a new board."))},{date:"2022-01-31",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Rearranged Editing Toolbar"),he.createElement("p",null,he.createElement("ul",null,he.createElement("li",null,'Moved "font color" into main toolbar'),he.createElement("li",null,'Moved "background color" into main toolbar'),he.createElement("li",null,'Moved "clear formatting" into align menu'),he.createElement("li",null,"Removed formatting menu"),he.createElement("li",null,'Added a "wiki link" button'))))},{date:"2021-11-20",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"More Styling Options"),he.createElement("p",null,"New styling options are available for advanced modelling and different workshop formats. The update includes:"),he.createElement("p",null,he.createElement("ul",null,he.createElement("li",null,"Stickies",he.createElement("ul",null,he.createElement("li",null,"Change sticky type via context menu or shortcut (check context menu for available shortcuts)"),he.createElement("li",null,"Align a group of stickies vertically and horizontally (context menu + shortcuts)"))),he.createElement("li",null,"Contexts, Features, Textboxes",he.createElement("ul",null,he.createElement("li",null,"Change Style",he.createElement("ul",null,he.createElement("li",null,"Ellipse"),he.createElement("li",null,"Triangle"),he.createElement("li",null,"Rhombus"),he.createElement("li",null,"Hexagon"))))),he.createElement("li",null,"Arrows",he.createElement("ul",null,he.createElement("li",null,"Change Color"),he.createElement("li",null,"Dotted Style"),he.createElement("li",null,"Thickness"))),he.createElement("li",null,"Comic Style",he.createElement("ul",null,he.createElement("li",null,'Select a group of elements and turn "Comic Style" on or off in the context menu'))),he.createElement("li",null,"Keyboard Controls",he.createElement("ul",null,he.createElement("li",null,"Move selected element with arrow keys (keep key pressed for continued move + SHIFT key pressed for even faster move)"),he.createElement("li",null,"Resize selected element with CTRL/CMD + arrow keys (CTRL/CMD+SHIFT for bigger resize steps)"),he.createElement("li",null,"ALT+SHIFT + arrow keys: Copy selected element in direction of arrow key and connect it",he.createElement("ul",null,he.createElement("li",null,"You can model a complete flow via keyboard in combination with switch sticky type shortcuts"))),he.createElement("li",null,"ENTER: Start text editing on selected sticky with"),he.createElement("li",null,"ESC: Finish text editing"),he.createElement("li",null,"CTRL/CMD+M: Start metadata editing"),he.createElement("li",null,"ESC: pressed in metadata editor finishes editing and focuses cell on board again"))))))},{date:"2021-11-19",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Copy & Paste"),he.createElement("p",null,"Copy & Pasting prooph board content is now possible across browsers. Next time you paste something, prooph board will ask you for access to your system's clipboard. If you grant access, the feature gets activated. Please note: this security check is built into modern browsers. By default, JavaScript is not allowed to access the system clipboard without explicit permission."))},{date:"2021-11-12",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Performance and Handling Updates"),he.createElement("p",null,"We sat down last week to benchmark and improve performance on lager prooph boards. We disabled a couple of fade in/out animations in favor of performance and added a little physics effect when moving a board around. The latter gives a more natural feeling to compensate the deactivated fade effects. The Lite Mode still gives you best performance in case your system is under heavy load, but you should less likely have a need to activate it."))},{date:"2021-11-02",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Synchronized Timer"),he.createElement("p",null,"You'll find a new timer feature in the board top menu (click on the hour glass icon). Setting a timer enables it for all users on the current board. Everybody will see the time ticking and a red blinking timer, when the set time is over. This is especially useful for time-boxed collaboration sessions. The person who sets the timer has control over it (pause, stop, reset)."))},{date:"2021-02-13",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Direct Import"),he.createElement("p",null,"A new import functionality allows you to prepare a link that opens prooph board and imports a board fetched from an URL. This is especially useful for demo boards in combination with the new free version of prooph board. For example you could upload a board export on Github and prepare a link to Free Version like this: ",he.createElement("a",{href:"https://free.prooph-board.com/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FThe%2520Picture.xml"},"https://free.prooph-board.com/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FThe%2520Picture.xml")))},{date:"2021-01-18",content:he.createElement(he.Fragment,null,he.createElement(VA.a,null,"Organization"),he.createElement("p",null,"We've added a new administrative layer called \"Organization\" to make user and board management easier. With an organization you can share your board and user quota with colleagues. They don't need to worry about limitations, can easily create boards and share them with members. ",he.createElement("a",{href:"https://wiki.prooph-board.com/access_management/Managing-an-Organization.html",target:"_blank"},"Learn about the details"),"."))}],$A=function(e){return he.createElement(Ve.a,null,he.createElement(Xe.a,{stackable:!0,padded:!0},HA.map(function(e,t){return he.createElement(WA,{key:t,date:e.date},e.content)})))},JA=Object(Ge.o)(function(e){var t=Object(Fe.useSelector)(tg()),n=HA.map(function(e){return e.date}).filter(function(e){return!t["update_".concat(e,"_viewed")]}).length;return he.createElement(qe.NavLink,{className:"item",to:"/inspectio/updates"},he.createElement("div",{className:"ui small label"+("/inspectio/updates"===e.location.pathname?" teal":n>0?" red":"")},n),"Updates")}),QA=Object(Ue.b)()(function(e){return he.createElement(he.Fragment,null,he.createElement("div",{className:"middle aligned item"},he.createElement("div",{className:"ui big header"},"Free Version"),he.createElement(Xe.a,{className:"stackable two column"},he.createElement(Xe.a.Column,null,he.createElement(Ni.a,{className:"positive",href:"https://prooph-board.com#pricing",target:"_blank"},"Upgrade")),he.createElement(Xe.a.Column,null,he.createElement("div",{className:"sub header"},"More Features, Organization & Teams, Realtime Collaboration")))))}),YA=Object(Ue.b)()(function(e){return he.createElement(he.Fragment,null,he.createElement(NA,{collapsed:!1}),he.createElement(QA,null),he.createElement(qA,null),he.createElement(AA,null),he.createElement(pA,null),he.createElement(OA,null),he.createElement(EA,null),he.createElement(JA,null),he.createElement(kA,null))}),KA=function(e){var t=!!e.open;switch(e.type){case Dc.layer:var n=t?"folder open":"folder";return he.createElement(Cp.a,{name:n,style:{cursor:"pointer"},className:e.className,title:e.title});default:return he.createElement(Xv,{cellType:e.type,size:"normal",title:e.title,className:e.className})}},ZA=null,XA=Object(Ue.b)()(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(!1),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=NE(),u=Object(Ke.a)(d,1)[0],l=Object(he.useState)(0),m=Object(Ke.a)(l,2),p=m[0],f=m[1],h=Object(he.useState)(null),g=Object(Ke.a)(h,2),b=g[0],y=(g[1],Object(he.useState)(!1)),v=Object(Ke.a)(y,2),E=v[0],O=v[1],x=Object(he.useState)(!1),j=Object(Ke.a)(x,2),w=j[0],k=j[1],I=(Object(Fe.useDispatch)(),u.isVisible(e.layer)),S=u.isLocked(e.layer);Object(he.useEffect)(function(){a(e.expand)},[e.expand]);var C=I?"eye":"eye slash",_=S?"lock":"lock open",T=e.copyToLayerSuccess?e.copyToLayerSuccess:b;return he.createElement(he.Fragment,null,!E&&he.createElement(Kv.a.Item,{style:{padding:"5px",background:"rgba(0,0,0,0.05)"},as:qe.NavLink,to:"#",isActive:function(){return!1},onClick:function(t){!function(t,n){if(null!==ZA)return window.clearTimeout(ZA),ZA=null,void(I&&(u.highlightLayer(e.layer),f(p+1)));ZA=window.setTimeout(function(){t||u.isActiveLayer(e.layer)||(u.setAsActiveLayer(e.layer),e.onActiveLayerChanged&&e.onActiveLayerChanged()),t&&!e.layer.isDefaultLayer()&&(u.setDefaultLayerAsActive(),e.onActiveLayerChanged&&e.onActiveLayerChanged()),a(!t),s&&c(!1),ZA=null},200),n.preventDefault()}(r,t)},onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),c(!0)},className:I?"":"hidden"},he.createElement(KA,{type:Dc.layer,open:r,title:e.t("insp.board.layers.folder_title"),className:(e.active?"active-layer":"layer")+(null!==T?T?" copy-success":" copy-failed":"")}),S&&he.createElement(Cp.a,{name:_,className:"corner left",size:"mini",fitted:!0}),!I&&he.createElement(Cp.a,{name:C,className:"corner right",size:"mini",fitted:!0}),he.createElement(Kv.a.Content,null,he.createElement(kg.a,{position:"bottom center",closeOnTriggerBlur:!1,closeOnTriggerMouseLeave:!1,hideOnScroll:!0,open:s,onClose:function(){return c(!1)},style:{padding:"0px"},trigger:he.createElement("div",null,he.createElement(OT,{label:e.name,maxLength:50})),content:he.createElement(he.Fragment,null,!w&&he.createElement(TT.a,{secondary:!0,compact:!0},he.createElement(HT.a,{title:e.t("insp.board.layers.edit_name"),onClick:function(e){e.stopPropagation(),O(!0)}},he.createElement(Cp.a,{name:"edit"})),he.createElement(HT.a,{title:e.t("insp.board.layers.lock_layer"),onClick:function(t){t.stopPropagation(),u.setLocked(e.layer,!u.isLocked(e.layer)),f(p+1)}},he.createElement(Cp.a,{name:_})),he.createElement(HT.a,{title:e.t("insp.board.layers.visibility"),onClick:function(t){t.stopPropagation(),function(){var t=!u.isVisible(e.layer);u.setUserVisible(e.layer,t),e.onLayerVisibilityChanged&&e.onLayerVisibilityChanged(t),f(p+1)}()}},he.createElement(Cp.a,{name:C})),he.createElement(HT.a,{className:"delete-ele",onClick:function(e){e.stopPropagation(),k(!0)},title:e.t("insp.board.layers.delete_layer"),disabled:!e.deletable},he.createElement(Cp.a,{name:"trash"}))),w&&he.createElement(TT.a,{secondary:!0,compact:!0},he.createElement(HT.a,null,e.t("insp.board.layers.delete_confirmation")),he.createElement(HT.a,{onClick:function(t){t.stopPropagation(),u.deleteLayer(e.layer),k(!1)}},e.t("app.form.yes")),he.createElement(HT.a,{onClick:function(e){e.stopPropagation(),k(!1),c(!1)}},e.t("app.form.no"))))}),r&&e.children)),E&&he.createElement(Kv.a.Item,{className:"add-layer"},he.createElement(Ni.a,{icon:!0,basic:!0,size:"medium"},he.createElement(Cp.a,{name:"folder outline"})),he.createElement(oE,{text:e.layer.getName(),charSize:rN,widthUnit:aN,padding:oN,minWidth:120,required:!0,onTextChanged:function(t){u.changeNodeName(e.layer,t),O(!1),c(!1)},focus:!0,onCancel:function(){O(!1),c(!1)},placeholder:"Board"})))}),eN=null,tN=Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=Object(he.useState)(1),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(he.useState)(!1),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(he.useState)(!1),l=Object(Ke.a)(u,2),m=l[0],p=l[1],f=Object(he.useState)(!1),h=Object(Ke.a)(f,2),g=h[0],b=h[1],y=NE(),v=Object(Ke.a)(y,1)[0],E=Object(he.useRef)(null);Object(he.useEffect)(function(){d(e.expand)},[e.expand]),Object(he.useEffect)(function(){if(E.current&&!e.element.isLayer()){var t=E.current,n=t.closest(".item");if(n){var r=n.querySelector("i");r&&v.makeDraggable(r,e.element)}v.makeDraggable(t,e.element)}},[e.element.getId()]);var O,x=v.isLocked(e.element),j=v.isVisible(e.element),w=j?"eye":"eye slash",k=x?"lock":"lock open",I=e.element.getType()===Dc.boundedContext||e.element.getType()===Dc.feature,S=e.element.children().filter(iN),C=j?"":" hidden";return he.createElement(he.Fragment,null,he.createElement(Kv.a.Item,{as:qe.NavLink,to:{pathname:kt(e.boardId),search:"?cells=".concat(e.element.getId(),"&clicks=").concat(a)},onClick:function(t){if(t.stopPropagation(),null!==eN)return window.clearTimeout(eN),eN=null,void o(a+1);eN=window.setTimeout(function(){d(!c),m&&p(!1),eN=null},200),j&&e.element.getType()!==Dc.boundedContext&&e.element.getType()!==Dc.feature?o(a+1):t.preventDefault()},onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),p(!0)},isActive:function(){return!1},style:{padding:"5px"},onDragStart:function(e){e.preventDefault(),e.stopPropagation()},className:m?"edit"+C:C},he.createElement(KA,{type:(O=e.element,O.getTags().includes(ispConst.TAG_SLICE)||O.getTags().includes(ispConst.TAG_EVENT_MODEL)?ap.swimlanes:e.element.getType()),open:c}),x&&he.createElement(Cp.a,{name:k,className:"corner left",size:"mini",fitted:!0}),!j&&he.createElement(Cp.a,{name:w,className:"corner right",size:"mini",fitted:!0}),he.createElement(Kv.a.Content,null,he.createElement(kg.a,{position:"bottom center",closeOnTriggerBlur:!1,closeOnTriggerMouseLeave:!1,hideOnScroll:!0,open:m,onClose:function(){return p(!1)},trigger:he.createElement("div",{ref:E},he.createElement(OT,{label:e.element.getName(),maxLength:30})),style:{padding:"0px"},content:he.createElement(he.Fragment,null,!g&&he.createElement(TT.a,{secondary:!0,compact:!0},he.createElement(HT.a,{onClick:function(n){!function(n){n.stopPropagation(),n.preventDefault(),e.isMetadataVisible?t(IE(e.element.getId())):(v.selectNode(e.element),t(Hd(e.boardId,!0,!1))),p(!1)}(n)}},he.createElement(Cp.a,{name:"clipboard outline"})),he.createElement(HT.a,{onClick:function(t){t.stopPropagation(),v.setLocked(e.element,!x),o(a+1)}},he.createElement(Cp.a,{name:k})),he.createElement(HT.a,{onClick:function(t){t.stopPropagation(),v.setUserVisible(e.element,!j),o(a+1)}},he.createElement(Cp.a,{name:w})),he.createElement(HT.a,{className:"delete-ele",onClick:function(e){e.stopPropagation(),b(!0)}},he.createElement(Cp.a,{name:"trash"}))),g&&he.createElement(TT.a,{secondary:!0,compact:!0},he.createElement(HT.a,null,e.t("insp.board.layers.delete_confirmation")),he.createElement(HT.a,{onClick:function(t){t.stopPropagation(),v.deleteNode(e.element),b(!1)}},e.t("app.form.yes")),he.createElement(HT.a,{onClick:function(e){e.stopPropagation(),b(!1),p(!1)}},e.t("app.form.no"))))}),S.count()>0&&c&&he.createElement(nN,{leafs:S,boardId:e.boardId,expandLeafs:e.expand,isMetadataVisible:e.isMetadataVisible}),0===S.count()&&I&&c&&he.createElement(Kv.a,null,he.createElement(Kv.a.Item,null,he.createElement("span",{style:{color:"#747474"}},"(empty)"))))))}),nN=function(e){var t=e.leafs.filter(iN).sort(qm).map(function(t){return he.createElement(tN,{expand:e.expandLeafs,element:t,key:t.getId(),boardId:e.boardId,isMetadataVisible:e.isMetadataVisible})});return he.createElement(Kv.a,{className:"elements tree"},t)},rN=9,aN="px",oN=0,iN=function(e){switch(e.getType()){case Dc.misc:case Dc.edge:case Dc.textCard:return!1;default:return""!==e.getName()}},sN=null,cN=Object(Ue.b)()(Object(Ge.o)(function(e){var t=e.match.params.uid,n=Object(he.useMemo)(function(){return $O(t)},[]),r=Object(Fe.useSelector)(n),a=Object(he.useState)(Object(fe.List)([])),o=Object(Ke.a)(a,2),i=o[0],s=o[1],c=(Object(Fe.useDispatch)(),Object(he.useState)(!0)),d=Object(Ke.a)(c,2),u=(d[0],d[1],Object(Fe.useSelector)(Ay(t))),l=NE(),m=Object(Ke.a)(l,1)[0],p=Object(he.useState)(0),f=Object(Ke.a)(p,2),h=f[0],g=f[1],b=Object(he.useState)(0),y=Object(Ke.a)(b,2),v=y[0],E=y[1],O=Object(he.useState)(!1),x=Object(Ke.a)(O,2),j=x[0],w=x[1],k=Object(he.useState)(!1),I=Object(Ke.a)(k,2),S=I[0],C=I[1],_=Object(he.useState)(void 0),T=Object(Ke.a)(_,2),A=T[0],N=T[1];Object(he.useEffect)(function(){m.onSelectionChanged(function(e){return C(e)})},[]),Object(he.useEffect)(function(){sN&&(clearTimeout(sN),sN=null),sN=window.setTimeout(function(){requestAnimationFrame(function(){s(r.getFilteredElementsAsTree().sortBy(function(e){return e.getName()}))})},r.isFiltered()?150:600)},[r]);var L=Object(he.useMemo)(function(){return i.map(function(e){return he.createElement(XA,{key:e.getId(),name:""===e.getName()?"Board":e.getName(),boardId:t,layer:e,deletable:!e.isDefaultLayer(),active:m.isActiveLayer(e),onLayerVisibilityChanged:function(t){return function(e,t){if(!t&&m.isActiveLayer(e)){var n=!1;if(i.forEach(function(e){e.isDefaultLayer()&&m.isVisible(e)&&(n=!0,m.setAsActiveLayer(e))}),!n){var r=!0,a=!1,o=void 0;try{for(var s,c=i.toArray()[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var d=s.value;m.isVisible(d)&&m.setAsActiveLayer(d)}}catch(u){a=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}}}g(h+1)}(e,t)},onActiveLayerChanged:function(){return E(v+1)},copyToLayerSuccess:A,expand:r.isFiltered()&&e.children().count()>0||e.isDefaultLayer()},e.children().count()>0?he.createElement(nN,{leafs:e.children(),boardId:t,expandLeafs:r.isFiltered(),isMetadataVisible:!!u.shouldShowElementDetails}):he.createElement(Kv.a,null,he.createElement(Kv.a.Item,null,he.createElement("span",{style:{color:"#747474"}},"(empty)"))))})},[i]);return he.createElement(he.Fragment,null,he.createElement("div",{className:"item"},he.createElement(Kv.a,{className:"elements tree"},he.createElement(Kv.a.Item,{style:{paddingBottom:"0px"}},he.createElement("div",{className:"context-menu"},he.createElement(Ni.a,{icon:!0,basic:!0,size:"medium",onClick:function(){w(!0)},disabled:j,title:e.t("insp.board.layers.add_layer")},he.createElement(Cp.a,{name:"plus"})),he.createElement(Ni.a,{icon:!0,basic:!0,size:"medium",disabled:!S,onClick:function(){m.copySelectionToActiveLayer(),N(!0),window.setTimeout(function(){N(void 0)},2e3)},title:e.t("insp.board.layers.insert_selection")},he.createElement(Cp.a,{name:"window restore outline"})))),j&&he.createElement(Kv.a.Item,{className:"add-layer"},he.createElement(Ni.a,{icon:!0,basic:!0,size:"medium"},he.createElement(Cp.a,{name:"folder outline"})),he.createElement(oE,{text:"",charSize:rN,widthUnit:aN,padding:oN,minWidth:120,required:!0,onTextChanged:function(e){m.addLayer(e),w(!1)},focus:!0,onCancel:function(){w(!1)},placeholder:"Layer name"})),L)))})),dN=Object(Ue.b)()(function(e){return he.createElement(he.Fragment,null,!e.collapsed&&he.createElement(NA,{collapsed:e.collapsed}),!e.collapsed&&he.createElement(QA,null),he.createElement("div",{className:"item"},he.createElement("div",{id:"boardSidebarContainer"})),!e.collapsed&&he.createElement(he.Fragment,null,he.createElement(qA,null),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:cN}),he.createElement(kA,null)))}),uN=function(e){var t=Object(Fe.useDispatch)(),n=e.collapsed?"angle double right icon":"angle double left icon";return he.createElement("span",{className:"collaps-handle",onClick:function(){var n=!e.collapsed;t(jE(n)),t(wE(n?85:250))},style:{}},he.createElement("i",{className:n}))},lN=Object(Ue.b)()(Object(Ge.o)(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(""),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)(!1),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(Fe.useSelector)(Al()),f=Object(he.useRef)(null),h=Object(Fe.useDispatch)();return he.createElement("div",{className:"item"},he.createElement(Ni.a,{className:"large basic",onClick:function(){a(!r),r||window.setTimeout(function(){f.current.focus()},200)}},he.createElement("i",{className:"plus icon"})," Add\xa0Team"),he.createElement(vT.a,{animation:"fade down",visible:r,duration:200},he.createElement("div",{className:"ui icon input"},he.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==s?(h(q.addTeam(ot.v4(),s,p?p.uid:null)),c("")):m(!0)}},he.createElement(kp.a,{placeholder:e.t("insp.team.team_name")+" ...",fluid:!0,ref:f,error:l,value:s,onChange:function(e){c(e.target.value),m(""===e.target.value)}})))))})),mN=n(1062),pN=Object(Ue.b)()(Object(Ge.o)(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(!1),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)(!1),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(he.useState)(!1),f=Object(Ke.a)(p,2),h=f[0],g=f[1],b=Object(he.useState)(void 0),y=Object(Ke.a)(b,2),v=y[0],E=y[1],O=Object(Fe.useSelector)(ri(e.team.members)),x=Object(Fe.useDispatch)(),j=s?"angle up icon":"angle down icon",w="ui labels "+(r?"slidedown":"slideup"),k=function(e){var t=O.find(function(t){return t.userId===e});return t?t.username:""},I=function(e){e.stopPropagation()};return he.createElement("div",{className:"ui item",style:{cursor:"pointer"}},he.createElement(Cp.a,{className:j,onClick:function(){a(!r),s?window.setTimeout(function(){c(!1)},150):c(!0)}}),he.createElement(mN.NavHashLink,{scroll:function(e){var t=document.body.getBoundingClientRect().top,n=e.getBoundingClientRect().top-t-60;window.scrollTo({behavior:"smooth",top:n})},to:"/inspectio/teams#"+e.team.uid,className:"team-list team"},e.team.name),he.createElement(Cp.a,{className:"eye icon",style:{visibility:"hidden"}}),he.createElement("div",{className:w},he.createElement("a",{className:"ui blue basic label",onClick:function(e){I(e),m(!0)}},he.createElement("i",{className:"white plus icon"}),e.t("insp.team.add_user")),e.team.members.filter(function(t){return t!==e.team.ownerId}).map(function(e){return he.createElement("div",{key:e,className:"ui basic label"},k(e),he.createElement("i",{className:"red delete icon",onClick:function(t){I(t),E(e),g(!0)}}))})),he.createElement("div",{onClick:I},he.createElement(PT,{team:e.team,open:l,onClose:function(){m(!1)}}),he.createElement($g.a,{open:h,header:e.t("insp.team.remove_user_confirm_title"),content:e.t("insp.team.remove_user_confirm_text",{user_name:v?k(v):""}),confirmButton:e.t("insp.team.remove_user_confirm_button"),onCancel:function(){return g(!1)},onConfirm:function(){v&&(x(q.removeMemberFromTeam(e.team.uid,v)),g(!1))}})))})),fN=function(e){var t=Object(Fe.useSelector)(Yh(!0));return he.createElement(he.Fragment,null,t.sortBy(function(e){return e.name}).sortBy(function(e){return!e.isNew}).map(function(e){return he.createElement(pN,{key:e.uid,team:e})}))},hN=Object(Ge.o)(function(e){var t=Object(Fe.useSelector)(Yh(!1)),n="ui small label";return"/inspectio/teams"===e.location.pathname&&(n+=" teal"),he.createElement(qe.NavLink,{exact:!0,className:"item",activeClassName:"active",to:"/inspectio/teams"},he.createElement(Cp.a,{className:"ui group icon"}),he.createElement("div",{className:n},t.count()),"Teams")}),gN=Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(Ii()),n=Object(Fe.useSelector)(Tl(t.uid)),r=Object(he.useState)(!1),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(he.useState)(!1),d=Object(Ke.a)(s,2),u=d[0],l=d[1],m=Object(he.useState)(!1),p=Object(Ke.a)(m,2),f=p[0],h=p[1],g=Object(Fe.useSelector)(ng()),b=Object(Fe.useSelector)(eg("show_orga_hint",!1));rt(function(){l(!1)}),Object(he.useEffect)(function(){b&&h(!0)},[b,g]);var y=Object(Fe.useDispatch)(),v=function(e){y(c.switchActiveOrganization(e)),i(!1)},E="My Workspace",O=!1,x=n.map(function(e){e.ownOrganization&&!e.explicitOrganization&&(O=!0);var n=e.explicitOrganization?e.organizationName:e.ownOrganization?"My Workspace":e.organizationName,r=t.activeOrganization===e.organizationId;return r&&(E=n),he.createElement(RA.a,{active:r,onClick:function(){return!r&&v(e.organizationId)},key:e.organizationId},n)});O||(x=x.push(he.createElement(RA.a,{active:null===t.activeOrganization,onClick:function(){return null!==t.activeOrganization&&v(null)},key:"__implicit__own_orga__"},"My Workspace")));var j=o?"angle up":"angle down";return he.createElement(kg.a,{open:f,content:he.createElement(he.Fragment,null,he.createElement("p",null,he.createElement("strong",null,e.t("insp.organisation.switch_hint_header"))),he.createElement("p",null,e.t("insp.organisation.switch_hint")),he.createElement("p",null,he.createElement("span",{style:{color:"#32c0e7",cursor:"pointer",float:"right"},onClick:function(){h(!1),y($t("show_orga_hint",!1))}},e.t("insp.organisation.switch_hint_ok")))),position:"right center",trigger:he.createElement("div",{className:"organization switch"},he.createElement(Cp.a,{name:j,style:{cursor:"pointer"},onClick:function(e){e.stopPropagation(),i(!o),l(!0)}}),he.createElement(tt.a,{icon:!1,open:o,onOpen:function(){return i(!0)},onClose:function(){u||i(!1)},text:E},he.createElement(LA.a,null,x)))})}),bN=Object(Ge.o)(function(e){Object(Fe.useSelector)(Ii());var t=Object(Fe.useSelector)(Al());return he.createElement("div",{className:"item"},t&&t.userIsAdmin&&he.createElement(qe.NavLink,{to:"/inspectio/organization"},he.createElement(Ni.a,{className:"large basic"},he.createElement("i",{className:"building icon"})," Organization")),(!t||!t.userIsAdmin)&&he.createElement(Ni.a,{className:"large basic organization",disabled:!0},he.createElement("i",{className:"building icon"})," Organization"),he.createElement(gN,null))}),yN=(Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(Si()),n=Object(Fe.useSelector)(Al());return he.createElement(he.Fragment,null,he.createElement(NA,{collapsed:!1}),he.createElement(bN,null),he.createElement(qA,null),he.createElement(AA,null),he.createElement(pA,null),he.createElement(OA,null),he.createElement(EA,null),t<2&&n&&n.explicitOrganization&&!n.userIsGuest&&he.createElement("div",{className:"item"},he.createElement("div",{className:"ui icon negative message"},he.createElement("i",{className:"warning icon"}),he.createElement("div",{className:"content"},he.createElement("div",{className:"header"},0===t?e.t("insp.sidebar.no_boards_left_warning"):e.t("insp.sidebar.boards_left_warning",{board_count:t})),he.createElement("p",null,e.t("insp.sidebar.boards_left_warning_upgrade"))))),he.createElement(lN,null),he.createElement(hN,null),he.createElement(fN,null),he.createElement(JA,null),he.createElement(kA,null))}),Object(Ue.b)()(function(e){return he.createElement(he.Fragment,null,!e.collapsed&&he.createElement(NA,{collapsed:e.collapsed}),!e.collapsed&&he.createElement(bN,null),he.createElement("div",{className:"item"},he.createElement("div",{id:"boardSidebarContainer"})),!e.collapsed&&he.createElement(he.Fragment,null,he.createElement(qA,null),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:cN}),he.createElement(kA,null)))}),function(e){return he.createElement("div",{className:"bottom aligned item"},he.createElement("p",{className:"copyright"},"\xa9 ",(new Date).getFullYear()," ",he.createElement("a",{href:"http://prooph-software.de"},"prooph software GmbH")))}),vN=Object(Ue.b)()(Object(Ge.o)(function(e){var t=It(e.location.pathname),n=Object(Fe.useSelector)(zO()),r=Object(Fe.useDispatch)(),a=Object(he.useState)(n.width),o=Object(Ke.a)(a,2),i=o[0],s=o[1],c=Object(he.useState)(!1),d=Object(Ke.a)(c,2),u=d[0],l=d[1];Object(he.useEffect)(function(){var e=window.matchMedia("(max-width: 900px)"),n=function(e){e&&t&&(r(wE(90)),s(90),r(jE(!0)))},a=function(e){n(e.matches)};return e.addEventListener("change",a),n(e.matches),function(){e.removeEventListener("change",a)}},[t]),Object(he.useEffect)(function(){u||s(n.width)},[n.width]);var m=t?" collapsible":"",p=t&&n.collapsed?" collapsed":"",f=t?" touch-only-pan":"";return he.createElement(he.Fragment,null,he.createElement("div",{className:"ui left fixed large vertical menu leftbar"+p+f,style:{overflowY:"scroll",width:(t?n.width:250)+"px"}},!t&&!1,!t&&he.createElement(YA,null),t&&!1,t&&he.createElement(dN,{collapsed:n.collapsed}),he.createElement(yN,null)),he.createElement(lA.a,{axis:t?"x":"none",onDrag:function(e,t){u||l(!0);var a=n.width+t.deltaX;r(wE(a)),n.width<=230&&!n.collapsed&&r(jE(!0)),n.width>230&&n.collapsed&&r(jE(!1))},onStop:function(e,t){l(!1),s(n.width)},position:{x:0,y:0}},he.createElement("div",{className:"collapsebar"+m+p,style:{left:(t?i:250)+"px",cursor:t?"grabbing":"inherit"}},t&&he.createElement(uN,{collapsed:n.collapsed}))))})),EN=function(e){return Wm({id:e.id,type:e.type,name:e.label,metadata:e.metadata,tags:e.tags})},ON=Object(fe.Map)(),xN=function(e,t){return e.getIn([hT,"activeGraphElements"])},jN=Object(Ue.b)()(function(e){return he.createElement(Ai.a,{open:e.open,closeIcon:!1,onClose:e.onClose,size:"tiny"},he.createElement(Ai.a.Header,null,e.t("insp.collaboration_modal."+e.headerKey)),he.createElement(Ai.a.Content,null,he.createElement("p",null,e.t("insp.collaboration_modal.text"))),he.createElement(Ai.a.Actions,null,he.createElement(Ni.a,{className:"positive",href:"https://prooph-board.com#pricing",target:"_blank"},"Upgrade")))}),wN=Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=Object(he.useState)(5e3),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(he.useState)(!1),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(he.useState)(!0),l=Object(Ke.a)(u,2),m=l[0],p=l[1],f=e.sources.count(),h=e.targets.count(),g=f+h,b=e.sources.filter(function(e){return!(e.getType()===Dc.icon&&""===e.getName())}),y=e.targets.filter(function(e){return!(e.getType()===Dc.icon&&""===e.getName())});g>4&&!c&&(f>4&&h<2?b=b.take(4-h):h>4&&f<2?y=y.take(4-f):(b=b.take(2),y=y.take(2)));var v=function(e,n){if(e.ctrlKey)return e.preventDefault(),e.stopPropagation(),void t(IE(n.getId()));o(a+1)},E=b.map(function(t){return he.createElement(Kv.a.Item,{key:t.getId(),style:{borderRadius:"0",color:"#424242"},title:"Source",as:qe.Link,to:{pathname:kt(e.boardId),search:"?cells=".concat(t.getId(),"&select=1&clicks=").concat(a)},onClick:function(e){return v(e,t)}},he.createElement(Kv.a.Icon,{name:"arrow left"}),he.createElement(Kv.a.Content,null,he.createElement(Xv,{cellType:t.getType()}),he.createElement(OT,{label:t.getName(),maxLength:30})))}).toArray();return y.forEach(function(t){E.push(he.createElement(Kv.a.Item,{key:t.getId(),style:{borderRadius:"0",color:"#424242"},title:"Target",as:qe.Link,to:{pathname:kt(e.boardId),search:"?cells=".concat(t.getId(),"&select=1&clicks=").concat(a)},onClick:function(e){return v(e,t)}},he.createElement(Kv.a.Icon,{name:"arrow right"}),he.createElement(Kv.a.Content,null,he.createElement(Xv,{cellType:t.getType()}),he.createElement(OT,{label:t.getName(),maxLength:30}))))}),he.createElement(he.Fragment,null,he.createElement(Ip.a,{horizontal:!0,onClick:function(){return p(!m)},style:m?{cursor:"pointer"}:{textDecoration:"line-through",cursor:"pointer"}},"Connections\xa0\xa0",he.createElement(kg.a,{trigger:he.createElement(Cp.a,{name:"question circle outline"})},he.createElement("p",null,e.t("insp.cody_wizard.connections.help1")),he.createElement("p",null,e.t("insp.cody_wizard.connections.help2")),he.createElement("p",null,e.t("insp.cody_wizard.connections.help3")),he.createElement("p",null,e.t("insp.cody_wizard.connections.help4")),he.createElement("p",null,e.t("insp.cody_wizard.connections.help5")))),m&&he.createElement(he.Fragment,null,he.createElement(Kv.a,null,E),g>4&&he.createElement(Ni.a,{basic:!0,compact:!0,icon:"arrow alternate circle "+(c?"up":"down"),className:"noborder",content:c?e.t("app.showLess"):e.t("app.showAll"),style:{textAlign:"left",paddingLeft:"30px"},onClick:function(){d(!c)}})))}),kN=Object(Ue.b)()(function(e){var t=e.ctx.event,n=t?t.getVersion():0,r=NE(),a=(Object(Ke.a)(r,1)[0],JO(e.ctx.board.uid),Object(he.useState)(null)),o=Object(Ke.a)(a,2),i=o[0],s=o[1],c=Object(he.useState)({}),d=Object(Ke.a)(c,2),u=d[0],l=d[1],m=Object(he.useState)(!1),p=Object(Ke.a)(m,2),f=p[0],h=p[1],g=function(t){e.onUpdateMetadata&&e.onUpdateMetadata(Lc(t,null,2),!0),l(t)};Object(he.useEffect)(function(){if(b(),t){s(t);var e=pm(t);l(e)}},[t,n]);var b=function(){s(null),l({}),h(!1)};return he.createElement("form",{className:"ui form",onSubmit:function(e){e.preventDefault(),e.stopPropagation()}},he.createElement(tj,{content:he.createElement(he.Fragment,null,he.createElement(bx,{boardId:e.ctx.board.uid,sessionId:i?i.getId():void 0,schema:u.schema||lm.fromString("{}"),readonly:!(!i||i.isEnabled()),onSchemaChanged:function(e){if(!e){var t=Bc(u);return delete t.schema,void g(t)}g(Object(Ye.a)({},u,{schema:e}))},autofocus:f}))}))}),IN=Object(Ue.b)()(function(e){var t=SN(e.node,e.contexts,e.t).map(function(t){return he.createElement(Eg.a,{link:!0,key:t.type,onClick:function(){return function(t){switch(t){case"dddAction":e.onCtxChanged(iI(e.node,e.ctx.board));break;case"policy":e.onCtxChanged(tk(e.node,e.ctx.board));break;default:throw new Error("Cannot switch context to type ".concat(t,". This seems to be a developer bug. Please contact the prooph board team!"))}}(t.type)},style:{minWidth:"300px"}},he.createElement(Eg.a.Content,null,he.createElement("div",{style:{float:"right"}},he.createElement(Xv,{cellType:t.nodeType,size:"big"})),he.createElement(Eg.a.Header,null,t.header),he.createElement(Eg.a.Meta,null,t.meta),he.createElement(Eg.a.Description,null,t.description)),t.extra&&he.createElement(Eg.a.Content,{extra:!0},t.extra))});return he.createElement(Eg.a.Group,{itemsPerRow:3,stackable:!0},t)}),SN=function(e,t,n){var r=[];return t.forEach(function(t){r.push({header:n("insp.cody_wizard.step_select_context.header_".concat(t)),meta:n("insp.cody_wizard.step_select_context.meta_".concat(t)),description:n("insp.cody_wizard.step_select_context.desc_".concat(t)),type:t,nodeType:CN(e,t),extra:_N(e,t)})}),r},CN=function(e,t){switch(t){case"policy":return Dc.policy;case"dddAction":return Dc.command;default:return Dc.freeText}},_N=function(e,t){switch(t){case"dddAction":return he.createElement(he.Fragment,null,he.createElement(Xv,{cellType:Dc.ui,size:"normal"}),he.createElement(Cp.a,{name:"arrow right"}),he.createElement(Xv,{cellType:Dc.command,size:"normal"}),he.createElement(Cp.a,{name:"arrow right"}),he.createElement(Xv,{cellType:Dc.aggregate,size:"normal"}),he.createElement(Cp.a,{name:"arrow right"}),he.createElement(Xv,{cellType:Dc.event,size:"normal"}),he.createElement(Cp.a,{name:"arrow right"}),he.createElement(Xv,{cellType:Dc.document,size:"normal"}));case"policy":return he.createElement(he.Fragment,null,he.createElement(Xv,{cellType:Dc.event,size:"normal"}),he.createElement(Cp.a,{name:"arrow right"}),he.createElement(Xv,{cellType:Dc.policy,size:"normal"}),he.createElement(Cp.a,{name:"arrow right"}),he.createElement(Xv,{cellType:Dc.command,size:"normal"}),"\xa0/\xa0",he.createElement(Xv,{cellType:Dc.externalSystem,size:"normal"}));default:return}},TN=function(e){var t=Object(he.useMemo)(function(){return Ay(e.boardId)},[e.boardId]),n=Object(Fe.useSelector)(t),r=(JO(e.boardId),NE()),a=Object(Ke.a)(r,1)[0],o=Object(he.useState)(IS),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)(null),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=a.getNode(e.activeGraphElement.id),f=!!e.activeGraphElement.locked;Object(he.useEffect)(function(){var e=CS(p,n);c(e.ctx),m(e.step)},[e.activeGraphElement.id,e.activeGraphElement.metadata,e.boardId]);var h=l?null:p,g=function(e){p instanceof Jm&&p.setPotentiallyStale(),wS(l)?(oI(e)&&(Xk(e,a),c(iI(l.node,n)),m("dddEvent")),nk(e)&&(Xw(e,a),c(tk(l.node,n)),m("policyEvent"))):c(e)},b=function(t,n){t!==p.getMetadata()&&e.onUpdateMetadata(t,n)};return he.createElement(he.Fragment,null,h&&he.createElement(hS,{node:h}),!h&&"state"===l&&oI(s)&&he.createElement(Ck,{ctx:s,mode:"sidebar",readonly:f,onCtxChanged:g,onUpdateMetadata:b}),!h&&"dddEvent"===l&&oI(s)&&he.createElement(Tw,{ctx:s,mode:"sidebar",readonly:f,onCtxChanged:g,onUpdateMetadata:b}),!h&&"policyEvent"===l&&nk(s)&&he.createElement(kN,{ctx:s,mode:"sidebar",readonly:f,onCtxChanged:g,onUpdateMetadata:b}),!h&&"aggregate"===l&&oI(s)&&he.createElement(Qx,{ctx:s,mode:"sidebar",readonly:f,onCtxChanged:g,onUpdateMetadata:b}),!h&&"command"===l&&oI(s)&&he.createElement(Ow,{ctx:s,mode:"sidebar",readonly:f,onCtxChanged:g,onUpdateMetadata:b}),!h&&"ui"===l&&(oI(s)||kI(s))&&he.createElement(Fk,{ctx:s,mode:"sidebar",readonly:f,onCtxChanged:g,onUpdateMetadata:b}),!h&&"feature"===l&&(oI(s)||nk(s)||EI(s))&&he.createElement(vk,{ctx:s,mode:"sidebar",readonly:f,onCtxChanged:g,onUpdateMetadata:b}),!h&&"anyVO"===l&&xI(s)&&he.createElement(dw,{ctx:s,mode:"sidebar",readonly:f,onCtxChanged:g,onUpdateMetadata:b}),!h&&"policy"===l&&nk(s)&&he.createElement(Jw,{ctx:s,mode:"sidebar",readonly:f,onCtxChanged:g,onUpdateMetadata:b}),!h&&wS(l)&&he.createElement(IN,{ctx:s,mode:"sidebar",readonly:f,contexts:l.contexts,node:l.node,onCtxChanged:g}))},AN={},NN=ge.a.forwardRef(function(e,t){var n=JO(e.boardId),r=Object(he.useRef)(null),a=Object(he.useState)(e.focusEditor?"metadata":"wizard"),o=Object(Ke.a)(a,2),i=o[0],s=o[1],c=Object(he.useState)(!1),d=Object(Ke.a)(c,2),u=d[0],l=d[1],m=e.activeGraphElement.type!==Dc.textCard&&e.activeGraphElement.type!==Dc.edge,p=function(t,n){"json"!==e.boardStickyTemplate.templateType&&e.onUpdateMetadata(t,n);try{Rc(t),e.onUpdateMetadata(t,n),delete AN[e.activeGraphElement.id]}catch(r){AN[e.activeGraphElement.id]=t}};Object(he.useImperativeHandle)(t,function(){return{retrievePayload:function(){return r.current.retrievePayload()}}}),Object(he.useEffect)(function(){e.board&&e.board.codySuggestEnabled||s("metadata")},[e.boardId,e.board&&e.board.codySuggestEnabled]),Object(he.useEffect)(function(){if(r.current){var t=r.current.addKeyDownHandler(function(t){!t.ctrlKey||"KeyS"!==t.code&&"KeyG"!==t.code||(t.preventDefault(),p(r.current.retrievePayload(),!0),e.onTriggerCody()),"Escape"===t.code&&e.onClose&&(p(r.current.retrievePayload()),t.preventDefault(),t.stopPropagation(),e.onClose())});return function(){t.dispose()}}},[e.activeGraphElement.id]),Object(he.useEffect)(function(){if("metadata"===i&&m&&r.current){if(!e.activeGraphElement.metadata&&LN(e.activeGraphElement)&&e.similarElements.count()>0){var t=n.getElement(e.similarElements.first(""));t&&t.getMetadata()&&p(t.getMetadata(),!0)}r.current.initializeModel({fileId:"graph_element_".concat(e.activeGraphElement.id,".json"),language:e.boardStickyTemplate.templateType,value:AN[e.activeGraphElement.id]||e.activeGraphElement.metadata||e.boardStickyTemplate.template||"{\n  \n}\n",schema:e.boardStickyTemplate.templateSchema||void 0,onChange:function(e){r.current&&p(r.current.retrievePayload())}})}},[e.activeGraphElement.id,e.activeGraphElement.metadata,e.similarElements,i]),Object(he.useEffect)(function(){e.focusEditor&&"metadata"!==i&&f("metadata"),r.current&&e.focusEditor&&r.current.focus()},[e.focusEditor,i]);var f=function(t){"activity"!==t?(s(t),e.onShowRunCody("wizard"===t)):l(!0)},h=!!AN[e.activeGraphElement.id];return ge.a.createElement(ge.a.Fragment,null,(e.activeNodeSources.size>0||e.activeNodeTargets.size>0)&&ge.a.createElement(wN,{boardId:e.boardId,sources:e.activeNodeSources,targets:e.activeNodeTargets}),ge.a.createElement(TT.a,{pointing:!0,secondary:!0,color:"blue"},ge.a.createElement(TT.a.Item,{name:"Cody",active:"wizard"===i,onClick:function(){return f("wizard")}}),ge.a.createElement(TT.a.Item,{name:"Metadata",active:"metadata"===i,onClick:function(){return f("metadata")}}),ge.a.createElement(TT.a.Item,{name:"Activity",active:"activity"===i,onClick:function(){return f("activity")}})),m&&"wizard"===i&&ge.a.createElement("div",{style:{height:"auto",overflowY:"auto",flexGrow:1}},ge.a.createElement(TN,{boardId:e.boardId,activeGraphElement:e.activeGraphElement,onUpdateMetadata:e.onUpdateMetadata})),m&&"metadata"===i&&ge.a.createElement(ge.a.Fragment,null,h&&ge.a.createElement(nt.a,{error:!0,size:"small",content:e.t("insp.cody_wizard.schema_editor.invalid_json"),icon:"warning",style:{display:"flex"}}),ge.a.createElement($v,{ref:r,options:{fontSize:12,folding:!1,glyphMargin:!1,lineNumbers:"off",lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1},readOnly:e.activeGraphElement.locked},style:{height:"500px"}})),"activity"===i&&ge.a.createElement(IT,{elementId:e.activeGraphElement.id}),ge.a.createElement(jN,{open:u,onClose:function(){return l(!1)},headerKey:"header_history"}))}),LN=function(e){return(e.tags||[]).includes(ispConst.TAG_CONNECTED)},RN=function(e){var t=e.tags||[];return t.push(ispConst.TAG_DISCONNECTED),t.filter(function(e){return e!==ispConst.TAG_CONNECTED})},BN=function(e){var t=e.tags||[];return t.push(ispConst.TAG_CONNECTED),t.filter(function(e){return e!==ispConst.TAG_DISCONNECTED})},DN=Object(Ue.b)()(Object(Ge.o)(function(e){var t,n=Object(he.useState)(6e3),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(Fe.useDispatch)(),s=Object(Fe.useSelector)(zO()),c=Object(he.useState)(!1),d=Object(Ke.a)(c,2),u=(d[0],d[1],Object(he.useMemo)(function(){return Ay(e.match.params.uid)},[])),l=Object(Fe.useSelector)(u),m=Object(Fe.useSelector)((t=e.match.params.uid,Object(bt.a)([xN],function(e){return e.has(t)?e.get(t):null}))),p=l&&l.shouldShowElementDetails||!1,f=Object(Fe.useSelector)(Yy(e.match.params.uid)),h=Object(Fe.useSelector)($O(e.match.params.uid)),g=Object(he.useState)(!1),b=Object(Ke.a)(g,2),y=b[0],v=b[1],E=Object(he.useState)(s.rightSidebarWidth),O=Object(Ke.a)(E,2),x=O[0],j=O[1],w=NE(),k=Object(Ke.a)(w,1)[0],I=Object(he.useRef)(null),S=Object(he.useState)(!0),C=Object(Ke.a)(S,2),_=C[0],T=C[1];Object(he.useEffect)(function(){var e=window.matchMedia("(max-width: 900px)"),t=function(e){if(e){var t=window.screen.availWidth-90-100;i(kE(Math.min(t,450)))}},n=function(e){t(e.matches)};return e.addEventListener("change",n),t(e.matches),function(){e.removeEventListener("change",n)}},[]),Object(he.useEffect)(function(){y||j(s.rightSidebarWidth)},[s.rightSidebarWidth]),Object(he.useEffect)(function(){i(B.fetchBoardStickyTemplates(e.match.params.uid)),T(!0)},[e.match.params.uid]),Object(he.useEffect)(function(){l&&l.shouldFocusMetadataEditor&&(i(L.toggleElementDetails(e.match.params.uid,p,!1)),T(!1))},[l&&l.shouldFocusMetadataEditor]);var A=m?m.id:null;Object(he.useEffect)(function(){T(!0)},[A]);var N=Object(fe.List)(),R=Object(fe.List)(),D=Object(fe.List)();if(m&&m.type!==Dc.edge){var P=h.getElement(m.id)||EN(m),z=h.getSimilarElements(P).filter(function(e){return e.getTags().contains(ispConst.TAG_CONNECTED)});N=z.map(function(e){return e.getId()});var M=h.getElement(m.id);if(M){R=M.getSources(),D=M.getTargets();var U=R.map(function(e){return e.getId()}),F=D.map(function(e){return e.getId()});z.forEach(function(e){var t,n,r,a,o=e.getSources().filter(function(e){return!U.contains(e.getId())}),i=e.getTargets().filter(function(e){return!F.contains(e.getId())});R=(t=R).push.apply(t,Object(eo.a)(o.toArray())),U=(n=U).push.apply(n,Object(eo.a)(o.toArray().map(function(e){return e.getId()}))),D=(r=D).push.apply(r,Object(eo.a)(i.toArray())),F=(a=F).push.apply(a,Object(eo.a)(i.toArray().map(function(e){return e.getId()})))})}}if(m&&m.type===Dc.edge&&m.edgeData){var G=h.getElement(m.edgeData.source),q=h.getElement(m.edgeData.target);G&&(R=Object(fe.List)([G])),q&&(D=Object(fe.List)([q]))}var V=function(){i(ol(e.match.params.uid,m||void 0)),i(Hd(e.match.params.uid,!1,!1)),k.focus()};return he.createElement(he.Fragment,null,p&&he.createElement("div",{id:"metadata-sidebar",className:"touch-only-pan",style:{position:"absolute",paddingTop:"50px",top:"0px",right:"0px",height:"100%",overflow:"hidden",borderLeft:"5px solid #eee",zIndex:99}},he.createElement(Eg.a,{style:{height:"100%",borderRadius:"0",border:"none",width:s.rightSidebarWidth+"px"}},he.createElement(Eg.a.Content,{style:{border:"none"}},he.createElement(Eg.a.Header,null,he.createElement(Cp.a,{name:"close",className:"right floated",onClick:V,style:{cursor:"pointer"}}),m&&he.createElement(qe.Link,{style:{borderRadius:"0",color:"#424242"},onClick:function(){return o(a+1)},to:{pathname:kt(e.match.params.uid),search:"?cells=".concat(m.id,"&clicks=").concat(a)}},he.createElement(Xv,{cellType:m.type,size:"normal",title:e.t("app.stickyTypes."+m.type)}),m.label,m.locked&&he.createElement(Cp.a,{name:"lock",title:"Element is locked",size:"mini"})),!m&&he.createElement(he.Fragment,null,"Metadata"))),he.createElement(Eg.a.Content,{style:{position:"relative",height:"100%",overflowY:"auto",display:"flex",flexDirection:"column",border:"none"}},!m&&he.createElement(nt.a,{info:!0},e.t("insp.sidebar.element_details.no_element_selected")),m&&he.createElement(NN,{boardId:e.match.params.uid,board:l,activeNodeSources:R,activeNodeTargets:D,activeGraphElement:m,similarElements:N,boardStickyTemplate:f.get(m.type),onTriggerCody:function(){return k.triggerCody()},onUpdateMetadata:function(e,t){m.metadata=e,m.updateMetadata(e,t),LN(m)&&N.count()&&(SA&&window.clearTimeout(SA),SA=window.setTimeout(function(){m.updateSimilarElements(N.toArray(),e)},300))},onShowRunCody:T,onClose:V,t:e.t,ref:I,focusEditor:!!l.shouldFocusMetadataEditor})),_&&m&&he.createElement(Eg.a.Content,{style:{textAlign:"center"}},he.createElement("p",null,he.createElement(lS,null)),he.createElement(Ni.a,{primary:!0,icon:"play circle",content:e.t("insp.cody_wizard.run_cody"),onClick:function(e){e.preventDefault(),k.openCodyWizard(!0)}})),!_&&m&&LN(m)&&N.size>0&&he.createElement(Eg.a.Content,null,he.createElement(nt.a,{info:!0,size:"small",style:{textAlign:"center"}},e.t("insp.sidebar.element_details.disconnect_from_similar_elements_text",{number:N.size}),he.createElement("p",{style:{textAlign:"center",paddingTop:"10px"}},he.createElement("a",{href:"#",onClick:function(e){if(e.preventDefault(),m){if(m.locked)return;m.replaceTags(RN(m))}},className:"button"+(m.locked?" disabled":"")},e.t("insp.sidebar.element_details.disconnect_from_similar_elements_link"))))),!_&&m&&!LN(m)&&N.size>0&&he.createElement(Eg.a.Content,null,he.createElement(nt.a,{warning:!0,size:"small",style:{textAlign:"center"}},e.t("insp.sidebar.element_details.connect_with_similar_elements_text",{number:N.size}),he.createElement("p",{style:{textAlign:"center",paddingTop:"10px"}},he.createElement("a",{href:"#",onClick:function(e){if(e.preventDefault(),m){if(m.locked)return;m.replaceTags(BN(m))}},className:"button"+(m.locked?" disabled":"")},e.t("insp.sidebar.element_details.connect_with_similar_elements_link")))))),he.createElement(lA.a,{axis:"x",onDrag:function(e,t){y||v(!0);var n=s.rightSidebarWidth-t.deltaX;i(kE(n))},onStop:function(e,t){v(!1),j(s.rightSidebarWidth)},position:{x:0,y:0}},he.createElement("div",{className:"thin collapsebar collapsible",style:{right:x+"px",cursor:"grabbing"}}))))})),PN=Object(Ue.b)()(function(e){var t=e.match.params.organization,n=e.match.params.invitation,r=Ii(),a=Object(Fe.useSelector)(r),o=Object(Fe.useSelector)(Al()),s=Object(he.useState)(!1),c=Object(Ke.a)(s,2),d=c[0],u=c[1],l=Object(Fe.useDispatch)();return Object(he.useEffect)(function(){if(a.signedIn&&o){var r=0;jr(t,n).then(function a(o){if(o.error)return r<2?(r++,void window.setTimeout(function(){jr(t,n).then(a)},100)):(l(i.Command.error("Command failed","Failed to process organization invitation")),void u(!0));yr(t).then(function(n){var r=n.response;if(n.error)return l(i.Command.info(e.t("insp.organisation.joined.title"),"")),void u(!0);if(r){var a=Pn(r.data,Bn(function(e){return Ba(e)}));_n(a)&&(console.error("Invalid organization response: ",a.value),l(i.Command.error("Request Error","Could not load organization"))),Tn(a)&&(l(k.Query.fetchUserOrganizations()),l(f.Command.switchActiveOrganization(t)),l(i.Command.info(e.t("insp.organisation.joined.title"),e.t("insp.organisation.joined.details",{name:a.value.name})))),u(!0)}})})}},[a.signedIn,o]),d?he.createElement(Ge.c,{to:jt}):he.createElement(Mg.a,{active:!0,className:"page"},he.createElement(Ug.a,{size:"large"},"Processing Organization Invitation"))}),zN=n(1193),MN=function(e){var t="#414141",n="normal",r="white";return"error"===e.type&&(t="#f31c30",n="bold",r="#f1bec5"),"warning"===e.type&&(t="#f99f4b",n="bold"),he.createElement("div",{className:"console-message",style:{backgroundColor:r}},he.createElement(ab.a,{circular:!0,className:"user console-avatar",style:{backgroundImage:"url(".concat(zN,")"),backgroundSize:"cover",marginLeft:"3px"}}),he.createElement("div",{className:"console-text"},he.createElement("span",{style:{color:t,fontWeight:n}},e.message)))},UN=function(){var e=localStorage.getItem("@@Inspectio/CodyConsole");if(null===e)return[];try{return JSON.parse(e)}catch(t){return[]}}(),FN=function(e){var t=Object(Fe.useSelector)(Ii()),n=Object(he.useRef)(null),r=NE(),a=Object(Ke.a)(r,1)[0],o=Object(Fe.useDispatch)();Object(he.useEffect)(function(){window.setTimeout(function(){n.current&&(e.lastCodyMsg&&e.lastCodyMsg.type===XE.Question||e.showConnectDefault)&&n.current.focus()},100)},[e.messageCount,e.lastCodyMsg,e.visible,e.showConnectDefault]),Object(he.useEffect)(function(){return function(){var e;e=UN.slice(0,10),localStorage.setItem("@@Inspectio/CodyConsole",JSON.stringify(e))}});var i=e.showConnectDefault?"/connect http://localhost:3311":"";return he.createElement("div",{className:"console-message"},he.createElement(ab.a,{circular:!0,className:"user",style:{backgroundImage:"url(".concat(t.avatarUrl,")"),backgroundSize:"cover",marginLeft:"1px"}}),he.createElement("span",{style:{marginLeft:"3px"}},"\xa0\xa0"),he.createElement("input",{type:"text",defaultValue:i,ref:n,onKeyDown:function(t){if("Enter"===t.key)e.onEnter(n.current.value||""),""!==n.current.value&&(void 0!==CA&&-1!==CA&&UN[CA]===n.current.value&&UN.splice(CA,1),UN.length&&UN[0]===n.current.value||UN.unshift(n.current.value)),n.current.value="",CA=void 0;else if("Escape"===t.key)e.onEscape();else if(t.ctrlKey&&"q"===t.key)e.onClose();else if("ArrowUp"===t.key)void 0===CA?CA=0:CA++,CA+1>UN.length&&(CA=UN.length-1),-1!==CA&&(n.current.value=UN[CA]),t.preventDefault();else if("ArrowDown"===t.key){if(void 0===CA)return;--CA>-1&&(n.current.value=UN[CA],n.current.focus()),-1===CA&&(UN.length&&UN[0]===n.current.value&&(n.current.value="",n.current.focus()),CA=void 0),t.preventDefault()}else t.ctrlKey&&"g"===t.key?(a.triggerCody(),t.preventDefault()):t.ctrlKey&&"m"===t.key?(o(Hd(e.boardId,!0,!0)),t.preventDefault()):CA=void 0}}))},GN=function(e){var t=Object(Fe.useSelector)(Ii());return he.createElement("div",{className:"console-message"},he.createElement(ab.a,{circular:!0,className:"user console-avatar",style:{backgroundImage:"url(".concat(t.avatarUrl,")"),backgroundSize:"cover",marginLeft:"1px"}}),he.createElement("div",{className:"console-text"},""===e.msg&&he.createElement("span",null,"\xa0"),he.createElement("span",null,e.msg)))},qN=["connect","disconnect","cockpit","help","talk"],VN=Object(Ge.o)(function(e){var t=Object(Fe.useDispatch)(),n=Object(he.useState)(Object(fe.List)([])),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(he.useState)(),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(Fe.useSelector)(zO()),l=Object(he.useMemo)(function(){return Ay(e.match.params.uid)},[]),m=Object(Fe.useSelector)(l),p=m&&m.shouldShowCodyConsole,f=Object(he.useState)(!1),h=Object(Ke.a)(f,2),g=h[0],b=h[1],y=Object(he.useState)(u.codyConsoleHeight),v=Object(Ke.a)(y,2),E=v[0],O=v[1],x=Object(Fe.useSelector)(Ii()),j=Object(he.useRef)(null),w=NE(),k=Object(Ke.a)(w,1)[0],I=u.width+10,S=I+(m&&m.shouldShowElementDetails?u.rightSidebarWidth+5+(u.sideBySideCell?u.sideBySideWidth+5:0):0),C=function(e){o(a.push(e)),window.setTimeout(function(){j.current&&j.current.scrollBy({top:200,behavior:"smooth"})},10)};ZE.setCodyResponsePrinter(function(e,t){d(e),C(he.createElement(zI,{key:a.count()+1,codyResponse:e,codyName:t}))}),ZE.setErrorPrinter(function(e){0===a.count()&&e===GE||C(he.createElement(MN,{key:a.count()+1,message:e,type:"error"}))}),ZE.setWarningPrinter(function(e){C(he.createElement(MN,{key:a.count()+1,message:e,type:"warning"}))});var _=function(){t($d(e.match.params.uid,!1))};return he.createElement(vT.a.Group,{animation:"slide up"},p&&he.createElement("div",{className:"cody console",ref:j,style:{height:"".concat(u.codyConsoleHeight,"px"),left:"".concat(I,"px"),width:"calc(100% - ".concat(S,"px)")}},!ZE.codyServers&&he.createElement(MN,{message:"No connection to Cody. Try to connect with him first!",type:"warning"}),a.toArray(),he.createElement(FN,{showConnectDefault:!ZE.codyServers,boardId:e.match.params.uid,messageCount:a.count(),lastCodyMsg:c,visible:p,onEnter:function(e){if(C(he.createElement(GN,{key:a.count()+1,msg:e})),"/help"!==e)if("/talk"!==e){var t=e.match(/^\/connect\s+(?<uri>http(s)?:\/\/[^\s]+|play)\s*(?<name>[A-Za-z0-9]+)?$/);if(t)return t.groups.name&&qN.includes(t.groups.name)?void C(he.createElement(zI,{codyResponse:{cody:'Oh sorry, you cannot use "'.concat(t.groups.name,"\" as a name. It's a reserved word!"),type:XE.Error},codyName:"cody"})):void ZE.connect.Cody(t.groups.uri,x.displayName,m.uid,t.groups.name);var n=e.match(/^\/disconnect\s+(?<name>[A-Za-z0-9]+)$/);if(!n||!n.groups.name)return e.match(/^\/cockpit\s+http(s)?:\/\/.+$/)?(k.setCockpitBaseUrl(e.replace("/cockpit ","").trim()),void C(he.createElement(zI,{codyName:"Cody",codyResponse:{cody:"Cockpit is activated now.",details:'Right click on commands, events, queries or aggregates and choose "Open In Cockpit" from context menu.'}}))):void(ZE.codyServers?ZE.reply(e):ZE.connect.Cody(e.replace("/connect ",""),x.displayName,m.uid));ZE.disconnect(n.groups.name)}else ZE.talk.to.Cody();else window.setTimeout(function(){ZE.ask.Cody.forHelp()})},onEscape:function(){ZE.abortSession()},onClose:_}),he.createElement(lA.a,{axis:"y",onDrag:function(e,n){g||b(!0);var r,a=u.codyConsoleHeight-n.deltaY;t((r=a,Object(at.action)(EE,{height:r})))},onStop:function(e,t){b(!1),O(u.codyConsoleHeight)},position:{x:0,y:0}},he.createElement("div",{className:"collapsible",style:{bottom:E+"px",width:"calc(100% - ".concat(S,"px)"),cursor:"grabbing"}},he.createElement("span",{className:"collaps-handle",onClick:_},he.createElement("i",{className:"close icon"}))))))}),WN=function(e){return function(t){return function(e,t){return e.getIn([Jo,"OrganizationInvitation",t])}(t,e)}},HN=Object(Ue.b)()(function(e){var t=Object(he.useState)(Wn()),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(!1),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)(!1),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(he.useState)(!1),h=Object(Ke.a)(p,2),b=h[0],y=h[1],v=Object(Fe.useSelector)(WN(e.invitation.invitationId)),E=Object(Fe.useDispatch)();Object(he.useEffect)(function(){f.Api.getInspectioUserInfoByEmail(e.invitation.invitedUserEmail).then(function(e){var t=e.response;if(e.error,t){var n=g.createIioUserInfoFromServerData(t.data);Tn(n)&&a(n.value)}})},[e.invitation.invitedUserEmail]),Object(he.useEffect)(function(){s&&c(!1),l&&v&&v.status===pr.revoked&&y(!0)},[v]);return b?he.createElement(he.Fragment,null):he.createElement(LT.a,null,he.createElement(ub,{user:r,size:"mini"}),he.createElement("span",{style:{paddingLeft:"10px"}},e.invitation.invitedUserEmail),he.createElement(sb.a,{floated:"right"},he.createElement(cb,{content:e.t("app.form.resend"),icon:"paper plane",loading:s,onClick:function(){c(!0),E(x.resendUserOrganizationInvitation(e.organization.uid,e.invitation.invitationId,e.invitation.invitedUserEmail))}}),he.createElement(cb,{content:e.t("app.form.revoke"),icon:"delete",loading:l,onClick:function(){m(!0),E(x.revokeUserOrganizationInvitation(e.organization.uid,e.invitation.invitationId,e.invitation.invitedUserEmail))}})))}),$N=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},JN=Object(Ue.b)()(function(e){var t=Object(he.useState)(""),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(Fe.useSelector)(Ii()),i=Object(Fe.useDispatch)(),s=Vn({userId:o.uid,username:o.displayName,avatarUrl:o.avatarUrl,position:""});Tn(s)&&s.value;var c=e.organization.invitations.count()>0;return he.createElement(Ai.a,{open:e.open,closeIcon:!0,onClose:e.onClose},he.createElement(Ai.a.Header,null,e.t("insp.organisation.invite_user")),he.createElement(Ai.a.Content,null,he.createElement("form",{onSubmit:function(){i(x.inviteUserToOrganization(e.organization.uid,r)),a(""),e.onClose()}},he.createElement("div",{style:{marginBottom:"10px"}},he.createElement(kp.a,{style:{width:"100%"},value:r,onChange:function(e,t){return a(t.value)},placeholder:e.t("insp.organisation.user_email"),autoFocus:!0})),he.createElement(Ni.a,{primary:!0,type:"submit",disabled:!$N(r)||!e.hasEnoughQuota},e.t("insp.organisation.send_invitation"))),he.createElement("div",{className:"ui horizontal divider"},e.t("insp.organisation.open_invitations")),c&&he.createElement(Kv.a,{relaxed:!0,divided:!0},e.organization.invitations.map(function(t){return he.createElement(HN,{invitation:t,organization:e.organization,key:t.invitationId})})),!c&&he.createElement("p",{className:"infotextSecondary"},e.t("insp.organisation.empty_invitations"))))}),QN=Object(Ue.b)()(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(!1),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)(!1),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(Fe.useDispatch)();rt(function(){a(!1)});var f=function(t){return!e.isOwner&&!e.readonly},h=function(t){f(e.member.userId)&&(t.stopPropagation(),a(!r))},g=e.isOwner||e.isAdmin?"admin-member":"";return he.createElement("div",{className:"item "+g,key:e.member.userId,style:f(e.member.userId)?{cursor:"pointer"}:{}},he.createElement(tt.a,{open:r,icon:!1,pointing:"top",disabled:e.readonly,className:"organization"},he.createElement(tt.a.Menu,null,e.currentUserIsOwner&&e.isAdmin&&he.createElement(tt.a.Item,{text:e.t("insp.organisation.demote_to_member"),onClick:function(){e.readonly||p(k.Command.demoteUserToOrganizationMember(e.organizationId,e.member.userId))}}),e.currentUserIsOwner&&!e.isAdmin&&!e.isGuest&&he.createElement(tt.a.Item,{text:e.t("insp.organisation.promote_to_admin"),onClick:function(){e.readonly||p(k.Command.promoteUserToOrganizationAdmin(e.organizationId,e.member.userId))}}),e.isGuest&&he.createElement(tt.a.Item,{text:e.t("insp.organisation.promote_to_member"),onClick:function(){e.readonly||p(k.Command.turnGuestIntoMember(e.member.userId,e.organizationId))}}),he.createElement(tt.a.Item,{text:e.t("app.form.remove"),onClick:function(){return m(!0)}}))),!s&&he.createElement("span",{className:"ui avatar image placeholder",onClick:h}),he.createElement("img",{className:"ui avatar image",src:e.member.avatar(),onClick:h,onLoad:function(){return c(!0)},alt:e.member.username+" Avatar",style:{display:s?"inline-block":"none"}}),he.createElement("div",{className:"content",onClick:h},he.createElement("div",{className:"header"},e.member.username)),he.createElement($g.a,{open:!e.readonly&&l,header:e.t("insp.organisation.remove_user_confirm_title"),content:e.t("insp.organisation.remove_user_confirm_text",{user_name:e.member.username,email:e.member.email}),confirmButton:e.t("insp.organisation.remove_user_confirm_button"),cancelButton:he.createElement(Ni.a,{content:e.t("app.form.cancel"),className:"basic noborder"}),onCancel:function(){return m(!1)},onConfirm:function(){e.readonly||(e.isGuest?p(k.Command.removeGuestFromOrganization(e.organizationId,e.member.userId)):p(k.Command.removeUserFromOrganization(e.organizationId,e.member.userId))),m(!1)}}))}),YN=Object(Ue.b)()(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(!1),i=Object(Ke.a)(o,2),s=i[0],c=i[1],d=Object(he.useState)(!1),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(Fe.useSelector)(Ii()),f=Object(Fe.useSelector)(Ei(e.activeOrganization.organizationId)),h=Object(he.useState)(""),g=Object(Ke.a)(h,2),b=g[0],y=g[1],v=Object(Fe.useDispatch)(),E=Object(Fe.useSelector)(ri(f?f.members.push(f.ownerId):Object(fe.List)())),O=Object(Fe.useSelector)(ri(f?f.guests:Object(fe.List)()));if(!f)return he.createElement(nt.a,{error:!0},"Could not load organization data. Please refresh the page to try again!");var j=f.memberQuota-f.invitations.count()>0,w=E.map(function(e){return{text:e.email,key:e.uid,value:e.email}}).toJS();""!==b&&(E=E.filter(function(e){return e.email===b}),O=O.filter(function(e){return e.email===b}));var k=E.sortBy(function(e){return e.username}).sort(function(e,t){return e.userId===f.ownerId?-1:t.userId===f.ownerId?1:f.admins.contains(e.userId)?-1:f.admins.contains(t.userId)?1:0}).map(function(e){return he.createElement(QN,{key:e.userId,member:e,currentUserIsOwner:f.ownerId===p.uid,isOwner:f.ownerId===e.userId,isAdmin:f.admins.contains(e.userId),readonly:f.ownerId===e.userId||f.ownerId!==p.uid&&f.admins.contains(e.userId),organizationId:f.uid})}),I=O.sortBy(function(e){return e.username}).map(function(e){return he.createElement(QN,{key:e.userId,member:e,currentUserIsOwner:f.ownerId===p.uid,isOwner:f.ownerId===e.userId,isAdmin:f.admins.contains(e.userId),isGuest:!0,readonly:f.ownerId===e.userId||f.ownerId!==p.uid&&f.admins.contains(e.userId),organizationId:f.uid})});return he.createElement(he.Fragment,null,e.activeOrganization.explicitOrganization&&!j&&he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,null,he.createElement(nt.a,{warning:!0,floating:!0,content:e.t("insp.organisation.no_member_quota")}))),he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,null,he.createElement("div",null,!e.activeOrganization.explicitOrganization&&e.activeOrganization.ownOrganization&&he.createElement("button",{className:"ui huge basic button",onClick:function(){return a(!r)}},he.createElement("i",{className:"plus icon"}),e.t("insp.organisation.create_btn")),r&&he.createElement("div",{className:"ui segment"},he.createElement(oE,{text:"",charSize:9,widthUnit:"px",padding:20,minWidth:200,required:!0,onTextChanged:function(t){v(x.setUpExplicitOrganization(e.activeOrganization.organizationId,t)),a(!1)},focus:!0,onCancel:function(){a(!1)},placeholder:e.t("insp.organisation.name")})),e.activeOrganization.explicitOrganization&&he.createElement("div",{className:"ui segment"},he.createElement("a",{href:"#",className:"ui small right floated basic button noborder",onClick:function(e){e.stopPropagation(),e.preventDefault(),c(!0)},style:{display:"none"}},"Delete"),he.createElement("h3",{style:{margin:0,cursor:e.activeOrganization.ownOrganization?"pointer":"default"},id:"1234"},he.createElement(oE,{text:e.activeOrganization.organizationName,charSize:9,widthUnit:"px",padding:20,minWidth:200,required:!0,onTextChanged:function(t){v(x.renameOrganization(e.activeOrganization.organizationId,t))},focus:!1,onCancel:function(){console.log("cancel name change")},placeholder:e.t("insp.organisation.name"),disabled:!e.activeOrganization.ownOrganization})),he.createElement(Ky.a,{options:w,defaultValue:b,onChange:function(e,t){return n=t.value,void y(n);var n},placeholder:"Email Filter",search:!0,clearable:!0,basic:!0,floating:!0,style:{float:"right",height:"20px",marginTop:"-30px"}}),he.createElement("div",{className:"ui horizontal divider"},e.t("insp.organisation.member")),he.createElement("div",{className:"ui horizontal list"},he.createElement(Ni.a,{basic:!0,icon:!0,color:"blue",size:"large",onClick:function(){m(!0)},disabled:!j&&0===f.invitations.count()},he.createElement("i",{className:"blue user icon"})),k),I.count()>0&&he.createElement("div",{className:"ui horizontal divider"},e.t("insp.organisation.guests")),I.count()>0&&he.createElement("div",{className:"ui horizontal list"},I),he.createElement(JN,{open:l,onClose:function(){m(!1)},organization:f,hasEnoughQuota:j}),he.createElement($g.a,{open:s,header:e.t("insp.team.remove_team_confirm_title"),confirmButton:e.t("app.form.remove"),cancelButton:he.createElement(Ni.a,{content:e.t("app.form.cancel"),className:"basic noborder"}),content:e.t("insp.team.remove_team_confirm_text",{team_name:e.activeOrganization.organizationName}),onCancel:function(){return c(!1)},onConfirm:function(){alert("confirmed!")}}))))),!e.activeOrganization.explicitOrganization&&e.activeOrganization.ownOrganization&&he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,null,he.createElement(nt.a,{info:!0,floating:!0,content:e.t("insp.organisation.not_explicit")}))),he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,null)))}),KN=Object(Ue.b)()(function(e){var t=Object(Fe.useSelector)(Ii()),n=Object(Fe.useSelector)(Al());return he.createElement(Ve.a,null,he.createElement(Xe.a,{stackable:!0,padded:!0},he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),he.createElement(Xe.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},he.createElement(et.a,{as:"h1",icon:!0,textAlign:"center"},he.createElement(et.a.Content,null,"Manage Organisation",he.createElement(et.a.Subheader,null))))),n&&n.userIsAdmin&&he.createElement(he.Fragment,null,he.createElement(YN,{currentUser:t,activeOrganization:n})),(!n||!n.userIsAdmin)&&he.createElement(Xe.a.Row,null,he.createElement(Xe.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),he.createElement(Xe.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},he.createElement(nt.a,{content:e.t("insp.organisation.no_admin"),warning:!0})))))}),ZN=function(e){var t=e.split("/");return t[t.length-1].split(".").slice(0,-1).join(".")},XN=Object(Ge.o)(Object(Ue.b)()(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(he.useState)(jt),s=Object(Ke.a)(o,2),c=s[0],d=(s[1],Object(he.useState)(!1)),u=Object(Ke.a)(d,2),l=u[0],m=u[1],p=Object(he.useState)(void 0),f=Object(Ke.a)(p,2),h=f[0],g=f[1],b=Object(he.useState)(void 0),y=Object(Ke.a)(b,2),v=y[0],E=y[1],O=Object(Fe.useSelector)(pg()),x=Object(Fe.useSelector)(Ii()),j=dg(),w=Object(Fe.useSelector)(j),k=Object(he.useState)("undefined"),I=Object(Ke.a)(k,2),S=I[0],C=I[1],_=Object(Fe.useDispatch)(),T=decodeURIComponent(e.match.params.link),A=Object(he.useState)(!1),N=Object(Ke.a)(A,2),R=N[0],B=N[1],D=new URLSearchParams(e.location.search),P=!D.has("temp")||1!==parseInt(D.get("temp")+"",void 0),z=D.has("playshot");Object(he.useEffect)(function(){O&&(B(!1),gd(T).then(function(e){g(e);var t=ZN(T),n=w.filter(function(e){return e.name===t});if(P&&0!==n.count())return C(t),void m(!0);U(t,e,P?yA.newBoard:yA.tempBoard)}).catch(function(e){console.error(e),_(i.Command.error("Request failed","Failed to load board. Please check if import link points to a valid prooph board XML file!")),a(!0)}))},[T,O]),Object(he.useEffect)(function(){if(O&&z&&v){var e=decodeURIComponent(D.get("playshot")||"");e&&bd(e).then(function(e){return Fc(Object(Ye.a)({},e,{boardId:v}))}).then(function(e){if(!e)return _(i.Command.error("Failed to save playshot","Failed to save playshot. Please check if import link points to a valid prooph board playshot file!")),void a(!0);B(!0)}).catch(function(e){console.error(e),_(i.Command.error("Failed to load playshot","Failed to load playshot. Please check if import link points to a valid prooph board playshot file!")),a(!0)})}},[v]);var M,U=function(e,t,n){if(n===yA.newBoard){var r=ot.v4();_(L.importNewBoard(e,t,r)),E(r)}else if(n===yA.tempBoard){var a=ot.v4();_(L.importNewBoard(e,t,a,!0)),E(a)}else{var o=w.filter(function(t){return t.name===e});if(o.count()>0){var i=o.first().updateXml(t,x.uid);_(L.importExistingBoard(i)),window.setTimeout(function(){E(i.uid)},50)}}};return!v||1!==w.filter(function(e){return e.uid===v}).count()||z&&!R?r?he.createElement(Ge.c,{to:c}):he.createElement(he.Fragment,null,he.createElement(Mg.a,{active:!0,className:"page"},he.createElement(Ug.a,{size:"large"},"Loading board from ",T)),he.createElement(Ai.a,{open:l,closeIcon:!0,onClose:function(){m(!1)}},he.createElement(Ai.a.Header,null,e.t("insp.board.import")),he.createElement(Ai.a.Content,null,he.createElement(nt.a,{icon:"warning",warning:!0,content:e.t("insp.board.import_existing_board").replace("%name%",S)})),he.createElement(Ai.a.Actions,null,he.createElement(Ni.a,{primary:!0,onClick:function(){m(!1),h&&U(ZN(T)+" (Copy)",h,yA.newBoard)}},he.createElement(Cp.a,{name:"plus"})," ",e.t("insp.board.btn_import_as_new")),he.createElement(Ni.a,{basic:!0,onClick:function(){m(!1),h&&U(ZN(T),h,yA.replaceBoard)}},e.t("insp.board.btn_replace_board"))))):z?he.createElement(Ge.c,{to:(M=v,kt(M)+"?playshots=1")}):he.createElement(Ge.c,{to:kt(v)})})),eL=Object(Ge.o)(function(e){var t=e.history.location.state.href;return window.setTimeout(function(){e.history.replace(t)},500),he.createElement(Mg.a,{active:!0,className:"page"},he.createElement(Ug.a,{size:"large"},"Loading Board"))}),tL=(n(541),n(542),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return 1===e.length&&(e="0"+e),3===e.length&&(e=e.slice(1)),0===parseInt(e,void 0)&&(e=n?"00":""),parseInt(e,void 0)>t&&(e="".concat(t)),e}),nL=function(e){e=Math.floor(Number(e)/1e3);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return t<0&&(t=0),n<0&&(n=0),r<0&&(r=0),[t,n,r]},rL=function(e,t,n){return 60*parseInt(""===e?"0":e,void 0)*60*1e3+60*parseInt(""===t?"0":t,void 0)*1e3+1e3*parseInt(""===n?"0":n,void 0)},aL=function(e,t,n,r,a,o){var i,s=0,c=0,d=0;i=e-Date.now();var u=Math.floor(100*i/t);if(u>50&&"start"!==n&&r("start"),u<=50&&u>5&&"half"!==n&&r("half"),u<=5&&"end"!==n&&r("end"),i>0){var l=nL(i),m=Object(Ke.a)(l,3);s=m[0],c=m[1],d=m[2]}e>0&&i<-1e4&&o(),a([s,c,d])},oL=null,iL=Object(Ge.o)(Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=Object(he.useRef)(null),r=Object(Fe.useSelector)(zO()),a=Object(he.useMemo)(function(){return Ay(e.match.params.uid)},[]),o=Object(Fe.useSelector)(a),i=o&&o.shouldShowTimerModal,s=Object(Fe.useSelector)(Ii()),c=Object(he.useState)(""),d=Object(Ke.a)(c,2),u=d[0],l=d[1],m=Object(he.useState)(""),p=Object(Ke.a)(m,2),f=p[0],h=p[1],g=Object(he.useState)(""),b=Object(Ke.a)(g,2),y=b[0],v=b[1],E=Object(he.useState)(0),O=Object(Ke.a)(E,2),x=O[0],j=O[1],w=Object(he.useState)(0),k=Object(Ke.a)(w,2),I=k[0],S=k[1],C=Object(he.useState)(),_=Object(Ke.a)(C,2),T=_[0],A=_[1],N=Object(he.useState)(!1),L=Object(Ke.a)(N,2),R=L[0],B=L[1],D=Object(he.useState)([0,0,0]),P=Object(Ke.a)(D,2),z=P[0],M=P[1],U=Object(he.useState)(),F=Object(Ke.a)(U,2),G=F[0],q=F[1],V=Object(he.useState)("start"),W=Object(Ke.a)(V,2),H=W[0],$=W[1],J=Object(he.useState)(!1),Q=Object(Ke.a)(J,2),Y=Q[0],K=Q[1],Z=Object(he.useState)(!0),X=Object(Ke.a)(Z,2),ee=X[0],te=X[1],ne=BE(),re=Object(Ke.a)(ne,1)[0];Object(he.useEffect)(function(){i&&window.setTimeout(function(){n&&n.current&&n.current.focus()},200)},[i]);var ae=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=60*parseInt(""===u?"0":u,void 0)*60*1e3,a=60*parseInt(""===f?"0":f,void 0)*1e3,o=1e3*parseInt(""===y?"0":y,void 0);if(G&&!n){var i=Object(Ke.a)(G,3);r=i[0],a=i[1],o=i[2],r=60*r*60*1e3,a=60*a*1e3,o*=1e3}var c=r+a+o;!G||n?S(c):q(void 0);var d=Date.now()+c;j(d),B(!0),M(nL(c)),A(s.uid),te(!1),re.startBoardTimer(hO(e.match.params.uid,d,rL(u,f,y),s.uid)),t(Qd(e.match.params.uid,!1)),aL(d,c,H,$,M,oe)},oe=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];S(0),j(0),B(!1),q(void 0),A(void 0),$("start"),te(!0),t&&re.stopBoardTimer(hO(e.match.params.uid,0,0,""))},ie=function(e){j(e.deadline),S(e.duration),A(e.moderator),B(!0),te(!1),aL(e.deadline,e.duration,H,$,M,oe);var t=nL(e.duration),n=Object(Ke.a)(t,3),r=n[0],a=n[1],o=n[2];console.log("remote time started: ",e.toJSON()),l(tL(r.toString(),23)),h(tL(a.toString(),59)),v(tL(o.toString(),59))},se=function(e){console.log("Received remote timer stopped: ",e.toJSON()),oe(!1)},ce=function(e){B(!1),console.log("remote paused time: ",e.toJSON()),e.pausedTime&&(M(e.pausedTime),q(e.pausedTime))},de=function(e,t,n,r){e===T&&K(!1)},ue=function(e){e===T&&K(!0)};Object(he.useEffect)(function(){return R&&(oL=window.setInterval(function(){aL(x,I,H,$,M,oe)},1e3),aL(x,I,H,$,M,oe)),function(){oL&&clearInterval(oL)}},[R,H,I,x]),Object(he.useEffect)(function(){return console.log("attach listeners"),re.onBoardTimerStarted(ie),re.onBoardTimerStopped(se),re.onBoardTimerPaused(ce),re.onUserJoined(de),re.onUserLeft(ue),function(){console.log("detach listeners"),re.offBoardTimerStarted(ie),re.offBoardTimerPaused(ce),re.offBoardTimerStopped(se),re.offUserJoined(de),re.offUserLeft(ue)}},[e.match.params.uid,u,f,y,T]),Object(he.useEffect)(function(){oe()},[e.match.params.uid]);var le=Object(Ke.a)(z,3),me=le[0],pe=le[1],fe=le[2],ge=me+pe+fe>0,be=T===s.uid,ye=!T||be||Y;return ge||ee||(new Audio("/sound/gong.wav").play(),te(!0)),he.createElement(he.Fragment,null,x>0&&he.createElement("div",{style:{position:"absolute",left:r.width+20+"px",top:"60px",backgroundColor:"rgb(249 251 253 / 52%)",cursor:"pointer"},onClick:function(){return t(Qd(e.match.params.uid,!0))}},he.createElement("p",{style:{padding:"20px",fontWeight:"bold",fontSize:"20px",color:ge?"#939393":"#c10303"},className:ge?"":"blink"},he.createElement(Cp.a,{name:"hourglass "+(ge?H:"end")}),"\xa0\xa0",tL(me.toString(),23,!0),"\xa0:\xa0",tL(pe.toString(),59,!0),"\xa0:\xa0",tL(fe.toString(),59,!0))),he.createElement(Ai.a,{open:i,closeIcon:!0,onClose:function(){t(Qd(e.match.params.uid,!1))},size:"tiny"},he.createElement(Ai.a.Header,null,e.t("insp.board.timer.modal_header")),he.createElement(Ai.a.Content,null,he.createElement("p",{style:{textAlign:"center",fontWeight:"bold",fontSize:"24px"}},he.createElement(kp.a,{name:"hours",transparent:!0,type:"number",min:0,max:23,placeholder:"00",size:"large",style:{width:"55px"},value:x>0?tL(me.toString(),23):u,onKeyDown:function(e){return"Enter"!==e.key||ae()},onChange:function(e,t){return n=t.value,void l(tL(n,23));var n},disabled:x>0}),he.createElement("span",{style:{paddingRight:"20px"}},"\xa0:\xa0"),he.createElement(kp.a,{name:"minutes",ref:n,transparent:!0,type:"number",min:0,max:59,placeholder:"00",size:"large",style:{width:"55px"},value:x>0?tL(pe.toString(),59):f,onKeyDown:function(e){return"Enter"!==e.key||ae()},onChange:function(e,t){return n=t.value,void h(tL(n,59));var n},disabled:x>0}),he.createElement("span",{style:{paddingRight:"20px"}},"\xa0:\xa0"),he.createElement(kp.a,{name:"seconds",transparent:!0,type:"number",min:0,max:59,placeholder:"00",size:"large",style:{width:"55px"},value:x>0?tL(fe.toString(),59):y,onKeyDown:function(e){return"Enter"!==e.key||ae()},onChange:function(e,t){return n=t.value,void v(tL(n,59));var n},disabled:x>0}))),he.createElement(Ai.a.Actions,{style:{textAlign:"center"}},he.createElement(sb.a,null,!R&&he.createElement(Ni.a,{icon:"play",onClick:function(){return ae()},disabled:!ye}),R&&he.createElement(Ni.a,{icon:"pause",onClick:function(){return function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];B(!1),q([me,pe,fe]),t&&re.pauseBoardTimer(hO(e.match.params.uid,x,rL(u,f,y),s.uid,[me,pe,fe]))}()},disabled:!ye}),he.createElement(Ni.a,{icon:"stop",onClick:function(){return oe()},disabled:!R||!ye}),he.createElement(Ni.a,{icon:"undo",onClick:function(){return q(void 0),B(!1),void ae(!0)},disabled:0===x||!ye})))))})),sL=n(1063),cL=function(e){return function(t){return function(e,t){return Object(fe.List)(e.getIn([hT,"playshots"]).toIndexedSeq().toArray()).filter(function(e){return e.boardId===t})}(t,e)}},dL=["_pbBoardId","_pbCardId","_pbCreatedBy","_pbCreatedAt","_pbLastUpdatedBy","_pbLastUpdatedAt","_pbVersion","_pbLink"],uL=function(e){return e._pbCardId};n(1196);var lL,mL=n(1233),pL=function(e){return Object(mL.a)(xe.a.mark(function t(){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:case"end":return t.stop()}},t,this)}))()},fL=function(e){return e.replace("/definitions/","").split("/").map(function(e){return Nl(e).className}).join(".")},hL=function(e){return"/"+e.split(".").slice(1).join("/")},gL=function(e){var t=bL(e);return t||e},bL=function(e){return Kl(e)?yL(e):Yl(e)?xL(e):Xl(e)?EL(e):!!Zl(e)&&vL(e)},yL=function(e){var t=e.required||[];if(!e.properties)return!1;var n={};for(var r in e.properties){var a=bL(e.properties[r]);if(!1===a)return!1;t.includes(r)||(r+="?"),n[r]=a}return e.title&&(n.$title=e.title),e.default&&(n.$default=e.default),n},vL=function(e){var t=Object(Ye.a)({},e);if(!Zl(e))return!1;var n=t.type;if(delete t.type,t.enum)return"enum:".concat(t.enum.join(","));var r=Object.keys(t),a=n;return r.forEach(function(e){a+="|".concat(e,":").concat(t[e])}),a},EL=function(e){if(!e.$ref)return!1;if(e.$ref.includes(":"))return OL(e);var t=fL(e.$ref),n={$ref:hL(t)};return e.title&&(n.$title=e.title),e.default&&(n.$default=e.default),n},OL=function(e){if(!e.$ref)return!1;if(!e.$ref.includes(":"))return!1;var t=e.$ref.split(":"),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=fL(r);return{$ref:hL(o)+":".concat(a)}},xL=function(e){if(!Yl(e))return!1;var t=bL(e.items);if(!t)return!1;var n={};return n="object"===typeof t&&t.$ref?{$items:t.$ref}:{$items:t},e.title&&(n.$title=e.title),e.default&&(n.$default=e.default),n},jL=function(e,t){return e.service||kL(t)},wL=function(e){var t=e.split(".").pop();return Object(zn.startCase)(t||"")},kL=function(e){return e.playConfig.defaultService||"App"},IL=function(e,t){"string"!==typeof t&&(t=t.playConfig.defaultService);var n=e.split(".");return n.length&&n[0]===t&&n.shift(),n.join(".")},SL=function(e){var t=Object.values(e);if(0===t.length)return{x:100,y:400};var n=t.pop();return{x:n.getGeometry().x+n.getSize().width+200,y:400}},CL=function(e,t){var n=e.getGeometry(),r=e.getSize();return{x:n.x+r.width+("undefined"===typeof t?200:t),y:n.y}},_L=function(e,t){var n=e.getGeometry(),r=e.getSize();return{x:n.x,y:n.y+r.height+("undefined"===typeof t?200:t)}},TL=function(e,t,n){var r=e.getGeometry(),a=e.getSize();return{x:r.x+a.width+("undefined"===typeof t?100:t),y:r.y+a.height+("undefined"===typeof n?200:n)}},AL=function(e,t){return{desc:Object(zn.omit)(e.desc,dL),schema:gL(e.schema),uiSchema:e.uiSchema,factory:e.factory,rules:t}},NL=function(){function e(t,n,r,a){Object(Be.a)(this,e),this.name=void 0,this.type="NewCommand",this.operation="added",this.nodeId=void 0,this.nodeType=Dc.command,this.diff=void 0,this.newCommand=void 0;var o=a.playConfig.commandHandlers[r.desc.name]||[];this.name=t,this.nodeId=n,this.diff={new:AL(r,o),old:null},this.newCommand=r}return Object(De.a)(e,[{key:"apply",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i,s;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.syncContext,r=t.graph,a=t.playshot,o=t.addedNodes,t.elementsTree,!o[this.nodeId]){e.next=3;break}return e.abrupt("return",pL({cody:"",type:XE.Empty}));case 3:if(!r.getNode(this.nodeId)){e.next=6;break}return e.abrupt("return",pL({cody:"Hhm, I'm skipping the change \"".concat(Object(zn.startCase)(this.type),": ").concat(IL(this.name,a),'", because the command seems to exist already on the board.'),details:"There is at least an element on the board with ID: ".concat(this.nodeId),type:XE.Warning}));case 6:return i=a.playConfig.commandHandlers[this.name]||[],s=Wm({id:this.nodeId,type:Dc.command,name:wL(this.name),metadata:Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},this.newCommand.desc,{schema:gL(this.newCommand.schema),uiSchema:this.newCommand.uiSchema,rules:i}),["name"].concat(Object(eo.a)(dL))))}),r.addNode(s),r.switchParent(s,n,SL(o),!0),r.focusNode(s),o[s.getId()]=r.getNode(s.getId())||s,e.abrupt("return",pL({cody:"I've added a command card for \"".concat(wL(this.name),'" to the board')}));case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),LL=function(e,t,n,r,a){var o=r.getNode(e);if(o)return o;var i=function(e){return e.split(".").shift()||"App"}(t);return a.getFilteredElementsByTypeAndLabel(n,wL(t),i).first(null)},RL=function(){function e(t,n,r,a,o){Object(Be.a)(this,e),this.name=void 0,this.type="CommandMetadataChanged",this.operation="changed",this.nodeId=void 0,this.nodeType=Dc.command,this.diff=void 0,this.changedCommand=void 0;var i=a.playConfig.commandHandlers[r.desc.name]||[],s=o.playConfig.commands[r.desc.name];s||(s=r);var c=o.playConfig.commandHandlers[r.desc.name]||[];this.name=t,this.nodeId=n,this.diff={new:AL(r,i),old:AL(s,c)},this.changedCommand=r}return Object(De.a)(e,[{key:"apply",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i,s;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.syncContext,n=t.graph,r=t.playshot,a=t.addedNodes,o=t.elementsTree,!a[this.nodeId]){e.next=3;break}return e.abrupt("return",pL({cody:"",type:XE.Empty}));case 3:if(i=LL(this.nodeId,this.name,Dc.command,n,o)){e.next=6;break}return e.abrupt("return",pL({cody:"Hhm, I'm skipping the change \"".concat(Object(zn.startCase)(this.type),": ").concat(IL(this.name,r),'", because the command cannot be found on the board.'),details:"There is no element on the board with ID: ".concat(this.nodeId),type:XE.Warning}));case 6:return s=r.playConfig.commandHandlers[this.name]||[],n.changeNodeMetadata(i,Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},this.changedCommand.desc,{schema:gL(this.changedCommand.schema),uiSchema:this.changedCommand.uiSchema,rules:s}),["name"].concat(Object(eo.a)(dL))))),n.focusNode(i),e.abrupt("return",pL({cody:"I've updated metadata of command card \"".concat(wL(this.name),'".')}));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),BL=function(){function e(t,n,r,a,o,i){Object(Be.a)(this,e),this.name=void 0,this.type="CommandRenamed",this.operation="changed",this.nodeId=void 0,this.nodeType=Dc.command,this.diff=void 0,this.changedCommand=void 0,this.oldName=void 0,this.newName=void 0,this.newName=t,this.oldName=a.desc.name;var s=o.playConfig.commandHandlers[r.desc.name]||[],c=i.playConfig.commands[this.oldName];c||(c=r);var d=i.playConfig.commandHandlers[this.oldName]||[];this.name=this.newName,this.nodeId=n,this.diff={new:AL(r,s),old:AL(c,d)},this.changedCommand=r}return Object(De.a)(e,[{key:"apply",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i,s,c,d,u=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.syncContext,n=t.graph,r=t.playshot,a=t.addedNodes,o=t.elementsTree,!a[this.nodeId]){e.next=3;break}return e.abrupt("return",pL({cody:"",type:XE.Empty}));case 3:if(i=LL(this.nodeId,this.name,Dc.command,n,o)){e.next=6;break}return e.abrupt("return",pL({cody:"Hhm, I'm skipping the change \"".concat(Object(zn.startCase)(this.type),": ").concat(IL(this.name,r),'", because the command cannot be found on the board.'),details:"There is no element on the board with ID: ".concat(this.nodeId),type:XE.Warning}));case 6:return s=r.playConfig.commandHandlers[this.name]||[],c=jL(this.changedCommand.desc,r),n.changeNodeMetadata(i,Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},this.changedCommand.desc,{service:c,schema:gL(this.changedCommand.schema),uiSchema:this.changedCommand.uiSchema,rules:s}),["name"].concat(Object(eo.a)(dL))))),d=o.getSimilarElements(i),n.changeNodeName(i,wL(this.newName)),d.forEach(function(e){n.changeNodeName(e,wL(u.newName))}),n.focusNode(i),e.abrupt("return",pL({cody:"I've renamed the command \"".concat(wL(this.newName),'" and updated its metadata.')}));case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),DL=function(e,t){return{name:e,func:t}},PL=function(){var e=Object(je.a)(xe.a.mark(function e(t){var n;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,e.abrupt("return",Object(Xy.a)({},Symbol.asyncIterator,function(){return{next:function(){var e=Object(je.a)(xe.a.mark(function e(){var r,a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.shift())||n){e.next=9;break}return e.next=4,r.func();case 4:return a=e.sent,n=a.type===XE.Error,e.abrupt("return",new Promise(function(e){window.setTimeout(function(){e({done:!1,value:a})},t.length>0&&a.type===XE.Info||!a.type?_R:0)}));case 9:return e.abrupt("return",new Promise(function(e){e({done:!0,value:{cody:"All tasks applied!"}})}));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),zL=function(){function e(t,n,r,a){Object(Be.a)(this,e),this.name=void 0,this.type="CommandRemoved",this.operation="removed",this.nodeId=void 0,this.nodeType=Dc.command,this.diff=void 0;var o=a.playConfig.commandHandlers[r.desc.name]||[];this.name=t,this.nodeId=n,this.diff={new:null,old:AL(r,o)}}return Object(De.a)(e,[{key:"apply",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i,s,c,d=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.syncContext,n=t.graph,r=t.playshot,a=t.addedNodes,o=t.elementsTree,!a[this.nodeId]){e.next=3;break}return e.abrupt("return",pL({cody:"",type:XE.Empty}));case 3:if(i=LL(this.nodeId,this.name,Dc.command,n,o)){e.next=6;break}return e.abrupt("return",pL({cody:"Hhm, I'm skipping the change \"".concat(Object(zn.startCase)(this.type),": ").concat(IL(this.name,r),'", because the command cannot be found on the board.'),details:"There is no element on the board with ID: ".concat(this.nodeId),type:XE.Warning}));case 6:return s=o.getSimilarElements(i),c=[{name:"Focus command to remove",func:function(){var e=Object(je.a)(xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.focusNode(i),e.abrupt("return",{cody:"",type:XE.Empty});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{name:"Remove command",func:function(){var e=Object(je.a)(xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){window.setTimeout(function(){n.deleteNode(i),e({cody:"I've removed the command card for \"".concat(wL(d.name),'" from the board')})},1500)}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}],s.forEach(function(e){c.push({name:"Focus command to remove",func:function(){var t=Object(je.a)(xe.a.mark(function t(){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.focusNode(e),t.abrupt("return",{cody:"",type:XE.Empty});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}),c.push({name:"Remove command",func:function(){var t=Object(je.a)(xe.a.mark(function t(){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){window.setTimeout(function(){n.deleteNode(e),t({cody:"",type:XE.Empty})},1500)}));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})}),e.abrupt("return",PL(c));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),ML=function(e,t){return{desc:Object(zn.omit)(e.desc,dL),schema:gL(e.schema),factory:e.factory,applyRules:t}},UL=function(){function e(t,n,r,a){Object(Be.a)(this,e),this.name=void 0,this.type="NewEvent",this.operation="added",this.nodeId=void 0,this.nodeType=Dc.event,this.diff=void 0,this.newEvent=void 0;this.name=t,this.nodeId=n,this.diff={new:ML(r,void 0),old:null},this.newEvent=r}return Object(De.a)(e,[{key:"apply",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.syncContext,r=t.graph,a=t.playshot,o=t.addedNodes,t.elementsTree,!o[this.nodeId]){e.next=3;break}return e.abrupt("return",pL({cody:"",type:XE.Empty}));case 3:if(!r.getNode(this.nodeId)){e.next=6;break}return e.abrupt("return",pL({cody:"Hhm, I'm skipping the change \"".concat(Object(zn.startCase)(this.type),": ").concat(IL(this.name,a),'", because the event seems to exist already on the board.'),details:"There is at least an element on the board with ID: ".concat(this.nodeId),type:XE.Warning}));case 6:return i=Wm({id:this.nodeId,type:Dc.event,name:wL(this.name),metadata:Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},this.newEvent.desc,{schema:gL(this.newEvent.schema)}),["name"].concat(Object(eo.a)(dL))))}),r.addNode(i),r.switchParent(i,n,SL(o),!0),r.focusNode(i),o[i.getId()]=r.getNode(i.getId())||i,e.abrupt("return",pL({cody:"I've added an event card for \"".concat(wL(this.name),'" to the board')}));case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),FL=function(){function e(t,n,r,a,o){Object(Be.a)(this,e),this.name=void 0,this.type="EventMetadataChanged",this.operation="changed",this.nodeId=void 0,this.nodeType=Dc.event,this.diff=void 0,this.changedEvent=void 0;var i=o.playConfig.events[r.desc.name];i||(i=r),this.name=t,this.nodeId=n,this.diff={new:ML(r,void 0),old:ML(i,void 0)},this.changedEvent=r}return Object(De.a)(e,[{key:"apply",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.syncContext,n=t.graph,r=t.playshot,a=t.addedNodes,o=t.elementsTree,!a[this.nodeId]){e.next=3;break}return e.abrupt("return",pL({cody:"",type:XE.Empty}));case 3:if(i=LL(this.nodeId,this.name,Dc.event,n,o)){e.next=6;break}return e.abrupt("return",pL({cody:"Hhm, I'm skipping the change \"".concat(Object(zn.startCase)(this.type),": ").concat(IL(this.name,r),'", because the event cannot be found on the board.'),details:"There is no element on the board with ID: ".concat(this.nodeId),type:XE.Warning}));case 6:return void 0,n.changeNodeMetadata(i,Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},this.changedEvent.desc,{schema:gL(this.changedEvent.schema)}),["name"].concat(Object(eo.a)(dL))))),n.focusNode(i),e.abrupt("return",pL({cody:"I've changed event metadata of \"".concat(wL(this.name),'".')}));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),GL=function(){function e(t,n,r,a,o,i){Object(Be.a)(this,e),this.name=void 0,this.type="EventRenamed",this.operation="changed",this.nodeId=void 0,this.nodeType=Dc.event,this.diff=void 0,this.changedEvent=void 0,this.oldName=void 0,this.newName=void 0,this.newName=t,this.oldName=a.desc.name;this.name=t,this.nodeId=n,this.diff={new:ML(r,void 0),old:ML(a,void 0)},this.changedEvent=r}return Object(De.a)(e,[{key:"apply",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i,s,c,d=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.syncContext,n=t.graph,r=t.playshot,a=t.addedNodes,o=t.elementsTree,!a[this.nodeId]){e.next=3;break}return e.abrupt("return",pL({cody:"",type:XE.Empty}));case 3:if(i=LL(this.nodeId,this.name,Dc.event,n,o)){e.next=6;break}return e.abrupt("return",pL({cody:"Hhm, I'm skipping the change \"".concat(Object(zn.startCase)(this.type),": ").concat(IL(this.name,r),'", because the event cannot be found on the board.'),details:"There is no element on the board with ID: ".concat(this.nodeId),type:XE.Warning}));case 6:return void 0,s=jL(this.changedEvent.desc,r),n.changeNodeMetadata(i,Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},this.changedEvent.desc,{service:s,schema:gL(this.changedEvent.schema)}),["name"].concat(Object(eo.a)(dL))))),c=o.getSimilarElements(i),n.changeNodeName(i,wL(this.newName)),c.forEach(function(e){n.changeNodeName(e,wL(d.newName))}),n.focusNode(i),e.abrupt("return",pL({cody:"I've renamed the event \"".concat(wL(this.name),'" and updated its metadata.')}));case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),qL=function(){function e(t,n,r,a){Object(Be.a)(this,e),this.name=void 0,this.type="EventRemoved",this.operation="removed",this.nodeId=void 0,this.nodeType=Dc.event,this.diff=void 0;this.name=t,this.nodeId=n,this.diff={new:null,old:ML(r,void 0)}}return Object(De.a)(e,[{key:"apply",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i,s,c,d=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.syncContext,n=t.graph,r=t.playshot,a=t.addedNodes,o=t.elementsTree,!a[this.nodeId]){e.next=3;break}return e.abrupt("return",pL({cody:"",type:XE.Empty}));case 3:if(i=LL(this.nodeId,this.name,Dc.event,n,o)){e.next=6;break}return e.abrupt("return",pL({cody:"Hhm, I'm skipping the change \"".concat(Object(zn.startCase)(this.type),": ").concat(IL(this.name,r),'", because the event cannot be found on the board.'),details:"There is no element on the board with ID: ".concat(this.nodeId),type:XE.Warning}));case 6:return s=o.getSimilarElements(i),c=[{name:"Focus event to remove",func:function(){var e=Object(je.a)(xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.focusNode(i),e.abrupt("return",{cody:"",type:XE.Empty});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{name:"Remove event",func:function(){var e=Object(je.a)(xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){window.setTimeout(function(){n.deleteNode(i),e({cody:"I've removed the event card for \"".concat(wL(d.name),'" from the board')})},1500)}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}],s.forEach(function(e){c.push({name:"Focus event to remove",func:function(){var t=Object(je.a)(xe.a.mark(function t(){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.focusNode(e),t.abrupt("return",{cody:"",type:XE.Empty});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}),c.push({name:"Remove event",func:function(){var t=Object(je.a)(xe.a.mark(function t(){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){window.setTimeout(function(){n.deleteNode(e),t({cody:"",type:XE.Empty})},1500)}));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})}),e.abrupt("return",PL(c));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),VL=function(e){function t(e){var n;return Object(Be.a)(this,t),(n=Object(Pe.a)(this,Object(ze.a)(t).call(this))).codyResponse=void 0,n.codyResponse=e,n}return Object(Me.a)(t,e),t}(Object(tv.a)(Error)),WL=function(e,t){var n,r=e.apply(e,t);if((n=r)&&"object"===typeof n&&n.hasOwnProperty("cody")&&n.hasOwnProperty("type")&&n.type===XE.Error)throw new VL(r);return r},HL=function(e,t){var n,r;return Object.values(t.playConfig.queries).forEach(function(t){t.desc.returnType===e.desc.name&&(n=t)}),n&&(r=t.playConfig.resolvers[n.desc.name]),{desc:Object(zn.omit)(e.desc,dL),schema:gL(e.schema),uiSchema:e.uiSchema,initialize:e.factory,querySchema:n?gL(n.schema):void 0,resolve:r,projection:$L(e,t)}},$L=function(e,t){if(e.desc.projection){var n=e.desc.projection,r=[],a=!0;for(var o in t.playConfig.eventPolicies){var i=t.playConfig.eventPolicies[o];i[n]&&(a=!!i[n].live,r.push(WL(JL,[{eventName:o,desc:i[n]}])))}if(0!==r.length)return{name:n,live:a,cases:r}}},JL=function(e){var t=(e=Bc(e)).desc.rules,n=t.pop();if(!n)return{cody:"Can't resolve projection configuartion for \"".concat(e.desc.projection,'". The event case "').concat(e.eventName,'" has no rules defined.'),details:"Either the playshot config is broken or it is a bug in Cody Play. If you can't resolve the issue yourself, please contact the prooph board team!",type:XE.Error};var r=t.length>0?t:void 0,a=WL(YL,[n.then,e]);return{given:r,when:e.eventName,then:a}},QL=["insert","upsert","update","replace","delete"],YL=function(e,t){var n=Object.keys(e).pop()||"";return QL.includes(n)?Object(Xy.a)({},n,Object(zn.omit)(e[n],"information")):{cody:"Can't resolve projection configuartion for \"".concat(t.desc.projection,'". The event case "').concat(t.eventName,'" has no valid rules defined.'),details:"Either the playshot config is broken or it is a bug in Cody Play. If you can't resolve the issue yourself, please contact the prooph board team!",type:XE.Error}},KL=function(){function e(t,n,r,a){Object(Be.a)(this,e),this.name=void 0,this.type="NewInformation",this.operation="added",this.nodeId=void 0,this.nodeType=Dc.document,this.diff=void 0,this.newInformation=void 0,this.name=t,this.nodeId=n,this.newInformation=HL(r,a),this.diff={new:this.newInformation,old:null}}return Object(De.a)(e,[{key:"apply",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.syncContext,r=t.graph,a=t.playshot,o=t.addedNodes,t.elementsTree,!o[this.nodeId]){e.next=3;break}return e.abrupt("return",pL({cody:"",type:XE.Empty}));case 3:if(!r.getNode(this.nodeId)){e.next=6;break}return e.abrupt("return",pL({cody:"Hhm, I'm skipping the change \"".concat(Object(zn.startCase)(this.type),": ").concat(IL(this.name,a),'", because the information seems to exist already on the board.'),details:"There is at least an element on the board with ID: ".concat(this.nodeId),type:XE.Warning}));case 6:return i=Wm({id:this.nodeId,type:Dc.document,name:wL(this.name),metadata:Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},this.newInformation.desc,{schema:this.newInformation.schema,uiSchema:this.newInformation.uiSchema,querySchema:this.newInformation.querySchema,resolve:this.newInformation.resolve,projection:this.newInformation.projection,initialize:this.newInformation.initialize}),["name"]))}),r.addNode(i),r.switchParent(i,n,SL(o),!0),r.focusNode(i),o[i.getId()]=r.getNode(i.getId())||i,e.abrupt("return",pL({cody:"I've added an information card for \"".concat(wL(this.name),'" to the board')}));case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),ZL=function(){function e(t,n,r,a,o){Object(Be.a)(this,e),this.name=void 0,this.type="InformationMetadataChanged",this.operation="changed",this.nodeId=void 0,this.nodeType=Dc.document,this.diff=void 0,this.changedInformation=void 0;var i=o.playConfig.types[r.desc.name];i||(i=r),this.name=t,this.nodeId=n,this.diff={new:HL(r,a),old:HL(i,o)},this.changedInformation=HL(r,a)}return Object(De.a)(e,[{key:"apply",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.syncContext,n=t.graph,r=t.playshot,a=t.addedNodes,o=t.elementsTree,!a[this.nodeId]){e.next=3;break}return e.abrupt("return",pL({cody:"",type:XE.Empty}));case 3:if(i=LL(this.nodeId,this.name,Dc.document,n,o)){e.next=6;break}return e.abrupt("return",pL({cody:"Hhm, I'm skipping the change \"".concat(Object(zn.startCase)(this.type),": ").concat(IL(this.name,r),'", because the information cannot be found on the board.'),details:"There is no element on the board with ID: ".concat(this.nodeId),type:XE.Warning}));case 6:return n.changeNodeMetadata(i,Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},this.changedInformation.desc,{schema:this.changedInformation.schema,uiSchema:this.changedInformation.uiSchema,querySchema:this.changedInformation.querySchema,resolve:this.changedInformation.resolve,projection:this.changedInformation.projection,initialize:this.changedInformation.initialize}),["name"]))),n.focusNode(i),e.abrupt("return",pL({cody:"I've updated metadata of information card \"".concat(wL(this.name),'".')}));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),XL=function(){function e(t,n,r,a,o,i){Object(Be.a)(this,e),this.name=void 0,this.type="InformationRenamed",this.operation="changed",this.nodeId=void 0,this.nodeType=Dc.document,this.diff=void 0,this.changedInformation=void 0,this.oldName=void 0,this.newName=void 0,this.newName=t,this.oldName=a.desc.name,this.name=this.newName,this.nodeId=n,this.diff={new:HL(r,o),old:HL(a,i)},this.changedInformation=HL(r,o)}return Object(De.a)(e,[{key:"apply",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i,s,c=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.syncContext,n=t.graph,r=t.playshot,a=t.addedNodes,o=t.elementsTree,!a[this.nodeId]){e.next=3;break}return e.abrupt("return",pL({cody:"",type:XE.Empty}));case 3:if(i=LL(this.nodeId,this.name,Dc.document,n,o)){e.next=6;break}return e.abrupt("return",pL({cody:"Hhm, I'm skipping the change \"".concat(Object(zn.startCase)(this.type),": ").concat(IL(this.name,r),'", because the information cannot be found on the board.'),details:"There is no element on the board with ID: ".concat(this.nodeId),type:XE.Warning}));case 6:return jL(this.changedInformation.desc,r),n.changeNodeMetadata(i,Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},this.changedInformation.desc,{schema:this.changedInformation.schema,uiSchema:this.changedInformation.uiSchema,querySchema:this.changedInformation.querySchema,resolve:this.changedInformation.resolve,projection:this.changedInformation.projection,initialize:this.changedInformation.initialize}),["name"]))),s=o.getSimilarElements(i),n.changeNodeName(i,wL(this.newName)),s.forEach(function(e){n.changeNodeName(e,wL(c.newName))}),n.focusNode(i),e.abrupt("return",pL({cody:"I've renamed the information \"".concat(wL(this.newName),'" and updated its metadata.')}));case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),eR=function(){function e(t,n,r,a){Object(Be.a)(this,e),this.name=void 0,this.type="InformationRemoved",this.operation="removed",this.nodeId=void 0,this.nodeType=Dc.document,this.diff=void 0,this.name=t,this.nodeId=n,this.diff={new:null,old:HL(r,a)}}return Object(De.a)(e,[{key:"apply",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i,s,c,d=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.syncContext,n=t.graph,r=t.playshot,a=t.addedNodes,o=t.elementsTree,!a[this.nodeId]){e.next=3;break}return e.abrupt("return",pL({cody:"",type:XE.Empty}));case 3:if(i=LL(this.nodeId,this.name,Dc.document,n,o)){e.next=6;break}return e.abrupt("return",pL({cody:"Hhm, I'm skipping the change \"".concat(Object(zn.startCase)(this.type),": ").concat(IL(this.name,r),'", because the information cannot be found on the board.'),details:"There is no element on the board with ID: ".concat(this.nodeId),type:XE.Warning}));case 6:return s=o.getSimilarElements(i),c=[{name:"Focus information to remove",func:function(){var e=Object(je.a)(xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.focusNode(i),e.abrupt("return",{cody:"",type:XE.Empty});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{name:"Remove information",func:function(){var e=Object(je.a)(xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){window.setTimeout(function(){n.deleteNode(i),e({cody:"I've removed the information card for \"".concat(wL(d.name),'" from the board')})},1500)}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}],s.forEach(function(e){c.push({name:"Focus information to remove",func:function(){var t=Object(je.a)(xe.a.mark(function t(){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.focusNode(e),t.abrupt("return",{cody:"",type:XE.Empty});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}),c.push({name:"Remove information",func:function(){var t=Object(je.a)(xe.a.mark(function t(){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){window.setTimeout(function(){n.deleteNode(e),t({cody:"",type:XE.Empty})},1500)}));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})}),e.abrupt("return",PL(c));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),tR=function(e){return"undefined"!==typeof e.if},nR=function(e){return"undefined"!==typeof e.if_not},rR=function(e,t){return e.map(function(e){return aR(e,t)})},aR=function(e,t){var n=Object(Ye.a)({},e);return(tR(e)||nR(e))&&e.else&&(tR(n)||nR(n))&&(n.else=oR(e.else,t)),n.then=oR(e.then,t),n},oR=function e(t,n){return function(e){return"undefined"!==typeof e.execute}(t=n(t))?{execute:{rules:rR(t.execute.rules,n)}}:function(e){return"undefined"!==typeof e.forEach}(t)?{forEach:{then:e(t.forEach.then,n),variable:t.forEach.variable}}:t},iR=function(e,t){var n=t.playConfig.views[e];if(n)return t.playConfig.types[n.information]},sR=function(){var e=Object(je.a)(xe.a.mark(function e(t,n,r){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],{},cR(n,r).forEach(function(e){a.push.apply(a,Object(eo.a)(uR(e,n,r)))}),0===a.length&&a.push(ER(t,n,r)),e.abrupt("return",PL(a));case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),cR=function(e,t){var n=[];return n.push.apply(n,Object(eo.a)(e.commands.filter(function(e){return"string"===typeof e||"command"===e.type}).map(function(e){var n="string"===typeof e?e:e.command;return t.playshot.playConfig.commands[n]}).filter(function(e){return e}))),e.components.forEach(function(e){if("string"!==typeof e){e.uiSchema&&n.push.apply(n,Object(eo.a)(dR(e.uiSchema,t)));var r=iR(e.view,t.playshot);r&&n.push.apply(n,Object(eo.a)(dR(r.uiSchema||{},t)))}else{var a=iR(e,t.playshot);a&&n.push.apply(n,Object(eo.a)(dR(a.uiSchema||{},t)))}}),n},dR=function(e,t){var n=[];e["ui:options"]&&e["ui:options"].actions&&e["ui:options"].actions.forEach(function(e){var r;(!(r=e).type&&r.command||"command"===r.type)&&t.playshot.playConfig.commands[e.command]&&n.push(t.playshot.playConfig.commands[e.command])});return n},uR=function(e,t,n){var r=[],a=uL(e.desc);if(n.graph.getNode(a))return r;var o={events:[]};return r.push(hR(e,o,n)),r.push(gR(t,o,n)),r.push(bR(e,o,n)),function(e,t){var n=t.playshot.playConfig.commandHandlers[e.desc.name]||[],r=[];return rR(n,function(e){if(function(e){return"undefined"!==typeof e.record}(e)){var n=t.playshot.playConfig.events[e.record.event];n&&r.push(n)}return e}),r}(e,n).forEach(function(e){var t={info:e};r.push(yR(t,o,n));var a=n.playshot.playConfig.eventPolicies[e.desc.name]||{};Object.values(a).forEach(function(e){if(e.projection){var a=Object.values(n.playshot.playConfig.types).filter(function(t){return t.desc.projection===e.projection}).shift();a&&r.push.apply(r,Object(eo.a)(lR(t,a,n)))}})}),r},lR=function(e,t,n){var r,a=[],o=n.playshot.playConfig.views;for(var i in o)o[i].information===t.desc.name&&(r=i);return Object.values(n.playshot.playConfig.pages).filter(function(e){var t=!0,n=!1,a=void 0;try{for(var o,i=e.components[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;return("string"===typeof s?s:s.view)===r}}catch(c){n=!0,a=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}}).forEach(function(r){var o={views:[]};a.push(mR(t,r,o,n)),a.push(pR(t,e,o,n)),a.push(fR(r,o,n))}),a},mR=function(e,t,n,r){return DL("ViewInformationSliceFrameTask",Object(je.a)(xe.a.mark(function a(){return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n.slice=Wm({id:r.graph.createCellId(),type:Dc.feature,name:"View ".concat(wL(e.desc.name)),size:{width:520,height:900}}),r.graph.addNode(n.slice),r.graph.switchParent(n.slice,r.syncContext,SL(r.addedNodes),!0),r.graph.focusNode(n.slice),r.addedNodes[n.slice.getId()]=r.graph.getNode(n.slice.getId())||n.slice,a.abrupt("return",{cody:"I've added a view slice that documents what information is shown on page \"".concat(wL(t.name),'".'),type:XE.Info});case 6:case"end":return a.stop()}},a,this)})))},pR=function(e,t,n,r){return DL("ViewSliceInformationTask",Object(je.a)(xe.a.mark(function a(){var o,i,s,c,d;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=uL(e.desc),i=r.graph.getNode(o)?r.graph.createCellId():o,s=HL(e,r.playshot),c=Wm({id:i,type:Dc.document,name:wL(e.desc.name),metadata:Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},s.desc,{schema:s.schema,uiSchema:s.uiSchema,querySchema:s.querySchema,resolve:s.resolve,projection:s.projection,initialize:s.initialize}),["name"]))}),d={x:t.node.getParent().getGeometry().x+t.node.getGeometry().x+150,y:400+t.node.getGeometry().y-100},r.graph.addNode(c),r.graph.switchParent(c,n.slice,{x:100,y:125+bS+175},!0),r.graph.focusNode(c),r.graph.connectNodes(t.node,c,void 0,[d],!0),vR(c,n.slice,r),n.views.push(r.graph.getNode(i)||c),a.abrupt("return",{cody:"I've added an information card for \"".concat(wL(e.desc.name),'" to the board')});case 12:case"end":return a.stop()}},a,this)})))},fR=function(e,t,n){return DL("ViewSlicePageTask",Object(je.a)(xe.a.mark(function r(){var a,o;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=Wm({id:n.graph.createCellId(),type:Dc.ui,name:wL(e.name),metadata:Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},e,{views:e.components}),["name","topLevel","components"].concat(Object(eo.a)(dL))))}),o=t.views[t.views.length-1],n.graph.addNode(a),n.graph.switchParent(a,t.slice,{x:o.getGeometry().x+160,y:125},!0),n.graph.focusNode(a),t.page=n.graph.getNode(a.getId())||a,t.views.forEach(function(e){n.graph.connectNodes(e,a,void 0,[{x:t.page.getGeometry().x-80,y:t.page.getGeometry().y+t.page.getSize().height+100}],!0)}),vR(t.page,t.slice,n),r.abrupt("return",{cody:"I've added a UI card for the new page \"".concat(wL(e.name),'" to the slice "').concat(t.slice.getName(),'"'),type:XE.Info});case 9:case"end":return r.stop()}},r,this)})))},hR=function(e,t,n){return DL("AddCommandSliceFrameTask",Object(je.a)(xe.a.mark(function r(){return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.slice=Wm({id:n.graph.createCellId(),type:Dc.feature,name:wL(e.desc.name),size:{width:520,height:900}}),n.graph.addNode(t.slice),n.graph.switchParent(t.slice,n.syncContext,SL(n.addedNodes),!0),n.graph.focusNode(t.slice),n.addedNodes[t.slice.getId()]=n.graph.getNode(t.slice.getId())||t.slice,r.abrupt("return",{cody:"I've added a command slice that documents how the command \"".concat(wL(e.desc.name),'" is processed.'),type:XE.Info});case 6:case"end":return r.stop()}},r,this)})))},gR=function(e,t,n){return DL("AddCommandSlicePageTask",Object(je.a)(xe.a.mark(function r(){var a;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=Wm({id:n.graph.createCellId(),type:Dc.ui,name:wL(e.name),metadata:Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},e,{views:e.components}),["name","topLevel","components"].concat(Object(eo.a)(dL))))}),n.graph.addNode(a),n.graph.switchParent(a,t.slice,{x:100,y:125},!0),n.graph.focusNode(a),t.page=n.graph.getNode(a.getId())||a,vR(t.page,t.slice,n),r.abrupt("return",{cody:"I've added a UI card for the new page \"".concat(wL(e.name),'" to the command slice "').concat(t.slice.getName(),'"'),type:XE.Info});case 7:case"end":return r.stop()}},r,this)})))},bR=function(e,t,n){return DL("CommandSliceCommandTask",Object(je.a)(xe.a.mark(function r(){var a,o;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=n.playshot.playConfig.commandHandlers[e.desc.name]||[],o=Wm({id:uL(e.desc),type:Dc.command,name:wL(e.desc.name),metadata:Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},e.desc,{schema:gL(e.schema),uiSchema:e.uiSchema,rules:a}),["name"].concat(Object(eo.a)(dL))))}),n.graph.addNode(o),n.graph.switchParent(o,t.slice,_L(t.page,175),!0),n.graph.focusNode(o),t.command=n.graph.getNode(o.getId())||o,n.graph.connectNodes(t.page,t.command),vR(t.command,t.slice,n),r.abrupt("return",{cody:"I've added a command card for \"".concat(wL(e.desc.name),'" to the board'),type:XE.Info});case 9:case"end":return r.stop()}},r,this)})))},yR=function(e,t,n){var r=uL(e.info.desc),a=n.graph.getNode(r)?n.graph.createCellId():r;return DL("CommandSliceEventTask",Object(je.a)(xe.a.mark(function r(){var o,i,s;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=Wm({id:a,type:Dc.event,name:wL(e.info.desc.name),metadata:Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},e.info.desc,{schema:gL(e.info.schema)}),["name"].concat(Object(eo.a)(dL))))}),i=t.events.length>0?CL(t.events[t.events.length-1],50):TL(t.command,0),n.graph.addNode(o),n.graph.switchParent(o,t.slice,i,!0),n.graph.focusNode(o),n.graph.connectNodes(t.command,o,void 0,[{x:i.x-80,y:i.y-100}],!0),s=n.graph.getNode(o.getId())||o,t.events.push(s),vR(s,t.slice,n),e.node=s,r.abrupt("return",{cody:"I've added the event \"".concat(wL(e.info.desc.name),'". It records the result of processing command "').concat(t.command.getName(),'".'),type:XE.Info});case 11:case"end":return r.stop()}},r,this)})))},vR=function(e,t,n){var r=n.addedNodes[t.getId()];delete n.addedNodes[r.getId()],n.addedNodes[e.getId()]=e,n.addedNodes[r.getId()]=r},ER=function(e,t,n){return DL("AddPageTask",Object(je.a)(xe.a.mark(function r(){var a;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!n.graph.getNode(e)){r.next=3;break}return r.abrupt("return",{cody:"Hhm, I'm skipping the change \"New Page: ".concat(wL(t.name),'", because the UI card seems to exist already on the board.'),details:"There is at least an element on the board with ID: ".concat(e),type:XE.Warning});case 3:return a=Wm({id:e,type:Dc.ui,name:wL(t.name),metadata:Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},t,{views:t.components}),["name","topLevel","components"].concat(Object(eo.a)(dL))))}),n.graph.addNode(a),n.graph.switchParent(a,n.syncContext,SL(n.addedNodes),!0),n.graph.focusNode(a),n.addedNodes[a.getId()]=n.graph.getNode(a.getId())||a,r.abrupt("return",{cody:"I've added a UI card for the new page \"".concat(wL(t.name),'" to the board'),type:XE.Info});case 9:case"end":return r.stop()}},r,this)})))},OR=function(){function e(t,n,r){Object(Be.a)(this,e),this.name=void 0,this.type="NewPage",this.operation="added",this.nodeId=void 0,this.nodeType=Dc.ui,this.diff=void 0,this.newPage=void 0,this.name=t,this.nodeId=n,this.diff={new:r,old:null},this.newPage=r}return Object(De.a)(e,[{key:"apply",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sR(this.nodeId,this.newPage,t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),xR=function(){function e(t,n,r,a,o){Object(Be.a)(this,e),this.name=void 0,this.type="PageMetadataChanged",this.operation="changed",this.nodeId=void 0,this.nodeType=Dc.ui,this.diff=void 0,this.changedPage=void 0;var i=o.playConfig.pages[t];i||(i=r),this.name=t,this.nodeId=n,this.diff={new:r,old:i},this.changedPage=r}return Object(De.a)(e,[{key:"apply",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.syncContext,n=t.graph,r=t.playshot,a=t.addedNodes,o=t.elementsTree,!a[this.nodeId]){e.next=3;break}return e.abrupt("return",pL({cody:"",type:XE.Empty}));case 3:if(i=LL(this.nodeId,this.name,Dc.ui,n,o)){e.next=6;break}return e.abrupt("return",pL({cody:"Hhm, I'm skipping the change \"".concat(Object(zn.startCase)(this.type),": ").concat(IL(this.name,r),'", because the page cannot be found on the board.'),details:"There is no element on the board with ID: ".concat(this.nodeId),type:XE.Warning}));case 6:return n.changeNodeMetadata(i,Object(Nc.stringify)(Object(zn.omit)(Object(Ye.a)({},this.changedPage,{views:this.changedPage.components}),["name","topLevel","components"].concat(Object(eo.a)(dL))))),n.focusNode(i),e.abrupt("return",pL({cody:"I've updated metadata of ui card \"".concat(wL(this.name),'".')}));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),jR=function(){function e(t,n,r,a){Object(Be.a)(this,e),this.name=void 0,this.type="PageRemoved",this.operation="removed",this.nodeId=void 0,this.nodeType=Dc.ui,this.diff=void 0,this.name=t,this.nodeId=n,this.diff={new:null,old:r}}return Object(De.a)(e,[{key:"apply",value:function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i,s,c,d=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.syncContext,n=t.graph,r=t.playshot,a=t.addedNodes,o=t.elementsTree,!a[this.nodeId]){e.next=3;break}return e.abrupt("return",pL({cody:"",type:XE.Empty}));case 3:if(i=LL(this.nodeId,this.name,Dc.ui,n,o)){e.next=6;break}return e.abrupt("return",pL({cody:"Hhm, I'm skipping the change \"".concat(Object(zn.startCase)(this.type),": ").concat(IL(this.name,r),'", because the page cannot be found on the board.'),details:"There is no element on the board with ID: ".concat(this.nodeId),type:XE.Warning}));case 6:return s=o.getSimilarElements(i),c=[{name:"Focus page to remove",func:function(){var e=Object(je.a)(xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.focusNode(i),e.abrupt("return",{cody:"",type:XE.Empty});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{name:"Remove page",func:function(){var e=Object(je.a)(xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){window.setTimeout(function(){n.deleteNode(i),e({cody:"I've removed the ui card for \"".concat(wL(d.name),'" from the board')})},1500)}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}],s.forEach(function(e){c.push({name:"Focus page to remove",func:function(){var t=Object(je.a)(xe.a.mark(function t(){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.focusNode(e),t.abrupt("return",{cody:"",type:XE.Empty});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}),c.push({name:"Remove page",func:function(){var t=Object(je.a)(xe.a.mark(function t(){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){window.setTimeout(function(){n.deleteNode(e),t({cody:"",type:XE.Empty})},1500)}));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})}),e.abrupt("return",PL(c));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),wR=function(e,t,n,r){var a=[];return a.push.apply(a,Object(eo.a)(function(e,t,n,r){var a=e.playConfig.pages,o=t.playConfig.pages,i=[],s=Object.keys(a).filter(function(e){return"Welcome"!==e&&"CodyPlay.VibeCodyProcessing"!==e}),c=Object.keys(o).filter(function(e){return"Welcome"!==e&&"CodyPlay.VibeCodyProcessing"!==e}),d=s.filter(function(e){return!c.includes(e)}),u=c.filter(function(e){return!s.includes(e)}),l=c.filter(function(e){if(u.includes(e))return!1;var t=a[e],n=o[e];return Object(Nc.stringify)(t)!==Object(Nc.stringify)(n)});return u.forEach(function(e){var a=o[e],s=wL(e),c=r.getFilteredElementsByTypeAndLabel(Dc.ui,s,jL(a,t)).map(function(e){return e.getId()}).first(void 0)||n.createCellId();i.push(new OR(a.name,c,a))}),l.forEach(function(a){var s=o[a],c=wL(a),d=r.getFilteredElementsByTypeAndLabel(Dc.ui,c,jL(s,t)).map(function(e){return e.getId()}).first(void 0)||n.createCellId();i.push(new xR(a,d,s,t,e))}),d.forEach(function(o){var s=a[o],c=wL(o),d=r.getFilteredElementsByTypeAndLabel(Dc.ui,c,jL(s,t)).map(function(e){return e.getId()}).first(void 0)||n.createCellId();i.push(new jR(o,d,s,e))}),i}(e,t,n,r))),a.push.apply(a,Object(eo.a)(function(e,t,n,r){var a=e.playConfig.commands,o=t.playConfig.commands,i=[],s=Object.keys(a),c=Object.keys(o),d=s.filter(function(e){return!c.includes(e)}),u=c.filter(function(e){return!s.includes(e)}),l=c.filter(function(n){if(u.includes(n))return!1;var r=a[n],i=o[n],s=e.playConfig.commandHandlers[n]||[],c=t.playConfig.commandHandlers[n]||[];return Object(Nc.stringify)(r)!==Object(Nc.stringify)(i)||Object(Nc.stringify)(s)!==Object(Nc.stringify)(c)});return u.forEach(function(r){var a=o[r],s=n.getNode(uL(a.desc));if(s){var c=jm(s,e.playConfig.defaultService),d=e.playConfig.commands[c];if(d)return void i.push(new BL(r,uL(a.desc),a,d,t,e))}i.push(new NL(r,uL(a.desc),a,t))}),l.forEach(function(n){var r=o[n];i.push(new RL(n,uL(r.desc),r,t,e))}),d.forEach(function(t){var n=a[t];i.push(new zL(t,uL(n.desc),n,e))}),i}(e,t,n))),a.push.apply(a,Object(eo.a)(function(e,t,n,r){var a=e.playConfig.events,o=t.playConfig.events,i=[],s=Object.keys(a),c=Object.keys(o),d=s.filter(function(e){return!c.includes(e)}),u=c.filter(function(e){return!s.includes(e)}),l=c.filter(function(e){if(u.includes(e))return!1;var t=a[e],n=o[e];return Object(Nc.stringify)(t)!==Object(Nc.stringify)(n)});return u.forEach(function(r){var a=o[r],s=n.getNode(uL(a.desc));if(s){var c=jm(s,e.playConfig.defaultService),d=e.playConfig.events[c];if(d)return void i.push(new GL(r,uL(a.desc),a,d,t,e))}i.push(new UL(r,uL(a.desc),a,t))}),l.forEach(function(n){var r=o[n];i.push(new FL(n,uL(r.desc),r,t,e))}),d.forEach(function(t){var n=a[t];i.push(new qL(t,uL(n.desc),n,e))}),i}(e,t,n))),a.push.apply(a,Object(eo.a)(function(e,t,n,r){var a=e.playConfig.types,o=t.playConfig.types,i=[],s=Object.keys(a),c=Object.keys(o),d=s.filter(function(e){return!c.includes(e)}),u=c.filter(function(e){return!s.includes(e)}),l=c.filter(function(n){if(u.includes(n))return!1;var r=a[n],i=o[n],s=HL(r,e),c=HL(i,t);return Object(Nc.stringify)(s)!==Object(Nc.stringify)(c)});return u.forEach(function(r){var a=o[r],s=n.getNode(uL(a.desc));if(s){var c=jm(s,e.playConfig.defaultService),d=e.playConfig.types[c];if(d)return void i.push(new XL(r,uL(a.desc),a,d,t,e))}i.push(new KL(r,uL(a.desc),a,t))}),l.forEach(function(n){var r=o[n];i.push(new ZL(n,uL(r.desc),r,t,e))}),d.forEach(function(t){var n=a[t];i.push(new eR(t,uL(n.desc),n,e))}),i}(e,t,n))),a},kR=n(158),IR=function(e){var t=Object(he.useRef)(null),n=Object(Fe.useSelector)(lx("playshot-diff-".concat(e.containerId))),r=Object(Fe.useDispatch)();return Object(he.useEffect)(function(){t.current&&t.current.initializeDiffModel({fileId:"".concat(e.containerId,"-diff-original.json"),language:"json",value:e.change.diff.old?Object(Nc.stringify)(e.change.diff.old,null,2):""},{fileId:"".concat(e.containerId,"-diff-modified.json"),language:"json",value:e.change.diff.new?Object(Nc.stringify)(e.change.diff.new,null,2):""})},[]),he.createElement("form",{className:"ui form"},he.createElement(UO.a,null,he.createElement(px,{expanded:n.expanded,double:n.double,onExpandChanged:function(t,n){return r(SE("playshot-diff-".concat(e.containerId),t,!!n))}}),he.createElement($v,{containerId:e.containerId,ref:t,options:{fontSize:12,glyphMargin:!1,lineNumbers:!1,lineDecorationsWidth:3,minimap:{enabled:!1},mouseWheelZoom:!0,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1},readOnly:!0,fixedOverflowWidgets:!0,renderSideBySide:!0,useInlineViewWhenSpaceIsLimited:!1},className:"code editor small focus"+(n.expanded?" expanded":"")+(n.double?" double":""),asDiffEditor:!0})))},SR=function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1];return he.createElement(LT.a,null,he.createElement(Xv,{cellType:e.change.nodeType,size:"normal"}),he.createElement(kR.a,null,Object(zn.startCase)(e.change.type),": ",wL(e.change.name),"\xa0\xa0",he.createElement(Ni.a,{basic:!0,className:"noborder nopadding",size:"small",icon:"chevron ".concat(r?"down":"up"),compact:!0,onClick:function(){return a(!r)}}),r&&he.createElement("div",{style:{padding:"10px 0"}},he.createElement(IR,{change:e.change,containerId:"diff-container-".concat(e.id)}))))},CR=function(e){var t=e.users.find(function(t){return t.userId===e.playshot.savedBy}),n=Object(he.useState)(!1),r=Object(Ke.a)(n,2),a=r[0],o=r[1],i=Object(he.useState)(!1),s=Object(Ke.a)(i,2),c=s[0],d=s[1],u=Object(he.useState)(!1),l=Object(Ke.a)(u,2),m=l[0],p=l[1];return he.createElement(Qg.a.Row,null,he.createElement(Qg.a.Cell,null,he.createElement(et.a,{as:"h4",image:!0},t&&he.createElement(ub,{user:t,namePopup:!0}),he.createElement(et.a.Content,null,e.playshot.name,he.createElement(et.a.Subheader,null,Ig(e.playshot.savedAt))))),he.createElement(Qg.a.Cell,{textAlign:"right"},he.createElement(Ni.a,{icon:"play",loading:e.loading,primary:!0,circular:!0,onClick:function(){return e.onInitPlayshot(e.playshot.uid)},title:"Start Playshot"})),he.createElement(Qg.a.Cell,{textAlign:"right",width:"1"},he.createElement(Ni.a,{icon:"sync",loading:c,basic:!0,circular:!0,className:"noborder",onClick:function(){d(!0);var t=new Promise(function(t){null===e.previous?t(new Uc({})):qc(e.playshot.boardId,e.previous.uid).then(function(e){return t(e)})}),n=qc(e.playshot.boardId,e.playshot.uid);Promise.all([t,n]).then(function(t){e.onComparePlayshots({left:t[0],right:t[1]})}).catch(function(e){throw e}).finally(function(){return d(!1)})},title:"Sync Changes"})),he.createElement(Qg.a.Cell,{textAlign:"right",width:"1"},he.createElement(Ni.a,{icon:"download",loading:a,basic:!0,circular:!0,className:"noborder",onClick:function(){o(!0),qc(e.playshot.boardId,e.playshot.uid).then(function(t){o(!1);var n=t.toJS();delete n.uid,delete n.aggregateType;var r=Lc(n,null,2),a=new Blob([r],{type:"application/json"}),i=URL.createObjectURL(a),s=document.createElement("a");s.download=e.playshot.name+".json",s.href=i,s.click()})},title:"Download Playshot"})),he.createElement(Qg.a.Cell,{textAlign:"right",width:"1"},he.createElement(Ni.a,{icon:"trash",loading:m,basic:!0,circular:!0,className:"noborder",onClick:function(){p(!0),e.onDeletePlayshot(e.playshot.uid)},title:"Delete Playshot"})))},_R=1e3,TR=Object(Ge.o)(Object(Ue.b)()(function(e){var t=Object(Fe.useDispatch)(),n=NE(),r=Object(Ke.a)(n,1)[0],a=JO(e.match.params.uid),o=Object(he.useMemo)(function(){return Ay(e.match.params.uid)},[]),s=Object(Fe.useSelector)(o),c=s&&s.shouldShowPlayshotModal,d=Object(Fe.useSelector)(cL(e.match.params.uid)),u=Object(he.useState)(""),l=Object(Ke.a)(u,2),m=l[0],p=l[1],f=Object(he.useState)(void 0),h=Object(Ke.a)(f,2),g=h[0],b=h[1],y=Object(he.useState)(void 0),v=Object(Ke.a)(y,2),E=v[0],O=v[1],x=Object(he.useState)(0),j=Object(Ke.a)(x,2),w=j[0],k=j[1],I=d.map(function(e){return e.savedBy}),S=Object(Fe.useSelector)(ri(I)),C=eO(),_=Object(Fe.useSelector)(Ii());Object(he.useEffect)(function(){c&&t(B.fetchPlayshotSummaryList(e.match.params.uid))},[c,w]);var T=function(){p(""),b(void 0),O(void 0),t(Jd(e.match.params.uid,!1))},A=function(e){s?(C.isConnected("Cody Play")||C.connect.Cody("play",_.name,s.uid,"Cody Play"),C.runCommand(s.uid,s.name,_.uid,"InitPlayshot",e,"Cody Play"),window.setTimeout(T,500)):t(i.Command.error("Failed to load Board","Please contact the prooph board team!"))},N=function(e){p(e),qc(s.uid,e).then(function(e){A(e)}).catch(function(e){t(i.Command.error("Failed to load playshot",e.message))})},L=function(e){Gc(e,s.uid).then(function(){k(function(e){return e+1})})};if(g){var R,D=wR(g.left,g.right,r,a),P=D.length,z=!1,M={},U=a.getFilteredElementsByTag("#PlayshotSync").first(void 0);U||E||O("Missing a #PlayshotSync context on the board."),U&&U.children().count()>1&&!E&&O({title:"#PlayshotSync context is not empty!",msg:"You have to move already generated elements out of the sync context, before Cody can run the next session."});var F=function(){var e=Object(je.a)(xe.a.mark(function e(t,n){var o,i,s,c,d,u,l,m;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(U&&!E){e.next=2;break}return e.abrupt("return");case 2:return o=!0,i=!1,e.prev=4,e.t0=sL.a,e.next=8,t.apply({syncContext:U,graph:r,playshot:g.right,elementsTree:a,addedNodes:M});case 8:e.t1=e.sent,c=(0,e.t0)(e.t1);case 10:return e.next=12,c.next();case 12:return d=e.sent,o=d.done,e.next=16,d.value;case 16:if(u=e.sent,o){e.next=25;break}(l=u).type!==XE.Empty&&C.print(l,"Cody"),R=l,l.type===XE.Error&&(z=!0);case 22:o=!0,e.next=10;break;case 25:e.next=31;break;case 27:e.prev=27,e.t2=e.catch(4),i=!0,s=e.t2;case 31:if(e.prev=31,e.prev=32,o||null==c.return){e.next=36;break}return e.next=36,c.return();case 36:if(e.prev=36,!i){e.next=39;break}throw s;case 39:return e.finish(36);case 40:return e.finish(31);case 41:m=n+1,!z&&m<P?setTimeout(Object(je.a)(xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(D[m],m);case 2:case"end":return e.stop()}},e,this)})),!R||R.type&&R.type!==XE.Info?0:_R):setTimeout(function(){G()},_R);case 43:case"end":return e.stop()}},e,this,[[4,27,31,41],[32,,36,40]])}));return function(t,n){return e.apply(this,arguments)}}(),G=function(){t(Jd(e.match.params.uid,!0)),b(Object(Ye.a)({},g,{error:z,applied:!0}))},q=function(e,t){var n=d.filter(function(t){return t.uid===e}).first(void 0);n?qc(s.uid,n.uid).then(function(e){b({left:"left"===t?e:g.left,right:"right"===t?e:g.right})}):b({left:"left"===t?new Uc({}):g.left,right:"right"===t?new Uc({}):g.right})},V=d.sort(function(e,t){return e.savedAt<t.savedAt?1:-1}).map(function(e){return{key:e.uid,text:e.name,value:e.uid}}).toJS();return V.push({key:"empty-playshot",text:"- empty -",value:""}),he.createElement(Ai.a,{open:c,closeIcon:!0,onClose:T},he.createElement(Ai.a.Header,null,he.createElement(Ni.a,{basic:!0,className:"noborder",icon:"chevron left",onClick:function(){return b(void 0)}})," Compare Playshots (beta)"),he.createElement(Ai.a.Content,{scrolling:!0,style:{minHeight:"40vh"}},!g.applied&&!E&&he.createElement(nt.a,{warning:!0},"This is a new feature available for testing (beta version). Use at own risk."),g.applied&&!g.error&&he.createElement(nt.a,{success:!0,onDismiss:function(){return b(void 0)}},e.t("insp.playshots.sync_success")),g.applied&&g.error&&he.createElement(nt.a,{error:!0,onDismiss:T},e.t("insp.playshots.sync_error")),!g.applied&&E&&he.createElement(AR,{error:E}),he.createElement("div",{className:"ui grid"},he.createElement("div",{className:"two column row"},he.createElement("div",{className:"column"},he.createElement("span",null,"Left: "),he.createElement(tt.a,{placeholder:"- empty -",options:V,value:g.left.uid,label:"Left Playshot",onChange:function(e,t){var n=t.value;return q(n,"left")}})),he.createElement("div",{className:"column"},he.createElement("div",{className:"column"},he.createElement("span",null,"Right: "),he.createElement(tt.a,{placeholder:"- empty -",options:V,value:g.right.uid,label:"Right Playshot",onChange:function(e,t){var n=t.value;return q(n,"right")}}))))),he.createElement(Kv.a,{className:"playshot changes"},D.map(function(e,t){return he.createElement(SR,{change:e,playshot:g.right,key:"playshot_changed_diff_".concat(t),id:"playshot-changed-id-".concat(t)})}))),he.createElement(Ai.a.Actions,null,he.createElement(Ni.a,{basic:!0,className:"noborder",icon:"sync",disabled:g.applied||!!E,content:e.t("insp.playshots.sync_playshot"),onClick:function(){E||P>0&&(t(Jd(e.match.params.uid,!1)),t($d(e.match.params.uid,!0)),C.print({cody:"I'm going to apply the changes. Lean back and watch how the board is updated. I'll open the Playshot modal again when everything is done."},"Cody"),window.setTimeout(Object(je.a)(xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(D[0],0);case 2:case"end":return e.stop()}},e,this)})),_R))}})))}var W=null;return he.createElement(Ai.a,{open:c,closeIcon:!0,onClose:T},he.createElement(Ai.a.Header,null,"Cody Playshots"),he.createElement(Ai.a.Content,{scrolling:!0},he.createElement("p",null,e.t("insp.playshots.select_playshot")),0===d.count()&&he.createElement(nt.a,{info:!0},e.t("insp.playshots.empty")),he.createElement(Qg.a,{unstackable:!0,basic:"very"},he.createElement(Qg.a.Body,null,d.sort(function(e,t){return e.savedAt<t.savedAt?1:-1}).reverse().map(function(e){var t=he.createElement(CR,{playshot:e,previous:W,users:S,key:e.uid,loading:m===e.uid,onInitPlayshot:N,onComparePlayshots:function(e){return b(e)},onDeletePlayshot:L});return W=e,t}).reverse().toArray()))),he.createElement(Ai.a.Actions,null,he.createElement(Ni.a,{basic:!0,className:"noborder",icon:"play circle",content:e.t("insp.playshots.start_from_scratch"),onClick:function(){A(new Uc({name:"From Scratch Playshot",playConfig:{},playData:{streams:{},documents:{}},savedBy:_.uid,boardId:s.uid}))}})))})),AR=function(e){var t="string"===typeof e.error?void 0:e.error.title,n="string"===typeof e.error?e.error:e.error.msg;return he.createElement(nt.a,{error:!0},t&&he.createElement(VA.a,null,t),he.createElement("p",null,n))},NR=Object(Ue.b)()(Object(Ge.o)(function(e){var t=Object(Fe.useDispatch)(),n=Object(Fe.useSelector)(zO()),r=Object(he.useState)(LR(n)),a=Object(Ke.a)(r,2),o=a[0],i=a[1],s=Object(he.useMemo)(function(){return Ay(e.match.params.uid)},[]),c=Object(Fe.useSelector)(s),d=Object(Fe.useSelector)(Yy(e.match.params.uid)),u=Object(he.useState)(!1),l=Object(Ke.a)(u,2),m=l[0],p=l[1],f=Object(Fe.useSelector)($O(e.match.params.uid)),h=!(!c||!c.shouldShowElementDetails)&&n.sideBySideCell,g=Object(he.useRef)(null),b=NE(),y=Object(Ke.a)(b,1)[0],v=Object(he.useMemo)(function(){if(n.sideBySideCell){var e=y.getNode(n.sideBySideCell);return e?y.makeActiveGraphElementIfPossible(e):null}return null},[n.sideBySideCell]);Object(he.useEffect)(function(){m||i(LR(n))},[n.sideBySideWidth,n.rightSidebarWidth]);var E=function(){t(IE(null))},O=Object(fe.List)(),x=Object(fe.List)(),j=Object(fe.List)();if(v&&v.type!==Dc.edge){var w=f.getElement(v.id)||EN(v),k=f.getSimilarElements(w).filter(function(e){return e.getTags().contains(ispConst.TAG_CONNECTED)});O=k.map(function(e){return e.getId()});var I=f.getElement(v.id);if(I){x=I.getSources(),j=I.getTargets();var S=x.map(function(e){return e.getId()}),C=j.map(function(e){return e.getId()});k.forEach(function(e){var t,n,r,a,o=e.getSources().filter(function(e){return!S.contains(e.getId())}),i=e.getTargets().filter(function(e){return!C.contains(e.getId())});x=(t=x).push.apply(t,Object(eo.a)(o.toArray())),S=(n=S).push.apply(n,Object(eo.a)(o.toArray().map(function(e){return e.getId()}))),j=(r=j).push.apply(r,Object(eo.a)(i.toArray())),C=(a=C).push.apply(a,Object(eo.a)(i.toArray().map(function(e){return e.getId()})))})}}if(v&&v.type===Dc.edge&&v.edgeData){var _=f.getElement(v.edgeData.source),T=f.getElement(v.edgeData.target);_&&(x=Object(fe.List)([_])),T&&(j=Object(fe.List)([T]))}return he.createElement(he.Fragment,null,h&&he.createElement("div",{id:"side-by-side-sidebar",style:{position:"absolute",paddingTop:"50px",top:"0px",right:n.rightSidebarWidth+5+"px",height:"100%",overflow:"hidden",borderLeft:"5px solid #eee",zIndex:99}},he.createElement(Eg.a,{style:{height:"100%",borderRadius:"0",width:n.sideBySideWidth+"px"}},he.createElement(Eg.a.Content,null,he.createElement(Eg.a.Header,null,he.createElement(Cp.a,{name:"close",className:"right floated",onClick:E,style:{cursor:"pointer"}}),v&&he.createElement(he.Fragment,null,v.label),!v&&he.createElement(he.Fragment,null,"Metadata"))),he.createElement(Eg.a.Content,{style:{position:"relative",height:"100%",overflowY:"auto",display:"flex",flexDirection:"column"}},!v&&he.createElement(nt.a,{info:!0},e.t("insp.sidebar.element_details.no_element_selected")),v&&he.createElement(NN,{boardId:e.match.params.uid,board:c,activeNodeSources:x,activeNodeTargets:j,activeGraphElement:v,similarElements:O,boardStickyTemplate:d.get(v.type),onTriggerCody:function(){return y.triggerCody()},onUpdateMetadata:function(e,t){v.metadata=e,v.updateMetadata(e,t),LN(v)&&O.count()&&(lL&&window.clearTimeout(lL),lL=window.setTimeout(function(){v.updateSimilarElements(O.toArray(),e)},300))},onShowRunCody:function(){},onClose:E,t:e.t,ref:g,focusEditor:!!c.shouldFocusMetadataEditor}))),he.createElement(lA.a,{axis:"x",onDrag:function(e,r){m||p(!0);var a,o=n.sideBySideWidth-r.deltaX;t((a=o,Object(at.action)(yE,{width:a})))},onStop:function(e,t){p(!1),i(LR(n))},position:{x:0,y:0}},he.createElement("div",{className:"thin collapsebar collapsible",style:{right:o+"px",cursor:"grabbing"}}))))})),LR=function(e){return e.sideBySideWidth+5+e.rightSidebarWidth},RR=function(){return he.createElement(Ge.g,null,he.createElement(Ge.c,{exact:!0,path:"/",to:jt}),he.createElement(Ge.d,{exact:!0,path:jt,component:zg}),he.createElement(Ge.d,{exact:!0,path:St,component:fE}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:LS}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/boards/invitation/:invitation",component:ST}),he.createElement(Ge.d,{exact:!0,path:wt,component:zi}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/teams",component:WT}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/teams/invitation/:invitation",component:CT}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/updates",component:$A}),he.createElement(Ge.d,{exact:!0,path:_t,component:eL}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/organization",component:KN}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/organizations/:organization/invitation/:invitation",component:PN}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/boards/import/:link",component:XN}))},BR=Object(Ge.o)(function(e){return he.createElement(Ve.a,{fluid:!0},he.createElement(dA,null),he.createElement("div",{style:{zIndex:103,position:"fixed",display:"flex",flexDirection:"column",top:"0",bottom:"0",left:"0",overflowX:"hidden",flex:"1"}},he.createElement(vN,null)),he.createElement("div",{style:{marginLeft:"250px",paddingTop:"90px"}},he.createElement(RR,null)),he.createElement(xt,null),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:VN}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:IT}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:NR}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:DN}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:iL}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:TR}))}),DR=(he.Component,Object(ht.c)(function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1],o=Object(Fe.useDispatch)();return he.createElement(he.Fragment,null,he.createElement(tt.a,{item:!0,icon:"ellipsis vertical"},he.createElement(tt.a.Menu,{direction:"left"},he.createElement(tt.a.Item,{icon:"history",text:"Activity",onClick:function(){return a(!0)}}),he.createElement(tt.a.Item,{icon:"clipboard outline",text:e.t("insp.top_menu.element_details"),onClick:function(){return o(Hd(e.match.params.uid,!0,!1))}}),he.createElement(tt.a.Item,{icon:"code",text:"Cody",onClick:function(){return o($d(e.match.params.uid,!0))}}),he.createElement(tt.a.Item,{icon:"play",text:"Cody Play",onClick:function(){return o(Jd(e.match.params.uid,!0))}}),he.createElement(tt.a.Item,{icon:"cog",text:"Settings",to:Ct(e.match.params.uid),as:qe.NavLink}),he.createElement(tt.a.Item,{icon:"download",text:"Import Board",onClick:function(){return o(qd(e.match.params.uid))}}),he.createElement(tt.a.Item,{icon:"upload",text:"Export Board",onClick:function(){return o(Vd(e.match.params.uid))}}),he.createElement(tt.a.Item,{icon:"question",text:"FAQs",as:"a",href:"https://wiki.prooph-board.com",target:"_blank"}))),he.createElement(jN,{open:r,onClose:function(){return a(!1)},headerKey:"header_history"}))})),PR=Object(Ue.b)()(Object(Ge.o)(DR)),zR=function(e){var t=Object(he.useState)(!1),n=Object(Ke.a)(t,2),r=n[0],a=n[1];return he.createElement(he.Fragment,null,he.createElement(HT.a,null,he.createElement(Ni.a,{icon:!0,className:"share",onClick:function(){return a(!0)}},he.createElement(Cp.a,{name:"share alternate"}),"\xa0share")),he.createElement(jN,{open:r,onClose:function(){a(!1)},headerKey:"header_team"}))},MR=Object(Ue.b)()(Object(Ge.o)(function(e){var t=Object(Fe.useSelector)(zO()),n=It(e.location.pathname)?t.width+20+"px":"270px";return he.createElement(TT.a,{fixed:"top",inverted:!1,id:"topmenu",style:{paddingLeft:n},className:"touch-only-pan"},he.createElement(Ge.d,{path:jt},he.createElement(HT.a,null,he.createElement($T.a,null,he.createElement(Ge.d,{exact:!0,path:[jt,"/inspectio/board/:uid",St],component:aA}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/updates",component:sA}),he.createElement(Ge.d,{exact:!0,path:["/inspectio/board/:uid",St],component:nA})))),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:zR}),he.createElement(TT.a.Menu,{position:"right"}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:PR}))})),UR=function(){return he.createElement(Ge.g,null,he.createElement(Ge.c,{exact:!0,path:"/",to:jt}),he.createElement(Ge.d,{exact:!0,path:jt,component:zg}),he.createElement(Ge.d,{exact:!0,path:St,component:fE}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:LS}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/updates",component:$A}),he.createElement(Ge.d,{exact:!0,path:_t,component:eL}))},FR=Object(Ge.o)(function(e){return he.createElement(Ve.a,{fluid:!0},he.createElement(MR,null),he.createElement("div",{style:{zIndex:103,position:"fixed",display:"flex",flexDirection:"column",top:"0",bottom:"0",left:"0",overflowX:"hidden",flex:"1"}},he.createElement(vN,null)),he.createElement("div",{style:{marginLeft:"250px",paddingTop:"90px"}},he.createElement(UR,null)),he.createElement(xt,null),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:VN}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:IT}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:NR}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:DN}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/boards/import/:link",component:XN}),he.createElement(Ge.d,{exact:!0,path:"/inspectio/board/:uid",component:TR}))}),GR=function(e){function t(){return Object(Be.a)(this,t),Object(Pe.a)(this,Object(ze.a)(t).apply(this,arguments))}return Object(Me.a)(t,e),Object(De.a)(t,[{key:"render",value:function(){var e=this.props.store,t=0===window.location.pathname.search(/^\/free-version/)?"/free-version/":"/";return he.createElement(Ue.a,{i18n:Qe},he.createElement(Fe.Provider,{store:e},he.createElement(qe.BrowserRouter,{basename:t},he.createElement(FR,null))))}}]),t}(he.Component),qR=n(1064),VR=Object(fe.Map)(),WR=Object(Ua.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:VR,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ey:return e.set("token",t.payload.auth.token);default:return e}}},function(){return Object(fe.fromJS)({})}),HR=Object(fe.Map)(),$R=Object(fe.Map)(),JR=Object(fe.Map)(),QR=Object(fe.Map)(),YR=Object(fe.Map)(),KR=Object(fe.Map)(),ZR=Object(fe.Map)(),XR={filter:"",sortBy:Wh.LAST_MODIFIED_DESC,responsibleTeam:void 0,allSharedBoardsHidden:!1,allOwnBoardsHidden:!1,showMaintenanceMessage:!1},eB=new(function(e){function t(){return Object(Be.a)(this,t),Object(Pe.a)(this,Object(ze.a)(t).apply(this,arguments))}return Object(Me.a)(t,e),t}(Object(fe.Record)(XR))),tB=function(e){var t=[],n=e.toArray(),r=!1,a=!1,o="",i=null,s=null;return n.forEach(function(e,c){if(!r&&a&&(e=e.set("label",o),a=!1,o=""),c+1<n.length){var d=n[c+1];if(e.userId!==d.userId)return t.push(e),r=!1,a=!1,o="",i=null,s=null,!0;if(i&&s===e.action&&(e=e.set("date",i)),i=null,s=null,e.cellId===d.cellId){if(e.action===d.action)return e.cellType!==ap.multiple&&e.cellType!==ap.misc?(o=e.label,i=e.date,s=e.action,r=!1,a=!0,!0):(r||t.push(e),r=!0,!0);if(e.action===zm.edited&&d.action===zm.added)return r=!1,a=!0,o=e.label,!0}}r||t.push(e),r=!1,o="",a=!1,s=null,i=null}),Object(fe.List)(t)},nB=Object(fe.Map)(),rB=Object(fe.Map)(),aB=Object(fe.Map)(),oB=Object(Ua.combineReducers)({boards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:HR,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qi:var n=t.payload.board;return e.set(n.uid,n);case Yi:var r=t.payload;return Object(zn.forEach)(r,function(t){if(e.get(t.uid)){var n=e.get(t.uid);e=e.set(t.uid,n.syncSummaryInfo(t))}else e=e.set(t.uid,t)}),e;case Ki:return Object(zn.forEach)(t.payload,function(t){e=e.set(t.uid,t)}),e;case Zi:var a=e.get(t.payload.snapshot.boardId);return a&&(a=(a=a.updateXmlFromSnapshot(t.payload.snapshot)).set("detailsFetched",!0),e=e.set(t.payload.snapshot.boardId,a)),e;case Xi:var o=e.get(t.payload.boardId);return o&&(o=(o=o.set("detailsFetched",!0)).set("writeAccess",t.payload.writeAccess),e=e.set(t.payload.boardId,o)),e;case vs:var i=e.get(t.payload.boardId);return i&&(i=i.set("detailsFetched",!1),e=e.set(t.payload.boardId,i)),e;case Ui:var s=e.get(t.payload.board.uid);return s&&(s=s.updateXmlAndVersionFromBoard(t.payload.board),e=e.set(t.payload.board.uid,s)),e;case Fi:case Gi:case qi:case Vi:case Wi:case Hi:return e.setIn([t.payload.board.uid],t.payload.board);case es:return e.setIn([t.payload.boardId,"inDeletion"],!0);case ts:return e.setIn([t.payload.boardId,"inDeletion"],!1);case ns:return e.removeIn([t.payload.boardId]);case ds:return e.setIn([t.payload.boardId,"shouldImport"],!0);case Ws:case Vs:return e.setIn([t.payload.boardId,"shouldImport"],!1);case us:return e.setIn([t.payload.boardId,"shouldExport"],!0);case Hs:return e.setIn([t.payload.boardId,"shouldExport"],!1);case ls:return t.payload.visible&&(e=e.setIn([t.payload.boardId,"shouldShowElementDetails"],!1)),e.setIn([t.payload.boardId,"shouldShowHistory"],t.payload.visible);case ms:return t.payload.visible&&(e=e.setIn([t.payload.boardId,"shouldShowHistory"],!1)),(e=e.setIn([t.payload.boardId,"shouldFocusMetadataEditor"],t.payload.focusEditor)).setIn([t.payload.boardId,"shouldShowElementDetails"],t.payload.visible);case ps:return e.setIn([t.payload.boardId,"shouldShowCodyConsole"],t.payload.visible);case fs:return e.setIn([t.payload.boardId,"shouldShowPlayshotModal"],t.payload.visible);case hs:return e=e.setIn([t.payload.boardId,"shouldShowTimerModal"],t.payload.visible);case gs:return e=e.setIn([t.payload.boardId,"videoSessionActive"],t.payload.active);case Zs:var c=e.getIn([t.payload.boardId,"sharedWith"],Object(fe.List)());return e.setIn([t.payload.boardId,"sharedWith"],c.filter(function(e){return e!==t.payload.userId}));case gc:return e.set(t.payload.uid,t.payload);case W.Type.TEAM_ACCESS_TO_BOARD_GRANTED:var d=e.getIn([t.payload.boardId,"assignedTeams"],Object(fe.List)());return e.setIn([t.payload.boardId,"assignedTeams"],d.push(t.payload.teamId));case W.Type.TEAM_ACCESS_TO_BOARD_REVOKED:var u=e.getIn([t.payload.boardId,"assignedTeams"],Object(fe.List)());return e.setIn([t.payload.boardId,"assignedTeams"],u.filter(function(e){return e!==t.payload.teamId}));case yc:return e=e.setIn([t.payload.boardId,"orgaMemberPermissions"],t.payload.permissions);case vc:return e=e.setIn([t.payload.boardId,"anyonePermissions"],t.payload.permissions);default:return e}},boardPermissionsForUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:KR,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case tc:return Va(e,t.payload.boardPermissions);case Xs:var n=t.payload.boardId,r=t.payload.userId,a=e.valueSeq().toArray().find(function(e){return e.boardId===n&&e.userId===r});return a?e.setIn([a.uid,"permissions"],t.payload.permissions):e;case Zs:var o=t.payload.boardId,i=t.payload.userId,s=e.valueSeq().toArray().find(function(e){return e.boardId===o&&e.userId===i});return s?e.remove(s.uid):e;default:return e}},boardPermissionsForTeams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:YR,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case nc:return Va(e,t.payload.boardPermissions);case ec:return Ga(e,t.payload);default:return e}},boardInvitations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QR,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rc:return Va(e,t.payload.boardInvitations);case Ys:case Ks:return Ga(e,t.payload.boardInvitation);default:return e}},boardClients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dc:return e.set(t.payload.boardId,t.payload.client);case uc:return e.set(t.payload.boardId,null);case lc:return e.setIn([t.payload.boardId,"clientSecret"],t.payload.clientSecret);default:return e}},boardGraphElements:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JR,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case cc:var n=e.get(t.payload.boardId)||Object(fe.Map)();return e.set(t.payload.boardId,Va(n,t.payload.elements));default:return e}},history:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nB,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case bs:var a=n.get(r.payload.boardId,new lE),o=r.payload.entries;if(a.history.count()>0){var i=a.history.last();a=a.set("history",a.history.pop()),o=o.unshift(i)}o=tB(o);var s=r.payload.entries.last(new ip);return a=(a=a.set("history",(e=a.history).push.apply(e,Object(eo.a)(o.toArray())))).set("oldestBoardVersion",s.boardVersion),s.cellId||s.cellType!==ap.misc||bT()(s.date,bT.a.ISO_8601).isBefore(bT()("2019-07-29"))&&(a=a.set("olderPatchesAvailable",!1)),n.set(r.payload.boardId,a);case ys:var c=n.get(r.payload.boardId,new lE),d=r.payload.entries;if(c.history.count()>0){var u=c.history.first();c=c.set("history",c.history.shift()),d=d.push(u)}d=tB(d),c=c.set("history",(t=c.history).unshift.apply(t,Object(eo.a)(d.toArray())));var l=r.payload.entries.last(new ip);return c.oldestBoardVersion||(c=c.set("oldestBoardVersion",l.boardVersion)),l.cellId||l.cellType!==ap.misc||bT()(l.date,bT.a.ISO_8601).isBefore(bT()("2019-07-29"))&&(c=c.set("olderPatchesAvailable",!1)),n.set(r.payload.boardId,c);case js:var m=n.get(r.payload.boardId,new lE);return m=m.set("loading",r.payload.loading),n.set(r.payload.boardId,m);case xs:return n.setIn([r.payload.boardId,"olderPatchesAvailable"],!1);case vs:return n.remove(r.payload.boardId);default:return n}},loadingBoards:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case Oc:return!0;case Yi:return!1;default:return e}},initialBoardListLoaded:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case bc:return!0;default:return e}},overview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eB,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Rs:return e.set("filter",t.payload.filter);case Bs:return e.set("sortBy",t.payload.sort);case Ds:return e.set("responsibleTeam",t.payload.teamId);case Ps:return e.set("allSharedBoardsHidden",t.payload.hide);case zs:return e.set("allOwnBoardsHidden",t.payload.hide);case Fs:return e.set("showMaintenanceMessage",!1);default:return e}},elementsTree:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ZR,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ws:var n=e.get(t.payload.boardId,new Bm({elements:Object(fe.List)()}));return e.set(t.payload.boardId,n.mergeTree(new Bm({elements:t.payload.elements})));case Ms:var r=e.get(t.payload.boardId,new Bm({elements:Object(fe.List)()}));return e.set(t.payload.boardId,r.set("filter",t.payload.filter).set("focus",t.payload.focus||!1));default:return e}},activeGraphElements:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ON,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oc:return t.payload.element?e.set(t.payload.boardId,{id:t.payload.element.id,type:t.payload.element.type,label:t.payload.element.label,metadata:t.payload.element.metadata||void 0,edgeData:t.payload.element.edgeData||void 0,tags:t.payload.element.tags||[],updateMetadata:t.payload.element.updateMetadata,updateSimilarElements:t.payload.element.updateSimilarElements,replaceTags:t.payload.element.replaceTags,locked:!!t.payload.element.locked}):e.set(t.payload.boardId,void 0);case ic:return e.getIn([t.payload.boardId,"id"])!==t.payload.elementId?e:e.setIn([t.payload.boardId,"label"],t.payload.label);case sc:return e.getIn([t.payload.boardId,"id"])!==t.payload.elementId?e:e.setIn([t.payload.boardId,"metadata"],t.payload.metadata);default:return e}},StickyTemplate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rB,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mc:case hc:return Va(e,t.payload.stickyTemplates);case pc:case fc:return Va(e,Object(fe.List)([t.payload.stickyTemplate]));default:return e}},runCodyOn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ec:return t.payload.runCodyOn;default:return e}},playshots:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aB,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ac:return Va(Wa(),t.payload.summaries);default:return e}}},function(){return Object(fe.fromJS)({boards:void 0,StickyTemplate:void 0,runCodyOn:"auto",playshots:void 0})}),iB=Object(Ua.combineReducers)({sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DO,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case hE:return e.set("collapsed",t.payload.collapsed);case gE:return e.set("width",t.payload.width);case bE:return e.set("rightSidebarWidth",t.payload.width);case yE:return e.set("sideBySideWidth",t.payload.width);case vE:return e.set("sideBySideCell",t.payload.cell);case EE:return e.set("codyConsoleHeight",t.payload.height);case OE:return e.set("dividers",e.get("dividers").set(t.payload.divider,t.payload.collapsed));case xE:return e.set("editors",e.get("editors").set(t.payload.editor,Object(fe.Record)({expanded:t.payload.expanded,double:t.payload.double})()));default:return e}}},function(){return Object(fe.fromJS)({sidebar:void 0})}),sB=Object(fe.List)(),cB=Object(Ua.combineReducers)({messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sB,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dt:case"@@NotificationSystem/MessageHandled":var n=e.findIndex(function(e){return e.uid===t.payload.uid});return e=n>-1?t.payload.handled?e.remove(n):e.set(n,t.payload):e.push(t.payload);default:return e}}},function(){return Object(fe.fromJS)({messages:void 0})}),dB=K.disconnectedStatus(),uB=Object(Ua.combineReducers)({status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dB;switch((arguments.length>1?arguments[1]:void 0).type){case Q.CONNECT_SOCKET:return K.fromtString(K.STATUS_CONNECTING);case Q.SOCKET_CONNECTED:return K.fromtString(K.STATUS_CONNECTED);case Q.SOCKET_DISCONNECTED:return K.fromtString(K.STATUS_DISCONNECTED);case Q.DISCONNECT_SOCKET:return K.fromtString(K.STATUS_DISCONNECTING);case Q.SOCKET_CONNECTION_LOST:return K.fromtString(K.STATUS_CONNECTION_LOST);default:return e}}},function(){return Object(fe.fromJS)({status:void 0})}),lB=Object(fe.Map)(),mB=Object(fe.Map)().set("currentUser",new v.UserInfo(v.defaultUserProps)),pB=Object(fe.Map)(),fB=Object(Ua.combineReducers)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mB,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Lt:return e.set("currentUser",t.payload.user);case D.Type.ADD_BOARD:case D.Type.IMPORT_NEW_BOARD:return e.setIn(["currentUser","quota"],e.getIn(["currentUser","quota"])-1);case D.Type.DELETE_BOARD:return e.setIn(["currentUser","quota"],e.getIn(["currentUser","quota"])+1);case W.Type.TEAM_ADDED:return e.setIn(["currentUser","teamQuota"],e.getIn(["currentUser","teamQuota"])-1);case W.Type.TEAM_DELETED:return e.setIn(["currentUser","teamQuota"],e.getIn(["currentUser","teamQuota"])+1);case Mt:return e.setIn(["currentUser"],t.payload.user);case qt:return e.setIn(["currentUser","activeOrganization"],t.payload.activeOrganization);default:return e}},userSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pB,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.USER_SETTINGS_LOADED:return e.merge(t.payload.userSettings.values,{settings_loaded:!0});case s.USER_SETTING_UPSERTED:return e.set(t.payload.key,t.payload.value);default:return e}},iioUsersInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lB,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.IIO_USERS_INFO_LOADED:return Va(e,t.payload.usersInfo);default:return e}}},function(){return Object(fe.fromJS)({users:void 0,userSettings:void 0,iioUsersInfo:void 0})}),hB=Object(Ua.combineReducers)({notificationSystem:cB,inspectioBoards:oB,inspectioUsers:fB,inspectioTeams:H.inspectioTeamsReducer,inspectioOrganizations:I.inspectioOrganizationsReducer,inspectioSidebar:iB,form:Bi.reducer,auth:WR,socket:uB},function(){return Object(fe.fromJS)({notificationSystem:void 0,inspectioBoards:void 0,inspectioUsers:void 0,inspectioTeams:void 0,inspectioOrganizations:void 0,inspectioSidebar:void 0,auth:void 0,socket:void 0})}),gB=xe.a.mark(yB),bB=xe.a.mark(vB);function yB(e){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(gn.c)(wi.deleteBoard,e.payload.boardId);case 2:return t.next=4,Object(gn.g)(i.Command.info("Board deleted","Board deleted"));case 4:case"end":return t.stop()}},gB,this)}function vB(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)(A.DELETE_BOARD);case 3:return e=t.sent,t.next=6,Object(gn.f)(yB,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},bB,this)}var EB=xe.a.mark(xB),OB=xe.a.mark(jB);function xB(e){var t;return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(gn.c)(wi.getBoard,e.payload.board.uid);case 2:if(!(t=n.sent)||e.payload.board.tempBoard){n.next=6;break}return n.next=6,Object(gn.c)(wi.updateBoard,Object(Ye.a)({},t,{name:e.payload.board.name,nameAbbreviation:e.payload.board.nameAbbreviation,tags:e.payload.board.tags.toJS(),codySuggestEnabled:e.payload.board.codySuggestEnabled,eventModelingEnabled:e.payload.board.eventModelingEnabled}));case 6:case"end":return n.stop()}},EB,this)}function jB(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.RENAME_BOARD,A.CHANGE_BOARD_ABBREVIATION,A.SET_BOARD_TAGS,A.TOGGLE_CODY_SUGGEST_ENABLED,A.TOGGLE_EVENT_MODELING_ENABLED]);case 3:return e=t.sent,t.next=6,Object(gn.f)(xB,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},OB,this)}var wB=xe.a.mark(IB),kB=xe.a.mark(SB);function IB(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(gn.c)(wi.getBoard,e.payload.boardId);case 2:if(t=a.sent){a.next=5;break}return a.abrupt("return");case 5:if(!_n(n=Pn(t.stickyTemplates,Rn([Un(),"Response data is not of type Array"]),Dn(function(t){return Vy({boardId:e.payload.boardId,cellType:t.cellType,template:t.template,templateType:t.templateType,templateSchema:t.templateSchema})})))){a.next=9;break}return a.next=9,Object(gn.g)(i.Command.error("Request Error","Could not load sticky templates"));case 9:if(!Tn(n)){a.next=13;break}return r=Object(fe.List)(n.value),a.next=13,Object(gn.g)(D.Event.boardStickyTemplatesFetched(r));case 13:case"end":return a.stop()}},wB,this)}function SB(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([D.Type.FETCH_BOARD_STICKY_TEMPLATES]);case 3:return e=t.sent,t.next=6,Object(gn.f)(IB,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},kB,this)}var CB=xe.a.mark(TB),_B=xe.a.mark(function e(t){var n,r,a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Vc(t.payload.boardId),!_n(r=Pn(n,Rn([Un(),"Local storage playshot item is not of type Array"]),Dn(function(e){return console.log("shot data",e),EC(e)})))){e.next=6;break}return console.error("Failed to process playshot summaries from local storage",r.value,n),e.next=6,Object(gn.g)(i.Command.error("Request Error","Could not load playshots"));case 6:if(!Tn(r)){e.next=10;break}return a=Object(fe.List)(r.value),e.next=10,Object(gn.g)(R.playshotSummaryListFetched(a));case 10:case"end":return e.stop()}},e,this)});function TB(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.FETCH_PLAYSHOT_SUMMARY_LIST]);case 3:return e=t.sent,t.next=6,Object(gn.f)(_B,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},CB,this)}var AB=xe.a.mark(BB),NB=xe.a.mark(DB),LB=xe.a.mark(PB),RB=xe.a.mark(zB);function BB(){var e,t;return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(gn.c)(wi.getUserSettings);case 2:return e=n.sent,t={},e.forEach(function(e){t[e.key]=e.value}),n.next=7,Object(gn.g)(f.Event.userSettingsLoaded(new TC({userId:wi.getUser().userId,values:t})));case 7:case"end":return n.stop()}},AB,this)}function DB(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.g)(f.Command.signIn({uid:wi.getUser().userId,name:"standalone",email:"",givenName:"",familyName:"",roles:{roleMap:{anonymous:{type:"anonymous"}}},account:{accountType:"free"},quota:1e3,teamQuota:1,displayName:"standalone",avatarUrl:"",companyName:"",jobTitle:"",signedIn:!0}));case 2:case"end":return e.stop()}},NB,this)}function PB(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(gn.g)(B.startFetchUserBoards());case 2:return t.next=4,Object(gn.c)(wi.getBoards);case 4:return e=t.sent,t.next=7,Object(gn.g)(Md(e.map(function(e){return new z.Board({uid:e.boardId,name:e.name,nameAbbreviation:e.nameAbbreviation||Ul(e.name),tags:Object(fe.List)(e.tags||[]),createdAt:e.createdAt||e.lastModified,lastModified:e.lastModified,version:new zl(Pl),shared:!1,sharedWith:Object(fe.List)(),assignedTeams:Object(fe.List)(),example:!1,owner:wi.getUser().userId,creator:null,organization:null,tempBoard:!1,orgaMemberPermissions:Ll,anyonePermissions:Ll,codySuggestEnabled:"undefined"===typeof e.codySuggestEnabled||e.codySuggestEnabled,eventModelingEnabled:"undefined"===typeof e.eventModelingEnabled||e.eventModelingEnabled})})));case 7:return t.next=9,Object(gn.g)(Wu());case 9:case"end":return t.stop()}},LB,this)}function zB(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(gn.k)(A.FETCH_USER_BOARDS);case 3:return e.next=5,Object(gn.f)(PB);case 5:return e.next=7,Object(gn.f)(DB);case 7:return e.next=9,Object(gn.f)(BB);case 9:e.next=0;break;case 11:case"end":return e.stop()}},RB,this)}var MB=xe.a.mark(FB),UB=xe.a.mark(function e(t){var n,r,a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.i)(dg());case 2:if(!(e.sent.size<1)){e.next=6;break}return e.next=6,Object(gn.c)(PB);case 6:return e.next=8,Object(gn.i)(Ay(t.payload.boardId));case 8:if(!(n=e.sent)||!n.tempBoard){e.next=13;break}return e.next=12,Object(gn.g)(L.setBoardDetailsFetched(t.payload.boardId,!1));case 12:return e.abrupt("return");case 13:return e.next=15,Object(gn.c)(wi.getBoard,t.payload.boardId);case 15:if(r=e.sent){e.next=18;break}return e.abrupt("return");case 18:return a=new U.BoardSnapshot({boardId:r.boardId,xml:r.xml,boardVersion:new P.BoardVersion(Pl)}),e.next=21,Object(gn.g)(Fd(a));case 21:return e.next=23,Object(gn.g)(L.setBoardDetailsFetched(t.payload.boardId,!0));case 23:case"end":return e.stop()}},e,this)});function FB(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)(A.FETCH_USER_BOARD);case 3:return e=t.sent,t.next=6,Object(gn.f)(UB,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},MB,this)}var GB=xe.a.mark(VB),qB=xe.a.mark(WB);function VB(e){var t;return xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(gn.c)(wi.getBoard,e.payload.board.uid);case 2:if(!(t=n.sent)){n.next=10;break}return n.next=6,Object(gn.c)(wi.updateBoard,Object(Ye.a)({},t,{xml:e.payload.board.xml,lastModified:(new Date).toISOString()}));case 6:return n.next=8,Object(gn.g)(L.forceUpdateBoards([e.payload.board]));case 8:return n.next=10,Object(gn.g)(i.Command.info("Board imported:",e.payload.board.name));case 10:case"end":return n.stop()}},GB,this)}function WB(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.IMPORT_EXISTING_BOARD]);case 3:return e=t.sent,t.next=6,Object(gn.f)(VB,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},qB,this)}var HB=xe.a.mark(JB),$B=xe.a.mark(QB);function JB(e){var t,n,r,a,o,s,c,d;return xe.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e.payload.boardId||ot.v4(),e.payload.importTemporary){u.next=10;break}return u.next=4,Object(gn.c)(wi.addBoard,{boardId:t,name:e.payload.boardName,lastModified:(new Date).toISOString(),createdAt:(new Date).toISOString(),xml:e.payload.boardXml,stickyTemplates:[]});case 4:return u.next=6,Object(gn.g)(i.Command.info("Board created","Board created"));case 6:return u.next=8,Object(gn.f)(PB);case 8:u.next=22;break;case 10:return n=T.makeGetCurrentUser(),u.next=13,Object(gn.i)(n);case 13:return r=u.sent,a=new ql({uid:t,name:e.payload.boardName,nameAbbreviation:Ul(e.payload.boardName),tags:Object(fe.List)(),createdAt:(new Date).toISOString(),xml:e.payload.boardXml,version:new zl({userId:r.uid,version:1}),shared:!1,sharedWith:Object(fe.List)(),assignedTeams:Object(fe.List)(),owner:null,creator:r.uid,organization:null,tempBoard:!0,orgaMemberPermissions:Ll,anyonePermissions:Ll,codySuggestEnabled:!0,eventModelingEnabled:!0}),u.next=17,Object(gn.g)(L.updateBoards([a]));case 17:return o=NE(),s=Object(Ke.a)(o,2),s[0],c=s[1],d=Gm(a.xml||void 0),c(d),u.next=22,Object(gn.g)(L.saveBoard(a,d));case 22:case"end":return u.stop()}},HB,this)}function QB(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([A.IMPORT_NEW_BOARD]);case 3:return e=t.sent,t.next=6,Object(gn.f)(JB,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},$B,this)}var YB=xe.a.mark(ZB),KB=xe.a.mark(XB);function ZB(e){var t,n;return xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(gn.c)(wi.getBoard,e.payload.boardId);case 2:if(t=r.sent){r.next=5;break}return r.abrupt("return");case 5:return n=e.payload.stickyTemplates.map(function(e){return{cellType:e.cellType,template:e.template,templateType:e.templateType,templateSchema:e.templateSchema||null}}),r.next=8,Object(gn.c)(wi.updateBoard,Object(Ye.a)({},t,{stickyTemplates:n.toArray()}));case 8:return r.next=10,Object(gn.g)(i.Command.info("Card Templates imported","You can now use them on the board!"));case 10:return r.next=12,Object(gn.g)(D.Event.stickyTemplatesImported(Object(fe.List)(e.payload.stickyTemplates)));case 12:e.payload.finishedCb();case 13:case"end":return r.stop()}},YB,this)}function XB(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([D.Type.IMPORT_STICKY_TEMPLATES]);case 3:return e=t.sent,t.next=6,Object(gn.f)(ZB,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},KB,this)}var eD=xe.a.mark(nD),tD=xe.a.mark(rD);function nD(e){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(gn.c)(wi.addBoard,{boardId:e.payload.board.uid,name:e.payload.board.name,createdAt:(new Date).toISOString(),lastModified:(new Date).toISOString(),xml:"",stickyTemplates:[],codySuggestEnabled:e.payload.board.codySuggestEnabled,eventModelingEnabled:e.payload.board.eventModelingEnabled});case 2:return t.next=4,Object(gn.c)(e.payload.history.push,kt(e.payload.board.uid));case 4:case"end":return t.stop()}},eD,this)}function rD(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)(A.ADD_BOARD);case 3:return e=t.sent,t.next=6,Object(gn.f)(nD,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},tD,this)}var aD=xe.a.mark(iD),oD=xe.a.mark(sD);function iD(e){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(gn.g)(ru(e.payload.boardId,!0));case 2:return t.next=4,Object(gn.g)(nu(e.payload.boardId));case 4:return t.next=6,Object(gn.g)(ru(e.payload.boardId,!1));case 6:case"end":return t.stop()}},aD,this)}function sD(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)(Es);case 3:return e=t.sent,t.next=6,Object(gn.f)(iD,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},oD,this)}var cD=xe.a.mark(uD),dD=xe.a.mark(lD);function uD(e){var t,n,r,a;return xe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=NE(),n=Object(Ke.a)(t,1),r=n[0],o.next=3,Object(gn.c)(wi.getBoard,e.payload.board.uid);case 3:if(!(a=o.sent)||e.payload.board.tempBoard){o.next=7;break}return o.next=7,Object(gn.c)(wi.updateBoard,Object(Ye.a)({},a,{xml:r.exportXmlSnapshot(),lastModified:(new Date).toISOString()}));case 7:case"end":return o.stop()}},cD,this)}function lD(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)(A.SAVE_BOARD);case 3:return e=t.sent,t.next=6,Object(gn.f)(uD,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},dD,this)}var mD=xe.a.mark(hD),pD=xe.a.mark(gD),fD=xe.a.mark(bD);function hD(e){var t,n,r,a,o,s,c;return xe.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Object(gn.i)(Qy(qy(e.payload.boardId,e.payload.cellType)));case 2:return t=d.sent,n=e.payload,r=n.boardId,a=n.cellType,o=n.template,t||(t=Wy(r,a,o)),d.next=7,Object(gn.c)(wi.getBoard,e.payload.boardId);case 7:if(s=d.sent){d.next=10;break}return d.abrupt("return");case 10:return c=s.stickyTemplates.find(function(e){return e.cellType===t.cellType})||{cellType:a,templateType:t.templateType,templateSchema:t.templateSchema||null},d.next=13,Object(gn.c)(wi.updateBoard,Object(Ye.a)({},s,{stickyTemplates:[].concat(Object(eo.a)(s.stickyTemplates.filter(function(e){return e.cellType!==t.cellType})),[Object(Ye.a)({},c,{template:o})])}));case 13:return d.next=15,Object(gn.g)(i.Command.info("Sticky Template set","Sticky template for "+a+" set"));case 15:return d.next=17,Object(gn.g)(D.Event.stickyTemplateSet(t.setTemplate(o)));case 17:case"end":return d.stop()}},mD,this)}function gD(e){var t,n,r;return xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,null;case 2:return a.next=4,Object(gn.i)(Qy(qy(e.payload.boardId,e.payload.cellType)));case 4:return(t=a.sent)||(t=Wy(e.payload.boardId,e.payload.cellType,"")),a.next=8,Object(gn.c)(wi.getBoard,e.payload.boardId);case 8:if(n=a.sent){a.next=11;break}return a.abrupt("return");case 11:return r=n.stickyTemplates.find(function(e){return e.cellType===t.cellType})||{cellType:t.cellType,template:t.template},a.next=14,Object(gn.c)(wi.updateBoard,Object(Ye.a)({},n,{stickyTemplates:[].concat(Object(eo.a)(n.stickyTemplates.filter(function(e){return e.cellType!==t.cellType})),[Object(Ye.a)({},r,{templateType:e.payload.templateType,templateSchema:e.payload.templateSchema||null})])}));case 14:return a.next=16,Object(gn.g)(i.Command.info("Advanced Sticky Config updated","Advanced Sticky Config for "+t.cellType+" updated"));case 16:return t=t.setTemplateType(e.payload.templateType),e.payload.templateSchema&&(t=t.setTemplateSchema(e.payload.templateSchema)),a.next=20,Object(gn.g)(D.Event.stickyAdvancedConfigUpdated(t));case 20:case"end":return a.stop()}},pD,this)}function bD(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)([D.Type.SET_STICKY_TEMPLATE,D.Type.UPDATE_STICKY_ADVANCED_CONFIG]);case 3:if((e=t.sent).type!==D.Type.SET_STICKY_TEMPLATE){t.next=9;break}return t.next=7,Object(gn.f)(hD,e);case 7:t.next=11;break;case 9:return t.next=11,Object(gn.f)(gD,e);case 11:t.next=0;break;case 13:case"end":return t.stop()}},fD,this)}var yD=xe.a.mark(ED),vD=xe.a.mark(OD);function ED(e){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(gn.c)(wi.setUserSetting,e.payload);case 2:return t.next=4,Object(gn.g)(u.userSettingUpserted(e.payload.key,e.payload.value));case 4:case"end":return t.stop()}},yD,this)}function OD(){var e;return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(gn.k)(s.UPSERT_USER_SETTING);case 3:return e=t.sent,t.next=6,Object(gn.f)(ED,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},vD,this)}var xD={standaloneDeleteBoardFlow:vB,standaloneFetchBoardStickyTemplatesFlow:SB,standaloneFetchUserBoardsFlow:zB,standaloneFetchUserBoardFlow:FB,standaloneImportNewBoardFlow:QB,standaloneImportExistingBoardFlow:WB,standaloneInstallUserBoardFlow:rD,standaloneLoadBoardHistoryFlow:sD,standaloneSaveBoardFlow:lD,standaloneUpdateStickyTemplateFlow:bD,standaloneUpsertUserSetting:OD,standaloneEditBoardFlow:jB,syncElementsTreeFlow:X_,importStickyTemplates:XB,storeOverviewSettingsFlow:Q_,standaloneFetchPlayshotSummaryListFlow:TB},jD=xe.a.mark(kD),wD=Object.values(xD).map(function(e){return xe.a.mark(function t(){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(gn.j)(xe.a.mark(function t(){return xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,Object(gn.c)(e);case 4:console.error("unexpected root saga termination. The root sagas are supposed to be sagas that live during the whole app lifetime!",e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.error("Saga error, the saga will be restarted",t.t0);case 10:return t.next=12,Object(gn.e)(1e3);case 12:t.next=0;break;case 14:case"end":return t.stop()}},t,this,[[1,7]])}));case 2:case"end":return t.stop()}},t,this)})});function kD(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("root saga started"),e.next=3,Object(gn.b)(wD.map(function(e){return Object(gn.c)(e)}));case 3:case"end":return e.stop()}},jD,this)}var ID=function(e,t){var n=Object(qR.composeWithDevTools)({}),r=Object(Xb.b)(),a=Object(gt.createStore)(hB,t,n(Object(gt.applyMiddleware)(r)));return r.run(kD),a},SD=n(1069),CD=Object(SD.a)();n(536),n(1197);var _D=n(1065);n.d(t,"logout",function(){return LD});var TD=Object(_D.a)({url:"https://ee.local/auth",realm:"proophboard",clientId:"inspectio"}),AD=Object(fe.fromJS)({}),ND=ID(CD,AD);ND.dispatch(vl()),be.render(he.createElement(GR,{store:ND,history:CD}),document.getElementById("root"));var LD=function(){return TD.logout()}},1289:function(e){e.exports={$schema:"http://json-schema.org/draft-06/schema#",$id:"http://json-schema.org/draft-06/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},title:{type:"string"},description:{type:"string"},default:{},examples:{type:"array",items:[]},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#",default:!1},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:[],enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:{}}},541:function(e,t,n){},542:function(e,t,n){},601:function(e,t,n){e.exports=n(1199)},609:function(e,t){},611:function(e,t){},649:function(e,t){},650:function(e,t){},823:function(e,t){e.exports={de:{translation:{app:{title:"React + Redux + Semantic UI Skeleton",welcome:"Willkommen beim React + Redux + Semantic UI Skeleton",topmenu:{profile:"Profil"},form:{rename:"Umbenennen",save:"Speichern",change:"\xc4ndern",cancel:"Abbrechen",confirm:"Ok",delete:"L\xf6schen",remove:"Entfernen",upload:"Hochladen",resend:"Erneut Senden",revoke:"Widerrufen",yes:"Ja",no:"Nein",back:"Zur\xfcck",generateTemplate:"Template generieren",finish:"Abschlie\xdfen",close:"Schlie\xdfen"},showLess:"Weniger anzeigen",showAll:"Alle anzeigen",open:"\xd6ffnen",learnMore:"Mehr erfahren",stickyTypes:{event:"Event",command:"Command",aggregate:"Aggregate",document:"Information",role:"Role",hotSpot:"Hot Spot",ui:"UI / API",externalSystem:"External System",boundedContext:"Bounded Context",feature:"Feature",slice:"Slice",swimlanes:"Swimlanes",edge:"Connector",policy:"Policy",freeText:"Text",textCard:"Text",icon:"Icon",image:"Image"}},insp:{hint:{learn_more:"Mehr erfahren",got_it:"Alles klar",new_logo_header:"Neues Logo",new_logo_text:"InspectIO ist jetzt prooph board",new_domain_header:"Neue Domain",new_domain_text:"InspectIO ist jetzt prooph board und ab sofort erreichbar unter https://prooph-board.com. Aktualisiere am besten gleich deine bookmarks!"},overview:{all_boards:"Meine Boards",add_board:"Neues Board",last_modified:"Zuletzt ge\xe4ndert",fetch_board_error:"Es gibt ein technisches Problem beim Laden des Boards. Bitte sp\xe4ter erneut versuchen oder den Support kontaktieren.",shared_board:"Dieses Board wurde mit dir geteilt. Du kannst die Board-Eigenschaften nicht bearbeiten.",empty_space:"Hi, deine \xdcbersicht sieht leer aus. Bist du neu hier? Starte mit deinem ersten Board und schau f\xfcr weitere Infos im Wiki vorbei!",sort:{NAME:"Name",CREATED_AT:"Erstellungsdatum",LAST_MODIFIED:"Bearbeitungsdatum"},teamFilter:{all:"Alle Teams"},search:{label:"Suche ..."}},sidebar:{element_details:{json_invalid_title:"Schema Ung\xfcltig",json_invalid_text:"Das Schema ist kein g\xfcltiges JSON Dokument",no_element_selected:"Markiere ein Element auf dem Board, um dessen Metadaten zu bearbeiten.",disconnect_from_similar_elements_text:"Die Metadaten werden mit Cards vom gleichen Typ und gleichem Namen ({{number}}) synchronisiert.",disconnect_from_similar_elements_link:"Synchronisation deaktivieren",connect_with_similar_elements_text:"Metadaten werden nicht synchronisiert.",connect_with_similar_elements_link:"Synchronisation aktivieren"},no_boards_left_warning:"Keine Boards mehr verf\xfcgbar",boards_left_warning:"Nur noch {{board_count}} Board verf\xfcgbar",boards_left_warning_upgrade:"Deine Organisation ben\xf6tigt ein Upgrade"},top_menu:{activity:"Activity",element_details:"Metadata",import_board:"Import Board",export_board:"Export Board",activate_lite_mode:"Aktiviere den Lite Modus f\xfcr mehr Performance auf gro\xdfen Boards und w\xe4hrend Video Calls.",lite_mode_is_active:"Du befindest dich im Lite Modus.",lite_mode_is_active_details:"Details werden beim Zoomen nicht automatisch eingeblendet, um Rechenleistung zu sparen. Du kannst Details durch Doppelklick einblenden und durch Strg/Cmd + Doppelklick wieder ausblenden."},cody_wizard:{unsupported_node:'Cards vom Typen "{{type}}" werden vom Cody Wizard entweder noch nicht unterst\xfctzt oder "{{name}}" ist nicht richtig konfiguriert! Bitte w\xe4hle eine andere Card oder pr\xfcfe die Verbindungen und Metadaten der Card.',run_cody:"Starte Cody",node_select:{unique_name_error:"Der Name ist bereits vergeben",default_placeholder:"Wh\xe4le ein Element",select_data_entity:"Wh\xe4le eine existierende Information (Gr\xfcne Cards)",select_aggregate_event:"Wh\xe4le ein existierendes Business Model Event (Orangene Cards)",select_aggregate:"Wh\xe4le ein existierendes Aggregate (Gelbe Cards)",select_command:"Existierende Commands k\xf6nnen nicht gew\xe4hlt werden. Erstelle ein Neues!",select_ui:"Wh\xe4le eine existierende UI Seite (Schwarze Cards)",select_policy:"Existierende Policies k\xf6nnen nicht gew\xe4hlt werden. Erstelle eine Neue!",select_feature:"Existierende Features k\xf6nnen nicht gew\xe4hlt werden. Erstelle ein Neues!"},advanced_settings:{button_label:"Erweiterte Konfiguration"},schema_editor:{invalid_json:"Das Schema ist nicht valide und kann nicht gespeichert werden. Bitte pr\xfcfe deine Eingabe.",copy_state_schema:"Information Schema",copy_command_schema:"Vom Command \xfcbernehmen"},query_schema_editor:{invalid_json:"Das Query Schema ist nicht valide und kann nicht gespeichert werden. Bitte pr\xfcfe deine Eingabe."},ui_schema_editor:{invalid_json:"Das UI Schema ist nicht valide und kann nicht gespeichert werden. Bitte pr\xfcfe deine Eingabe.",choose_icon:"Icon Suche"},identifier_select:{placeholder:"Wh\xe4le ein Schema Attribut als Identifier (Format: uuid)"},feature_status_select:{placeholder:"Wh\xe4le einen Status"},step_header:"Aktion w\xe4hlen",step_state:{new_data_entity:"Neue Information",copy_command_ui_schema:"Vom Command \xdcbernehmen"},step_any_vo:{is_stored_in_db_label:"Wird in der Datenbank gespeichert",is_entity_label:"Ist eine Entit\xe4t",is_queryable_label:"Ist abfragbar",is_projection_label:"Ist eine Projektion"},step_aggregate_event:{new_event:"Neues Event"},step_aggregate:{new_aggregate:"Neues Aggregate",rules_label:"Business Regeln",manage_dependencies:"Dependencies",dependencies_label:"Dependencies",dependencies_placeholder:"Bitte w\xe4hlen"},step_command:{new_command:"Neues Command",new_aggregate_select_label:"Durch dieses Command wird eine neue Information erzeugt",new_aggregate_select_placeholder:"Bitte wh\xe4len",delete_state_label:"Durch dieses Command wird die verkn\xfcpfte Information gel\xf6scht",delete_history_label:"zus\xe4tzlich werden alle aufgezeichneten Events gel\xf6scht",delete_history_warning:"Durch dieses Command wird die gesamte Historie der Information unwiderruflich gel\xf6scht. Dies sollte nur f\xfcr sensitive Informationen verwendet werden, z.B. durch die DSGVO gesch\xfctzte Daten.",copy_state_ui_schema:"Information UI Schema"},step_ui:{new_ui:"Neue UI Seite",accessible_from_select_label:"Erreichbar \xfcber:",type_top_level:"\xdcbersicht",type_sub_level:"Details",view_models_label:"Angezeigte Informationen",select_view_models_placeholder:"Angezeigte Informationen?",page_config_label:"Konfiguration der Seite",page_content_label:"Inhalte der Seite"},step_policy:{new_policy:"Neue Policy",rules_label:"Prozess Regeln",manage_dependencies:"Dependencies",dependencies_label:"Dependencies",dependencies_placeholder:"Bitte w\xe4hlen",targets_placeholder:"Weitere Prozess-Schritte"},step_select_context:{header_dddAction:"Human Task",meta_dddAction:"Daten-Verarbeitung \xfcber User Interface",desc_dddAction:'Daten-Verarbeitung wird \xfcber ein "UI" durch ein "Command" angesto\xdfen und vom System ausgef\xfchrt. "Business Rules" entscheiden, ob die verkn\xfcpfte Information ge\xe4ndert werden darf. \xc4nderungen werden mittels "Domain Events" aufgezeichnet. Die "Information" ergibt sich dann aus den Events.',header_policy:"Automated Task",meta_policy:"Digitalisierte Abl\xe4ufe gesteurt durch Events",desc_policy:'Mithilfe eines "Processor" kann das System auf ein Event reagieren und automatisch weitere Commands anstelle eines Users ansto\xdfen oder externe Systeme aufrufen.'},step_feature:{new_feature:"Neues Feature"},step_run_cody:{action_connect:{title:"Verbinden",desc:"Zu Cody verbinden"},action_generate:{desc:"Source Code generieren"},action_healthcheck:{desc:"Erreichbarkeit pr\xfcfen"},message_install_cody_engine:"Der Cody Wizard setzt vorraus, dass du die Cody Engine installiert und gestartet hast. Du kannst die Cody Engine mittels Git von Github laden und installieren. \xdcber den Link erf\xe4hrst du mehr dazu:",message_restart_cody:"Die Cody Engine ist auf einen Fehler gesto\xdfen, der nicht von Cody abgefangen wurde. Das kann ab und zu passieren und l\xe4sst sich in den meisten F\xe4llen durch einen Neustart der Cody Engine beheben.",message_perform_cody_restart:"Wechsel dazu in das Terminal wo du die Cody Engine mit 'npm run serve' gestartet hast. Dort kannst du die Cody Engine mit der Tastenkombination: 'Ctrl+C' stoppen und erneut mit 'npm run serve' starten.",message_cody_still_failing:"Sollte dir trotz Neustart weiterhin ein Fehler im Terminal angezeigt werden, ist bei der Code Generierung etwas schief gelaufen. Schau dir den Fehler an und achte vorallem auf Tippfehler im Schema und Regeln. Solltest du Hilfe ben\xf6tigen, wende dich bitte an das prooph board Team.",message_cody_failed_get_help:"Hilfe holen"},connections:{help1:"Zeigt alle verbundenen Elemente.",help2:"Quellen (->) zeigen auf das aktive Element. Ziele (<-) werden vom aktiven Element referenziert.",help3:"Gibt es auf dem Board weitere Elemente vom gleichen Typ und gleichen Namen, werden die Verbindungen der \xe4hnlichen Elemente mit angezeigt.",help4:"Durch Klick auf eine Verbindung, wird diese auf dem Board fokussiert.",help5:"Strg/Cmd + Klick \xf6ffnet  das Element in der Side-by-Side Ansicht"},editor:{autocomplete:"Auto-Vervollst\xe4ndigung: Ctrl+Space",contextVariables:"Kontext Variablen:",schema:{help1:"Beschreibt die Datenstruktur mittels JSON Schema.",help2:"Cody versteht auch eine vereinfachte und k\xfcrze Variante von JSON Schema.",help3:"Cody Suggest: Hat ein verkn\xfcpftes Element ein Schema definiert, wird dieses kopiert. Alternativ schaut Cody, ob das Schema in der Beschreibung des Elements definiert ist."},uiSchema:{help1command:"Beschreibt Look & Feel des Formulars, das anhand des Command Schemas generiert wird.",help1state:"Beschreibt das Look & Feel der Datenansicht, die anhand des Informations-Schemas generiert wird.",help1table:"Beschreibt das Look & Feel der Tabelle, die anhand des Informations-Schemas generiert wird."},businessRules:{help1:"Regeln zur Verarbeitung des Commands.",help2:"Als Ergebnis sollten ein oder mehrere Events aufgezeichnet werden."},dependencies:{help1:"Lade Dependencies in den Ausf\xfchrungs-Kontext.",help2:"Verbinde Information, Event, oder Service Cards mit der aktuellen Card und nutze Cody Suggest f\xfcr Vorschl\xe4ge."},resolver:{help1:"Definiere Regeln zur Beantwortung der Informations-Abfrage.",help2:'Sind die Informationen direkt in der Datenbank gespeichert, gen\xfcgt eine "where" Regel, ansonsten nutze die "rules" Konfiguration.'},projector:{help1:"Definiere pro Event, wie das Lesemodell der Projektion ver\xe4ndert wird.",help2:"Nutze insert, upsert, update, replace und delete information Regeln, um das Lesemodell anzpassen.",help3:"Verbinde ein Event mit der Information Card und nutze Cody Suggest, um einen neuen Projection Case zu generieren."},processor:{help1:"Definiere Regeln, die automatisch ausgef\xfchrt werden, wenn das verbundene Event aufgezeichnet wurde.",help2:"Typischerweise wird entweder ein Service aufgerufen oder ein weiteres Command angesto\xdfen."}}},collaboration_modal:{header_team:"Team Collaboration",header_history:"Change History",text:"Diese Funktion ist in der freien Version leider nicht verf\xfcgbar."},board:{add:"Neues Board",advanced_settings:"Erweiterte Einstellungen",import:"Board Import",import_existing_board:'Ein Board mit dem Namen "%name%" existiert bereits. Du kannst das Board mit dem Import \xfcberschreiben oder eine Kopie importieren. Was m\xf6chtest du tun?',btn_replace_board:"Board \xfcberschreiben",btn_import_as_new:"Als Kopie importieren",edit_header:"Board Einstellungen",edit:"%name%",share:"Permissions",share_sub:"Lade andere User ein auf dein Board zu schauen oder es zu bearbeiten.",delete_txt1:"Wenn Du das Board nicht mehr ben\xf6tigst, kannst Du es hier ",delete_link:"l\xf6schen",delete_txt2:".",really_delete:"Bitte best\xe4tige die L\xf6schung, indem du den Board Namen eingibst. Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden!",tags_sub:"Setze Tags um Boards zu gruppieren und \xfcber die Suche zu finden",cody_suggest_sub:"Cody unterst\xfctzt dich im event-basierten Design",event_modeling_sub:"Cody verwendet bei der Positionierung von Cards den Event Modeling Style.",form:{board_name:"Board Name",board_abbr:"K\xfcrzel",responsible_team:"Zust\xe4ndiges Team",btn_add_save:"Los geht's",btn_share:"Share",btn_send_invitation:"Einladung versenden",btn_send:"Send",email:"eMail",team_name:"Teamname",cody_suggest:"Cody Vorschl\xe4ge",event_modeling:"Event Modeling Modus"},invite_user:"User einladen",user_email:"Email-Adresse des Users",remove_user_confirm_title:"User vom Board entfernen?",remove_user_confirm_text:'Soll der User "{{user_name}}" wirklich vom Board entfernt werden?',joined:{title:"Board Zugriff",details:"Du hast nun Zugriff auf das Board: {{name}}."},upload:{select_image:"Bild ausw\xe4hlen",drag_and_drop_info:"Bilder in diesen Bereich ziehen, aus der Zwischenablage einf\xfcgen oder hier klicken",upload_failed_title:"Upload fehlgeschlagen",upload_failed_text:"Bild konnte nicht aktualisiert werden.",deletion_failed_title:"L\xf6schung fehlgeschlagen",deletion_failed_text:"Bild konnte nicht gel\xf6scht werden.",paste_failed:"Einf\xfcgen fehlgeschlagen",invalid_file_pasted:"Es konnte keine jpeg/png Datei in der Zwischenablage gefunden werden."},link:{headline:"Board verlinken",select_board:"W\xe4hle ein Board",select_event:"W\xe4hle ein Event"},tasklink:{headline:"Task verlinken"},notify:{invitation_resend:{success:{title:"Einladung erneut gesendet",msg:"Die Einladung wurde erneut versendet"}},invitation_revoke:{success:{title:"Einladung widerrufen",msg:"Die Einladung wurde widerrufen"}}},sticky_templates:{headline:"Card Templates",descriptions:"Hinterlege ein Metadata Template pro Card Typ",advanced_config:"Erweiterte Konfiguration",upload_info:"JSON-Schema Datei (.json) in diesen Bereich ziehen oder hier klicken, um den Upload-Dialog zu \xf6ffnen",uploaded_schema_invalid_title:"Datei ung\xfcltig",uploaded_schema_invalid_text:"Die hochgeladene Datei ist kein g\xfcltiges Schema"},layers:{moved_to_sidebar_header:"Ebenen sind jetzt in der Sidebar",moved_to_sidebar_details:"Wir haben die Ebenen-Funktion in die linke Sidebar integriert, f\xfcr mehr \xdcbersicht und schnelleren Zugriff. Im prooph board Wiki erf\xe4hrst du mehr \xfcber die \xc4nderung. Der Men\xfceintrag wird demn\xe4chst ebenfalls entfernt.",moved_to_sidebar_wiki_text:"Hier geht's zum Wiki Eintrag",delete_confirmation:"Wirklich?",add_layer:"Ebene hinzuf\xfcgen",set_global_visibility:"Deine Sichtbarkeit der Ebenen mit allen teilen",refresh_layers:"neueste \xc4nderungen vom Board \xfcbernehmen",folder_title:"Einfacher Klick \xf6ffnet die Ebene und markiert sie als aktiv.\nDoppelklick \xf6ffnet das Bearbeiten-Menu.",delete_layer:"Ebene l\xf6schen",visibility:"Ebene ein/ausblenden",lock_layer:"Ebene sperren/entsperren",edit_name:"Name der Ebene \xe4ndern",insert_selection:"Auf dem Board markierte Elemente in die aktive Ebene verschieben"},move_to_organization_title:"Zu Organisation verschieben",move_to_organization_sub_title:"Teile das Board mit Mitgliedern einer Organisation",move_to_organization_desc:"Du kannst dieses Board in eine Organisation verschieben, um es mit Mitgliedern zu teilen. User, die direkt auf das Board berechtigt, aber keine Mitglieder der Organisation sind, werden als G\xe4ste in der Organisation registriert und das User Kontingent der Organisation wird entsprechend reduziert.",move_to_organization_select:"W\xe4hle eine Organisation",move_to_organization_submit:"Verschieben",timer:{modal_header:"Timer einstellen",hint:"Neue Timer Funktion! Ein laufender Timer ist f\xfcr alle User auf dem Board sichtbar. Der Ersteller des Timers kann ihn pausieren und stoppen."},permissions:{all:"Alle",anyonePane:{orgaMembers:"Mitglieder der Organisation",anyone:"Jeder"}}},organisation:{switch_hint_header:"Neu: Organisationen",switch_hint:"\xdcber eine Organisation kann das Board und User Kontingent eines Accounts mit anderen Usern geteilt werden. Mitglieder k\xf6nnen Boards direkt miteinander teilen. \xdcber die Sidebar hast du Zugriff auf das Setup.",switch_hint_ok:"Alles klar",create_btn:"Organisation erstellen",name:"Name der Organisation",not_explicit:"Erstelle eine Organisation um Mitarbeiter oder Teamkollegen einzuladen, die dein Board und User Kontingent mit nutzen k\xf6nnen.",no_member_quota:"Du kannst keine weiteren User in deine Organisation einladen, da dein Kontingent ersch\xf6pft ist. Du ben\xf6tigst ein Upgrade.",no_admin:"Du bist kein Administrator f\xfcr diese Organisation und hast keinen Zugiff auf die Userverwaltung",invite_user:"User einladen",user_email:"Email-Adresse des Users",remove_user_confirm_title:"User von der Organisation entfernen?",remove_user_confirm_text:'Soll der User "{{user_name}}" ({{email}}) wirklich von der Organisation entfernt werden?',remove_user_confirm_button:"Entfernen",send_invitation:"Einladung senden",open_invitations:"Offene Einladungen",empty_invitations:"Es gibt keine offenen Einladungen",promote_to_admin:"Zum Admin ernennen",demote_to_member:"Admin Berechtigung entziehen",promote_to_member:"Zum Mitglied ernennen",member:"Mitglieder",guests:"G\xe4ste",notify:{invitation_resend:{success:{title:"Einladung erneut gesendet",msg:"Die Einladung wurde erneut versendet an: {{email}}"}},invitation_revoke:{success:{title:"Einladung widerrufen",msg:"Die Einladung wurde widerrufen."}}},joined:{title:"Organisation beigetreten",details:"Du bist der Organisation {{name}} beigetreten."}},team:{overview_add:"Add Team",add:"Neues Team",team_name:"Teamname",team_description:"Teambeschreibung",add_user:"Add User",invite_user:"User einladen",user_email:"Email-Adresse des Users",remove_user_confirm_title:"User vom Team entfernen?",remove_user_confirm_text:'Soll der User "{{user_name}}" wirklich vom Team entfernt werden?',remove_user_confirm_button:"Entfernen",remove_board_confirm_title:"Team vom Board entfernen?",remove_board_confirm_text:'Soll das Team wirklich vom Board "{{board_name}}" entfernt werden?',remove_board_confirm_button:"Entfernen",joined:{title:"Team beigetreten",details:"Du bist dem Team {{team}} beigetreten."},add_to_board:"Team Zugriff auf {{board_name}} einrichten.",grant_access:"Team Zugriff einrichten.",choose:"W\xe4hle ein Team ...",choose_board:"W\xe4hle ein Board ...",remove_from_board_confirm_title:"Team vom Board entfernen?",remove_from_board_confirm_text:'Soll das Team "{{team_name}}" wirklich vom Board entfernt werden?',remove_team_confirm_title:"Team entfernen?",remove_team_confirm_text:'Soll das Team "{{team_name}}" wirklich entfernt werden?',open_invitations:"Offene Einladungen",empty_invitations:"Es gibt keine offenen Einladungen",error_loading_invitations:"Beim Laden der Einladungen ist ein Fehler aufgetreten. Bitte sp\xe4ter erneut probieren.",send_invitation:"Einladung senden",notify:{invitation_resend:{success:{title:"Einladung erneut gesendet",msg:"Die Einladung wurde erneut versendet an: {{email}}"}},invitation_revoke:{success:{title:"Einladung widerrufen",msg:"Die Einladung wurde widerrufen."}}},no_teams:"Du hast noch keine Teams angelegt. Nutze Teams um Arbeitsgruppen zu organisieren und mehreren Usern gleichzeitig Berechtigungen auf Boards zu geben.",move_to_organization_title:"Zu Organisation verschieben",move_to_organization_desc:"Du kannst dieses Team in eine Organisation verschieben. Mitglieder des Teams, die keine Mitglieder der Organisation sind, werden als G\xe4ste in der Organisation registriert und das User Kontingent der Organisation wird entsprechend reduziert.",move_to_organization_select:"W\xe4hle eine Organisation",move_to_organization_submit:"Verschieben"},user:{profile_headline:"{{user_name}}",profile_subline:"Benutzerprofil bearbeiten",quota_reached:"Die maximale Anzahl an Boards ist erreicht. Deine Organization ben\xf6tigt ein Upgrade.",quota_reached_user:"Die maximale Anzahl an Boards ist erreicht. Du ben\xf6tigst ein Upgrade.",quota_reached_guest:"Du bist Gast in der aktuellen Organization und kannst keine Boards erstellen.",team_quota_reached:"Du hast die maximale Anzahl an Teams erreicht. Mit einem Free Account ist 1 Team m\xf6glich. Nach Abschluss der Betaphase wird es die M\xf6glichkeit f\xfcr ein Upgrade auf eine Basic oder Pro Subscription geben.",form:{labels:{display_name:"Anzeigename",email:"E-Mail",company:"Firma",position:"Position",password1:"Passwort",password2:"Passwort (Wiederholen)"},fields:{display_name:"Mein Anzeige Name",email:"ich@firma.de",company:"Meine Firma",position:"Entwickler / CEO / Manager"}},avatar_upload:{select_photo:"Foto ausw\xe4hlen",drag_and_drop_info:"Bilder in diesen Bereich ziehen oder hier klicken",upload_failed_title:"Upload fehlgeschlagen",upload_failed_text:"Profilbild konnte nicht aktualisiert werden.",deletion_failed_title:"L\xf6schung fehlgeschlagen",deletion_failed_text:"Profilbild konnte nicht gel\xf6scht werden."},change_password:{passwords_not_matching_title:"Passw\xf6rter stimmen nicht \xfcberein",passwords_not_matching_text:"Die eingegebenen Passw\xf6rter stimmen nicht \xfcberein. Bitte versuche es erneut."},delete_account:{headline:"Account L\xf6schen",message:"Das L\xf6schen deines Accounts ist aktuell noch nicht \xfcber die Weboberfl\xe4che m\xf6glich. Wir werden die Funktionalit\xe4t in Zukunft hier bereitstellen. Bis dahin schicke uns bitte eine Email an: "}},history:{today:"Heute",yesterday:"Gestern",twoDaysAgo:"Vor 2 Tagen",threeDaysAgo:"Vor 3 Tagen",fourDaysAgo:"Vor 4 Tagen",fiveDaysAgo:"Vor 5 Tagen",sixDaysAgo:"Vor 6 Tagen",lastWeek:"Letzte Woche",twoWeeksAgo:"Vor 2 Wochen",threeWeeksAgo:"Vor 3 Wochen",fourWeeksAgo:"Vor 4 Wochen",lastMonth:"Letzten Monat",older:"\xc4lter"},feedback:{info_text:"F\xfcr den Austausch mit der Community steht ein Chat auf Gitter bereit. Dort lassen sich Fragen kl\xe4ren, Ideen diskutieren und Probleme analysieren. Zus\xe4tzlich steht ein Issue Tracker auf Github bereit, wo Feature Requests und Bugs gemeldet werden k\xf6nnen.",direct_msg:"M\xf6chtest du uns lieber ein direktes Feedback schreiben, kannst du unser Feedback Formular nutzen. Deine Nachricht wird in dem Fall nicht ver\xf6ffentlicht.",header:"Wir freuen uns auf dein Feedback",placeholder:"Deine Nachricht an uns",send:"Nachricht senden"},subscribe:{betaModal:{header:"Beta Phase",content:"In der Free Version werden deine Boards im Local Storage deines Browsers gespeichert. Du solltest deine Arbeit regelm\xe4\xdfig exportieren, damit sie nicht verloren geht! Die prooph board SaaS Version befindet sich aktuell in der Betaphase und wird von ausgew\xe4hlten Teams getestet. In K\xfcrze aktivieren wir das Subscription-Modell und erm\xf6glichen weiteren Teams Zugriff zur SaaS Variante, die prooph board unter anderem um Team Kollaboration und Cloud Speicher erweitert. Willst du schon jetzt diese Features nutzen oder bist an einem Workshop oder Training interessiert, sende uns bitte eine Email an contact@prooph.de. Wir freuen uns auf deine Anfrage!"}},playshots:{select_playshot:"Starte Cody Play mit einem gespeicherten Playshot oder beginne eine neue Session.",start_from_scratch:"Neue Session Starten",sync_playshot:"\xc4nderungen aufs Board \xfcbertragen",sync_success:"Cody hat alle \xc4nderungen erfolgreich \xfcbertragen!",sync_error:"Cody hat bei der \xdcbertragung der \xc4nderungen einen Fehler bemerkt. Pr\xfcfe den Fehler in der Cody Console!",empty:"Es wurden noch keine Playshots gespeichert. Starte mit einer neuen Cody Play Session und benutze den Speichern Button, den du in Cody Play unten rechts findest."}}}},en:{translation:{app:{title:"React + Redux + Semantic UI Skeleton",welcome:"Welcome to React + Redux + Semantic UI Skeleton",topmenu:{profile:"Profil"},form:{rename:"Rename",save:"Save",change:"Change",cancel:"Cancel",confirm:"Confirm",delete:"Delete",remove:"Remove",upload:"Upload",resend:"Resend",revoke:"Revoke",reset:"Reset",yes:"Yes",no:"No",back:"Back",generateTemplate:"Generate template",finish:"Finish",close:"Close"},showLess:"Show less",showAll:"Show all",open:"Open",learnMore:"Learn more",stickyTypes:{event:"Event",command:"Command",aggregate:"Aggregate",document:"Information",role:"Role",hotSpot:"Hot Spot",ui:"UI / API",externalSystem:"External System",boundedContext:"Bounded Context",feature:"Feature",slice:"Slice",swimlanes:"Swimlanes",edge:"Connector",policy:"Policy",freeText:"Text",textCard:"Text",icon:"Icon",image:"Image"}},insp:{hint:{learn_more:"Learn more",got_it:"Got it",new_logo_header:"New Logo",new_logo_text:"InspectIO becomes prooph board",new_domain_header:"New Logo",new_domain_text:"InspectIO becomes prooph board and is now available at https://prooph-board.com."},overview:{all_boards:"My Boards",add_board:"Add Board",last_modified:"Last modified",fetch_board_error:"Technical error when loading the board. Please try again later or contact support.",shared_board:"This is a shared board. You cannot edit the settings.",empty_space:"Hi, that space looks empty. New here? Add a board to get started and have a look at the wiki to learn more.",sort:{NAME:"Name",CREATED_AT:"Created At",LAST_MODIFIED:"Last Modified"},teamFilter:{all:"All Teams"},search:{label:"Search ..."}},sidebar:{element_details:{json_invalid_title:"Schema Invalid",json_invalid_text:"The Payload-Schema is not a valid JSON document",no_element_selected:"Select an element on the board to edit its metadata.",disconnect_from_similar_elements_text:"Metadata is synchronized with Cards of same type and same name ({{number}}).",disconnect_from_similar_elements_link:"Deactivate synchronization",connect_with_similar_elements_text:"Metadata is not synchronized.",connect_with_similar_elements_link:"Activate synchronization"},no_boards_left_warning:"No boards left",boards_left_warning:"Only {{board_count}} board left",boards_left_warning_upgrade:"Your organization needs an upgrade."},top_menu:{activity:"Activity",element_details:"Metadata",import_board:"Import Board",export_board:"Export Board",activate_lite_mode:"Activate Lite Mode for extra performance on large boards and during video calls.",lite_mode_is_active:"Lite Mode is active.",lite_mode_is_active_details:"Details are not shown automatically when zooming in to save CPU time. You can show the details of a frame by double clicking on it, and hide the details again by pressing Ctrl/Cmd while double clicking."},cody_wizard:{unsupported_node:'Either Cards of type "{{type}}" are not supported by Cody Wizard or "{{name}}" is not configured correctly! Please select another card or check connections and metadata.',run_cody:"Run Cody",node_select:{unique_name_error:"The name is already in use by another Card!",default_placeholder:"Select an Element",select_data_entity:"Select existing information (Green Cards)",select_aggregate_event:"Select existing business model event (Orange Cards)",select_aggregate:"Select an existing aggregate (Yellow Cards)",select_command:"Existing commands cannot be selected. Please create a new one!",select_ui:"Select an existing UI page (Black Cards)",select_policy:"Existing policies cannot be selected. Please create a new one!",select_feature:"Existing features cannot be selected. Please create a new one!"},advanced_settings:{button_label:"Advanced Settings"},schema_editor:{invalid_json:"The schema is invalid and cannot be saved. Please check your input.",copy_state_schema:"Use from Information",copy_command_schema:"Use from Command"},query_schema_editor:{invalid_json:"The query schema is invalid and cannot be saved. Please check your input."},ui_schema_editor:{invalid_json:"The ui schema is invalid and cannot be saved. Please check your input.",choose_icon:"Icon Search"},identifier_select:{placeholder:"Select a schema property as identifier (format: uuid)"},feature_status_select:{placeholder:"Select a status"},step_header:"Select Action",step_state:{new_data_entity:"New Information",copy_command_ui_schema:"Use from Command"},step_any_vo:{is_stored_in_db_label:"Is stored in the database.",is_entity_label:"Is an entity",is_queryable_label:"Is queryable",is_projection_label:"Is a projection"},step_aggregate_event:{new_event:"New Event"},step_aggregate:{new_aggregate:"New Aggregate",rules_label:"Business Rules",manage_dependencies:"Dependencies",dependencies_label:"Dependencies",dependencies_placeholder:"Please choose"},step_command:{new_command:"New Command",new_aggregate_select_label:"This Command creates a new Information",new_aggregate_select_placeholder:"Please choose",delete_state_label:"This Command deletes the connected Information",delete_history_label:"Additionally, It deletes all recorded Events",delete_history_warning:"This command will delete the entire history of the Information. Use it only for sensitive information, e.g. private data protected by GDPR.",copy_state_ui_schema:"Use from Information"},step_ui:{new_ui:"New UI Page",accessible_from_select_label:"Accessible from:",type_top_level:"Overview",type_sub_level:"Details",view_models_label:"Displayed Information",select_view_models_placeholder:"Displayed Information?",page_config_label:"Page Configuration",page_content_label:"Page Content"},step_policy:{new_policy:"New Policy",rules_label:"Process Rules",manage_dependencies:"Dependencies",dependencies_label:"Dependencies",dependencies_placeholder:"Please choose",targets_placeholder:"Next process steps"},step_select_context:{header_dddAction:"Human Task",meta_dddAction:"Data processing triggered via User Interface",desc_dddAction:'Data processing is triggered by an "Actor" in a "UI" through a "Command". The system handles the command and "Business Rules" decide whether connected "Information" can be changed or not. Every decision is recorded as a "Domain Event". The new or updated "Information" is then derived from the events.',header_policy:"Automated Task",meta_policy:"Digitized processes can be controlled by events",desc_policy:'With the help of a "Processor", the system can react on an event and automatically trigger new "Commands" in behalf of a user or call "External Systems".'},step_feature:{new_feature:"New Feature"},step_run_cody:{action_connect:{title:"Connect",desc:"Connect to Cody"},action_generate:{desc:"Generate source code"},action_healthcheck:{desc:"Check system availability"},message_install_cody_engine:"The Cody Wizard requires an installed and running Cody Engine application. You can install Cody Engien via Git from Github. Follow the link for more information:",message_restart_cody:"The Cody Engine run into an error not caught by Cody. This can happen from time to time and can usually be solved by restarting the Cody Engine.",message_perform_cody_restart:"Please switch to the terminal where you started Cody Engine with 'npm run serve'. There you can stop it with the key combination 'Ctrl+C' and start it again with 'npm run serve'.",message_cody_still_failing:"If the error is still shown in the terminal after restart, something went wrong with the code generation. Please check the error and keep an eye on typos especially in schema and rules configuration. If you cannot resolve the error, please contact the prooph board team.",message_cody_failed_get_help:"Get Help"},connections:{help1:"Shows all connected elements.",help2:"Sources (->) point to the active element. Targets (<-) are connected from the active element.",help3:"If there are other elements on the board with same card type and name, connections of those similar elements are listed too.",help4:"A click on a connection moves the element into focus.",help5:"Ctrl/Cmd + click opens the element in the Side-by-Side View."},editor:{autocomplete:"Auto completion: Ctrl+Space",contextVariables:"Context variables:",schema:{help1:"Describes the data structure using JSON Schema.",help2:"Cody understands a shortened and simplified syntax.",help3:"Cody Suggest: If a connected element has a schema defined, it's copied. Alternatively, Cody inspects the element description to read a schema from it."},uiSchema:{help1command:"Describes Look & Feel of the form that gets generated based on the command schema.",help1state:"Describes Look & Feel of the data view that gets generated based on the information schema",help1table:"Describes Look & Feel of the table that gets generated based on the information schema"},businessRules:{help1:"Command processing rules.",help2:"The result should be to record one or more events."},dependencies:{help1:"Inject dependencies into the execution context.",help2:"Connect Information, Event, or Service cards with the active card and use Cody Suggest to get suggestions."},resolver:{help1:"Define rules to answer an information query.",help2:'If information is stored in the database, you can use a "where" rule, otherwise use the "rules" configuration.'},projector:{help1:"For each event, define how it changes the read model of the projection.",help2:"Use insert, upsert, update, replace, and delete information rules to change the read model.",help3:"Connect an Event with the Information card and use Cody Suggest to generate a new projection case."},processor:{help1:"Define rules that are automatically executed whenever a connected Event is recorded.",help2:"Usually, a Service is called or a follow up Command is triggered."}}},collaboration_modal:{header_team:"Team Collaboration",header_history:"Change History",text:"Unfortunately, this function is not available in the free version."},board:{add:"New Board",advanced_settings:"Advanced Settings",import:"Import Board",import_existing_board:'A board with name "%name%" already exists. You can override the existing one or import a copy. What do you want to do?',btn_replace_board:"Override Board",btn_import_as_new:"Import copy",edit_header:"Manage your preferences",edit:"%name%",share:"Permissions",share_sub:"Invite other people to view and/or edit your board.",delete_txt1:"If you don't need the board anymore, you can ",delete_link:"delete",delete_txt2:" it here.",really_delete:"Please confirm deletion by entering the board name. This action cannot be undone!",tags_sub:"Set tags to group boards and find them via search",cody_suggest_sub:"Cody supports your event-centric design",event_modeling_sub:"Cody positions cards using Event Modeling style",form:{board_name:"Board Name",board_abbr:"Abbr",responsible_team:"Responsible Team",btn_add_save:"Let's go",btn_share:"Share",btn_send_invitation:"Send Invitation",btn_send:"Send",email:"email",team_name:"Team Name",cody_suggest:"Cody Suggestions",event_modeling:"Event Modeling Mode"},invite_user:"Invite User",user_email:"Email Address of User",remove_user_confirm_title:"Remove user from board?",remove_user_confirm_text:'Do you really want to remove the user "{{user_name}}" from the board?',joined:{title:"Board Access",details:"You now have access to board: {{name}}."},upload:{select_image:"Select an image",drag_and_drop_info:"Drag 'n' drop a file here, paste from clipboard or click to select one",upload_failed_title:"Upload failed",upload_failed_text:"Image could not be updated.",deletion_failed_title:"Deletion failed",deletion_failed_text:"Image could not be deleted.",paste_failed:"Paste failed",invalid_file_pasted:"Could not find any jpeg/png files in the clipboard."},link:{headline:"Link to Board",select_board:"Select a Board",select_event:"Select an Event"},tasklink:{headline:"Link to Task"},notify:{invitation_resend:{success:{title:"Invitation sent",msg:"Invitation was resent successfully"}},invitation_revoke:{success:{title:"Invitation revoked",msg:"The invitation has been revoked"}}},client:{headline:"Board API",description:"Configure your board client in order to access its content from your own service.",notConfigured:"There is currently no external API client configured for this board.",createClient:"Click here to create one",clientId:"Client-Id",clientSecret:"Client-Secret",retrieveSecret:"Click here to retrieve",createConfirmTitle:"Create an API-Client for the board",createConfirmText:"Do you really want to create a new API-Client for this board? You should only do so if you intend to use the API to access board information from an external service.",resetConfirmTitle:"Reset the Client-Secret",resetConfirmText:"Do you really want to reset the Client-Secret for this board? The old Client-Secret will be rendered invalid and cannot be used to access the API anymore.",removeConfirmTitle:"Remove the Client-Secret",removeConfirmText:"Do you really want to remove your client? Be aware that any services relying on this client will loose access to the board.",removeText:"If you do not need your client anymore you can remove it here. Be aware that any services relying on this client will loose access to the board.",copyToClipboard:"Copy to Clipboard"},sticky_templates:{headline:"Card Templates",description:"Set a metadata template for each card type",advanced_config:"Advanced Config",upload_info:"Drop a JSON-Schema file (.json) or click here to open the upload dialog",uploaded_schema_invalid_title:"Uploaded file invalid",uploaded_schema_invalid_text:"The uploaded file is not a valid schema file."},layers:{moved_to_sidebar_header:"Layers are now part of the sidebar",moved_to_sidebar_details:"We've moved the layer functionality into the left sidebar for more overview and quicker access. You can read more about the changes in our Wiki. The menu entry will be removed soon.",moved_to_sidebar_wiki_text:"Here you can find the wiki page",delete_confirmation:"Really?",add_layer:"Add layer",set_global_visibility:"Share your layer visibility settings with all",refresh_layers:"Refresh tree with latest board changes",folder_title:"Single click opens the layer and marks it as active.\nDouble click opens the edit menu.",delete_layer:"Delete layer",visibility:"Show/hide layer",lock_layer:"Lock/unlock layer",edit_name:"Change layer name",insert_selection:"Move selected elements into active layer"},move_to_organization_title:"Move To Organization",move_to_organization_sub_title:"Share the board with organization members",move_to_organization_desc:"You can move this board to an organization to share it with members. Users who are not member of the organization but have direct access to the board, are registered as guests in the organization. This requires enough user quota, otherwise they will loose access to the board.",move_to_organization_select:"Select organization",move_to_organization_submit:"Move",timer:{modal_header:"Set Timer",hint:"New timer feature! A running timer is visible for everybody on the board. The creator of a timer is able to pause and stop it."},permissions:{all:"All",anyonePane:{orgaMembers:"Organization Members",anyone:"Anyone"}}},organisation:{switch_hint_header:"New: Organizations",switch_hint:"An organization allows to share your board and user quota with others. Members of an organization can share boards directly. In the sidebar you can switch to another organization or create your own.",switch_hint_ok:"Got It",create_btn:"Create Organisation",name:"Name of the organisation",not_explicit:"Create an organisation and invite colleagues to share your board and user quota with them.",no_member_quota:"The organisation user quota is reached. If you want to invite more users, please upgrade your subscription.",no_admin:"Access denied to organisation management. You're missing administration rights.",invite_user:"Invite User",user_email:"Email Address of User",remove_user_confirm_title:"Remove user from organisation?",remove_user_confirm_text:'Do you really want to remove the user "{{user_name}}" ({{email}}) from the organisation?',remove_user_confirm_button:"Remove",send_invitation:"Send Invitation",open_invitations:"Open Invitations",empty_invitations:"No open invitations",promote_to_admin:"Promote to admin",demote_to_member:"Demote to member",promote_to_member:"Promote to member",member:"Member",guests:"Guests",notify:{invitation_resend:{success:{title:"Invitation sent",msg:"Invitation sent again to: {{email}}"}},invitation_revoke:{success:{title:"Invitation revoked",msg:"The invitation has been revoked."}}},joined:{title:"Organisation joined",details:"You joined the organisation {{name}}."}},team:{overview_add:"Add Team",add:"New Team",team_name:"Team name",team_description:"Team Description",add_user:"Add User",invite_user:"Invite User",user_email:"Email Address of User",remove_user_confirm_title:"Remove user from team?",remove_user_confirm_text:'Do you really want to remove the user "{{user_name}}" from the team?',remove_user_confirm_button:"Remove",remove_board_confirm_title:"Remove team from board?",remove_board_confirm_text:'Do you really want to remove the team from board "{{board_name}}"?',remove_board_confirm_button:"Remove",joined:{title:"Team joined",details:"You joined the team {{team}}."},add_to_board:"Set up team access to {{board_name}}.",grant_access:"Set up team access.",choose:"Choose a team ...",choose_board:"Choose a board ...",remove_from_board_confirm_title:"Remove team from board?",remove_from_board_confirm_text:'Do you really want to remove the team "{{team_name}}" from the board?',remove_team_confirm_title:"Remove team?",remove_team_confirm_text:'Do you really want to remove the team "{{team_name}}"?',open_invitations:"Open Invitations",empty_invitations:"No open invitations",error_loading_invitations:"Failed to load invitations. Please try again later.",send_invitation:"Send Invitation",notify:{invitation_resend:{success:{title:"Invitation sent",msg:"Invitation sent again to: {{email}}"}},invitation_revoke:{success:{title:"Invitation revoked",msg:"The invitation has been revoked."}}},no_teams:"You did not create a team yet. Use teams to organise working groups and assign board permissions to many users at once.",move_to_organization_title:"Move To Organization",move_to_organization_desc:"You can move this team to an organization. Users who are not already member of the organization will be registered as guests. This requires enough user quota, otherwise they will be removed from the team.",move_to_organization_select:"Select organization",move_to_organization_submit:"Move"},user:{profile_headline:"{{user_name}}",profile_subline:"Edit User Profile",quota_reached:"The board quota is reached. Your organization needs an upgrade.",quota_reached_user:"The board quota is reached. You need an upgrade.",quota_reached_guest:"You're guest of the active organization. Guests are not allowed to create organization boards.",team_quota_reached:"The team quota is reached. With a free account you can have 1 team maximum. After our beta phase you can upgrade to a basic or professional subscription and increase the quota.",form:{labels:{display_name:"Display Name",email:"E-Mail",company:"Company",position:"Job Title",password1:"Password",password2:"Password (re-enter)"},fields:{display_name:"your display name",email:"my@company.com",company:"My Company",position:"Developer / CEO / Manager"}},avatar_upload:{select_photo:"Select a Photo",drag_and_drop_info:"Drag 'n' drop some files here, or click to select files",upload_failed_title:"Upload failed",upload_failed_text:"Profile picture could not be updated.",deletion_failed_title:"Deletion failed",deletion_failed_text:"Profile picture could not be deleted."},change_password:{passwords_not_matching_title:"Passwords do not match",passwords_not_matching_text:"The passwords you entered do not match, please try again."},delete_account:{headline:"Delete Account",message:"Account deletion is not possible yet using the UI. We'll provide the functionality in the future. For now please send us an email: "}},history:{today:"Today",yesterday:"Yesterday",twoDaysAgo:"2 days ago",threeDaysAgo:"3 days ago",fourDaysAgo:"4 days ago",fiveDaysAgo:"5 days ago",sixDaysAgo:"6 days ago",lastWeek:"Last week",twoWeeksAgo:"2 weeks ago",threeWeeksAgo:"3 weeks ago",fourWeeksAgo:"4 weeks ago",lastMonth:"Last month",older:"Older"},feedback:{info_text:"If you want to chat with us and other community members about prooph board you can join our Gitter Chat. Feature requests and bugs can also be submitted to our public Github issue tracker.",direct_msg:"To send us a direct message you can use the feedback form below. In this case we don't publish your message.",header:"Looking forward to your feedback",placeholder:"Your feedback",send:"Send message"},subscribe:{betaModal:{header:"Beta Phase",content:"The free version of prooph board saves all boards in your browser's local storage. Make sure to regularly export your work to avoid losing it! The prooph board SaaS version is currently beta. Selected teams are testing it right now. We will activate our subscription model soon that enables more teams to use advanced features like team collaboration and cloud storage. If you can't wait or looking for prooph board training, please send an email to contact@prooph.de. We're looking forward to hear from you!"}},playshots:{select_playshot:"Open Cody Play from a saved Playshot or start from scratch.",start_from_scratch:"Start From Scratch",sync_playshot:"Apply changes to the board",sync_success:"Cody applied the changes successfully!",sync_error:"Cody ran into an error while applying the changes. Please check the error in the Cody Console!",empty:"There are no Playshots yet. Start Cody Play from scratch and use the save button, that you can find in the bottom right corner of Cody Play."}}}}}}},[[601,2,1]]]);
//# sourceMappingURL=main.90fac008.chunk.js.map